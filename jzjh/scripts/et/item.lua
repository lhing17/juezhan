---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by G_Seinfeld.
--- DateTime: 2018/10/28 0028 16:45
---

--- @class item
local item = {}
et.item = item

-- jass的item
--- @type j_item
item.handle = 0

-- item的id
item.id = 0

item.x = 0
item.y = 0
--- @type unit
item.owner = nil

--- @type table<number>
item.imbeds = nil

--- @param item_id 物品id
--- @param x 创建位置x
--- @param y 创建位置y
--- @return item
function item:new(item_id, x, y)
    local it = setmetatable({}, self)
    self.__index = self
    it.handle = jass.CreateItem(item_id, x, y)
    it.x = x or 0
    it.y = y or 0
    it.id = item_id
    self[it.handle] = it
    return it
end

--- 根据jass.item获取et.item对象
--- @param j_item j_item
--- @return item
function item:get(j_item)
    if not j_item then
        return nil
    end
    if self[j_item] then
        return self[j_item]
    end
    local it = setmetatable({}, self)
    self.__index = self
    it.handle = j_item
    it.id = jass.GetItemTypeId(j_item)
    self[j_item] = it
    return it
end

--- @return number 物品类型ID
function item:get_id()
    return jass.GetItemTypeId(item.handle)
end