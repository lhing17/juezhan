---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by G_Seinfeld.
--- DateTime: 2018/11/15 20:10
---

local function init()
    -- 加入副职
    --- @param u unit
    --- @param item item
    et.game:event '单位-捡起物品'(function(self, u, item)
        local p = u:get_owner()
        local h = p.hero
        local pt = et.part_time[item:get_id()]
        if p:is_player() and pt then
            if h.part_times:is_empty() then
                -- 不符合性别要求
                if pt.gender_require and h.gender ~= pt.gender_require then
                    p:send_message(pt.fail_hint, 5)
                else
                    h:join_part_time(pt)
                end
            else
                p:send_message("|cffff0000你已经加入副职了，只有获得宗师后才可以加入其他副职！", 5)
            end
        end
    end)
end
init()