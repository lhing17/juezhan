---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Administrator.
--- DateTime: 2018/12/4 13:34
---

local function init()
    jass.FogEnable(false)
    jass.FogMaskEnable(false)
    jass.SetCreepCampFilterState(false)
    --- 地图上怪不睡觉
    jass.SetPlayerState(jass.Player(12), jass.PLAYER_STATE_NO_CREEP_SLEEP, true)
    local group = et.selector():of_player(et.player(13)):get()
    for _, v in pairs(group) do
        jass.UnitWakeUp(v.handle)
    end
    SetPlayerAllianceStateBJ(Player(12), Player(6), 3)
    jass.SetPlayerHandicapXP(Player(0), 0.43)
    jass.SetPlayerHandicapXP(Player(1), 0.43)
    jass.SetPlayerHandicapXP(Player(2), 0.43)
    jass.SetPlayerHandicapXP(Player(3), 0.43)
    jass.SetPlayerHandicapXP(Player(4), 0.43)
    jass.SetCameraField(CAMERA_FIELD_TARGET_DISTANCE, 1800.0, 0.0)
    jass.PlayMusic(game.music.normal_bgm)
    FENG_SHU:set_life_percent(5)

    --- NPC头上加问号和感叹号
    AddSpecialEffectTargetUnitBJ("overhead", WAITER, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", MIAO_RENFENG, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", LIN_YUANTU, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", QIAO_FENG, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", YELV_QI, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", GUO_JING, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", WANYAN_PING, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", HU_FEI, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", GONGSUN_LUE, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", LU_YOUJIAO, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", QIU_CHUJI, "Objects\\RandomObject\\RandomObject.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", xt, "Objects\\RandomObject\\RandomObject.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", HUANG_RONG, "Objects\\RandomObject\\RandomObject.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", LONG_YE, "Objects\\RandomObject\\RandomObject.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", MIE_JUE, "Objects\\RandomObject\\RandomObject.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", WANG_CHONGYANG, "Objects\\RandomObject\\RandomObject.mdl")
    AddSpecialEffectTargetUnitBJ("overhead", FENG_SHU, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")

    CreateTextTagUnitBJ("点我加门派后可离开此地", Rs, 0.0, 15.0, 100.0, 100.0, 0.0, 50.0)
    CreateTextTagLocBJ("决战江湖" .. game.config.version .. "名人榜", GetRectCenter(uh), 100.0, 10, 100, 100, 0.0, 50.0)

    for i = 1, 6 do
        et.player[i]:set_food(50)
        et.player[i]:add_lumber(10)
    end

    et.wait(40 * 1000, function()
        force.send_message("|cfffff000欢迎来到|cffff00de金庸群侠传之决战江湖" .. game.config.version .. "|r", 30)
        force.send_message("|cfffff000游戏初期您可以完成难度为一星到二星的任务来提升角色的能力，游戏前期金钱较匮乏，可以在守家积分商店使用积分兑换金钱，关于游戏的各个系统，请查看F9任务面板，欢迎前往游戏专区论坛jzjhbbs.uuu9.com查看游戏攻略以及提出您的宝贵意见|R", 30)
        et.wait(40 * 1000, function()
            force.send_message("|cfffff000由于制作和测试时间紧张，如遇游戏里有BUG或不舒适的体验给你带来不愉快，尽情谅解，欢迎前往游戏专区论坛jzjhbbs.uuu9.com提出您的宝贵意见。游戏中的特殊玩法，请到NPC随风而逝de风处查看，在基地右侧|R", 30)
            et.wait(40 * 1000, function()
                force.send_message("|cfffff000游戏里的相关指令\n按键Esc：|cFFCCFF33查看人物属性|r\n输入“sj”：|cFFCCFF33恢复视角|r\n输入“bl”：|cFFCCFF33查看伴侣属性|r\n输入“jy”：|cFFCCFF33将剑意转化为性格属性|r\n输入“up”：|cFFCCFF33提高难度（只能提不能降）|r\n输入“fb”：|cFFCCFF33查询副本重置时间|r\n输入“yx”：|cFFCCFF33查询宝宝携带草药的总药性|r\n输入属性拼音首字母加数值如fy5：|cFFCCFF33增加相应点数的自由属性（福缘+5）|r\n游戏开始2分钟内输入“sw”：|cFFCCFF33试玩模式|r\n更多游戏帮助，请按F9打开任务面板进行查询", 30)
            end)
        end)
    end)
end

--- 10毫秒后启动
et.wait(10, init)