---
--- 普通任务
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by G_Seinfeld.
--- DateTime: 2018/12/10 15:51
---

combined_task = {
    newbee = {

        name_set = set:new { '杀野狼', '少林练功房', '拜访郭靖' },
        limit = 1,
        complete_hint = "|cFFFFCC00店小二：|r |cFF99FFCC你已经完成新手任务了",
    },
    propose = {
        name_set = set:new { '帮郭靖求婚' }
    },
    steal = {
        name_set = set:new { '偷玉箫' }
    },
    deliver = {
        name_set = set:new { '送信黄蓉', '送信郭靖', '送信达摩祖师' },
        limit = 3,
        complete_hint = "|cFFFF0000你无法再接取此任务了"
    },
    hunt = {
        name_set = set:new { '上山打猎' }
    },
    escort = {
        name_set = set:new { '押镖丘处机', '击杀豺狼', '押镖慕容复', '击杀蝎子王', '押镖达摩祖师', '押镖乔峰', '击杀进攻怪' },
        limit = 7,
        complete_hint = "|cFFFF0000你无法再接取此任务了"
    },
    bear = {
        name_set = set:new { '击杀野熊' },
        limit = 1,
        complete_hint = "|cFfff0000这个任务你已经完成过了",
    },
    collect = {
        name_set = set:new { '采集断肠草' }
    },
    protect = {
        name_set = set:new { '护送耶律楚材' },
        limit = 1,
        complete_hint = "|cFFFF0000你已经完成了这个任务了（不可重复接取）"
    },
    dumb = {
        name_set = set:new { '杀哑仆' }
    },
    maze = {
        name_set = set:new { '高昌迷宫' },
        limit = 1,
        complete_hint = "|cFfff0000这个任务你无法再接取了"
    },
    pioneer = {
        name_set = set:new { '辽国第一先锋' },
        limit = 5,
        complete_hint = "|cFfff0000任务次数达到上限，无法再次接取"
    }

}

task_map = {
    [1227895349] = 'newbee',
    [1227897172] = 'propose',
    [1227897173] = 'steal',
    [1227895898] = 'deliver',
    [1227895352] = 'hunt',
    [1227895353] = 'escort',
    [1227896132] = 'bear',
    [1227895890] = 'collect',
    [1227896387] = 'protect',
    [1227897175] = 'dumb',
    [1227896388] = 'maze',
    [1227896389] = 'pioneer',
},

--- @param u unit
--- @param it item
et.game:event '单位-捡起物品'(function(self, u, it)
    if not u:is_hero() then
        return
    end
    if task_map[it:get_id()] then
        evaluate_task(u, combined_task[task_map[it:get_id()]])
    end
end)