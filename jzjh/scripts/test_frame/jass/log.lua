---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by G_Seinfeld.
--- DateTime: 2018/11/5 9:30
---

local log = {}

log.path = 'F:\\log.txt'
log.warn_path = 'F:\\warn.txt'
log.error_path = 'F:\\error.txt'
log.level = 'debug'

local level = {
    debug = 1,
    info = 2,
    warn = 3,
    error = 4,
}

local function write(path, ...)
    local mode = "a+b"
    local file = io.open(path, mode)
    if file then
        args = { ... }
        flag = true
        for _, v in ipairs(args) do
            if type(v) ~= 'string' then
                v = tostring(v)
            end
            flag = file:write(v) and flag
            file:write('\t')
        end
        if not flag then
            return false
        end
        file:write('\n')
        io.close(file)
        return true
    else
        return false
    end
end

function log.debug(...)
    if level[log.level] <= level.debug then
        print('[DEBUG]', os.date('%X'), ...)
        write(log.path, '[DEBUG]', os.date('%X'), ...)
    end
end

function log.info(...)
    if level[log.level] <= level.info then
        print('[INFO]', os.date('%X'), ...)
        write(log.path, '[INFO]', os.date('%X'), ...)
    end
end

function log.warn(...)
    if level[log.level] <= level.warn then
        print('[WARN]', os.date('%X'), ...)
        write(log.path,'[WARN]', os.date('%X'), ...)
        write(log.warn_path,'[WARN]', os.date('%X'), ...)
    end
end

function log.error(...)
    if level[log.level] <= level.error then
        print('[ERROR]', os.date('%X'), ...)
        write(log.path, '[ERROR]', os.date('%X'), ...)
        write(log.error_path, '[ERROR]', os.date('%X'), ...)
    end
end

return log