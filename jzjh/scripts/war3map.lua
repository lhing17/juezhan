require 'map.destructables'

--globals from DzAPI:
LIBRARY_DzAPI = true
--endglobals from DzAPI
--globals from MaxSpeed:
LIBRARY_MaxSpeed = true
MaxSpeed___USE_TABLE = true
MaxSpeed___NEW_TABLE = true
-- Vexorian's Table or Bribe's (NEW)
MaxSpeed___TEST_MODE = false
MaxSpeed___PERIOD = 0.03125
MaxSpeed___MAX_SPEED = 2088.0
-- 最大速度限定，超出视为传送。
MaxSpeed___MIN_SPEED = 500.0
-- 判定的最小距离，此项过小或速度过大会使原地打转几率增加，超出则没有加速效果。
-- 测试最大为500刚出头，与522还有些差距
--endglobals from MaxSpeed
--globals from UniMissileSystem3D:
LIBRARY_UniMissileSystem3D = true
UniMissileSystem3D__SP = _array_(0.0)
UniMissileSystem3D__RA = _array_(0.0)
UniMissileSystem3D__DM = _array_(0.0)
UniMissileSystem3D__DI = _array_(0.0)
UniMissileSystem3D__AN = _array_(0.0)
UniMissileSystem3D__ANZ = _array_(0.0)
UniMissileSystem3D__HE = _array_(0.0)
UniMissileSystem3D__HEMax = _array_(0.0)
UniMissileSystem3D__SH = _array_(0.0)
UniMissileSystem3D__US = _array_(0.0)
UniMissileSystem3D__MX = _array_(0.0)
UniMissileSystem3D__MY = _array_(0.0)
UniMissileSystem3D__MZ = _array_(0.0)
UniMissileSystem3D__ARC = _array_(0.0)
UniMissileSystem3D__HP = _array_(0.0)
UniMissileSystem3D__OF = _array_(0.0)
UniMissileSystem3D__OS = _array_(0.0)
UniMissileSystem3D__TIM = _array_(0.0)
UniMissileSystem3D__LT = _array_(0.0)
UniMissileSystem3D__SZ = _array_(0.0)
UniMissileSystem3D__RI = _array_(0.0)
UniMissileSystem3D__R01 = _array_(0.0)
UniMissileSystem3D__R02 = _array_(0.0)
UniMissileSystem3D__MGra = _array_(0.0)
UniMissileSystem3D__LOC = _array_(0.0)
UniMissileSystem3D__OH = _array_(0.0)
UniMissileSystem3D__Gravity = 0.4
UniMissileSystem3D__MU = _array_()
UniMissileSystem3D__MT = _array_()
UniMissileSystem3D__DamageUnit = nil
UniMissileSystem3D__EF = _array_()
UniMissileSystem3D__EFL = _array_()
UniMissileSystem3D__ACC = _array_(0.0)
UniMissileSystem3D__MaxS = _array_(0.0)
UniMissileSystem3D__SPX = _array_(0.0)
UniMissileSystem3D__SPY = _array_(0.0)
UniMissileSystem3D__LastX = _array_(0.0)
UniMissileSystem3D__LastY = _array_(0.0)
UniMissileSystem3D__MKs = _array_(0.0)
UniMissileSystem3D__IN = _array_(0)
UniMissileSystem3D__Top = -1
UniMissileSystem3D__TIMOut = 0.03
UniMissileSystem3D__DamageGroup = nil
UniMissileSystem3D__TIMr = nil
UniMissileSystem3D__HeroLoc = nil
UniMissileSystem3D__MLoc = _array_()
UniMissileSystem3D__LastOwner = _array_()
MissileTimerPause = false
UniMissileSystem3D__map_max_X = nil
UniMissileSystem3D__map_max_Y = nil
UniMissileSystem3D__map_min_X = nil
UniMissileSystem3D__map_min_Y = nil
--endglobals from UniMissileSystem3D
--globals from WuQiQiHeSystem:
LIBRARY_WuQiQiHeSystem = true
--endglobals from WuQiQiHeSystem
--globals from YDTriggerSaveLoadSystem:
LIBRARY_YDTriggerSaveLoadSystem = true
YDHT = nil
YDLOC = nil
--endglobals from YDTriggerSaveLoadSystem
--globals from YDWEBase:
LIBRARY_YDWEBase = true
--ȫ�ֹ�ϣ�� 
bj_AllString = ".................................!.#$%&'()*+,-./0123456789:;<=>.@ABCDEFGHIJKLMNOPQRSTUVWXYZ[.]^_`abcdefghijklmnopqrstuvwxyz{|}~................................................................................................................................"
--全局系统变量
bj_lastAbilityCastingUnit = nil
bj_lastAbilityTargetUnit = nil
bj_lastPoolAbstractedUnit = nil
bj_lastCreatedUnitPool = nil
bj_lastPoolAbstractedItem = nil
bj_lastCreatedItemPool = nil
bj_lastSetAttackType = ATTACK_TYPE_NORMAL
bj_lastSetDamageType = DAMAGE_TYPE_NORMAL
bj_lastSetWeaponType = WEAPON_TYPE_WHOKNOWS
yd_MapMaxX = 0
yd_MapMinX = 0
yd_MapMaxY = 0
yd_MapMinY = 0
YDWEBase__yd_PlayerColor = _array_()
YDWEBase__AbilityCastingOverEventQueue = _array_()
YDWEBase__AbilityCastingOverEventType = _array_(0)
YDWEBase__AbilityCastingOverEventNumber = 0
--endglobals from YDWEBase
--globals from YDWEGeneralBounsSystem:
LIBRARY_YDWEGeneralBounsSystem = true
YDWEGeneralBounsSystem__ABILITY_COUNT = _array_(0)
YDWEGeneralBounsSystem__ABILITY_NUM = _array_(0)
YDWEGeneralBounsSystem__BonusAbilitys = _array_(0)
YDWEGeneralBounsSystem__PowersOf2 = _array_(0)
YDWEGeneralBounsSystem__PRELOAD_DUMMY_UNIT = 1752196449
YDWEGeneralBounsSystem__YDWEBONUS_MyChar = _array_(0)
YDWEGeneralBounsSystem__PRELOAD_ABILITYS = true
YDWEGeneralBounsSystem__BONUS_TYPES = 4
YDWEGeneralBounsSystem__MaxBonus = _array_(0)
YDWEGeneralBounsSystem__MinBonus = _array_(0)
YDWEGeneralBounsSystem__Units = _array_()
YDWEGeneralBounsSystem__UnitCount = 0
--endglobals from YDWEGeneralBounsSystem
--globals from YDWEGetUnitsInRangeOfLocMatchingNull:
LIBRARY_YDWEGetUnitsInRangeOfLocMatchingNull = true
yd_NullTempGroup = nil
--endglobals from YDWEGetUnitsInRangeOfLocMatchingNull
--globals from YDWELogarithm:
LIBRARY_YDWELogarithm = true
YDWELogarithm__base = _array_(0.0)
--endglobals from YDWELogarithm
--globals from YDWEPolledWaitNull:
LIBRARY_YDWEPolledWaitNull = true
--endglobals from YDWEPolledWaitNull
--globals from YDWEStringHash:
LIBRARY_YDWEStringHash = true
--endglobals from YDWEStringHash
--globals from YDWESync:
LIBRARY_YDWESync = true
YDWESync__m_gc = nil
YDWESync__m_mutex_state = false
--endglobals from YDWESync
--globals from YDWETriggerEvent:
LIBRARY_YDWETriggerEvent = true
yd_DamageEventTrigger = nil
YDWETriggerEvent__DamageEventQueue = _array_()
YDWETriggerEvent__DamageEventNumber = 0

bj_lastMovedItemInItemSlot = nil

YDWETriggerEvent__MoveItemEventTrigger = nil
YDWETriggerEvent__MoveItemEventQueue = _array_()
YDWETriggerEvent__MoveItemEventNumber = 0
--endglobals from YDWETriggerEvent
--globals from YDWETriggerRegisterLeaveRectSimpleNull:
LIBRARY_YDWETriggerRegisterLeaveRectSimpleNull = true
yd_NullTempRegion = nil
--endglobals from YDWETriggerRegisterLeaveRectSimpleNull
--globals from YDWEUnitHasItemOfTypeBJNull:
LIBRARY_YDWEUnitHasItemOfTypeBJNull = true
--endglobals from YDWEUnitHasItemOfTypeBJNull
--globals from YDWEJumpTimer:
LIBRARY_YDWEJumpTimer = true
--��Ծϵͳ���ȼ�
MoveMoreLevel_JumpTimer = 3
--endglobals from YDWEJumpTimer
--globals from YDWELocalVariable:
LIBRARY_YDWELocalVariable = true
--endglobals from YDWELocalVariable
--globals from YDWEPreloadSL:
LIBRARY_YDWEPreloadSL = true
--/
--/ ÿ�����ռ�õĿռ�[500*id, 500*(id-1))
--/ �±�Խ��û�н��м�飬�ƺ�û�����Ҫ��˭Ҫ���ó���500...��ȥ����- -
--/ 
YDWEPreloadSL__Code = _array_(0)
YDWEPreloadSL__CodeHI = _array_(0)
YDWEPreloadSL__CodeLO = _array_(0)
bj_lastLoadPreloadSLResult = nil
udg_YDWE_PreloadSL_List = _array_()
udg_YDWE_PreloadSL_CurrentDir = ""
--endglobals from YDWEPreloadSL
--globals from YDWEStringFormula:
LIBRARY_YDWEStringFormula = true
bj_lastCombinedItem = nil
YDWEStringFormula__ItemCombineEventQueue = _array_()
YDWEStringFormula__ItemCombineEventNumber = 0
YDWEStringFormula__MAX_INSTANCES = 8100
YDWEStringFormula__SEGMENT_LENGTH = 4
YDWEStringFormula__FormulaData = 0
--endglobals from YDWEStringFormula
--globals from YDWETimerPattern:
LIBRARY_YDWETimerPattern = true
YDWETimerPattern__Bexpr = nil
YDWETimerPattern__Area = nil
YDWETimerPattern__tmp_data = nil
YDWETimerPattern__yd_loc = Location(0.0, 0.0)
--endglobals from YDWETimerPattern
--globals from YDWETimerSystem:
LIBRARY_YDWETimerSystem = true
YDWETimerSystem__CurrentTime = nil
YDWETimerSystem__CurrentIndex = nil
YDWETimerSystem__TaskListHead = nil
YDWETimerSystem__TaskListIdleHead = nil
YDWETimerSystem__TaskListIdleMax = nil
YDWETimerSystem__TaskListIdle = _array_(0)
YDWETimerSystem__TaskListNext = _array_(0)
YDWETimerSystem__TaskListTime = _array_(0)
YDWETimerSystem__TaskListProc = _array_()
YDWETimerSystem__fnRemoveUnit = nil
YDWETimerSystem__fnDestroyTimer = nil
YDWETimerSystem__fnRemoveItem = nil
YDWETimerSystem__fnDestroyEffect = nil
YDWETimerSystem__fnDestroyLightning = nil
YDWETimerSystem__fnRunTrigger = nil
YDWETimerSystem__Timer = nil
YDWETimerSystem__TimerHandle = nil
YDWETimerSystem__TimerSystem_RunIndex = 0
--endglobals from YDWETimerSystem
-- User-defined
udg_UG_ResidualImage = nil
udg_A_Unit = nil
udg_A_Unit2 = nil
udg_A_PlayerHero = _array_()
udg_Player_Hero = _array_()
udg_Unit_B = _array_()
udg_A_UG = nil
udg_A_Piont = nil
udg_A_Piont2 = nil
udg_A_Angle = 0
udg_A_Ang = 0
udg_A_Ang_2 = 0
udg_A_hurt = 0
udg_A_num = 0
udg_x = 0
udg_y = 0
udg_Player = _array_()
udg_A_Int = 0
udg_Number_player = 0
udg_MeiJuJiFen = _array_(0)
udg_kurongsharen = _array_(0)
udg_HuanZhuangCD = _array_(false)
-- Generated
gg_trg_import_lua = nil
gg_trg____________________001 = nil
gg_trg____________________004 = nil
gg_trg____________________005 = nil
gg_trg____________________002 = nil
gg_trg____________________003 = nil
gg_trg___________________u = nil
gg_trg_____________u = nil
gg_trg_ChangeClothes = nil
gg_trg_QinLongKongHe = nil
gg_trg_YaoWangShenPian = nil
gg_trg_KuRongShenGong = nil
gg_trg_KuRongShenGong_2 = nil
gg_trg_KuRongShenGong_3 = nil
gg_trg_ShuiShangPiao = nil
gg_trg_SH = nil
gg_trg_AM_1 = nil
gg_trg_AM_2 = nil
gg_unit_N008_0054 = nil
gg_unit_N007_0055 = nil
gg_unit_n00M_0131 = nil
gg_unit_nvl2_0005 = nil
gg_unit_N00I_0116 = nil
gg_unit_n00E_0066 = nil
gg_unit_n00N_0132 = nil

-- 江湖、绝学、绝内的最大武功种类数
MAX_WU_GONG_NUM = 56
MAX_BAN_LV_NUM = 14
wuhun = DialogCreate()
chuansong = DialogCreate()
wuhun1 = _array_()
chuansong1 = _array_()
udg_JTX = _array_()
ceshi = false
ceshizongshanghai = nil
jiuyangTimer1 = nil
jiuyangTimer2 = nil
jiuyangTimer3 = nil
jiuyangTimerDialog1 = nil
jiuyangTimerDialog2 = nil
jiuyangTimerDialog3 = nil
defeatStealer = nil
defeatSeeker = nil
xunwu = _array_(0)
yangshou = _array_(0)
udg_yangshou = _array_(0)
newbeeTaskId = _array_(0)
jingyao_dialog = _array_()
jingyao_button1 = _array_()
jingyao_button2 = _array_()
jingyao_button3 = _array_()
jingyao_button4 = _array_()
jingyao_button5 = _array_()
jingyao_button6 = _array_()
jingyao_button7 = _array_()
jingyao_button8 = _array_()
jingyao_button9 = _array_()
jingyao_button10 = _array_()
jingyao_button11 = _array_()
jingyao_button_cancel = _array_()
yongdanshu = _array_(0)
--===============najitest===============
unitnumber_lh = 0
createdunitnumber_lh = 0
StringList_naji = nil
Sdummy_naji = _array_()
Ttest_naji = _array_()
Ptest_naji = nil
Ihandle_naji = nil
Ibm_naji = nil
Itrigger_naji = nil
Iquest_naji = nil
Iweather_naji = nil
Bfog_naji = nil
Bpause_naji = nil
Bxy_naji = nil
Bid_naji = nil
Bir_naji = nil
Bcamera_naji = _array_(false)
Bpn_naji = nil
Bddm_naji = nil
Dnaji_naji = _array_()
Button_naji = _array_()
Rhandle_naji = nil
Rdummy_naji = nil
Rcamera_naji = _array_(0.0)
Rworld_naji = nil
Gcd_naji = _array_()
Guw_naji = nil
Gms_naji = nil
Q_naji = _array_()
Tcamera_naji = nil
Tbm_naji = _array_()
Weather_naji = _array_()
--===============najitest===============
tiebucishu = _array_(0)
isproducing = _array_(false)
gg_trg_Number14_0 = nil
gg_trg_Number14_1 = nil
udg_zhemeieff = nil
shenghuoling_1 = nil
shenghuoling_2 = nil
shenghuoling_3 = nil
ling1zhuan = nil
ling2zhuan = nil
ling3zhuan = nil
udg_xiantiandanwei = nil
tiaozhanduixiang = _array_(0)
menpaiwuqi = _array_(0)
udg_tiaoxuedao = _array_(false)
udg_tiaodugu = _array_(false)
udg_tiaodamo = _array_(false)
tiaozhanwho = DialogCreate()
b_dugu = nil
b_xuedaozu = nil
b_ronglianlaozu = nil
b_zhucong = nil
b_damozushi = nil
b_cancel = nil
udg_tiaozhanguai = nil
zizhiwugong = _array_(0)
lh_texiao = _array_()
wuxuedian = _array_(0)
dapei = _array_(0)
zizhibool = _array_(false)
jiawuxue = _array_(false)
shopweapon = _array_(0)
udg_shenxingpoyin = _array_(0.0)
udg_shenxingfuzhu = _array_()
udg_miaoshoufuzhu = _array_()
guixihuixie = _array_(0.0)
udg_qinglong = nil
udg_baihu = nil
udg_xuanwu = nil
udg_zhuque = nil
udg_ql = false
udg_bh = false
udg_xw = false
udg_zq = false
udg_qlover = false
udg_bhover = false
udg_xwover = false
udg_zqover = false
udg_loadql = _array_(false)
yd_NullTempItem = nil
w = nil
z = nil
A = nil
B = nil
C = nil
D = nil
H = 0
I = 0
l = 0
J = 0
udg_sixiangdanwei = nil
udg_xuezhandanwei = nil
udg_fanweidanwei = nil
udg_fomiedanwei = nil
udg_yechadanwei = nil
udg_miejuedanwei = nil
wugongshu = _array_(0)
udg_whichzhangmen = _array_(0)
udg_zhemei = _array_(0)
udg_zhangmen = _array_(false)
chilian = _array_(false)
udg_tiebushancengshu = 0
udg_nandu = 0
udg_shifoufomie = false
udg_teshushijian = false
udg_shengchun = false
udg_yunyangxianshen = false
udg_sutong = false
taohuakai = false
udg_index = nil
udg_index0 = nil
udg_index1 = nil
udg_index2 = nil
udg_index3 = nil
udg_index4 = nil
udg_nan = nil
udg_nan0 = nil
udg_nan1 = nil
udg_nan2 = nil
udg_nan3 = nil
udg_nan4 = nil
udg_nan5 = nil
udg_gudongA = 0
udg_gudongB = 0
udg_gudongC = 0
udg_gudongD = 0
udg_xinggeA = _array_(0)
udg_xinggeB = _array_(0)

udg_jianghu = _array_(0)
udg_juexue = _array_(0)
udg_juenei = _array_(0)
udg_canzhang = _array_(0)
udg_diershi = _array_(0)
aidacishu = _array_(0)
udg_wuqishu = _array_(0)
udg_yifushu = _array_(0)
K = _array_()
L = _array_(0)
M = 0
O = 16
P = _array_(0)
Q = _array_(0)
S = _array_(0)
T = _array_(0)
U = 1752196449
V = _array_(0)
W = true
X = _array_(0)
Y = _array_(0)
udg_shuxing = _array_(0)
Z = nil
d4 = nil
e4 = nil
udg_shanghaidanweizu = nil
f4 = nil
g4 = _array_()
h4 = 0
i4 = nil
k4 = _array_()
m4 = 0
nn4 = nil
o4 = CreateTimer()
p4 = nil
q4 = nil
r4 = nil
s4 = nil
t4 = nil
u4 = _array_(0)
v4 = _array_(0)
w4 = _array_(0)
x4 = _array_()
qiuhun = _array_(0)
zhaoyangguo = _array_(0)
linganran = _array_(0)
touxiao = _array_(0)
bihai = _array_(0)
y4 = nil
z4 = nil
A4 = nil
a4 = nil
B4 = nil
b4 = nil
C4 = nil
c4 = nil
D4 = 0
juexuelingwu = _array_(0)
udg_baojishanghai = _array_(0.0)
udg_baojilv = _array_(0.0)
shanghaihuifu = _array_(0.0)
shaguaihufui = _array_(0.0)
shengminghuifu = _array_(0.0)
falihuifu = _array_(0.0)
udg_lilianxishu = _array_(0.0)
udg_loc1 = nil
K4 = _array_()
L4 = _array_()
udg_hashero = _array_(false)
udg_baoji = _array_(false)
udg_yiwang = _array_(false)
udg_hero = _array_()
O4 = 0
P4 = _array_()
Q4 = nil
R4 = _array_()
S4 = _array_()
T4 = _array_()
U4 = _array_()
V4 = _array_()
W4 = _array_()
X4 = _array_()
Y4 = _array_(0)
wuxing = _array_(0)
jingmai = _array_(0)
gengu = _array_(0)
fuyuan = _array_(0)
danpo = _array_(0)
yishu = _array_(0)
i7 = nil
udg_runamen = _array_(0)
k7 = 0
m7 = _array_()
nn7 = 0
o7 = 0
udg_counter1 = 0
q7 = _array_(0)
r7 = _array_()
s7 = 0
udg_boshu = 0
u7 = _array_(0)
v7 = _array_()
w7 = nil
x7 = 0
y7 = _array_(0)
z7 = _array_()
A7 = _array_()
ShiFouShuaGuai = false
B7 = 0
b7 = _array_()
C7 = _array_()
c7 = 0
D7 = _array_(0.0)
E7 = _array_()
F7 = _array_(0)
G7 = _array_(0)
H7 = 0
I7 = _array_(0)
l7 = _array_()
J7 = _array_()
J78 = _array_()
J79 = _array_()
J710 = _array_()
J711 = _array_()
K7 = _array_()
udg_menpaineigong = nil
L7 = _array_(0)
MM7 = 0
N7 = 0
P7 = _array_(0)
udg_revivetimer = _array_()
R7 = _array_()
S7 = _array_(0)
T7 = 0
U7 = 0
udg_MaxDamage = _array_(0.0)
udg_menpainame = _array_()
X7 = _array_(0)
Y7 = _array_(0)
Z7 = _array_(0)
d8 = _array_(0)
e8 = _array_(0)
shengwang = _array_(0)
g8 = _array_(0)
h8 = _array_(0)
i8 = _array_(0)
j8 = _array_(0)
k8 = _array_()
udg_boss = _array_()
m8 = _array_(false)
o8 = _array_(false)
p8 = _array_()
q8 = _array_(0)
r8 = _array_()
s8 = nil
t8 = false

v8 = _array_()
w8 = _array_()
x8 = _array_()
y8 = _array_()
z8 = _array_()
A8 = _array_()
a8 = _array_()
B8 = _array_()
b8 = _array_(false)
C8 = _array_(false)
c8 = _array_(false)
D8 = _array_()
E8 = 0
F8 = _array_(false)
XNKL = _array_(false)
G8 = _array_(false)
H8 = _array_(false)
I8 = _array_(false)
l8 = _array_(false)
J8 = _array_(0)
K8 = _array_(0)
xiuxing = _array_(0)
MM8 = _array_(0)
N8 = _array_(0)
O8 = _array_(0)
P8 = _array_(0)
Q8 = _array_(0)
R8 = _array_(0)
S8 = _array_(0)
udg_blgg = _array_(0)
udg_blwx = _array_(0)
udg_bljm = _array_(0)
udg_blfy = _array_(0)
udg_bldp = _array_(0)
udg_blys = _array_(0)
udg_jdds = _array_(0)
udg_ldds = _array_(0)
udg_xbds = _array_(0)
udg_bqds = _array_(0)
udg_dzds = _array_(0)
udg_jwjs = _array_(0)
udg_jddsbool = _array_(false)
udg_lddsbool = _array_(false)
udg_xbdsbool = _array_(false)
udg_bqdsbool = _array_(false)
udg_dzdsbool = _array_(false)
udg_jwjsbool = _array_(false)
udg_junzhu = _array_(false)
Z8 = _array_(false)
d9 = _array_(false)
e9 = _array_(false)
f9 = _array_()
g9 = _array_()
h9 = _array_(false)
i9 = _array_(0)
j9 = nil
k9 = nil
m9 = 0
n9 = 0
o9 = _array_()
p9 = 0
q9 = _array_()
r9 = nil
s9 = nil
t9 = _array_()
u9 = 0
v9 = _array_(false)
w9 = _array_(false)
x9 = _array_(false)
y9 = _array_(false)
z9 = _array_(0)
A9 = _array_(0)
a9 = _array_()
B9 = _array_()
b9 = _array_()
C9 = nil
c9 = nil
D9 = nil
E9 = _array_()
F9 = 0
G9 = _array_(0)
H9 = _array_(0)
I9 = _array_(0)
l9 = _array_(0)
udg_baolv = _array_(0)
J9 = _array_()
qiankun2hao = _array_()
qiankun3hao = _array_()
udg_shanghaijiacheng = _array_(0.0)
udg_shanghaixishou = _array_(0.0)
MM9 = _array_(0)
udg_jueneishxs = _array_(0.0)
udg_jueneishjc = _array_(0.0)
udg_jueneiminjie = _array_(0)
udg_jueneijxlw = _array_(0)
udg_jueneibaojilv = _array_(0.0)
S9 = 0
T9 = _array_(false)
LLguaiA = _array_(0)
LLguaiE = _array_(0)
LLguaiB = _array_(0)
LLguaiC = _array_(0)
LLguaiD = _array_(0)
LLguaiF = _array_(0)
LLguaiG = _array_(0)
Z9 = _array_()
dd = _array_()
ed = _array_(false)
fd = _array_()
gd = _array_()
hd = false
jd = _array_(0)
kd = _array_(0)
gudong = _array_(0)
nd = _array_(0)
od = _array_(0)
pd = _array_(0)
qd = _array_(0)
rd = _array_(0)
ud = _array_(0)
vd = _array_()
wugongxiuwei = _array_(0)
xd = _array_(0)
yd = _array_(0)
zd = 0
Ad = _array_(false)
ad = 0
Bd = _array_(false)
bd = _array_()
Cd = _array_(0)
cd = _array_(false)
Dd = _array_(0)
Ed = _array_(0)
Fd = _array_()
Gd = _array_(0.0)
Hd = _array_()
Id = _array_(0)
ld = _array_(0)
Jd = _array_(0)
JYd = _array_(0)
Kd = _array_(0)
Ld = _array_(0)
Md = _array_(0)
Nd = _array_(0)
Od = _array_(0)
Pd = _array_(0)
Qd = _array_(0)
Rd = _array_(false)
Sd = _array_(0)
Td = _array_(0)
Ud = _array_(0)
Vd = _array_(0)
Wd = _array_(0)
jiuazi = _array_(0)
Xd = 0
Yd = 0
Zd = 0
de = false
ee = _array_()
shoujiajf = _array_(0)
ge = _array_(false)
he = _array_(false)
ie = 0
je = _array_()
ke = _array_()
me = _array_()
ne = _array_()
oe = _array_()
pe = _array_()
qe = _array_()
re = _array_()
rre = _array_()
re9 = _array_()
re10 = _array_()
re11 = _array_()
se = _array_()
te = _array_(0)
ue = 5
ve = _array_(0)
xe = _array_(0)
ye = _array_(0)
ze = _array_(0)
Ae = _array_(0)
ae = 0
YaoCao = _array_(0)
ShiPin = _array_(0)
ZhuangBei = _array_(0)
Ce = _array_(0)
ce = _array_(0)
De = _array_(false)
Ee = _array_(false)
Fe = nil
udg_jail = nil
udg_yizhan = nil
udg_xuanmenpai = nil
udg_tiaozhanqu = nil
Ge = nil
He = nil
Ie = nil
le = nil
Je = nil
Ke = nil
Le = nil
Me = nil
Ne = nil
Oe = nil
Pe = nil
botong = nil
Qe = nil
Re = nil
Se = nil
Te = nil
Ue = nil
Ve = nil
We = nil
Xe = nil
Ye = nil
Ze = nil
df = nil
lh_r = nil
ef = nil
ff = nil
gf = nil
hf = nil
jf = nil
kf = nil
mf = nil
nf = nil
of = nil
pf = nil
qf = nil
rf = nil
sf = nil
tf = nil
uf = nil
vf = nil
wf = nil
xf = nil
yf = nil
zf = nil
Af = nil
af = nil
Bf = nil
bf = nil
Cf = nil
cf = nil
Df = nil
Ef = nil
Ff = nil
Gf = nil
Hf = nil
If = nil
lf = nil
Jf = nil
Kf = nil
Lf = nil
Mf = nil
Nf = nil
Of = nil
Pf = nil
Qf = nil
Rf = nil
Sf = nil
Tf = nil
Uf = nil
Vf = nil
Wf = nil
Xf = nil
Yf = nil
Zf = nil
dg = nil
eg = nil
fg = nil
gg = nil
hg = nil
ig = nil
jg = nil
kg = nil
mg = nil
ng = nil
og = nil
pg = nil
qg = nil
rg = nil
sg = nil
tg = nil
ug = nil
vg = nil
wg = nil
xg = nil
yg = nil
zg = nil
Ag = nil
ag = nil
Bg = nil
bg = nil
Cg = nil
cg = nil
Dg = nil
Eg = nil
Fg = nil
Gg = nil
Hg = nil
Ig = nil
lg = nil
Jg = nil
Kg = nil
Lg = nil
Mg = nil
Ng = nil
Og = nil
Pg = nil
Qg = nil
Rg = nil
Sg = nil
Ug = nil
Vg = nil
Wg = nil
Xg = nil
Yg = nil
Zg = nil
dh = nil
eh = nil
fh = nil
gh = nil
hh = nil
udg_liuqiu = nil
jh = nil
kh = nil
mh = nil
nh = nil
oh = nil
ph = nil
qh = nil
rh = nil
sh = nil
th = nil
uh = nil
vh = nil
wh = nil
xh = "war3mapImported\\yanmenguanqian4.mp3"
yh = "war3mapImported\\wulindahui3.mp3"
zh = "Sound\\Music\\mp3Music\\War2IntroMusic.mp3"
Ah = nil
ah = nil
Bh = nil
bh = nil
Ch = nil
Dh = nil
Eh = nil
Fh = nil
Gh = nil
Hh = nil
Ih = nil
lh = nil
Jh = nil
Kh = nil
Lh = nil
Mh = nil
Nh = nil
Oh = nil
Ph = nil
Rh = nil
Sh = nil
Th = nil
Uh = nil
Vh = nil
Wh = nil
Xh = nil
Yh = nil
Zh = nil
di = nil
fi = nil
gi = nil
hi = nil
ii = nil
ji = nil
ki = nil
mi = nil
ni = nil
oi = nil
pi = nil
ri = nil
si = nil
ti = nil
ui = nil
vi = nil
wi = nil
xi = nil
yi = nil
Ci = nil
ci = nil
Di = nil
Ei = nil
Fi = nil
Gi = nil
Hi = nil
Ii = nil
Mi = nil
Ni = nil
Oi = nil
Qi = nil
Ri = nil
Si = nil
Ti = nil
Ui = nil
Vi = nil
Wi = nil
Xi = nil
Yi = nil
Zi = nil
dj = nil
ej = nil
fj = nil
gj = nil
hj = nil
ij = nil
jj = nil
mj = nil
nj = nil
oj = nil
pj = nil
qj = nil
rj = nil
sj = nil
tj = nil
uj = nil
vj = nil
wj = nil
xj = nil
yj = nil
zj = nil
Aj = nil
aj = nil
Bj = nil
bj = nil
Cj = nil
cj = nil
Dj = nil
Ej = nil
Fj = nil
Gj = nil
Hj = nil
Ij = nil
lj = nil
Jj = nil
Kj = nil
Lj = nil
Mj = nil
Nj = nil
Oj = nil
Pj = nil
Qj = nil
Rj = nil
Sj = nil
Tj = nil
Uj = nil
Vj = nil
Wj = nil
Xj = nil
Yj = nil
Zj = nil
dk = nil
ek = nil
fk = nil
gk = nil
hk = nil
ik = nil
jk = nil
kk = nil
mk = nil
nk = nil
ok = nil
pk = nil
qk = nil
rk = nil
sk = nil
tk = nil
uk = nil
vk = nil
wk = nil
xk = nil
yk = nil
zk = nil
Ak = nil
ak = nil
Bk = nil
bk = nil
Ck = nil
ck = nil
Dk = nil
Ek = nil
Fk = nil
Gk = nil
Hk = nil
Ik = nil
lk = nil
Jk = nil
Kk = nil
Lk = nil
Mk = nil
Nk = nil
Ok = nil
Pk = nil
Qk = nil
Rk = nil
Sk = nil
Tk = nil
Uk = nil
Vk = nil
Wk = nil
Xk = nil
Yk = nil
Zk = nil
dm = nil
em = nil
fm = nil
gm = nil
hm = nil
im = nil
jm = nil
km = nil
mm = nil
nm = nil
om = nil
pm = nil
qm = nil
rm = nil
sm = nil
um = nil
vm = nil
wm = nil
xm = nil
ym = nil
zm = nil
Am = nil
am = nil
Bm = nil
bm = nil
Cm = nil
cm = nil
Dm = nil
Em = nil
Fm = nil
Gm = nil
Hm = nil
Im = nil
lm = nil
Jm = nil
Km = nil
Lm = nil
Mm = nil
Nm = nil
Om = nil
Pm = nil
Qm = nil
Rm = nil
Sm = nil
Tm = nil
Um = nil
Vm = nil
Wm = nil
Xm = nil
Ym = nil
Zm = nil
dn = nil
en = nil
fn = nil
gn = nil
hn = nil
in_ = nil
jn = nil
kn = nil
mn = nil
nn = nil
on = nil
pn = nil
qn = nil
sn = nil
tn = nil
un = nil
vn = nil
wn = nil
xn = nil
yn = nil
zn = nil
An = nil
an = nil
Bn = nil
bn = nil
Cn = nil
cn = nil
Dn = nil
En = nil
Fn = nil
Gn = nil
Hn = nil
In = nil
Jn = nil
On = nil
Pn = nil
Qn = nil
Rn = nil
Sn = nil
Un = nil
Ao = nil
ao = nil
Bo = nil
bo = nil
Co = nil
co = nil
Do = nil
Eo = nil
Fo = nil
Go = nil
Ho = nil
Io = nil
lo = nil
Jo = nil
Ko = nil
Lo = nil
Mo = nil
No = nil
Oo = nil
Po = nil
Qo = nil
Ro = nil
So = nil
To = nil
Uo = nil
Vo = nil
Wo = nil
Yo = nil
Zo = nil
dp = nil
ep = nil
fp = nil
gp = nil
hp = nil
jp = nil
kp = nil
mp = nil
np = nil
op = nil
pp = nil
qp = nil
sp = nil
tp = nil
vp = nil
wp = nil
xp = nil
yp = nil
zp = nil
Ap = nil
ap = nil
Bp = nil
bp = nil
Cp = nil
cp = nil
Dp = nil
Ep = nil
Fp = nil
Gp = nil
Hp = nil
Ip = nil
lp = nil
Jp = nil
Kp = nil
Lp = nil
Mp = nil
Np = nil
Op = nil
Pp = nil
Qp = nil
Rp = nil
Sp = nil
Tp = nil
Up = nil
Vp = nil
Wp = nil
Xp = nil
Yp = nil
Zp = nil
dq = nil
eq = nil
fq = nil
gq = nil
hq = nil
iq = nil
jq = nil
kq = nil
mq = nil
nq = nil
oq = nil
pq = nil
qq = nil
rq = nil
sq = nil
tq = nil
uq = nil
vq = nil
xq = nil
Xq = nil
Yq = nil
Zq = nil
dr = nil
er = nil
fr = nil
gr = nil
hr = nil
ir = nil
jr = nil
kr = nil
mr = nil
nr = nil
pr = nil
qr = nil
rr = nil
sr = nil
tr = nil
ur = nil
vr = nil
wr = nil
xr = nil
yr = nil
zr = nil
Ar = nil
ar = nil
Br = nil
br = nil
Cr = nil
cr = nil
Dr = nil
Er = nil
Fr = nil
Gr = nil
Hr = nil
Ir = nil
lr = nil
Jr = nil
Kr = nil
Lr = nil
Mr = nil
Nr = nil
Pr = nil
Qr = nil
Rr = nil
Sr = nil
Tr = nil
Ur = nil
Vr = nil
Wr = nil
Xr = nil
Yr = nil
Zr = nil
ds = nil
es = nil
fs = nil
gs = nil
hs = nil
is = nil
js = nil
ks = nil
ms = nil
ns = nil
oss = nil
ps = nil
qs = nil
rs = nil
ss = nil
ts = nil
us = nil
vs = nil
cs = nil
Ds = nil
Es = nil
Fs = nil
Gs = nil
Hs = nil
Is = nil
ls = nil
Js = nil
Ks = nil
Ls = nil
udg_ZhengPaiWL = nil
Ns = nil
Os = nil
Ps = nil
Qs = nil
Rs = nil
LanXin = nil
XuanJin = nil
Ss = nil
Ts = nil
Us = nil
Vs = nil
Ws = nil
Xs = nil
Ys = nil
Zs = nil
ft = nil
gt = nil
ht = nil
jt = nil
kt = nil
nt = nil
ot = nil
ut = nil
vt = nil
xt = nil
yt = nil
zt = nil
At = nil
Bt = nil
Ct = nil
ct = nil
Dt = nil
Et = nil
Ft = nil
Gt = nil
Ht = nil
It = nil
Jt = nil
Kt = 0
Lt = 0
Mt = _array_(0)
Nt = _array_(0)
Ot = 0
Pt = _array_()
Qt = _array_()
Rt = _array_(0.0)
St = _array_(0.0)
Tt = _array_(0.0)
Ut = _array_(0.0)
Vt = _array_(0.0)
Wt = _array_(0.0)
Xt = _array_(0.0)
Yt = _array_(0.0)
Zt = _array_(0.0)
fu = 0.0
gu = 0.0
ju = nil
vipbanlv = _array_()

l__library_init = nil

--JASSHelper struct globals:
si__ModSpeed = 1
s__ModSpeed_tm = CreateTimer()
s__ModSpeed_instanceMaxCount = 0
s__ModSpeed_prev = _array_(0)
s__ModSpeed_next = _array_(0)
s__ModSpeed_u = _array_()
s__ModSpeed_lastX = _array_(0.0)
s__ModSpeed_lastY = _array_(0.0)
s__ModSpeed_speed = _array_(0.0)
s__ModSpeed_lead = _array_(false)
s__ModSpeed_x = nil
s__ModSpeed_y = nil
s__ModSpeed_dx = nil
s__ModSpeed_dy = nil
s__ModSpeed_dist = nil
s__ModSpeed_rate = nil
si__YDWEStringFormula__Inventory = 2
si__YDWEStringFormula__Inventory_F = 0
si__YDWEStringFormula__Inventory_I = 0
si__YDWEStringFormula__Inventory_V = _array_(0)
si__YDWEStringFormula__StringTable = 3
si__YDWEStringFormula__ItemIdMatrix = 4
s__YDWEStringFormula__ItemIdMatrix_Data = nil
s__YDWEStringFormula__ItemIdMatrix_Total = 1
s__YDWEStringFormula__ItemIdMatrix_itemId = _array_(0)
s__YDWEStringFormula__ItemIdMatrix_keyStr = _array_()
s__YDWEStringFormula__ItemIdMatrix_keyLen = _array_(0)
si__YDWEStringFormula__FormulaMatrix = 5
s__YDWEStringFormula__FormulaMatrix_Data = nil
s__YDWEStringFormula__FormulaMatrix_Total = 1
s__YDWEStringFormula__FormulaMatrix_formula = _array_()
s__YDWEStringFormula__FormulaMatrix_segmLen = _array_(0)
s__YDWEStringFormula__FormulaMatrix_model = _array_()
s__YDWEStringFormula__FormulaMatrix_message = _array_()
s__YDWEStringFormula__FormulaMatrix_chance = _array_(0)
s__YDWEStringFormula__FormulaMatrix_delete = _array_(false)
si__YDWEStringFormula__Sorting = 6
si__YDWEStringFormula__Sorting_F = 0
si__YDWEStringFormula__Sorting_I = 0
si__YDWEStringFormula__Sorting_V = _array_(0)
s___YDWEStringFormula__Sorting_stack = _array_(0)
s___YDWEStringFormula__Sorting_stack_size = 8
s__YDWEStringFormula__Sorting_stack = _array_(0)
s___YDWEStringFormula__Sorting_count = _array_(0)
s___YDWEStringFormula__Sorting_count_size = 8
s__YDWEStringFormula__Sorting_count = _array_(0)
s__YDWEStringFormula__Sorting_total = _array_(0)
s__YDWEStringFormula__Sorting_char = _array_()
si__YDWETimerPattern__YDVector3 = 9
si__YDWETimerPattern__YDVector3_F = 0
si__YDWETimerPattern__YDVector3_I = 0
si__YDWETimerPattern__YDVector3_V = _array_(0)
s__YDWETimerPattern__YDVector3_x = _array_(0.0)
s__YDWETimerPattern__YDVector3_y = _array_(0.0)
s__YDWETimerPattern__YDVector3_z = _array_(0.0)
si__YDWETimerPattern__Thread = 10
si__YDWETimerPattern__Thread_F = 0
si__YDWETimerPattern__Thread_I = 0
si__YDWETimerPattern__Thread_V = _array_(0)
s__YDWETimerPattern__Thread_des = _array_(0)
s__YDWETimerPattern__Thread_pos = _array_(0)
s__YDWETimerPattern__Thread_vel = _array_(0)
s__YDWETimerPattern__Thread_caster = _array_()
s__YDWETimerPattern__Thread_source = _array_()
s__YDWETimerPattern__Thread_target = _array_()
s__YDWETimerPattern__Thread_obj = _array_()
s__YDWETimerPattern__Thread_ac = _array_(0.0)
s__YDWETimerPattern__Thread_bc = _array_(0.0)
s__YDWETimerPattern__Thread_dist = _array_(0.0)
s__YDWETimerPattern__Thread_step = _array_(0.0)
s__YDWETimerPattern__Thread_amount = _array_(0.0)
s__YDWETimerPattern__Thread_switch = _array_(0)
s__YDWETimerPattern__Thread_follow = _array_(0)
s__YDWETimerPattern__Thread_unitid = _array_(0)
s__YDWETimerPattern__Thread_skills = _array_(0)
s__YDWETimerPattern__Thread_order = _array_(0)
s__YDWETimerPattern__Thread_level = _array_(0)
s__YDWETimerPattern__Thread_dsfx = _array_()
s__YDWETimerPattern__Thread_gsfx = _array_()
s__YDWETimerPattern__Thread_wsfx = _array_()
s__YDWETimerPattern__Thread_part = _array_()
s__YDWETimerPattern__Thread_recycle = _array_(false)
s__YDWETimerPattern__Thread_killdest = _array_(false)
s__YDWETimerPattern__Thread_volume = _array_(false)
s__YDWETimerPattern__Thread_g = _array_()
s__YDWETimerPattern__Thread_t = _array_()
si__YDWETimerPattern__Parabola = 11
si__YDWETimerPattern__Linear = 12
si__YDWETimerPattern__Deceleration = 13
si__DaPei = 14
si__DaPei_F = 0
si__DaPei_I = 0
si__DaPei_V = _array_(0)
s__DaPei_wugongid = _array_(0)
s__DaPei_dapeixiaoguo = _array_(0)
s__DaPei_shxishu = _array_(0.0)
s__DaPei_r = _array_(0.0)
si__ZiZhiWuGong = 15
si__ZiZhiWuGong_F = 0
si__ZiZhiWuGong_I = 0
si__ZiZhiWuGong_V = _array_(0)
s__ZiZhiWuGong_xishu = _array_(0)
s__ZiZhiWuGong_range = _array_(0)
s__ZiZhiWuGong_texiao = _array_(0)
s__ZiZhiWuGong_dapeishu = _array_(0)
s__ZiZhiWuGong_scrate = _array_(0)
s__ZiZhiWuGong_name = _array_()
si__ShopWeapon = 16
si__ShopWeapon_F = 0
si__ShopWeapon_I = 0
si__ShopWeapon_V = _array_(0)
s__ShopWeapon_min_xiuxing = _array_(0)
s__ShopWeapon_id = _array_(0)
s__ShopWeapon_zhuanshu = _array_(false)
si__YDWEStringFormula__Inventory_type = _array_(0)
st__YDWEStringFormula__Inventory_onDestroy = _array_()
si__YDWETimerPattern__Thread_type = _array_(0)
st__YDWETimerPattern__Thread_onDestroy = _array_()
st__YDWEStringFormula__Sorting_onDestroy = nil
st__DaPei_onDestroy = nil
st__DaPei_XiaoGuoShuoMing = nil
st__ZiZhiWuGong_create = nil
st__ZiZhiWuGong_onDestroy = nil
st__ShopWeapon_onDestroy = nil
st__ShopWeapon_PickUpWeapon = nil
st___prototype16 = _array_()
f__arg_integer1 = nil
f__arg_integer2 = nil
f__arg_integer3 = nil
f__arg_integer4 = nil
f__arg_integer5 = nil
f__arg_unit1 = nil
f__arg_item1 = nil
f__arg_real1 = nil
f__arg_this = nil
f__result_string = nil
f__result_integer = nil


DzAPI_Map_SaveServerValue = _native_'DzAPI_Map_SaveServerValue'
DzAPI_Map_GetServerValue = _native_'DzAPI_Map_GetServerValue'
DzAPI_Map_Ladder_SetStat = _native_'DzAPI_Map_Ladder_SetStat'
DzAPI_Map_IsRPGLadder = _native_'DzAPI_Map_IsRPGLadder'
DzAPI_Map_GetGameStartTime = _native_'DzAPI_Map_GetGameStartTime'
DzAPI_Map_Stat_SetStat = _native_'DzAPI_Map_Stat_SetStat'
DzAPI_Map_GetMatchType = _native_'DzAPI_Map_GetMatchType'
DzAPI_Map_Ladder_SetPlayerStat = _native_'DzAPI_Map_Ladder_SetPlayerStat'
DzAPI_Map_GetServerValueErrorCode = _native_'DzAPI_Map_GetServerValueErrorCode'
DzAPI_Map_GetLadderLevel = _native_'DzAPI_Map_GetLadderLevel'
DzAPI_Map_IsRedVIP = _native_'DzAPI_Map_IsRedVIP'
DzAPI_Map_IsBlueVIP = _native_'DzAPI_Map_IsBlueVIP'
DzAPI_Map_GetLadderRank = _native_'DzAPI_Map_GetLadderRank'
DzAPI_Map_GetMapLevelRank = _native_'DzAPI_Map_GetMapLevelRank'
DzAPI_Map_GetGuildName = _native_'DzAPI_Map_GetGuildName'
DzAPI_Map_GetGuildRole = _native_'DzAPI_Map_GetGuildRole'
DzAPI_Map_IsRPGLobby = _native_'DzAPI_Map_IsRPGLobby'
DzAPI_Map_GetMapLevel = _native_'DzAPI_Map_GetMapLevel'
DzAPI_Map_MissionComplete = _native_'DzAPI_Map_MissionComplete'
DzAPI_Map_GetActivityData = _native_'DzAPI_Map_GetActivityData'
DzAPI_Map_GetMapConfig = _native_'DzAPI_Map_GetMapConfig'
DzAPI_Map_HasMallItem = _native_'DzAPI_Map_HasMallItem'
DzAPI_Map_SavePublicArchive = _native_'DzAPI_Map_SavePublicArchive'
DzAPI_Map_GetPublicArchive = _native_'DzAPI_Map_GetPublicArchive'
DzAPI_Map_UseConsumablesItem = _native_'DzAPI_Map_UseConsumablesItem'
DzAPI_Map_OrpgTrigger = _native_'DzAPI_Map_OrpgTrigger'
DzAPI_Map_GetServerArchiveDrop = _native_'DzAPI_Map_GetServerArchiveDrop'
DzAPI_Map_GetServerArchiveEquip = _native_'DzAPI_Map_GetServerArchiveEquip'


--Generated method caller for ShopWeapon.onDestroy
function sc__ShopWeapon_onDestroy(this)
	s__ShopWeapon_min_xiuxing[this] = 0
	s__ShopWeapon_id[this] = 0
end

--Generated method caller for ShopWeapon.PickUpWeapon
function sc__ShopWeapon_PickUpWeapon(this, u, it)
	f__arg_this = this
	f__arg_unit1 = u
	f__arg_item1 = it
	TriggerEvaluate(st__ShopWeapon_PickUpWeapon)
end

--Generated allocator of ShopWeapon
function s__ShopWeapon__allocate()
	local this = si__ShopWeapon_F
	if this ~= 0 then
		si__ShopWeapon_F = si__ShopWeapon_V[this]
	else
		si__ShopWeapon_I = si__ShopWeapon_I + 1
		this = si__ShopWeapon_I
	end
	if this > 8190 then
		return 0
	end

	s__ShopWeapon_zhuanshu[this] = false
	si__ShopWeapon_V[this] = -1
	return this
end

--Generated destructor of ShopWeapon
function sc__ShopWeapon_deallocate(this)
	if this == nil then
		return
	elseif si__ShopWeapon_V[this] ~= -1 then
		return
	end
	f__arg_this = this
	TriggerEvaluate(st__ShopWeapon_onDestroy)
	si__ShopWeapon_V[this] = si__ShopWeapon_F
	si__ShopWeapon_F = this
end

--Generated method caller for ZiZhiWuGong.create
function sc__ZiZhiWuGong_create(xishu, range, texiao, dapeishu, scrate)
	f__arg_integer1 = xishu
	f__arg_integer2 = range
	f__arg_integer3 = texiao
	f__arg_integer4 = dapeishu
	f__arg_integer5 = scrate
	TriggerEvaluate(st__ZiZhiWuGong_create)
	return f__result_integer
end

--Generated method caller for ZiZhiWuGong.onDestroy
function sc__ZiZhiWuGong_onDestroy(this)
	s__ZiZhiWuGong_xishu[this] = 0
	s__ZiZhiWuGong_range[this] = 0
	s__ZiZhiWuGong_texiao[this] = 0
	s__ZiZhiWuGong_dapeishu[this] = 0
	s__ZiZhiWuGong_scrate[this] = 0
end

--Generated allocator of ZiZhiWuGong
function s__ZiZhiWuGong__allocate()
	local this = si__ZiZhiWuGong_F
	if this ~= 0 then
		si__ZiZhiWuGong_F = si__ZiZhiWuGong_V[this]
	else
		si__ZiZhiWuGong_I = si__ZiZhiWuGong_I + 1
		this = si__ZiZhiWuGong_I
	end
	if this > 8190 then
		return 0
	end

	s__ZiZhiWuGong_name[this] = "自创武功"
	si__ZiZhiWuGong_V[this] = -1
	return this
end

--Generated destructor of ZiZhiWuGong
function sc__ZiZhiWuGong_deallocate(this)
	if this == nil then
		return
	elseif si__ZiZhiWuGong_V[this] ~= -1 then
		return
	end
	f__arg_this = this
	TriggerEvaluate(st__ZiZhiWuGong_onDestroy)
	si__ZiZhiWuGong_V[this] = si__ZiZhiWuGong_F
	si__ZiZhiWuGong_F = this
end

--Generated method caller for DaPei.onDestroy
function sc__DaPei_onDestroy(this)
	s__DaPei_wugongid[this] = 0
	s__DaPei_dapeixiaoguo[this] = 0
	s__DaPei_shxishu[this] = 0
end

--Generated method caller for DaPei.XiaoGuoShuoMing
function sc__DaPei_XiaoGuoShuoMing(this)
	local s = ""
	s = (s or "") .. "+" .. (GetAbilityName(s__DaPei_wugongid[this]) or "") .. "："
	if s__DaPei_dapeixiaoguo[this] ~= 2 then
		s = (s or "") .. "伤害+" .. (I2S(R2I(s__DaPei_r[this] * 100)) or "") .. "%"
	else
		if R2I(s__DaPei_r[this]) == 1 then
			s = (s or "") .. "几率造成内伤"
		elseif R2I(s__DaPei_r[this]) == 2 then
			s = (s or "") .. "几率造成走火入魔"
		elseif R2I(s__DaPei_r[this]) == 3 then
			s = (s or "") .. "几率造成流血"
		elseif R2I(s__DaPei_r[this]) == 4 then
			s = (s or "") .. "几率造成混乱"
		elseif R2I(s__DaPei_r[this]) == 5 then
			s = (s or "") .. "几率造成昏迷"
		elseif R2I(s__DaPei_r[this]) == 6 then
			s = (s or "") .. "几率造成重伤"
		elseif R2I(s__DaPei_r[this]) == 7 then
			s = (s or "") .. "几率造成血流不止"
		elseif R2I(s__DaPei_r[this]) == 8 then
			s = (s or "") .. "几率造成麻痹"
		elseif R2I(s__DaPei_r[this]) == 9 then
			s = (s or "") .. "几率造成破防"
		elseif R2I(s__DaPei_r[this]) == 10 then
			s = (s or "") .. "几率造成神经错乱"
		elseif R2I(s__DaPei_r[this]) == 11 then
			s = (s or "") .. "几率造成封穴"
		elseif R2I(s__DaPei_r[this]) == 12 then
			s = (s or "") .. "几率造成穴位全封"
		elseif R2I(s__DaPei_r[this]) == 13 then
			s = (s or "") .. "几率造成中毒"
		end
	end
	return s
end

--Generated allocator of DaPei
function s__DaPei__allocate()
	local this = si__DaPei_F
	if this ~= 0 then
		si__DaPei_F = si__DaPei_V[this]
	else
		si__DaPei_I = si__DaPei_I + 1
		this = si__DaPei_I
	end
	if this > 8190 then
		return 0
	end

	s__DaPei_shxishu[this] = 0.0
	si__DaPei_V[this] = -1
	return this
end

--Generated destructor of DaPei
function sc__DaPei_deallocate(this)
	if this == nil then
		return
	elseif si__DaPei_V[this] ~= -1 then
		return
	end
	f__arg_this = this
	TriggerEvaluate(st__DaPei_onDestroy)
	si__DaPei_V[this] = si__DaPei_F
	si__DaPei_F = this
end

--Generated method caller for YDWEStringFormula__Inventory.onDestroy
function sc__YDWEStringFormula__Inventory_onDestroy(this)
	f__arg_this = this
	TriggerEvaluate(st__YDWEStringFormula__Inventory_onDestroy[2])
end

--Generated allocator of YDWEStringFormula__Inventory
function s__YDWEStringFormula__Inventory__allocate()
	local this = si__YDWEStringFormula__Inventory_F
	if this ~= 0 then
		si__YDWEStringFormula__Inventory_F = si__YDWEStringFormula__Inventory_V[this]
	else
		si__YDWEStringFormula__Inventory_I = si__YDWEStringFormula__Inventory_I + 1
		this = si__YDWEStringFormula__Inventory_I
	end
	if this > 8190 then
		return 0
	end

	si__YDWEStringFormula__Inventory_type[this] = 2
	si__YDWEStringFormula__Inventory_V[this] = -1
	return this
end

--Generated destructor of YDWEStringFormula__Inventory
function sc__YDWEStringFormula__Inventory_deallocate(this)
	if this == nil then
		return
	elseif si__YDWEStringFormula__Inventory_V[this] ~= -1 then
		return
	end
	f__arg_this = this
	TriggerEvaluate(st__YDWEStringFormula__Inventory_onDestroy[si__YDWEStringFormula__Inventory_type[this]])
	si__YDWEStringFormula__Inventory_V[this] = si__YDWEStringFormula__Inventory_F
	si__YDWEStringFormula__Inventory_F = this
end

--Generated allocator of YDWEStringFormula__StringTable
function s__YDWEStringFormula__StringTable__allocate()
	local this = s__YDWEStringFormula__Inventory__allocate()
	local kthis
	if this == 0 then
		return 0
	end
	si__YDWEStringFormula__Inventory_type[this] = 3
	kthis = this

	return this
end


--Generated method caller for YDWETimerPattern__Thread.onDestroy
function sc__YDWETimerPattern__Thread_onDestroy(this)
	f__arg_this = this
	TriggerEvaluate(st__YDWETimerPattern__Thread_onDestroy[10])
end

--Generated allocator of YDWETimerPattern__Thread
function s__YDWETimerPattern__Thread__allocate()
	local this = si__YDWETimerPattern__Thread_F
	if this ~= 0 then
		si__YDWETimerPattern__Thread_F = si__YDWETimerPattern__Thread_V[this]
	else
		si__YDWETimerPattern__Thread_I = si__YDWETimerPattern__Thread_I + 1
		this = si__YDWETimerPattern__Thread_I
	end
	if this > 8190 then
		return 0
	end

	si__YDWETimerPattern__Thread_type[this] = 10
	si__YDWETimerPattern__Thread_V[this] = -1
	return this
end

--Generated destructor of YDWETimerPattern__Thread
function sc__YDWETimerPattern__Thread_deallocate(this)
	if this == nil then
		return
	elseif si__YDWETimerPattern__Thread_V[this] ~= -1 then
		return
	end
	f__arg_this = this
	TriggerEvaluate(st__YDWETimerPattern__Thread_onDestroy[si__YDWETimerPattern__Thread_type[this]])
	si__YDWETimerPattern__Thread_V[this] = si__YDWETimerPattern__Thread_F
	si__YDWETimerPattern__Thread_F = this
end

--Generated allocator of YDWETimerPattern__YDVector3
function s__YDWETimerPattern__YDVector3__allocate()
	local this = si__YDWETimerPattern__YDVector3_F
	if this ~= 0 then
		si__YDWETimerPattern__YDVector3_F = si__YDWETimerPattern__YDVector3_V[this]
	else
		si__YDWETimerPattern__YDVector3_I = si__YDWETimerPattern__YDVector3_I + 1
		this = si__YDWETimerPattern__YDVector3_I
	end
	if this > 8190 then
		return 0
	end

	si__YDWETimerPattern__YDVector3_V[this] = -1
	return this
end

--Generated destructor of YDWETimerPattern__YDVector3
function s__YDWETimerPattern__YDVector3_deallocate(this)
	if this == nil then
		return
	elseif si__YDWETimerPattern__YDVector3_V[this] ~= -1 then
		return
	end
	si__YDWETimerPattern__YDVector3_V[this] = si__YDWETimerPattern__YDVector3_F
	si__YDWETimerPattern__YDVector3_F = this
end

--Generated method caller for YDWEStringFormula__Sorting.onDestroy
function sc__YDWEStringFormula__Sorting_onDestroy(this)
	local i = 0
	for _ in _loop_() do
		if i == s___YDWEStringFormula__Sorting_stack_size then break end
		s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this] + i] = 0
		s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this] + i] = 0
		i = i + 1
	end
	s__YDWEStringFormula__Sorting_char[this] = ""
end

--Generated allocator of YDWEStringFormula__Sorting
function s__YDWEStringFormula__Sorting__allocate()
	local this = si__YDWEStringFormula__Sorting_F
	if this ~= 0 then
		si__YDWEStringFormula__Sorting_F = si__YDWEStringFormula__Sorting_V[this]
	else
		si__YDWEStringFormula__Sorting_I = si__YDWEStringFormula__Sorting_I + 1
		this = si__YDWEStringFormula__Sorting_I
	end
	if this > 1022 then
		return 0
	end
	s__YDWEStringFormula__Sorting_stack[this] = (this - 1) * 8
	s__YDWEStringFormula__Sorting_count[this] = (this - 1) * 8
	s__YDWEStringFormula__Sorting_total[this] = 7
	si__YDWEStringFormula__Sorting_V[this] = -1
	return this
end

--Generated destructor of YDWEStringFormula__Sorting
function sc__YDWEStringFormula__Sorting_deallocate(this)
	if this == nil then
		return
	elseif si__YDWEStringFormula__Sorting_V[this] ~= -1 then
		return
	end
	f__arg_this = this
	TriggerEvaluate(st__YDWEStringFormula__Sorting_onDestroy)
	si__YDWEStringFormula__Sorting_V[this] = si__YDWEStringFormula__Sorting_F
	si__YDWEStringFormula__Sorting_F = this
end

--Generated allocator of YDWETimerPattern__Deceleration
function s__YDWETimerPattern__Deceleration__allocate()
	local this = s__YDWETimerPattern__Thread__allocate()
	local kthis
	if this == 0 then
		return 0
	end
	si__YDWETimerPattern__Thread_type[this] = 13
	kthis = this

	return this
end


--Generated allocator of YDWETimerPattern__Parabola
function s__YDWETimerPattern__Parabola__allocate()
	local this = s__YDWETimerPattern__Thread__allocate()
	local kthis
	if this == 0 then
		return 0
	end
	si__YDWETimerPattern__Thread_type[this] = 11
	kthis = this

	return this
end


--Generated allocator of YDWETimerPattern__Linear
function s__YDWETimerPattern__Linear__allocate()
	local this = s__YDWETimerPattern__Thread__allocate()
	local kthis
	if this == 0 then
		return 0
	end
	si__YDWETimerPattern__Thread_type[this] = 12
	kthis = this

	return this
end

function sc___prototype16_execute(i, a1, a2)
	f__arg_unit1 = a1
	f__arg_real1 = a2

	TriggerExecute(st___prototype16[i])
end
function sc___prototype16_evaluate(i, a1, a2)
	f__arg_unit1 = a1
	f__arg_real1 = a2

	TriggerEvaluate(st___prototype16[i])

end
function h__SetUnitMoveSpeed(a0, a1)
	--hook: SetUnitMoveSpeedEx
	sc___prototype16_evaluate(1, a0, a1)
	SetUnitMoveSpeed(a0, a1)
end

--library DzAPI:




























function GetPlayerServerValueSuccess(whichPlayer)
	if DzAPI_Map_GetServerValueErrorCode(whichPlayer) == 0 then
		return true
	else
		return false
	end
end
function DzAPI_Map_StoreInteger(whichPlayer, key, value)
	key = "I" .. (key or "")
	DzAPI_Map_SaveServerValue(whichPlayer, key, I2S(value))
	key = nil
	whichPlayer = nil
end
function DzAPI_Map_GetStoredInteger(whichPlayer, key)
	local value
	key = "I" .. (key or "")
	value = S2I(DzAPI_Map_GetServerValue(whichPlayer, key))
	key = nil
	whichPlayer = nil
	return value
end
function DzAPI_Map_StoreReal(whichPlayer, key, value)
	key = "R" .. (key or "")
	DzAPI_Map_SaveServerValue(whichPlayer, key, R2S(value))
	key = nil
	whichPlayer = nil
end
function DzAPI_Map_GetStoredReal(whichPlayer, key)
	local value
	key = "R" .. (key or "")
	value = S2R(DzAPI_Map_GetServerValue(whichPlayer, key))
	key = nil
	whichPlayer = nil
	return value
end
function DzAPI_Map_StoreBoolean(whichPlayer, key, value)
	key = "B" .. (key or "")
	if value then
		DzAPI_Map_SaveServerValue(whichPlayer, key, "1")
	else
		DzAPI_Map_SaveServerValue(whichPlayer, key, "0")
	end
	key = nil
	whichPlayer = nil
end
function DzAPI_Map_GetStoredBoolean(whichPlayer, key)
	local value
	key = "B" .. (key or "")
	key = DzAPI_Map_GetServerValue(whichPlayer, key)
	if key == "1" then
		value = true
	else
		value = false
	end
	key = nil
	whichPlayer = nil
	return value
end
function DzAPI_Map_StoreString(whichPlayer, key, value)
	key = "S" .. (key or "")
	DzAPI_Map_SaveServerValue(whichPlayer, key, value)
	key = nil
	whichPlayer = nil
end
function DzAPI_Map_GetStoredString(whichPlayer, key)
	return DzAPI_Map_GetServerValue(whichPlayer, "S" .. (key or ""))
end
function DzAPI_Map_GetStoredUnitType(whichPlayer, key)
	local value
	key = "I" .. (key or "")
	value = S2I(DzAPI_Map_GetServerValue(whichPlayer, key))
	key = nil
	whichPlayer = nil
	return value
end
function DzAPI_Map_GetStoredAbilityId(whichPlayer, key)
	local value
	key = "I" .. (key or "")
	value = S2I(DzAPI_Map_GetServerValue(whichPlayer, key))
	key = nil
	whichPlayer = nil
	return value
end
function DzAPI_Map_FlushStoredMission(whichPlayer, key)
	DzAPI_Map_SaveServerValue(whichPlayer, key, nil)
	key = nil
	whichPlayer = nil
end
function DzAPI_Map_Ladder_SubmitIntegerData(whichPlayer, key, value)
	DzAPI_Map_Ladder_SetStat(whichPlayer, key, I2S(value))
end
function DzAPI_Map_Stat_SubmitUnitIdData(whichPlayer, key, value)
	if value == 0 then
	--call DzAPI_Map_Ladder_SetStat(whichPlayer,key,"0")
	else
		DzAPI_Map_Ladder_SetStat(whichPlayer, key, I2S(value))
	end
end
function DzAPI_Map_Stat_SubmitUnitData(whichPlayer, key, value)
	DzAPI_Map_Stat_SubmitUnitIdData(whichPlayer, key, GetUnitTypeId(value))
end
function DzAPI_Map_Ladder_SubmitAblityIdData(whichPlayer, key, value)
	if value == 0 then
	--call DzAPI_Map_Ladder_SetStat(whichPlayer,key,"0")
	else
		DzAPI_Map_Ladder_SetStat(whichPlayer, key, I2S(value))
	end
end
function DzAPI_Map_Ladder_SubmitItemIdData(whichPlayer, key, value)
	local l__S
	if value == 0 then
		l__S = "0"
	else
		l__S = I2S(value)
		DzAPI_Map_Ladder_SetStat(whichPlayer, key, l__S)
	end
	--call DzAPI_Map_Ladder_SetStat(whichPlayer,key,S)
	l__S = nil
	whichPlayer = nil
end
function DzAPI_Map_Ladder_SubmitItemData(whichPlayer, key, value)
	DzAPI_Map_Ladder_SubmitItemIdData(whichPlayer, key, GetItemTypeId(value))
end
function DzAPI_Map_Ladder_SubmitBooleanData(whichPlayer, key, value)
	if value then
		DzAPI_Map_Ladder_SetStat(whichPlayer, key, "1")
	else
		DzAPI_Map_Ladder_SetStat(whichPlayer, key, "0")
	end
end
function DzAPI_Map_Ladder_SubmitTitle(whichPlayer, value)
	DzAPI_Map_Ladder_SetStat(whichPlayer, value, "1")
end
function DzAPI_Map_Ladder_SubmitPlayerRank(whichPlayer, value)
	DzAPI_Map_Ladder_SetPlayerStat(whichPlayer, "RankIndex", I2S(value))
end
function DzAPI_Map_Ladder_SubmitPlayerExtraExp(whichPlayer, value)
	DzAPI_Map_Ladder_SetStat(whichPlayer, "ExtraExp", I2S(value))
end

--library DzAPI ends
--library MaxSpeed:
--private:
--temp variables







--Implemented from module Init:





function s__ModSpeed_destroy(this)
	s__ModSpeed_speed[this] = 0.0
	if s__ModSpeed_next[this] ~= 0 then
		s__ModSpeed_prev[s__ModSpeed_next[this]] = s__ModSpeed_prev[this]
	end
	s__ModSpeed_next[s__ModSpeed_prev[this]] = s__ModSpeed_next[this]
	s__ModSpeed_prev[this] = s__ModSpeed_prev[0]
	s__ModSpeed_prev[0] = this
	if s__ModSpeed_next[0] == 0 then
		PauseTimer(s__ModSpeed_tm)



	end







end
function s__ModSpeed__get_moveFilter(this)
	return GetUnitAbilityLevel(s__ModSpeed_u[this], 1112757326) < 1 and GetUnitAbilityLevel(s__ModSpeed_u[this], 1112560453) < 1 and GetUnitMoveSpeed(s__ModSpeed_u[this]) > 521.0 and not IsUnitPaused(s__ModSpeed_u[this]) and not s__ModSpeed_lead[this]
end
function s__ModSpeed_move(this)
	if not s__ModSpeed__get_moveFilter(this) then
		return
	end
	s__ModSpeed_x = GetUnitX(s__ModSpeed_u[this])
	s__ModSpeed_y = GetUnitY(s__ModSpeed_u[this])
	s__ModSpeed_dx = s__ModSpeed_x - s__ModSpeed_lastX[this]
	s__ModSpeed_dy = s__ModSpeed_y - s__ModSpeed_lastY[this]
	s__ModSpeed_lastX[this] = s__ModSpeed_x
	s__ModSpeed_lastY[this] = s__ModSpeed_y
	s__ModSpeed_dist = SquareRoot(s__ModSpeed_dx * s__ModSpeed_dx + s__ModSpeed_dy * s__ModSpeed_dy) / MaxSpeed___PERIOD
	if s__ModSpeed_dist >= MaxSpeed___MIN_SPEED and s__ModSpeed_dist <= MaxSpeed___MAX_SPEED then
		s__ModSpeed_rate = (s__ModSpeed_speed[this] - 522.0) / s__ModSpeed_dist
		s__ModSpeed_lastX[this] = s__ModSpeed_x + s__ModSpeed_dx * s__ModSpeed_rate
		s__ModSpeed_lastY[this] = s__ModSpeed_y + s__ModSpeed_dy * s__ModSpeed_rate
		SetUnitX(s__ModSpeed_u[this], s__ModSpeed_lastX[this])
		SetUnitY(s__ModSpeed_u[this], s__ModSpeed_lastY[this])



	end
end
function s__ModSpeed_iterate()
	local this = 0
	for _ in _loop_() do
		this = s__ModSpeed_next[this]
		if this == 0 then break end
		if GetWidgetLife(s__ModSpeed_u[this]) < 0.405 then
			s__ModSpeed_destroy(this)
		else
			s__ModSpeed_move(this)
		end
	end
end
--public:
function s__ModSpeed_getInstance(u)
	local this = 0











	for _ in _loop_() do
		this = s__ModSpeed_next[this]
		if this == 0 then break end
		if s__ModSpeed_u[this] == u then
			return this
		end
	end

	return 0
end
function s__ModSpeed_setUnitLed(u, b)
	local this = s__ModSpeed_getInstance(u)
	if this > 0 then
		s__ModSpeed_lead[this] = b
	end
end
function s__ModSpeed_getSpeed(u)
	local this = s__ModSpeed_getInstance(u)
	if this > 0 and GetUnitMoveSpeed(u) > 521.0 then
		return s__ModSpeed_speed[this]
	end
	return GetUnitMoveSpeed(u)
end
function s__ModSpeed_setSpeed(u, amount)
	local this
	if u == nil or GetWidgetLife(u) < 0.405 then
		return
	end
	this = s__ModSpeed_getInstance(u)
	if amount < 523.0 then
		if this > 0 then
			s__ModSpeed_destroy(this)
		end
		return
	elseif this == 0 then
		if s__ModSpeed_prev[0] == 0 then
			s__ModSpeed_instanceMaxCount = s__ModSpeed_instanceMaxCount + 1
			this = s__ModSpeed_instanceMaxCount
		else
			this = s__ModSpeed_prev[0]
			s__ModSpeed_prev[0] = s__ModSpeed_prev[s__ModSpeed_prev[0]]
		end
		if s__ModSpeed_next[0] == 0 then
			TimerStart(s__ModSpeed_tm, MaxSpeed___PERIOD, true, s__ModSpeed_iterate)



		else
			s__ModSpeed_prev[s__ModSpeed_next[0]] = this
		end
		s__ModSpeed_next[this] = s__ModSpeed_next[0]
		s__ModSpeed_next[0] = this
		s__ModSpeed_prev[this] = 0
		s__ModSpeed_u[this] = u







	end
	amount = RMinBJ(amount, MaxSpeed___MAX_SPEED)
	s__ModSpeed_lastX[this] = GetUnitX(u)
	s__ModSpeed_lastY[this] = GetUnitY(u)
	s__ModSpeed_speed[this] = amount
end
--interface:
function SetUnitLed(u, b)
	s__ModSpeed_setUnitLed(u, b)
end
function GetUnitMoveSpeedEx(u)
	return s__ModSpeed_getSpeed(u)
end
function SetUnitMoveSpeedEx(u, speed)
	s__ModSpeed_setSpeed(u, speed)
end
--processed hook:      hook SetUnitMoveSpeed SetUnitMoveSpeedEx

--library MaxSpeed ends
--library UniMissileSystem3D:
-- 计算两点间的距离
function UniMissileSystem3D__DistanceBetweenXY(x1, x2, y1, y2)
	return SquareRoot((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2))
end
-- 计算两点间的角度（角度制）
function UniMissileSystem3D__AngleBetweenXY(x1, x2, y1, y2)
	return bj_RADTODEG * Atan2(y2 - y1, x2 - x1)
end
-- 计算两个单位间的角度
function UniMissileSystem3D__GetAngleBetweenUnits(l__A, l__B)
	return Atan2(GetUnitY(l__B) - GetUnitY(l__A), GetUnitX(l__B) - GetUnitX(l__A))
end
-- 计算两个单位间的距离
function UniMissileSystem3D__DistanceBetweenUnits(l__A, l__B)
	local x1 = GetUnitX(l__A)
	local x2 = GetUnitX(l__B)
	local y1 = GetUnitY(l__A)
	local y2 = GetUnitY(l__B)
	return SquareRoot((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2))
end
-- 计算加速的时间
-- s = v0 * t + 1/2 * a * t * t
-- a * t * t  + 2 * v0 * t - 2 * s = 0
-- time1 = (- 2 * v0 + SquareRoot ( 4 * v0 *v0 + 8 * a * s)) / (2 * a)
function UniMissileSystem3D__GetAcceleratedTime(dis, originspeed, accel)
	local time1 = 0.0
	local time2 = 0.0
	time1 = (-1 * originspeed + SquareRoot(Pow(originspeed, 2.0) + 2 * accel * dis)) / accel
	time2 = (-1 * originspeed - SquareRoot(Pow(originspeed, 2.0) + 2 * accel * dis)) / accel
	if time1 == 0.0 then
		time1 = 0.01
	end
	if time2 == 0.0 then
		time2 = 0.01
	end
	if time1 > time2 then
		return time1
	end
	return time2
end
-- 登记弹幕
function UniMissileSystem3D__MRegister(missile)
	UnitAddAbility(missile, 1098015094) -- 风暴之鸦
	UnitRemoveAbility(missile, 1098015094)
	SetUnitPosition(missile, GetUnitX(missile), GetUnitY(missile))
	SetUnitAnimationByIndex(missile, 90)
end
-- 将i从栈中移除，使用栈顶元素补充i
function UniMissileSystem3D__MPop(i)
	if GetUnitState(UniMissileSystem3D__MU[i], UNIT_STATE_LIFE) > 0.4 then
		KillUnit(UniMissileSystem3D__MU[i])
	end
	DestroyEffect(UniMissileSystem3D__EFL[i])
	UniMissileSystem3D__MU[i] = UniMissileSystem3D__MU[UniMissileSystem3D__Top]
	UniMissileSystem3D__SP[i] = UniMissileSystem3D__SP[UniMissileSystem3D__Top]
	UniMissileSystem3D__RA[i] = UniMissileSystem3D__RA[UniMissileSystem3D__Top]
	UniMissileSystem3D__DM[i] = UniMissileSystem3D__DM[UniMissileSystem3D__Top]
	UniMissileSystem3D__DI[i] = UniMissileSystem3D__DI[UniMissileSystem3D__Top]
	UniMissileSystem3D__AN[i] = UniMissileSystem3D__AN[UniMissileSystem3D__Top]
	UniMissileSystem3D__HE[i] = UniMissileSystem3D__HE[UniMissileSystem3D__Top]
	UniMissileSystem3D__HEMax[i] = UniMissileSystem3D__HEMax[UniMissileSystem3D__Top]
	UniMissileSystem3D__US[i] = UniMissileSystem3D__US[UniMissileSystem3D__Top]
	UniMissileSystem3D__ARC[i] = UniMissileSystem3D__ARC[UniMissileSystem3D__Top]
	UniMissileSystem3D__HP[i] = UniMissileSystem3D__HP[UniMissileSystem3D__Top]
	UniMissileSystem3D__EF[i] = UniMissileSystem3D__EF[UniMissileSystem3D__Top]
	UniMissileSystem3D__EFL[i] = UniMissileSystem3D__EFL[UniMissileSystem3D__Top]
	UniMissileSystem3D__SH[i] = UniMissileSystem3D__SH[UniMissileSystem3D__Top]
	UniMissileSystem3D__MGra[i] = UniMissileSystem3D__MGra[UniMissileSystem3D__Top]
	UniMissileSystem3D__LOC[i] = UniMissileSystem3D__LOC[UniMissileSystem3D__Top]
	UniMissileSystem3D__TIM[i] = UniMissileSystem3D__TIM[UniMissileSystem3D__Top]
	UniMissileSystem3D__LT[i] = UniMissileSystem3D__LT[UniMissileSystem3D__Top]
	UniMissileSystem3D__SZ[i] = UniMissileSystem3D__SZ[UniMissileSystem3D__Top]
	UniMissileSystem3D__RI[i] = UniMissileSystem3D__RI[UniMissileSystem3D__Top]
	UniMissileSystem3D__R01[i] = UniMissileSystem3D__R01[UniMissileSystem3D__Top]
	UniMissileSystem3D__R02[i] = UniMissileSystem3D__R02[UniMissileSystem3D__Top]
	UniMissileSystem3D__MT[i] = UniMissileSystem3D__MT[UniMissileSystem3D__Top]
	UniMissileSystem3D__OH[i] = UniMissileSystem3D__OH[UniMissileSystem3D__Top]
	UniMissileSystem3D__OS[i] = UniMissileSystem3D__OS[UniMissileSystem3D__Top]
	UniMissileSystem3D__OF[i] = UniMissileSystem3D__OF[UniMissileSystem3D__Top]
	UniMissileSystem3D__ACC[i] = UniMissileSystem3D__ACC[UniMissileSystem3D__Top]
	UniMissileSystem3D__MaxS[i] = UniMissileSystem3D__MaxS[UniMissileSystem3D__Top]
	UniMissileSystem3D__MKs[i] = UniMissileSystem3D__MKs[UniMissileSystem3D__Top]
	UniMissileSystem3D__SPX[i] = UniMissileSystem3D__SPX[UniMissileSystem3D__Top]
	UniMissileSystem3D__SPY[i] = UniMissileSystem3D__SPY[UniMissileSystem3D__Top]
	UniMissileSystem3D__LastX[i] = UniMissileSystem3D__LastX[UniMissileSystem3D__Top]
	UniMissileSystem3D__LastY[i] = UniMissileSystem3D__LastY[UniMissileSystem3D__Top]
	UniMissileSystem3D__IN[i] = UniMissileSystem3D__IN[UniMissileSystem3D__Top]
	UniMissileSystem3D__LastOwner[i] = UniMissileSystem3D__LastOwner[UniMissileSystem3D__Top]
	UniMissileSystem3D__MU[UniMissileSystem3D__Top] = nil
	UniMissileSystem3D__MT[UniMissileSystem3D__Top] = nil
	UniMissileSystem3D__Top = UniMissileSystem3D__Top - 1
end
-- 判断是否越界
function UniMissileSystem3D__MLimit(x, y)
	if x > UniMissileSystem3D__map_max_X or x < UniMissileSystem3D__map_min_X or y > UniMissileSystem3D__map_max_Y or y < UniMissileSystem3D__map_min_Y then --边界判定
		return true
	else
		return false
	end
end
-- 弹幕循环
function UniMissileSystem3D__MLoop()
	local i = UniMissileSystem3D__Top
	local x = _array_(0.0)
	local y = _array_(0.0)
	local zLoc = _array_(0.0)
	local h = 0.0
	local h2 = 0.0
	local time = 0.0
	local ttime = 0.0
	local ang = 0.0
	local height = 0.0
	local lastheight = 0.0
	local addxy = 0.0
	local addz = 0.0
	local anglez = 0.0
	local tanZ = 0.0
	local addh = 0.0
	local udis = 0.0
	local targetheight = 0.0
	local aniI = 0
	if MissileTimerPause == true then
		return
	end
	for _ in _loop_() do
		if i < 0 then break end
		addh = 0.0
		udis = 0.0
		x[1] = GetUnitX(UniMissileSystem3D__MU[i])
		y[1] = GetUnitY(UniMissileSystem3D__MU[i])
		height = GetUnitFlyHeight(UniMissileSystem3D__MU[i])
		if UniMissileSystem3D__DI[i] <= 0.0 or GetUnitState(UniMissileSystem3D__MU[i], UNIT_STATE_LIFE) < 0.4 or height <= 0.1 or UniMissileSystem3D__HP[i] <= 0.0 or UniMissileSystem3D__MLimit(x[1], y[1]) == true or height >= 9999.1 then
			UniMissileSystem3D__MPop(i)
		else
			if UniMissileSystem3D__MT[i] ~= nil then
				UniMissileSystem3D__AN[i] = UniMissileSystem3D__AngleBetweenXY(x[1], GetUnitX(UniMissileSystem3D__MT[i]), y[1], GetUnitY(UniMissileSystem3D__MT[i]))
				ang = UniMissileSystem3D__AN[i] * bj_DEGTORAD
				if UniMissileSystem3D__IN[i] == 0 then
					UniMissileSystem3D__SPX[i] = UniMissileSystem3D__SP[i] * Cos(ang)
					UniMissileSystem3D__SPY[i] = UniMissileSystem3D__SP[i] * Sin(ang)
				else
					ang = ang + UniMissileSystem3D__OF[i]
					UniMissileSystem3D__SPX[i] = UniMissileSystem3D__SPX[i] * UniMissileSystem3D__MKs[i] + UniMissileSystem3D__ACC[i] * Cos(ang)
					UniMissileSystem3D__SPY[i] = UniMissileSystem3D__SPY[i] * UniMissileSystem3D__MKs[i] + UniMissileSystem3D__ACC[i] * Sin(ang)
				end
				if IsUnitType(UniMissileSystem3D__MT[i], UNIT_TYPE_DEAD) == true then
					UniMissileSystem3D__MT[i] = nil
				end
				udis = UniMissileSystem3D__DistanceBetweenUnits(UniMissileSystem3D__MT[i], UniMissileSystem3D__MU[i]) / 100.0
				if udis == 0.0 then
					udis = 0.01
				end
				targetheight = GetUnitFlyHeight(UniMissileSystem3D__MT[i])
				if RAbsBJ(height - targetheight) > UniMissileSystem3D__RA[i] then
					if targetheight > height then
						addh = RAbsBJ(UniMissileSystem3D__SP[i]) / udis
						if addh + height > targetheight then
							addh = addh / 10.0
							SetUnitFlyHeight(UniMissileSystem3D__MU[i], targetheight, 0.0)
							height = targetheight
						end
					elseif targetheight < height then
						addh = RAbsBJ(UniMissileSystem3D__SP[i]) * -1.0 / udis
						if addh + height < targetheight then
							SetUnitFlyHeight(UniMissileSystem3D__MU[i], targetheight, 0.0)
							height = targetheight
						end
					end
				end
			else
				ang = UniMissileSystem3D__AN[i] * bj_DEGTORAD
				UniMissileSystem3D__SPX[i] = UniMissileSystem3D__SP[i] * Cos(ang)
				UniMissileSystem3D__SPY[i] = UniMissileSystem3D__SP[i] * Sin(ang)
				if UniMissileSystem3D__LOC[i] == 0.0 then
					UniMissileSystem3D__SP[i] = UniMissileSystem3D__SP[i] + UniMissileSystem3D__ACC[i]
				else
					if UniMissileSystem3D__SP[i] <= UniMissileSystem3D__MaxS[i] then
						UniMissileSystem3D__SP[i] = UniMissileSystem3D__SP[i] + UniMissileSystem3D__ACC[i]
					else
						UniMissileSystem3D__SP[i] = UniMissileSystem3D__MaxS[i]
					end
				end
			end
			x[2] = x[1] + UniMissileSystem3D__SPX[i]
			y[2] = y[1] + UniMissileSystem3D__SPY[i]
			UniMissileSystem3D__MLoc[1] = Location(x[1], y[1])
			UniMissileSystem3D__MLoc[2] = Location(x[2], y[2])
			zLoc[1] = GetLocationZ(UniMissileSystem3D__MLoc[1])
			zLoc[2] = GetLocationZ(UniMissileSystem3D__MLoc[2])
			SetUnitX(UniMissileSystem3D__MU[i], x[2])
			SetUnitY(UniMissileSystem3D__MU[i], y[2])
			UniMissileSystem3D__LastX[i] = x[2]
			UniMissileSystem3D__LastY[i] = y[2]
			addxy = UniMissileSystem3D__DistanceBetweenXY(x[2], x[1], y[2], y[1])
			SetUnitFacing(UniMissileSystem3D__MU[i], UniMissileSystem3D__AN[i])
			GroupEnumUnitsInRange(UniMissileSystem3D__DamageGroup, x[2], y[2], UniMissileSystem3D__RA[i], nil)
			for _ in _loop_() do
				UniMissileSystem3D__DamageUnit = FirstOfGroup(UniMissileSystem3D__DamageGroup)
				if GetUnitState(UniMissileSystem3D__DamageUnit, UNIT_STATE_LIFE) > 0.4 and (UniMissileSystem3D__MT[i] == UniMissileSystem3D__DamageUnit or IsUnitEnemy(UniMissileSystem3D__DamageUnit, GetOwningPlayer(UniMissileSystem3D__MU[i]))) then
					if RAbsBJ(height - GetUnitFlyHeight(UniMissileSystem3D__DamageUnit)) <= UniMissileSystem3D__RA[i] then
						UnitDamageTarget(UniMissileSystem3D__MU[i], UniMissileSystem3D__DamageUnit, UniMissileSystem3D__DM[i], true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
						UniMissileSystem3D__HP[i] = UniMissileSystem3D__HP[i] - 1.0
						UniMissileSystem3D__DM[i] = UniMissileSystem3D__DM[i] * 0.5
					end
				end
				GroupRemoveUnit(UniMissileSystem3D__DamageGroup, UniMissileSystem3D__DamageUnit)
				if UniMissileSystem3D__DamageUnit == nil then break end
			end
			GroupClear(UniMissileSystem3D__DamageGroup)
			UniMissileSystem3D__TIM[i] = UniMissileSystem3D__TIM[i] + UniMissileSystem3D__TIMOut
			if UniMissileSystem3D__MGra[i] == 0.0 then
				h = 0.11 + UniMissileSystem3D__SZ[i] - zLoc[2]
			end
			if UniMissileSystem3D__LOC[i] == 0.0 then
				if UniMissileSystem3D__MGra[i] == 0.0 then
				else
					h = UniMissileSystem3D__HEMax[i] - UniMissileSystem3D__R01[i] * (UniMissileSystem3D__TIM[i] - UniMissileSystem3D__LT[i] / 2) * (UniMissileSystem3D__TIM[i] - UniMissileSystem3D__LT[i] / 2) + UniMissileSystem3D__TIM[i] * UniMissileSystem3D__R02[i] + UniMissileSystem3D__SZ[i] - zLoc[2]
				end
			else
				UniMissileSystem3D__US[i] = UniMissileSystem3D__US[i] - UniMissileSystem3D__MGra[i]
			end
			lastheight = height
			UniMissileSystem3D__HE[i] = UniMissileSystem3D__HE[i] * UniMissileSystem3D__LOC[i] + UniMissileSystem3D__SH[i] + UniMissileSystem3D__US[i] * UniMissileSystem3D__LOC[i] + h * (1 - UniMissileSystem3D__LOC[i]) + addh
			height = UniMissileSystem3D__HE[i] - zLoc[2] * UniMissileSystem3D__LOC[i]
			SetUnitFlyHeight(UniMissileSystem3D__MU[i], height, 0.0)
			addz = height - lastheight
			if addxy == 0.0 then
				addxy = 1.0
			end
			tanZ = addz / addxy
			anglez = AtanBJ(tanZ)
			anglez = anglez * 1.0 + 90.0
			aniI = R2I(anglez)
			if aniI < 0 then
				aniI = 0
			elseif aniI > 181 then
				aniI = 181
			end
			SetUnitAnimationByIndex(UniMissileSystem3D__MU[i], aniI)
			UniMissileSystem3D__DI[i] = UniMissileSystem3D__DI[i] - UniMissileSystem3D__SP[i] * UniMissileSystem3D__LOC[i]
			UniMissileSystem3D__US[i] = UniMissileSystem3D__US[i] - UniMissileSystem3D__MGra[i]
			RemoveLocation(UniMissileSystem3D__MLoc[1])
			RemoveLocation(UniMissileSystem3D__MLoc[2])
		end
		i = i - 1
	end
end
-- 弹幕发射
function MissileCast(caster, missile, originspeed, maxspeed, accel, angle, distance, arc, range, damage, loc, target, height, l__hp, Effect, gravity)
	local i = 0
	local n = 0
	local tanA = 0.01
	local speed = 600
	local dis = 0.01
	local ang = 0.01
	local x = 0.01
	local y = 0.01
	local inertia = true
	if loc == nil then
		return
	end
	UniMissileSystem3D__Top = UniMissileSystem3D__Top + 1
	i = UniMissileSystem3D__Top
	UniMissileSystem3D__HeroLoc = GetUnitLoc(caster)
	if speed == 0.0 then
		speed = 0.01
	end
	if originspeed == 0.0 then
		originspeed = 0.01
	end
	if maxspeed == 0.0 then
		maxspeed = 0.01
	end
	if distance == 0.0 then
		distance = 0.01
	end
	if height == 0.0 then
		height = 0.1
	end
	if GetLocationX(loc) ~= GetLocationX(UniMissileSystem3D__HeroLoc) or GetLocationY(loc) ~= GetLocationY(UniMissileSystem3D__HeroLoc) then
		x = GetLocationX(loc)
		y = GetLocationY(loc)
		ang = UniMissileSystem3D__AngleBetweenXY(GetUnitX(caster), x, GetUnitY(caster), y)
		dis = UniMissileSystem3D__DistanceBetweenXY(x, GetUnitX(caster), y, GetUnitY(caster))
		UniMissileSystem3D__LOC[i] = 0.0
	else
		ang = angle
		dis = distance
		UniMissileSystem3D__LOC[i] = 1.0
	end
	if gravity == true then
		UniMissileSystem3D__MGra[i] = UniMissileSystem3D__Gravity
	else
		UniMissileSystem3D__MGra[i] = 0.0
	end
	UniMissileSystem3D__MU[i] = missile
	UniMissileSystem3D__MRegister(UniMissileSystem3D__MU[i])
	UniMissileSystem3D__OH[i] = GetUnitFlyHeight(caster) + height
	UniMissileSystem3D__SZ[i] = GetLocationZ(UniMissileSystem3D__HeroLoc) + UniMissileSystem3D__OH[i]
	if originspeed == maxspeed then
		speed = originspeed
		accel = 0.0
		inertia = false
		UniMissileSystem3D__LT[i] = dis / speed
	else
		inertia = true
		UniMissileSystem3D__LT[i] = UniMissileSystem3D__GetAcceleratedTime(dis, originspeed, accel)
	end
	UniMissileSystem3D__SP[i] = originspeed * UniMissileSystem3D__TIMOut
	UniMissileSystem3D__MaxS[i] = maxspeed
	UniMissileSystem3D__RI[i] = (GetLocationZ(loc) - UniMissileSystem3D__SZ[i]) / dis
	UniMissileSystem3D__TIM[i] = 0
	UniMissileSystem3D__IN[i] = 0
	if target ~= nil then
		if GetUnitState(target, UNIT_STATE_LIFE) > 0.4 then
			UniMissileSystem3D__MT[i] = target
			if inertia == true then
				UniMissileSystem3D__OS[i] = originspeed * UniMissileSystem3D__TIMOut
				UniMissileSystem3D__OF[i] = Deg2Rad(50)
				UniMissileSystem3D__SPX[i] = UniMissileSystem3D__OS[i] * Cos(ang)
				UniMissileSystem3D__SPY[i] = UniMissileSystem3D__OS[i] * Sin(ang)
				UniMissileSystem3D__MKs[i] = 1 - accel * UniMissileSystem3D__TIMOut / maxspeed
			end
		end
	end
	UniMissileSystem3D__ACC[i] = accel * UniMissileSystem3D__TIMOut * UniMissileSystem3D__TIMOut
	if inertia == true then
		UniMissileSystem3D__IN[i] = 1
	end
	UniMissileSystem3D__RA[i] = range
	UniMissileSystem3D__DM[i] = damage
	UniMissileSystem3D__AN[i] = ang
	UniMissileSystem3D__ARC[i] = arc
	UniMissileSystem3D__MaxS[i] = maxspeed * UniMissileSystem3D__TIMOut
	if arc ~= 0.0 then
		UniMissileSystem3D__HEMax[i] = dis * UniMissileSystem3D__ARC[i]
	else
		UniMissileSystem3D__HEMax[i] = height
	end
	if GetLocationX(loc) == GetLocationX(UniMissileSystem3D__HeroLoc) and GetLocationY(loc) == GetLocationY(UniMissileSystem3D__HeroLoc) then
		UniMissileSystem3D__ANZ[i] = AtanBJ(arc)
		UniMissileSystem3D__US[i] = arc * UniMissileSystem3D__SP[i]
		UniMissileSystem3D__DI[i] = distance
	else
		UniMissileSystem3D__US[i] = 0
		UniMissileSystem3D__DI[i] = dis
	end
	SetUnitX(UniMissileSystem3D__MU[i], GetLocationX(UniMissileSystem3D__HeroLoc))
	SetUnitY(UniMissileSystem3D__MU[i], GetLocationY(UniMissileSystem3D__HeroLoc))
	SetUnitOwner(UniMissileSystem3D__MU[i], GetOwningPlayer(caster), true)
	SetUnitFacing(UniMissileSystem3D__MU[i], UniMissileSystem3D__AN[i])
	UniMissileSystem3D__HE[i] = UniMissileSystem3D__OH[i] + GetLocationZ(UniMissileSystem3D__HeroLoc) + 0.11
	UniMissileSystem3D__SH[i] = 0 * speed
	UniMissileSystem3D__LastX[i] = 0.0
	UniMissileSystem3D__LastY[i] = 0.0
	UniMissileSystem3D__R01[i] = UniMissileSystem3D__HEMax[i] / UniMissileSystem3D__LT[i] / UniMissileSystem3D__LT[i] * 4
	UniMissileSystem3D__R02[i] = UniMissileSystem3D__SP[i] * UniMissileSystem3D__RI[i] / UniMissileSystem3D__TIMOut
	UniMissileSystem3D__HP[i] = l__hp
	UniMissileSystem3D__DM[i] = damage
	UniMissileSystem3D__EF[i] = Effect
	SetUnitFlyHeight(UniMissileSystem3D__MU[i], UniMissileSystem3D__HE[i] - GetLocationZ(UniMissileSystem3D__HeroLoc), 0.0)
	UniMissileSystem3D__EFL[i] = AddSpecialEffectTarget(UniMissileSystem3D__EF[i], UniMissileSystem3D__MU[i], "chest")
	UniMissileSystem3D__LastOwner[i] = GetOwningPlayer(caster)
	RemoveLocation(UniMissileSystem3D__HeroLoc)
	UniMissileSystem3D__HeroLoc = nil
end
function UniMissileSystem3D__Init()
	UniMissileSystem3D__map_max_X = GetRectMaxX(bj_mapInitialPlayableArea)
	UniMissileSystem3D__map_max_Y = GetRectMaxY(bj_mapInitialPlayableArea)
	UniMissileSystem3D__map_min_X = GetRectMinX(bj_mapInitialPlayableArea)
	UniMissileSystem3D__map_min_Y = GetRectMinY(bj_mapInitialPlayableArea)
	UniMissileSystem3D__DamageGroup = CreateGroup()
	UniMissileSystem3D__TIMr = CreateTimer()
	TimerStart(UniMissileSystem3D__TIMr, UniMissileSystem3D__TIMOut, true, UniMissileSystem3D__MLoop)
end

--library UniMissileSystem3D ends
--library WuQiQiHeSystem:
--武器类别
function WeaponType(itemid)
	if itemid == 1227895878 then
		return "特"
	elseif itemid == 1227894864 then
		return "特"
	elseif itemid == 1227894865 then
		return "刀"
	elseif itemid == 1227895116 then
		return "剑"
	elseif itemid == 1227895118 then
		return "特"
	elseif itemid == 1227894872 then
		return "刀"
	elseif itemid == 1227894851 then
		return "剑"
	elseif itemid == 1227894852 then
		return "刀"
	elseif itemid == 1227894850 then
		return "剑"
	elseif itemid == 1227895110 then
		return "特"
	elseif itemid == 1227895123 then
		return "棍"
	elseif itemid == 1227895344 then
		return "刀"
	elseif itemid == 1227895109 then
		return "刀"
	elseif itemid == 1227895345 then
		return "棍"
	elseif itemid == 1227895094 then
		return "棍"
	elseif itemid == 1227895091 then
		return "棍"
	elseif itemid == 1227897143 then
		return "棍"
	elseif itemid == 1227897144 then
		return "刀"
	elseif itemid == 1227897145 then
		return "剑"
	elseif itemid == 1227897153 then
		return "剑"
	elseif itemid == 1227897154 then
		return "棍"
	elseif itemid == 1227897155 then
		return "剑"
	elseif itemid == 1227897156 then
		return "棍"
	elseif itemid == 1227896918 then
		return "特"
	end
	return "无"
end
--武器等级
function WeaponLevel(itemid)
	--call BJDebugMsg("什么情况3")
	if itemid == 1227895878 then
		return 3
	elseif itemid == 1227894864 then
		return 5
	elseif itemid == 1227894865 then
		return 5
	elseif itemid == 1227895116 then
		return 2
	elseif itemid == 1227895118 then
		return 2
	elseif itemid == 1227894872 then
		return 4
	elseif itemid == 1227894851 then
		return 6
	elseif itemid == 1227894852 then
		return 6
	elseif itemid == 1227894850 then
		return 6
	elseif itemid == 1227895110 then
		return 1
	elseif itemid == 1227895123 then
		return 1
	elseif itemid == 1227895344 then
		return 0
	elseif itemid == 1227895109 then
		return 2
	elseif itemid == 1227895345 then
		return 0
	elseif itemid == 1227895094 then
		return 2
	elseif itemid == 1227895091 then
		return 4
	elseif itemid == 1227896918 then
		return 7
	elseif itemid == 1227897143 then
		return 7
	elseif itemid == 1227897144 then
		return 7
	elseif itemid == 1227897145 then
		return 5
	elseif itemid == 1227897153 then
		return 5
	elseif itemid == 1227897154 then
		return 7
	elseif itemid == 1227897155 then
		return 7
	elseif itemid == 1227897156 then
		return 7
	end
	return -1
end
--武器熟练度
function WeaponQiHe(u, uc, itemid)
	local r = 0.0
	local level = WeaponLevel(itemid)
	--call BJDebugMsg("什么情况4，"+I2S(level))
	if level == 0 then
		r = 7.0
	elseif level == 1 then
		r = 6.0
	elseif level == 2 then
		r = 5.0
	elseif level == 3 then
		r = 4.5
	elseif level == 4 then
		r = 4.0
	elseif level == 5 then
		r = 3.0
	elseif level == 6 then
		r = 2.5
	elseif level == 7 then
		r = 2.0
	end
	if LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid) < 3000.0 * (1 + WeaponLevel(itemid)) or LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid) < 5000.0 * (1 + WeaponLevel(itemid)) and Ce[1 + GetPlayerId(GetOwningPlayer(u))] == 3 then
		if ModuloInteger(GetUnitPointValue(uc), 50) ~= 0 and (GetUnitPointValue(uc) // 100 == 1 or GetUnitPointValue(uc) // 100 >= 5) then
			SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid, LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid) + r * 200 * udg_lilianxishu[1 + GetPlayerId(GetOwningPlayer(u))] * wugongxiuwei[1 + GetPlayerId(GetOwningPlayer(u))])
		else
			SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid, LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid) + r * 2 * udg_lilianxishu[1 + GetPlayerId(GetOwningPlayer(u))] * wugongxiuwei[1 + GetPlayerId(GetOwningPlayer(u))])
		end
	end
	if udg_bqdsbool[1 + GetPlayerId(GetOwningPlayer(u))] == true and LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid) < 10000.0 * (1 + WeaponLevel(itemid)) then
		SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid, LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), itemid) + r * 6 * udg_lilianxishu[1 + GetPlayerId(GetOwningPlayer(u))] * wugongxiuwei[1 + GetPlayerId(GetOwningPlayer(u))])
	end
--call BJDebugMsg("什么情况2，"+R2S(r)+","+R2S(LoadReal(YDHT,GetHandleId(GetOwningPlayer(u)),itemid)))
end
--初始化武器耐久度
function WeaponNaiJiu(it)
	local level = WeaponLevel(GetItemTypeId(it))
	local i = 0
	if level == 0 then
		i = 400
	elseif level == 1 then
		i = 800
	elseif level == 2 then
		i = 1600
	elseif level == 3 then
		i = 2400
	elseif level == 4 then
		i = 3200
	elseif level == 5 then
		i = 4400
	elseif level == 6 then
		i = 5400
	elseif level == 7 then
		i = 10000
	end
	return i
end
function WeaponPoSun_Condition()
	return IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetKillingUnit())) and GetPlayerController(GetOwningPlayer(GetKillingUnit())) == MAP_CONTROL_USER and GetPlayerSlotState(GetOwningPlayer(GetKillingUnit())) == PLAYER_SLOT_STATE_PLAYING
end
--武器耐久度
function WeaponPoSun()
	local u = GetKillingUnit()
	local p = GetOwningPlayer(u)
	local j = 1 + GetPlayerId(p)
	local i = 0
	local it = nil
	i = 1
	for _ in _loop_() do
		if i > 6 then break end
		if GetItemType(UnitItemInSlotBJ(GetKillingUnit(), i)) == ITEM_TYPE_ARTIFACT then
			it = UnitItemInSlotBJ(GetKillingUnit(), i)
			if GetItemTypeId(it) == 1227895379 then
				SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it), 2000)
			elseif GetItemTypeId(it) == 1227895373 then
				SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it), 6000)
			elseif GetItemTypeId(it) == 1227895377 then
				SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it), 10000)
			elseif GetItemTypeId(it) == 1227895378 then
				SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it), 14000)
			elseif GetItemTypeId(it) == 1227895376 then
				SaveReal(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it), 20000)
			end
			--非镇妖
			if GetItemTypeId(it) ~= 1227895379 and GetItemTypeId(it) ~= 1227895373 and GetItemTypeId(it) ~= 1227895377 and GetItemTypeId(it) ~= 1227895378 and GetItemTypeId(it) ~= 1227895376 then
				WeaponQiHe(u, GetTriggerUnit(), GetItemTypeId(it))
				if udg_bqdsbool[j] == false and Ce[j] == 3 then
					if LoadBoolean(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it)) == false and LoadReal(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it)) >= 5000.0 * (1 + WeaponLevel(GetItemTypeId(it))) then
						--set udg_bqds[j] = udg_bqds[j] + 1
						SaveBoolean(YDHT, GetHandleId(GetOwningPlayer(u)), GetItemTypeId(it), true)
						DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您炼成了第" .. (I2S(udg_bqds[j]) or "") .. "把武器，您需要炼成3把武器才能获得兵器大师哦")
					end
				end
				--     if udg_bqds[j]>=3 and udg_bqdsbool[j]==false and Ce[j]==3 then
				--      set udg_bqdsbool[j]=true
				--      if udg_zhangmen[j]==true then
				--else
				--	call SaveStr(YDHT, GetHandleId(p), GetHandleId(p),"〓兵器大师〓"+LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
				--endif
				--call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜"+GetPlayerName(p)+"获得兵器大师")
				--call SetPlayerName(p, "〓兵器大师〓"+GetPlayerName(p))
				--     endif
				if LoadInteger(YDHT, GetHandleId(it), 0) > 0 then
					if Ce[1 + GetPlayerId(GetOwningPlayer(u))] ~= 3 then
						SaveInteger(YDHT, GetHandleId(it), 0, LoadInteger(YDHT, GetHandleId(it), 0) - 1)
					end
				end
			--if LoadInteger(YDHT,GetHandleId(it),0)<=0 then
			--	call FlushChildHashtable(YDHT,GetHandleId(it))
			--	call RemoveItem(it)
			--	call DisplayTextToPlayer(GetOwningPlayer(u),0,0,"|cFFFF0000你的武器已损坏，请及时更换武器")
			--endif
			end
		end
		i = i + 1
	end
	--call BJDebugMsg(GetItemName(it))
	u = nil
	it = nil
end
--商店购买武器减耐久度
function BuyWeapon_Condition()
	return GetItemTypeId(GetManipulatedItem()) == 1227895110 or GetItemTypeId(GetManipulatedItem()) == 1227895094 or GetItemTypeId(GetManipulatedItem()) == 1227895091
end
function BuyWeapon()
	if LoadInteger(YDHT, GetHandleId(GetManipulatedItem()), 0) == 0 then
		SaveInteger(YDHT, GetHandleId(GetManipulatedItem()), 0, WeaponNaiJiu(GetManipulatedItem()) // 2)
	end
end
function init()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(WeaponPoSun_Condition))
	TriggerAddAction(t, WeaponPoSun)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(BuyWeapon_Condition))
	TriggerAddAction(t, BuyWeapon)
	t = nil
end
--重写创造物品的函数
function createitemloc(id, loc)
	local it = nil
	it = CreateItemLoc(id, loc)
	if GetItemType(it) == ITEM_TYPE_ARTIFACT then
		SaveInteger(YDHT, GetHandleId(it), 0, WeaponNaiJiu(it))
	end
	it = nil
	return bj_lastCreatedItem
end
function createitem(id, x, y)
	local it = nil
	it = CreateItem(id, x, y)
	if GetItemType(it) == ITEM_TYPE_ARTIFACT then
		SaveInteger(YDHT, GetHandleId(it), 0, WeaponNaiJiu(it))
	end
	it = nil
	return bj_lastCreatedItem
end
function unitadditembyidswapped(itemId, whichHero)
	local it = nil
	it = UnitAddItemByIdSwapped(itemId, whichHero)
	if GetItemType(it) == ITEM_TYPE_ARTIFACT then
		SaveInteger(YDHT, GetHandleId(it), 0, WeaponNaiJiu(it))
	end
	it = nil
	return bj_lastCreatedItem
end

require 'util.ydwe'
--===========================================================================
-- 
-- 决战江湖1.55正式版
-- 
--   Warcraft III map script
--   Generated by the Warcraft III World Editor
--   Date: Sun Oct 14 18:26:51 2018
--   Map Author: 云杨 zei_kale
-- 
--===========================================================================
--***************************************************************************
--*
--*  Global Variables
--*
--***************************************************************************
function InitGlobals()
	local i = 0
	udg_UG_ResidualImage = CreateGroup()
	udg_A_UG = CreateGroup()
	udg_A_Ang = 0
	udg_A_Ang_2 = 0
	udg_A_hurt = 0
	udg_A_num = 0
	udg_x = 0
	udg_y = 0
	udg_A_Int = 0
	udg_Number_player = 0
	i = 0
	for _ in _loop_() do
		if i > 7 then break end
		udg_MeiJuJiFen[i] = 0
		i = i + 1
	end
	i = 0
	for _ in _loop_() do
		if i > 5 then break end
		udg_kurongsharen[i] = 0
		i = i + 1
	end
	i = 0
	for _ in _loop_() do
		if i > 5 then break end
		udg_HuanZhuangCD[i] = false
		i = i + 1
	end
end
--***************************************************************************
--*
--*  Unit Creation
--*
--***************************************************************************
--===========================================================================
function CreateBuildingsForPlayer5()
	local p = Player(5)
	local u
	local unitID
	local t
	local life
	u = CreateUnit(p, 1851945829, -13024.0, -15264.0, 270.0)
	u = CreateUnit(p, 1848651848, -8960.0, -14016.0, 270.0)
	u = CreateUnit(p, 1851945829, 1184.0, -6048.0, 270.0)
	u = CreateUnit(p, 1851945829, -288.0, -13088.0, 270.0)
	u = CreateUnit(p, 1851945829, 544.0, -13024.0, 270.0)
end
--===========================================================================
function CreateUnitsForPlayer5()
	local p = Player(5)
	local u
	local unitID
	local t
	local life
	u = CreateUnit(p, 1865429572, -101.7, -1403.0, 105.88)
	u = CreateUnit(p, 1311780930, 287.2, -405.3, 352.62)
	IssueImmediateOrder(u, "")
	IssueImmediateOrder(u, "")
	IssueImmediateOrder(u, "")
	u = CreateUnit(p, 1865429581, -1132.4, -1892.3, 270.0)
	u = CreateUnit(p, 1865429321, 430.0, 206.6, 180.0)
	u = CreateUnit(p, 1865429557, 434.5, 41.8, 180.0)
	gg_unit_N00I_0116 = CreateUnit(p, 1311780937, 1315.2, -13118.7, 343.22)
	u = CreateUnit(p, 1865429067, -1309.2, -1901.3, 303.52)
end
--===========================================================================
function CreateUnitsForPlayer6()
	local p = Player(6)
	local u
	local unitID
	local t
	local life
	gg_unit_N008_0054 = CreateUnit(p, 1311780920, 460.8, -417.6, 180.0)
	u = CreateUnit(p, 1311780921, 445.4, -223.3, 225.0)
end
--===========================================================================
function CreateNeutralHostile()
	local p = Player(PLAYER_NEUTRAL_AGGRESSIVE)
	local u
	local unitID
	local t
	local life
	u = CreateUnit(p, 1752328550, 12079.0, 8383.5, 94.211)
	u = CreateUnit(p, 1752328550, 12335.5, 8511.9, 240.795)
	u = CreateUnit(p, 1752328550, 12570.7, 8503.7, 296.64)
	u = CreateUnit(p, 1752328550, 12861.9, 8465.7, 235.587)
	u = CreateUnit(p, 1752328550, 12475.3, 8890.0, 139.454)
	u = CreateUnit(p, 1752328550, 12093.4, 8917.0, 343.234)
	u = CreateUnit(p, 1752328550, 12054.8, 8075.7, 247.892)
	u = CreateUnit(p, 1752328550, 11377.5, 7797.7, 310.505)
	u = CreateUnit(p, 1752328550, 11017.6, 7781.0, 204.451)
	u = CreateUnit(p, 1752328550, 11104.1, 8067.7, 215.416)
	u = CreateUnit(p, 1752328550, 11202.7, 8446.2, 52.648)
	u = CreateUnit(p, 1752328550, 12905.5, 9070.1, 1.956)
	u = CreateUnit(p, 1752328550, 13889.7, 9209.3, 246.541)
	u = CreateUnit(p, 1752328550, 13320.3, 9412.1, 170.48)
	u = CreateUnit(p, 1215130471, 12555.2, 9450.8, 0.04)
	IssueImmediateOrder(u, "")
	u = CreateUnit(p, 1752328550, 13040.2, 9945.3, 320.393)
	u = CreateUnit(p, 1752328550, 12964.0, 10367.6, 268.042)
	u = CreateUnit(p, 1747988558, -4898.7, -12198.6, 90.0)
	u = CreateUnit(p, 1848651860, -3273.7, -12211.5, 90.0)
	u = CreateUnit(p, 1848651861, -2284.7, -11132.1, 270.0)
	u = CreateUnit(p, 1848651859, -4088.4, -11124.8, 270.0)
	gg_unit_n00M_0131 = CreateUnit(p, 1848651853, -3348.2, -15208.4, 56.22)
	gg_unit_n00N_0132 = CreateUnit(p, 1848651854, -3272.5, -15268.8, 90.0)
end
--===========================================================================
function CreateNeutralPassive()
	local p = Player(PLAYER_NEUTRAL_PASSIVE)
	local u
	local unitID
	local t
	local life
	gg_unit_nvl2_0005 = CreateUnit(p, 1853254706, -12666.8, -12668.0, 270.0)
	u = CreateUnit(p, 1865429571, -11675.7, -12657.2, 270.0)
	u = CreateUnit(p, 1751543663, 13113.9, -12953.1, 180.0)
	u = CreateUnit(p, 1751543663, 13098.9, -12608.4, 180.0)
	u = CreateUnit(p, 1751543663, 13106.8, -12266.3, 180.0)
	u = CreateUnit(p, 1751543663, 13125.6, -11941.2, 180.0)
	u = CreateUnit(p, 1751543663, 13110.6, -11596.5, 180.0)
	u = CreateUnit(p, 1751543663, 13118.5, -11254.4, 180.0)
	u = CreateUnit(p, 1751543663, 10471.2, -12877.6, 0.0)
	u = CreateUnit(p, 1751543663, 10456.2, -12532.9, 0.0)
	u = CreateUnit(p, 1751543663, 10464.1, -12190.8, 0.0)
	u = CreateUnit(p, 1751543663, 10482.9, -11865.7, 0.0)
	u = CreateUnit(p, 1751543663, 10467.9, -11521.0, 0.0)
	u = CreateUnit(p, 1751543663, 10475.8, -11178.9, 0.0)
	u = CreateUnit(p, 1751543663, 10788.2, -13132.6, 90.0)
	u = CreateUnit(p, 1751543663, 11123.4, -13127.2, 90.0)
	u = CreateUnit(p, 1751543663, 11476.5, -13127.2, 90.0)
	u = CreateUnit(p, 1751543663, 11789.3, -13119.0, 90.0)
	u = CreateUnit(p, 1751543663, 12117.5, -13126.3, 90.0)
	u = CreateUnit(p, 1751543663, 12752.7, -13125.3, 90.0)
	u = CreateUnit(p, 1751543663, 12439.1, -13131.0, 90.0)
	u = CreateUnit(p, 1751543663, 10865.3, -11041.6, 270.0)
	u = CreateUnit(p, 1751543663, 11200.6, -11052.2, 270.0)
	u = CreateUnit(p, 1751543663, 11553.7, -11052.2, 270.0)
	u = CreateUnit(p, 1751543663, 11866.5, -11044.1, 270.0)
	u = CreateUnit(p, 1751543663, 12194.7, -11051.3, 270.0)
	u = CreateUnit(p, 1751543663, 12829.8, -11050.3, 270.0)
	u = CreateUnit(p, 1751543663, 12516.3, -11048.0, 270.0)
	u = CreateUnit(p, 1751282536, 8756.7, 2231.1, 159.134)
	u = CreateUnit(p, 1751410035, 8725.7, 1444.5, 148.343)
	u = CreateUnit(p, 1869050475, 10149.5, 2965.0, 12.49)
	u = CreateUnit(p, 1853253996, 9481.5, 2020.6, 153.11)
	u = CreateUnit(p, 1853253996, 11946.6, 1409.1, 153.11)
	u = CreateUnit(p, 1853253996, 13162.3, -376.3, 358.11)
	gg_unit_N007_0055 = CreateUnit(p, 1311780919, 463.2, -595.1, 135.0)
	u = CreateUnit(p, 1853058150, 10997.8, 3200.4, 270.0)
	u = CreateUnit(p, 1853320818, 10992.4, 2448.7, 90.0)
	gg_unit_n00E_0066 = CreateUnit(p, 1848651845, 14666.0, 1079.2, 89.34)
	u = CreateUnit(p, 1865429554, 10129.1, 2787.2, 0.0)
	u = CreateUnit(p, 1848651841, 10780.4, 3209.3, 270.0)
	u = CreateUnit(p, 1865429336, 12561.4, 1703.5, 225.0)
	u = CreateUnit(p, 1853253996, 10161.2, 3604.7, 103.352)
	u = CreateUnit(p, 1853253996, 11325.7, 3482.4, 240.168)
	u = CreateUnit(p, 1853253996, 11322.3, 743.0, 84.356)
	u = CreateUnit(p, 1853253996, 10865.2, -59.7, 238.96)
	u = CreateUnit(p, 1853253996, 12978.8, -742.5, 322.47)
	u = CreateUnit(p, 1853253996, 13486.5, -796.9, 151.045)
	u = CreateUnit(p, 1853253996, 13883.7, -1122.0, 87.959)
	u = CreateUnit(p, 1853253996, 14401.0, -496.5, 7.174)
	u = CreateUnit(p, 1853253996, 12518.7, -847.8, 224.183)
	u = CreateUnit(p, 1853253996, 11989.6, -691.0, 48.506)
	u = CreateUnit(p, 1853253996, 10697.4, 1028.4, 2.142)
	u = CreateUnit(p, 1853253996, 9993.2, 838.7, 130.62)
	u = CreateUnit(p, 1853253996, 9880.9, -312.0, 83.993)
	u = CreateUnit(p, 1865429049, -2214.0, 469.5, 315.03)
	u = CreateUnit(p, 1865429337, -2283.0, 311.9, 0.0)
	u = CreateUnit(p, 1865429338, -2063.7, 512.1, 270.04)
	u = CreateUnit(p, 1865429553, 10788.7, 2432.2, 90.18)
	u = CreateUnit(p, 1311780934, 1861.0, -4063.8, 270.0)
	u = CreateUnit(p, 1865429559, -8391.7, -13686.5, 180.0)
	u = CreateUnit(p, 1865429560, -9565.3, -13673.1, 0.0)
	u = CreateUnit(p, 1865429569, -9010.1, -13208.2, 270.0)
	u = CreateUnit(p, 1865429561, -9519.1, -14831.5, 0.0)
	u = CreateUnit(p, 1865429570, -8490.7, -14848.6, 180.0)
	u = CreateUnit(p, 1751871081, -11717.6, -13939.5, 180.0)
	u = CreateUnit(p, 1751871081, -12586.0, -13906.9, 0.0)
	u = CreateUnit(p, 1865429580, 1781.6, -4106.0, 270.0)
end
--===========================================================================
function CreatePlayerBuildings()
	CreateBuildingsForPlayer5()
end
--===========================================================================
function CreatePlayerUnits()
	CreateUnitsForPlayer5()
	CreateUnitsForPlayer6()
end
--===========================================================================
function CreateAllUnits()
	CreateBuildingsForPlayer5() -- INLINED!!
	CreateNeutralHostile()
	CreateNeutralPassive()
	CreatePlayerUnits()
end
--***************************************************************************
--*
--*  Custom Script Code
--*
--***************************************************************************
--TESH.scrollpos=0
--TESH.alwaysfold=0
--#include "./YDWELocalVariable.j"
--==================武器契合度系统开始==================//
--==================武器契合度系统结束==================//
--判断单位是否为神兽
function IsUnitMonster(u)
	if GetUnitTypeId(u) == 1865429316 or GetUnitTypeId(u) == 1865429317 or GetUnitTypeId(u) == 1865429318 or GetUnitTypeId(u) == 1865429319 then
		return true
	end
	return false
end
--A项和B项性格
function AddCharacterABuff(u, characterA)
	UnitAddAbilityBJ(1093678646, u)
	SetPlayerAbilityAvailableBJ(false, 1093678646, GetOwningPlayer(u))
	SetUnitAbilityLevel(u, 1093678648, characterA)
end
function AddCharacterBBuff(u, characterB)
	UnitAddAbilityBJ(1093678647, u)
	SetPlayerAbilityAvailableBJ(false, 1093678647, GetOwningPlayer(u))
	SetUnitAbilityLevel(u, 1093678649, characterB)
end
function XingGeA(xingge)
	local s = nil
	if xingge == 1 then
		s = "愚钝"
	elseif xingge == 2 then
		s = "笨拙"
	elseif xingge == 3 then
		s = "平平"
	elseif xingge == 4 then
		s = "聪明"
	elseif xingge == 5 then
		s = "聪慧"
	end
	return s
end
function XingGeB(xingge)
	local s = nil
	if xingge == 1 then
		s = "浮躁"
	elseif xingge == 2 then
		s = "轻浮"
	elseif xingge == 3 then
		s = "耐心"
	elseif xingge == 4 then
		s = "稳重"
	elseif xingge == 5 then
		s = "沉稳"
	end
	return s
end
--副本倒计时
function FBdaojishi()
	local p = GetTriggerPlayer()
	DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFF00331号副本重置倒计时：|cFF33FFFF" .. (I2S(R2I(TimerGetRemaining(Hd[1]))) or "") .. "秒")
	DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFF00332号副本重置倒计时：|cFF33FFFF" .. (I2S(R2I(TimerGetRemaining(Hd[2]))) or "") .. "秒")
	DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFF00333号副本重置倒计时：|cFF33FFFF" .. (I2S(R2I(TimerGetRemaining(Hd[3]))) or "") .. "秒")
	DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFF00334号副本重置倒计时：|cFF33FFFF" .. (I2S(R2I(TimerGetRemaining(Hd[4]))) or "") .. "秒")
	DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFF00335号副本重置倒计时：|cFF33FFFF" .. (I2S(R2I(TimerGetRemaining(Hd[5]))) or "") .. "秒")
	DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFF00336号副本重置倒计时：|cFF33FFFF" .. (I2S(R2I(TimerGetRemaining(Hd[6]))) or "") .. "秒")
	p = nil
end
--伴侣属性
function BanLvShuXing()
	local t = GetTriggeringTrigger()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	bj_forLoopBIndex = 1
	bj_forLoopBIndexEnd = MAX_BAN_LV_NUM
	for _ in _loop_() do
		if bj_forLoopBIndex > bj_forLoopBIndexEnd then break end
		if GetUnitTypeId(k8[i]) == R8[bj_forLoopBIndex] then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFFF00伴侣：" .. (GetUnitName(k8[i]) or ""))
			if udg_blgg[bj_forLoopBIndex] > 0 then
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF根骨 ：   " .. (I2S(udg_blgg[bj_forLoopBIndex]) or ""))
			end
			if udg_blwx[bj_forLoopBIndex] > 0 then
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF悟性 ：   " .. (I2S(udg_blwx[bj_forLoopBIndex]) or ""))
			end
			if udg_bljm[bj_forLoopBIndex] > 0 then
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF经脉 ：   " .. (I2S(udg_bljm[bj_forLoopBIndex]) or ""))
			end
			if udg_blfy[bj_forLoopBIndex] > 0 then
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF福缘 ：   " .. (I2S(udg_blfy[bj_forLoopBIndex]) or ""))
			end
			if udg_bldp[bj_forLoopBIndex] > 0 then
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF胆魄 ：   " .. (I2S(udg_bldp[bj_forLoopBIndex]) or ""))
			end
			if udg_blys[bj_forLoopBIndex] > 0 then
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF医术 ：   " .. (I2S(udg_blys[bj_forLoopBIndex]) or ""))
			end
		end
		bj_forLoopBIndex = bj_forLoopBIndex + 1
	end
	t = nil
	p = nil
end
function IsYaoCao(id)
	local i = 1
	for _ in _loop_() do
		if i > 12 then break end
		if id == YaoCao[i] then
			return true
		end
		i = i + 1
	end
	return false
end
--宝物掉落函数
function BaoWuDiaoLuo(u, l__ut, baolv1, id1, id2, id3, id4, baolv2, id5)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(l__ut)
	local idn = _array_(0)
	local j = 4
	idn[1] = id1
	idn[2] = id2
	idn[3] = id3
	idn[4] = id4
	if id4 == 0 then
		j = 3
	end
	if id3 == 0 then
		j = 2
	end
	if id2 == 0 then
		j = 1
	end
	if id1 == 0 then
		j = 0
	end
	if GetRandomInt(1, 1000) <= fuyuan[i] or GetRandomInt(1, 100) <= 35 and Ce[i] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		--第一类宝物
		if j > 0 then
			if GetRandomInt(0, 100) <= baolv1 then
				createitemloc(idn[GetRandomInt(1, j)], loc)
			end
		end
		--第二类宝物（药物或古董）
		if baolv2 ~= 0 then
			if GetRandomInt(1, 100) <= baolv2 then
				createitemloc(id5, loc)
				if IsYaoCao(id5) and udg_lddsbool[i] == true then
					createitemloc(id5, loc)
				end
			end
		end
		N7 = N7 + 1
	end
	RemoveLocation(loc)
	p = nil
	loc = nil
end
--击杀怪物后百分比概率掉落宝物的函数
--如果副职为寻宝师或者1-1000间取随机数小于福缘成立的话，双倍掉落宝物
--u是击杀者
--possibility:第一种宝物掉落的概率
--itemId:第一种宝物的id
--itemId2:第二种宝物掉落的id，如果没有第二种宝物可以为0
function dropItem(u, itemId, itemId2, possibility)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(u)
	if GetRandomInt(1, 1000) <= fuyuan[i] or GetRandomInt(1, 100) <= 30 and Ce[i] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(0, 100) <= possibility then
			createitemloc(itemId, loc)
		else
			createitemloc(itemId2, loc)
		end
		N7 = N7 + 1
	end
	RemoveLocation(loc)
	u = nil
	p = nil
	loc = nil
end
--查询药性
function YaoXing()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	local yin = 0
	local yang = 0
	bj_forLoopAIndex = 1
	bj_forLoopAIndexEnd = 6
	for _ in _loop_() do
		if bj_forLoopAIndex > bj_forLoopAIndexEnd then break end
		if GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[11] then
			yin = yin + 5
			yang = yang + 1
		elseif GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[9] then
			yin = yin + 0
			yang = yang + 4
		elseif GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[10] then
			yin = yin + 3
			yang = yang + 4
		elseif GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[8] then
			yin = yin + 4
			yang = yang + 3
		elseif GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[7] then
			yin = yin + 4
			yang = yang + 0
		elseif GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[12] then
			yin = yin + 1
			yang = yang + 5
		elseif GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[6] then
			yin = yin + 2
			yang = yang + 3
		elseif GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[1] then
			yin = yin + 2
			yang = yang + 1
		elseif GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[2] then
			yin = yin + 1
			yang = yang + 2
		elseif GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[3] then
			yin = yin + 3
			yang = yang - 1
		elseif GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[4] then
			yin = yin - 1
			yang = yang + 3
		elseif GetItemTypeId(UnitItemInSlotBJ(P4[i], bj_forLoopAIndex)) == YaoCao[5] then
			yin = yin + 3
			yang = yang + 2
		end
		bj_forLoopAIndex = bj_forLoopAIndex + 1
	end
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 10.0, "|cff00ff33总药性（阴）：" .. (I2S(yin) or ""))
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 10.0, "|cff00ff33总药性（阳）：" .. (I2S(yang) or ""))
end
--转化剑意
function TransferJY()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	if xd[i] == 0 then
		DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000英雄，你的剑意不够哦")
	else
		if yd[i] == 1 then
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00当前已将" .. (I2S(xd[i]) or "") .. "点剑意转化成了悟性")
		elseif yd[i] == 2 then
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00当前已将" .. (I2S(xd[i]) or "") .. "点剑意转化成了根骨")
		elseif yd[i] == 3 then
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00当前已将" .. (I2S(xd[i]) or "") .. "点剑意转化成了胆魄")
		elseif yd[i] == 4 then
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00当前已将" .. (I2S(xd[i]) or "") .. "点剑意转化成了医术")
		elseif yd[i] == 5 then
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00当前已将" .. (I2S(xd[i]) or "") .. "点剑意转化成了福缘")
		elseif yd[i] == 6 then
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00当前已将" .. (I2S(xd[i]) or "") .. "点剑意转化成了经脉")
		end
		if GetPlayerState(p, PLAYER_STATE_RESOURCE_LUMBER) < 5 then
			DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000转化剑意需要至少5个黄金")
		else
			DialogSetMessage(v8[i], "你拥有" .. (I2S(xd[i]) or "") .. "点剑意，请选择要转化的属性")
			DialogAddButtonBJ(v8[i], "根骨")
			w8[i] = bj_lastCreatedButton
			DialogAddButtonBJ(v8[i], "悟性")
			y8[i] = bj_lastCreatedButton
			DialogAddButtonBJ(v8[i], "福缘")
			z8[i] = bj_lastCreatedButton
			DialogAddButtonBJ(v8[i], "胆魄")
			A8[i] = bj_lastCreatedButton
			DialogAddButtonBJ(v8[i], "医术")
			a8[i] = bj_lastCreatedButton
			DialogAddButtonBJ(v8[i], "经脉")
			x8[i] = bj_lastCreatedButton
			DialogAddButtonBJ(v8[i], "取消")
			B8[i] = bj_lastCreatedButton
			DialogDisplay(p, v8[i], true)
			Ad[i] = true
		end
	end
end
function GetGeoNormRandomReal(r1, r2)
	local rr1 = YDWELogarithm__Log2(r1 * 1.0) * 0.30103 -- INLINED!!
	local rr2 = YDWELogarithm__Log2(r2 * 1.0) * 0.30103 -- INLINED!!
	local rr3 = GetRandomReal(rr1, rr2)
	local rr4 = GetRandomReal(rr1, rr2)
	local rr5 = GetRandomReal(rr1, rr2)
	local rr6 = GetRandomReal(rr1, rr2)
	local rr7 = GetRandomReal(rr1, rr2)
	local rr8 = GetRandomReal(rr1, rr2)
	local rr9 = (rr3 + rr4 + rr5 + rr6 + rr7 + rr8) / 6.0
	return Pow(10.0, rr9)
end
--返回玩家数
function GetNumPlayer()
	local i = 0
	local p = nil
	local n = 0
	for _ in _loop_() do
		if i > 11 then break end
		p = Player(i)
		if GetPlayerController(p) == MAP_CONTROL_USER and GetPlayerSlotState(p) == PLAYER_SLOT_STATE_PLAYING then
			n = n + 1
		end
		i = i + 1
	end
	p = nil
	return n
end
function UnitTypeNotNull(u, i)
	return IsUnitType(u, i) ~= nil
end
--距离loc r1距离r2角度的点
function pu(loc, r1, r2)
	return Location(GetLocationX(loc) + r1 * Cos(r2 * bj_DEGTORAD), GetLocationY(loc) + r1 * Sin(r2 * bj_DEGTORAD))
end
function tu()
	local dx = GetDestructableX(GetFilterDestructable()) - fu
	local dy = GetDestructableY(GetFilterDestructable()) - gu
	return dx * dx + dy * dy <= bj_enumDestructableRadius
end
function uu(vu, wu)
	local g = nil
	bj_stockPickedItemType = vu
	bj_stockPickedItemLevel = wu
	g = CreateGroup()
	GroupEnumUnitsOfType(g, "marketplace", ju)
	ForGroup(g, UpdateEachStockBuildingEnum)
	DestroyGroup(g)
	g = nil
end
function xu()
	local pickedItemId
	local yu
	local zu = 0
	local Au = 0
	local wu
	wu = 1
	for _ in _loop_() do
		if bj_stockAllowedPermanent[wu] then
			Au = Au + 1
			if GetRandomInt(1, Au) == 1 then
				yu = ITEM_TYPE_PERMANENT
				zu = wu
			end
		end
		if bj_stockAllowedCharged[wu] then
			Au = Au + 1
			if GetRandomInt(1, Au) == 1 then
				yu = ITEM_TYPE_CHARGED
				zu = wu
			end
		end
		if bj_stockAllowedArtifact[wu] then
			Au = Au + 1
			if GetRandomInt(1, Au) == 1 then
				yu = ITEM_TYPE_ARTIFACT
				zu = wu
			end
		end
		wu = wu + 1
		if wu > 10 then break end
	end
	if Au == 0 then
		yu = nil
		return
	end
	uu(yu, zu)
	yu = nil
end
function au()
	xu()
	TimerStart(bj_stockUpdateTimer, bj_STOCK_RESTOCK_INTERVAL, true, xu)
end
function bu()
	return true
end
function Eu()
	local Fu = Kt
	if Fu ~= 0 then
		Kt = Mt[Fu]
	else
		Lt = Lt + 1
		Fu = Lt
	end
	if Fu > 8190 then
		return 0
	end
	Pt[Fu] = nil
	Qt[Fu] = nil
	Rt[Fu] = 0.0
	St[Fu] = 0.0
	Tt[Fu] = 0.0
	Ut[Fu] = 0.0
	Vt[Fu] = 0.0
	Wt[Fu] = 0.0
	Xt[Fu] = 0.0
	Yt[Fu] = 0.0
	Zt[Fu] = 0
	Mt[Fu] = -1
	return Fu
end
function Gu(Fu)
	if Fu == nil then
		return
	elseif Mt[Fu] ~= -1 then
		return
	end
	Mt[Fu] = Kt
	Kt = Fu
end
function Hu()
	YDHT = InitHashtable()
end
function Nu(Ou, cu)
	local i = 0
	for _ in _loop_() do
		if i >= M then break end
		if L[i] == cu then
			w = Ou
			if K[i] ~= nil and TriggerEvaluate(K[i]) and IsTriggerEnabled(K[i]) then
				TriggerExecute(K[i])
			end
		end
		i = i + 1
	end
end
function Pu()
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 30, "|cFF1E90FF当前编辑器版本为： |r|cFF00FF00YDWE 1.24.5.1710")
	return false
end
function Qu()
	local t = CreateTrigger()
	local i = 0
	for _ in _loop_() do
		if i == 12 then break end
		TriggerRegisterPlayerChatEvent(t, Player(i), "YDWE Version", true)
		i = i + 1
	end
	TriggerAddCondition(t, Condition(Pu))
	t = nil
end
function SetCamera()
	I = GetCameraBoundMinX() - GetCameraMargin(CAMERA_MARGIN_LEFT)
	J = GetCameraBoundMinY() - GetCameraMargin(CAMERA_MARGIN_BOTTOM)
	H = GetCameraBoundMaxX() + GetCameraMargin(CAMERA_MARGIN_RIGHT)
	l = GetCameraBoundMaxY() + GetCameraMargin(CAMERA_MARGIN_TOP)
	Qu()
end
--万能属性系统
--以下函数仅仅是让技能ID出现在代码里，不然SLK优化器会删除这些技能
function DisplayAllAbilityId()
	local aid = 0
	aid = 1497656368
	aid = 1497656369
	aid = 1497656370
	aid = 1497656371
	aid = 1497656372
	aid = 1497656373
	aid = 1497656374
	aid = 1497656375
	aid = 1497656376
	aid = 1497656377
	aid = 1497656417
	aid = 1497656418
	aid = 1497656419
	aid = 1497656420
	aid = 1497656421
	aid = 1497656422
	aid = 1497656624
	aid = 1497656625
	aid = 1497656626
	aid = 1497656627
	aid = 1497656628
	aid = 1497656629
	aid = 1497656630
	aid = 1497656631
	aid = 1497656632
	aid = 1497656633
	aid = 1497656673
	aid = 1497656674
	aid = 1497656675
	aid = 1497656676
	aid = 1497656677
	aid = 1497656678
	aid = 1497654064
	aid = 1497654065
	aid = 1497654066
	aid = 1497654067
	aid = 1497654068
	aid = 1497654069
	aid = 1497654070
	aid = 1497654071
	aid = 1497654072
	aid = 1497654073
	aid = 1497654113
	aid = 1497654114
	aid = 1497654115
	aid = 1497653808
	aid = 1497653809
	aid = 1497653810
	aid = 1497653811
	aid = 1497653812
	aid = 1497653813
	aid = 1497653814
	aid = 1497653815
	aid = 1497653816
	aid = 1497653817
	aid = 1497653857
	aid = 1497653858
	aid = 1497653859
	aid = 1497653860
	aid = 1497653861
	aid = 1497653863
	aid = 1497653864
	aid = 1497653865
	aid = 1497653866
	aid = 1497653867
	aid = 1497653868
	aid = 1497653869
	aid = 1497653870
end
function kv()
	local i = 0
	local m = 0
	P[0] = 0
	P[1] = 15
	P[2] = 30
	P[3] = 43
	P[4] = 67
	Q[0] = 15
	Q[1] = 15
	Q[2] = 13
	Q[3] = 24
	for _ in _loop_() do
		if i > 9 then break end
		V[i] = 48 + m
		m = m + 1
		i = i + 1
	end
	m = 0
	for _ in _loop_() do
		if i > 26 then break end
		V[i] = 97 + m
		m = m + 1
		i = i + 1
	end
	i = 0
	m = 0
	for _ in _loop_() do
		if m > Q[0] - 1 then break end
		S[i] = 1497656368 - 48 + V[m]
		i = i + 1
		m = m + 1
	end
	m = 0
	for _ in _loop_() do
		if m > Q[1] - 1 then break end
		S[i] = 1497656624 - 48 + V[m]
		i = i + 1
		m = m + 1
	end
	m = 0
	for _ in _loop_() do
		if m > Q[2] - 1 then break end
		S[i] = 1497654064 - 48 + V[m]
		i = i + 1
		m = m + 1
	end
	m = 0
	for _ in _loop_() do
		if m > Q[3] - 1 then break end
		S[i] = 1497653808 - 48 + V[m]
		i = i + 1
		m = m + 1
	end
end
function mv()
	local i = 1
	local u
	local n = 0
	local nv = 0
	kv()
	for _ in _loop_() do
		i = 1
		T[nv] = 1
		for _ in _loop_() do
			T[nv + 1] = T[nv] * 2
			nv = nv + 1
			i = i + 1
			if i == Q[n] then break end
		end
		X[n] = T[nv] - 1
		Y[n] =  - T[nv]
		nv = nv + 1
		n = n + 1
		if n >= 4 then break end
	end
	if W then
		u = CreateUnit(Player(15), U, 0, 0, 0)
		i = 0
		for _ in _loop_() do
			if i == P[5] then break end
			UnitAddAbility(u, S[i])
			i = i + 1
		end
		RemoveUnit(u)
		u = nil
	end
end
function ov(pv)
	local f = CreateForce()
	ForceAddPlayer(f, pv)
	Z = f
	f = nil
	return Z
end
function FetchUnitItem(u, j)
	local i = 0
	for _ in _loop_() do
		d4 = UnitItemInSlot(u, i)
		if GetItemTypeId(d4) == j then
			return d4
		end
		i = i + 1
		if i >= 6 then break end
	end
	return nil
end
--function YDWEGetUnitsInRangeOfLocMatchingNull takes real radius,location whichLocation,boolexpr filter returns group
--    local group g= CreateGroup()
--    call GroupEnumUnitsInRangeOfLoc(g, whichLocation, radius, filter)
--    call DestroyBoolExpr(filter)
--    set yd_NullTempGroup=g
--    set g=null
--    return yd_NullTempGroup
--endfunction
function YDWEGetUnitsInRectOfPlayerNull(r, whichPlayer)
	local g = CreateGroup()
	bj_groupEnumOwningPlayer = whichPlayer
	GroupEnumUnitsInRect(g, r, filterGetUnitsInRectOfPlayer)
	yd_NullTempGroup = g
	g = nil
	return yd_NullTempGroup
end
function YDWEGetRandomSubGroupEnumNull()
	if bj_randomSubGroupWant > 0 then
		if bj_randomSubGroupWant >= bj_randomSubGroupTotal or GetRandomInt(1, bj_randomSubGroupTotal) <= bj_randomSubGroupWant then
			-- We either need every remaining unit, or the unit passed its chance check.
			GroupAddUnit(bj_randomSubGroupGroup, GetEnumUnit())
			bj_randomSubGroupWant = bj_randomSubGroupWant - 1
		end
	end
	bj_randomSubGroupTotal = bj_randomSubGroupTotal - 1
end
function YDWEGetRandomSubGroupNull(count, sourceGroup)
	bj_randomSubGroupGroup = CreateGroup()
	bj_randomSubGroupWant = count
	bj_randomSubGroupTotal = CountUnitsInGroup(sourceGroup)
	if bj_randomSubGroupWant <= 0 or bj_randomSubGroupTotal <= 0 then
		return bj_randomSubGroupGroup
	end
	ForGroup(sourceGroup, YDWEGetRandomSubGroupEnumNull)
	return bj_randomSubGroupGroup
end
function YDWEGetItemOfTypeFromUnitBJNull(whichUnit, itemId)
	local index = 0
	for _ in _loop_() do
		yd_NullTempItem = UnitItemInSlot(whichUnit, index)
		if GetItemTypeId(yd_NullTempItem) == itemId then
			return yd_NullTempItem
		end
		index = index + 1
		if index >= bj_MAX_INVENTORY then break end
	end
	return nil
end
function YDWETriggerActionUnitRescuedBJNull()
	local theUnit = GetTriggerUnit()
	if IsUnitType(theUnit, UNIT_TYPE_STRUCTURE) then
		RescueUnitBJ(theUnit, GetOwningPlayer(GetRescuer()), bj_rescueChangeColorBldg)
	else
		RescueUnitBJ(theUnit, GetOwningPlayer(GetRescuer()), bj_rescueChangeColorUnit)
	end
	theUnit = nil
end
function YDWETryInitRescuableTriggersBJNull()
	local index
	if bj_rescueUnitBehavior == nil then
		bj_rescueUnitBehavior = CreateTrigger()
		index = 0
		for _ in _loop_() do
			TriggerRegisterPlayerUnitEvent(bj_rescueUnitBehavior, Player(index), EVENT_PLAYER_UNIT_RESCUED, nil)
			index = index + 1
			if index == bj_MAX_PLAYER_SLOTS then break end
		end
		TriggerAddAction(bj_rescueUnitBehavior, YDWETriggerActionUnitRescuedBJNull)
	end
end
function YDWEInitRescuableBehaviorBJNull()
	local index
	index = 0
	for _ in _loop_() do
		-- If at least one player slot is "Rescuable"-controlled, init the
		-- rescue behavior triggers.
		if GetPlayerController(Player(index)) == MAP_CONTROL_RESCUABLE then
			YDWETryInitRescuableTriggersBJNull()
			return
		end
		index = index + 1
		if index == bj_MAX_PLAYERS then break end
	end
end
function wv(r, vv)
	local g = CreateGroup()
	GroupEnumUnitsInRect(g, r, vv)
	DestroyBoolExpr(vv)
	e4 = g
	g = nil
	return e4
end
function AddPlayerUnitIntoGroup(pv, vv)
	local g = CreateGroup()
	GroupEnumUnitsOfPlayer(g, pv, vv)
	DestroyBoolExpr(vv)
	e4 = g
	g = nil
	return e4
end
function yv(mb, zv, Av, av, Bv, bv, Cv)
	local cv = 0
	local Dv = 0
	local Ev = MultiboardGetRowCount(mb)
	local Fv = MultiboardGetColumnCount(mb)
	local Gv = nil
	for _ in _loop_() do
		cv = cv + 1
		if cv > Ev then break end
		if Av == 0 or Av == cv then
			Dv = 0
			for _ in _loop_() do
				Dv = Dv + 1
				if Dv > Fv then break end
				if zv == 0 or zv == Dv then
					Gv = MultiboardGetItem(mb, cv - 1, Dv - 1)
					MultiboardSetItemValueColor(Gv, PercentTo255(av), PercentTo255(Bv), PercentTo255(bv), PercentTo255(100.0 - Cv))
					MultiboardReleaseItem(Gv)
				end
			end
		end
	end
	Gv = nil
end
function DuoMianBan(mb, zv, Av, Iv)
	local cv = 0
	local Dv = 0
	local Ev = MultiboardGetRowCount(mb)
	local Fv = MultiboardGetColumnCount(mb)
	local Gv = nil
	for _ in _loop_() do
		cv = cv + 1
		if cv > Ev then break end
		if Av == 0 or Av == cv then
			Dv = 0
			for _ in _loop_() do
				Dv = Dv + 1
				if Dv > Fv then break end
				if zv == 0 or zv == Dv then
					Gv = MultiboardGetItem(mb, cv - 1, Dv - 1)
					MultiboardSetItemValue(Gv, Iv)
					MultiboardReleaseItem(Gv)
				end
			end
		end
	end
	Gv = nil
end
--function YDWEPolledWaitNull takes real duration returns nothing
--    local timer t
--    local real timeRemaining
--    if ( duration > 0 ) then
--        set t=CreateTimer()
--        call TimerStart(t, duration, false, null)
--        loop
--            set timeRemaining=TimerGetRemaining(t)
--            exitwhen timeRemaining <= 0
--            // If we have a bit of time left, skip past 10% of the remaining
--            // duration instead of checking every interval, to minimize the
--            // polling on long waits.
--            if ( timeRemaining > bj_POLLED_WAIT_SKIP_THRESHOLD ) then
--                call TriggerSleepAction(0.1 * timeRemaining)
--            else
--                call TriggerSleepAction(bj_POLLED_WAIT_INTERVAL)
--            endif
--        endloop
--        call DestroyTimer(t)
--    endif
--    set t=null
--endfunction
--符合条件执行g4[i]触发
function Lv()
	local i = 0
	for _ in _loop_() do
		if i >= h4 then break end
		if g4[i] ~= nil and IsTriggerEnabled(g4[i]) and TriggerEvaluate(g4[i]) then
			TriggerExecute(g4[i])
		end
		i = i + 1
	end
end
--单位没有蝗虫技能，则注册单位伤害信息
function Mv()
	if GetUnitAbilityLevel(GetFilterUnit(), 1097625443) <= 0 then
		TriggerRegisterUnitEvent(f4, GetFilterUnit(), EVENT_UNIT_DAMAGED)
	end
	return false
end
--任意单位受伤害事件
function Nv()
	local t = CreateTrigger()
	local r = CreateRegion()
	local g = CreateGroup()
	RegionAddRect(r, GetWorldBounds())
	--新进入地图的单位受伤害
	TriggerRegisterEnterRegion(t, r, Condition(Mv))
	--地图上已有的单位受伤害
	GroupEnumUnitsInRect(g, GetWorldBounds(), Condition(Mv))
	DestroyGroup(g)
	r = nil
	t = nil
	g = nil
end
function Ov(Pv)
	if Pv == nil then
		return
	end
	if h4 == 0 then
		f4 = CreateTrigger()
		TriggerAddAction(f4, Lv)
		Nv()
	end
	g4[h4] = Pv
	h4 = h4 + 1
end
function Qv()
	local i = 0
	if GetIssuedOrderId() >= 852002 and GetIssuedOrderId() <= 852007 then
		i4 = GetOrderTargetItem()
		for _ in _loop_() do
			if i >= m4 then break end
			if k4[i] ~= nil and IsTriggerEnabled(k4[i]) and TriggerEvaluate(k4[i]) then
				TriggerExecute(k4[i])
			end
			i = i + 1
		end
	end
end
function TriggerAddRect(Sv, r)
	local Tv = CreateRegion()
	RegionAddRect(Tv, r)
	nn4 = Tv
	Tv = nil
	return TriggerRegisterEnterRegion(Sv, nn4, nil)
end
function UnitHaveItem(u, j)
	local i = 0
	if j ~= 0 then
		for _ in _loop_() do
			if GetItemTypeId(UnitItemInSlot(u, i)) == j then
				return true
			end
			i = i + 1
			if i >= 6 then break end
		end
	end
	return false
end
function Vv(pv)
	local g = CreateGroup()
	GroupEnumUnitsOfPlayer(g, pv, nil)
	ForGroup(g, WakePlayerUnitsEnum)
	DestroyGroup(g)
	g = nil
end
function CheckX(x)
	local E2 = GetRectMinX(bj_mapInitialPlayableArea) + 50
	if x < E2 then
		return E2
	end
	E2 = GetRectMaxX(bj_mapInitialPlayableArea) - 50
	if x > E2 then
		return E2
	end
	return x
end
function CheckY(y)
	local E2 = GetRectMinY(bj_mapInitialPlayableArea) + 50
	if y < E2 then
		return E2
	end
	E2 = GetRectMaxY(bj_mapInitialPlayableArea) - 50
	if y > E2 then
		return E2
	end
	return y
end
function Wv()
	local d = 0
	local x = 0.0
	local y = 0.0
	local Xv = 0
	for _ in _loop_() do
		if Xv == Ot then break end
		d = Nt[Xv]
		if Rt[d] > 0 and GetUnitState(Pt[d], UNIT_STATE_LIFE) > 0 and GetUnitState(Qt[d], UNIT_STATE_LIFE) > 0 then
			Tt[d] = Tt[d] + 0.01
			if Tt[d] >= St[d] then
				Xt[d] = Xt[d] + Ut[d]
				Yt[d] = Yt[d] + Vt[d]
				Zt[d] = Zt[d] + Wt[d]
				x = GetUnitX(Pt[d]) + Yt[d] * Cos(Xt[d])
				y = GetUnitY(Pt[d]) + Yt[d] * Sin(Xt[d])
				x = RMinBJ(RMaxBJ(x * 1.0, I), H)
				y = RMinBJ(RMaxBJ(y * 1.0, J), l)
				SetUnitX(Qt[d], CheckX(x))
				SetUnitY(Qt[d], CheckY(y))
				SetUnitFlyHeight(Qt[d], Zt[d], 0.0)
				Tt[d] = 0.0
			end
			Rt[d] = Rt[d] - 0.01
		else
			z = Pt[d]
			Nu(Qt[d], 10)
			Pt[d] = nil
			Qt[d] = nil
			Gu(d)
			Ot = Ot - 1
			Nt[Xv] = Nt[Ot]
			Xv = Xv - 1
		end
		Xv = Xv + 1
	end
	if Ot == 0 then
		PauseTimer(o4)
	end
end
--转圈函数
function Yv(Zv, dw, ew, fw, gw, hw, iw)
	local d = Eu()
	local x1 = GetUnitX(dw)
	local y1 = GetUnitY(dw)
	local x2 = GetUnitX(Zv)
	local y2 = GetUnitY(Zv)
	Pt[d] = dw
	Qt[d] = Zv
	Rt[d] = hw
	St[d] = iw
	Ut[d] = ew * (3.14159 / 180.0)
	Vt[d] = fw
	Wt[d] = gw
	Xt[d] = Atan2(y2 - y1, x2 - x1)
	Yt[d] = SquareRoot((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1))
	Zt[d] = GetUnitFlyHeight(Qt[d])
	Nt[Ot] = d
	Ot = Ot + 1
	if Ot - 1 == 0 then
		TimerStart(o4, 0.01, true, Wv)
	end
end
function jw(kw)
	SetPlayerState(Player(12), PLAYER_STATE_NO_CREEP_SLEEP, IntegerTertiaryOp(kw, 0, 1))
	if not kw then
		Vv(Player(12))
	end
end
function vw(ww)
	local tm = LoadInteger(YDHT, StringHash(I2S(GetHandleId(ww))), StringHash("Timer"))
	FlushChildHashtable(YDHT, StringHash(I2S(GetHandleId(ww))))
	FlushChildHashtable(YDHT, StringHash(I2S(tm)))
	DestroyTimer(LoadTimerHandle(YDHT, StringHash(I2S(GetHandleId(ww))), StringHash("Timer")))
end
function xw()
	local tm = GetExpiredTimer()
	local ww = LoadUnitHandle(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("Pet"))
	local yw = LoadUnitHandle(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("Captain"))
	local x = GetUnitX(yw) - GetUnitX(ww)
	local y = GetUnitY(yw) - GetUnitY(ww)
	local d = x * x + y * y
	local v
	local a
	local e = nil
	local life = LoadReal(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("Life"))
	local p = LoadInteger(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("Percent"))
	v = LoadReal(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("GuardRanger"))
	if GetUnitState(ww, UNIT_STATE_LIFE) > 0 and GetUnitState(yw, UNIT_STATE_LIFE) > 0 then
		if d < v * v then
			if OrderId2String(GetUnitCurrentOrder(ww)) == nil and GetRandomInt(0, 100) < p then
				x = GetUnitX(yw)
				y = GetUnitY(yw)
				d = GetRandomReal(0, v)
				a = GetRandomReal(0, 360)
				IssuePointOrderById(ww, 851990, x + d * CosBJ(a), y + d * SinBJ(a))
			end
		else
			v = LoadReal(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("ReturnRanger"))
			if d < v * v then
				if OrderId2String(GetUnitCurrentOrder(ww)) == nil then
					IssuePointOrderById(ww, 851990, GetUnitX(yw), GetUnitY(yw))
				end
			else
				v = LoadReal(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("OutRanger"))
				if d ~= 0 and d > v * v then
					SetUnitPosition(ww, GetUnitX(yw), GetUnitY(yw))
					e = AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", yw, "chest")
					DestroyEffect(e)
				else
					IssuePointOrderById(ww, 851986, GetUnitX(yw), GetUnitY(yw))
				end
			end
		end
	else
		IssuePointOrderById(ww, 851983, GetUnitX(yw), GetUnitY(yw))
		vw(ww)
	end
	tm = nil
	ww = nil
	yw = nil
	e = nil
end
function zw(ww, yw, hw, Aw, aw, Bw, bw)
	local tm = CreateTimer()
	SaveTimerHandle(YDHT, StringHash(I2S(GetHandleId(ww))), StringHash("Timer"), tm)
	SaveUnitHandle(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("pet"), ww)
	SaveUnitHandle(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("Captain"), yw)
	SaveInteger(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("Percent"), bw)
	SaveReal(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("GuardRanger"), Aw * 1.0)
	SaveReal(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("ReturnRanger"), aw * 1.0)
	SaveReal(YDHT, StringHash(I2S(GetHandleId(tm))), StringHash("OutRanger"), Bw * 1.0)
	TimerStart(tm, hw, true, xw)
	tm = nil
end
function Cw()
	local h = s4
	if s4 < 0 then
		if t4 >= 8000 then
			return 8100
		else
			t4 = t4 + 1
			return t4
		end
	end
	s4 = u4[h]
	return h
end
function cw(cu)
	u4[cu] = s4
	s4 = cu
end
function Dw(pw, Ew)
	local cu = Cw()
	local h = r4
	local t = R2I(100.0 * pw) + p4
	local p
	x4[cu] = Ew
	w4[cu] = t
	for _ in _loop_() do
		p = v4[h]
		if p < 0 or w4[p] >= t then
			v4[h] = cu
			v4[cu] = p
			return cu
		end
		h = p
	end
	return cu
end
function Fw()
	RemoveUnit(LoadUnitHandle(YDHT, c4, q4))
	RemoveSavedHandle(YDHT, c4, q4)
end
function Gw(pw, u)
	SaveUnitHandle(YDHT, c4, Dw(pw, y4), u)
end
function Hw()
	DestroyTimer(LoadTimerHandle(YDHT, c4, q4))
	RemoveSavedHandle(YDHT, c4, q4)
end
function Iw()
	RemoveItem(LoadItemHandle(YDHT, c4, q4))
	RemoveSavedHandle(YDHT, c4, q4)
end
function lw()
	DestroyEffect(LoadEffectHandle(YDHT, c4, q4))
	RemoveSavedHandle(YDHT, c4, q4)
end
function Jw(pw, e)
	SaveEffectHandle(YDHT, c4, Dw(pw, a4), e)
end
function Kw()
	DestroyLightning(LoadLightningHandle(YDHT, c4, q4))
	RemoveSavedHandle(YDHT, c4, q4)
end
function Lw(pw, lt)
	local i = Dw(pw, B4)
	SaveLightningHandle(YDHT, c4, i, lt)
end
function Mw()
	TriggerExecute(LoadTriggerHandle(YDHT, c4, q4))
	RemoveSavedHandle(YDHT, c4, q4)
end
function Nw(pw, tt)
	local N = 0
	local i = 0
	if pw <= 0 then
		pw = 0.01
	end
	SetTextTagPermanent(tt, false)
	SetTextTagLifespan(tt, pw)
	SetTextTagFadepoint(tt, pw)
end
function Ow()
	local h = r4
	local p
	for _ in _loop_() do
		q4 = v4[h]
		if q4 < 0 or p4 < w4[q4] then break end
		TriggerEvaluate(x4[q4])
		cw(q4)
		v4[h] = v4[q4]
	end
	p4 = p4 + 1
end
function Pw()
	C4 = CreateTimer()
	c4 = GetHandleId(C4)
	p4 = 0
	r4 = 0
	v4[0] = -1
	s4 = 1
	t4 = 1
	u4[1] = -1
	y4 = CreateTrigger()
	z4 = CreateTrigger()
	A4 = CreateTrigger()
	a4 = CreateTrigger()
	B4 = CreateTrigger()
	b4 = CreateTrigger()
	TriggerAddCondition(y4, Condition(Fw))
	TriggerAddCondition(z4, Condition(Hw))
	TriggerAddCondition(A4, Condition(Iw))
	TriggerAddCondition(a4, Condition(lw))
	TriggerAddCondition(B4, Condition(Kw))
	TriggerAddCondition(b4, Condition(Mw))
	TimerStart(C4, 0.01, true, Ow)
end
function Qw()
	local Rw = GetHandleId(GetExpiredTimer())
	local Pv = LoadTriggerHandle(YDHT, Rw, 851969)
	SaveInteger(YDHT, StringHash(I2S(GetHandleId(Pv))), StringHash("RunIndex"), LoadInteger(YDHT, Rw, 851970))
	if TriggerEvaluate(Pv) then
		TriggerExecute(Pv)
	end
	Pv = nil
end
function Sw()
	local Rw = GetHandleId(GetExpiredTimer())
	local Pv = LoadTriggerHandle(YDHT, Rw, 851969)
	local Tw = LoadInteger(YDHT, Rw, 851971)
	SaveInteger(YDHT, StringHash(I2S(GetHandleId(Pv))), StringHash("RunIndex"), LoadInteger(YDHT, Rw, 851970))
	if TriggerEvaluate(Pv) then
		TriggerExecute(Pv)
	end
	Tw = Tw - 1
	if Tw > 0 then
		SaveInteger(YDHT, Rw, 851971, Tw)
	else
		DestroyTimer(GetExpiredTimer())
		FlushChildHashtable(YDHT, Rw)
	end
	Pv = nil
end
--0秒无敌，用来抵消伤害
function WuDiQingChu()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	SetUnitInvulnerable(u, false)
	PauseTimer(t)
	DestroyTimer(t)
	t = nil
	u = nil
end
function WuDi(u)
	local t = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	SetUnitInvulnerable(u, true)
	TimerStart(t, 0, false, WuDiQingChu)
	t = nil
end
--使单位晕眩 先天功、铁布衫
function SetUnitDizzyDoc()
	local tm = GetExpiredTimer()
	local i = GetHandleId(tm)
	local Unit = LoadUnitHandle(YDHT, i, StringHash("unit"))
	local Eff = LoadEffectHandle(YDHT, i, StringHash("effect"))
	DestroyEffect(Eff)
	PauseUnit(Unit, false)
	FlushChildHashtable(YDHT, i)
	PauseTimer(tm)
	DestroyTimer(tm)
	tm = nil
	Unit = nil
	Eff = nil
end
function SetUnitDizzy(Unit, Size, ExFile)
	local tm = CreateTimer()
	local i = GetHandleId(tm)
	local loc = GetUnitLoc(Unit)
	--不无敌也不魔免
	if UnitHasBuffBJ(Unit, 1112040563) == false and IsUnitType(Unit, UNIT_TYPE_MAGIC_IMMUNE) == false then
		SaveUnitHandle(YDHT, i, StringHash("unit"), Unit)
		SaveEffectHandle(YDHT, i, StringHash("effect"), AddSpecialEffectTargetUnitBJ("overhead", Unit, ExFile))
		PauseUnit(Unit, true)
		CreateTextTagLocBJ("封穴", loc, 0, 12.0, 65.0, 55.0, 42.0, 0)
		Nw(Size, bj_lastCreatedTextTag)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
		TimerStart(tm, Size, false, SetUnitDizzyDoc)
	end
	RemoveLocation(loc)
	loc = nil
	tm = nil
end
--===========================================================================
--绝学伤害系数
--@id:A06S 九阳真经散篇
--@id:A0DN 九阳神功
function jueXueXiShu(i)
	return (1.0 + I2R(juexuelingwu[i]) / 3) * (1 + 0.4 * GetUnitAbilityLevel(udg_hero[i], 1093678675) * (1 + GetUnitAbilityLevel(udg_hero[i], 1093682254)))
end

function ShangHaiGongShi(u, uc, w1, w2, shxishu, id)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local it = nil
	local j = 0
	local shanghai
	local attack
	local target_def
	--local real critical //暴击因子
	local dodge
	local random
	local depth
	local basic_damage
	if IsUnitType(u, UNIT_TYPE_HERO) ~= nil then -- INLINED!!
		attack = (1 + 0.3 * GetUnitAbilityLevel(u, 1093678393)) * 25 * udg_lilianxishu[i] * (w1 * (1 + I2R(GetHeroStatBJ(0, u, true)) / 200) * (1 + I2R(GetHeroStatBJ(1, u, true)) / 200) + w2 * 0.03 * I2R(GetHeroStatBJ(2, u, true))) * (1.0 + GetUnitAbilityLevel(u, id)) * (udg_shanghaijiacheng[i] + 1.0) * shxishu
		if GetUnitAbilityLevel(u, id) == 9 then
			attack = attack * 3
		end
		--call BJDebugMsg(R2S(attack))
		j = 1
		for _ in _loop_() do
			if j >= 7 then break end
			if GetItemType(UnitItemInSlotBJ(u, j)) == ITEM_TYPE_ARTIFACT then
				it = UnitItemInSlotBJ(u, j)
			end
			j = j + 1
		end
		--君子剑、淑女剑
		if GetItemTypeId(it) == 1227897145 and (GetUnitTypeId(u) == 1328558128 or GetUnitTypeId(u) == 1328558129 or GetUnitTypeId(u) == 1328558132 or GetUnitTypeId(u) == 1328558666) then
			attack = attack * 1.5
		end
		if GetItemTypeId(it) == 1227897153 and (GetUnitTypeId(u) == 1328558130 or GetUnitTypeId(u) == 1328558131 or GetUnitTypeId(u) == 1328558643 or GetUnitTypeId(u) == 1328558664 or GetUnitTypeId(u) == 1328558665) then
			attack = attack * 1.5
		end
	else
		attack = 750 * (w1 + w2) * (1.0 + GetUnitAbilityLevel(u, id)) * shxishu
	end


	if uc == nil then
		target_def = 1
	else
		target_def = 1 / (1 + 0.05 * GetUnitLevel(uc))
	end
	--set critical = udg_baojishanghai[1+GetPlayerId(GetOwningPlayer(u))]
	if uc == nil then
		dodge = 25
	else
		dodge = RMinBJ(I2R(GetUnitLevel(uc)) / 8, 95.0)
		if UnitHasBuffBJ(uc, 1114860655) then
			dodge = 0.0
		end
	end
	depth = 1 + LoadReal(YDHT, GetHandleId(p), id * 12)
	random = GetRandomReal(0.95, 0.95 + I2R(udg_xinggeB[i]) / 20)
	basic_damage = attack * target_def * random * depth
	if GetRandomReal(0, 100) < dodge then
		shanghai = 0
	else
		shanghai = basic_damage
	end
	--==================原伤害公式==================//
	--local real factor1
	--local real factor2
	--local real factor3
	--local real factor4
	--local real factor5
	--local real factor6
	--local real factor7
	--if UnitTypeNotNull(u,UNIT_TYPE_HERO)==true then
	-- set j = 1
	-- loop
	-- 	exitwhen j >= 7
	--            if(GetItemType(UnitItemInSlotBJ(u,j))==ITEM_TYPE_ARTIFACT)then
	-- 	    	set it= UnitItemInSlotBJ(u,j)
	--            endif
	-- 	set j = j + 1
	-- endloop
	-- //招式伤害因子
	-- set factor1=udg_lilianxishu[i]*I2R(GetHeroStatBJ(0,u,true))/3/((1.+I2R(GetUnitLevel(uc))/10)*(1.+I2R(GetUnitLevel(uc))/10))
	-- //call BJDebugMsg("历练系数="+R2S(udg_lilianxishu[i])+" 招式伤害="+I2S(GetHeroStatBJ(0,u,true)))
	--    //内力因子
	--    set factor2=(150.+I2R(GetHeroStatBJ(1,u,true)))/150.
	--    //随机波动
	--    set factor3=GetRandomReal(10.,10.*(1+I2R(udg_xinggeB[i])/5))
	--    //真实伤害因子
	--    set factor4=I2R(GetHeroStatBJ(2,u,true))*1.2
	--    //暴击因子
	--    set factor5=1.
	--    //技能重数+伤害加成
	--    set factor6=(1.+GetUnitAbilityLevel(u,id))*(udg_shanghaijiacheng[i]+.6)/2
	--   //武器熟练度因子
	--    //if it!=null then
	--    //    set factor7=0.5+LoadReal(YDHT,GetHandleId(p),GetItemTypeId(it))/10000
	--    //else
	--        set factor7=1.0
	--    //endif
	--    //君子剑、淑女剑
	--    if GetItemTypeId(it)=='I099' and (GetUnitTypeId(u)=='O000' or GetUnitTypeId(u)=='O001' or GetUnitTypeId(u)=='O004') then
	--     //if Ce[i]==3 then
	--     //	set factor7=RMinBJ(factor7*2.5,5)
	--     //else
	--     //	set factor7=RMinBJ(factor7*2.5,3)
	--    	//endif
	--    	set factor7=1.5
	--    endif
	--    if GetItemTypeId(it)=='I09A' and (GetUnitTypeId(u)=='O002' or GetUnitTypeId(u)=='O003' or GetUnitTypeId(u)=='O023' or GetUnitTypeId(u)=='O02H' or GetUnitTypeId(u)=='O02I') then
	--     //if Ce[i]==3 then
	--     //	set factor7=RMinBJ(factor7*2.5,5)
	--     //else
	--     //	set factor7=RMinBJ(factor7*2.5,3)
	--    	//endif
	--    	set factor7=1.5
	--    endif
	--else
	--    set factor1=I2R(GetUnitLevel(u))*GetUnitAbilityLevel(u,id)
	--    set factor2=3.
	--    set factor3=GetRandomReal(3.,60.*udg_nandu)
	--    set factor4=300
	--    set factor5=2.
	--    set factor6=5.
	--    set factor7=1.
	--endif
	--if GetUnitAbilityLevel(u,id)==9 then
	-- set factor6=factor6*5.
	--endif
	--//call BJDebugMsg("factor1="+R2S(factor1)+"factor2="+R2S(factor2)+"factor3="+R2S(factor3)+"factor4="+R2S(factor4)+"factor5="+R2S(factor5)+"factor6="+R2S(factor6)+"factor7="+R2S(factor7))
	--if GetRandomReal(0.,100.)<=100.*udg_baojilv[i] then
	--    set shanghai=shxishu*(w1*factor6*factor1*factor2+w2*factor4)*factor5*factor3*factor7
	--    set udg_baoji[i]=true
	--else
	--    set shanghai=shxishu*(w1*factor6*factor1*factor2+w2*factor4)*factor3*factor7
	--    set udg_baoji[i]=false
	--endif
	--if IsUnitType(uc,UNIT_TYPE_STRUCTURE) then
	-- set shanghai=0
	--endif
	p = nil
	it = nil
	SaveReal(YDHT, 1 + GetPlayerId(GetOwningPlayer(u)), id * 3, basic_damage)
	return shanghai
end
function WuGongShangHai(u, uc, shanghai)
	if shanghai == 0 then
		CreateTextTagUnitBJ("MISS", uc, 0.0, 11.0, 255.0, 0.0, 0.0, 30.0)
	else
		if GetRandomReal(0.0, 100.0) <= 100.0 * udg_baojilv[1 + GetPlayerId(GetOwningPlayer(u))] then
			UnitDamageTarget(u, uc, udg_baojishanghai[1 + GetPlayerId(GetOwningPlayer(u))] * shanghai, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
			CreateTextTagUnitBJ(I2S(R2I(shanghai)), uc, 0.0, 14.0, 100.0, 100.0, 0.0, 30.0)
		else
			UnitDamageTarget(u, uc, shanghai, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
			CreateTextTagUnitBJ(I2S(R2I(shanghai)), uc, 0.0, 11.0, 100.0, 100.0, 100.0, 30.0)
		end
	end
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 400.0, GetRandomReal(80.0, 100.0))
	Nw(0.65, bj_lastCreatedTextTag)
end
function QiJueCoefficient(u)
	if UnitHaveItem(u, 1227895114) then
		return 1
	end
	return 0
end
--武功升重及掌门称号系统
function WuGongShengChong(u, id, r)
	local level = GetUnitAbilityLevel(u, id)
	local p = GetOwningPlayer(u)
	local idd = 0
	local i = 1 + GetPlayerId(p)
	if level > 0 and level < 7 then
		if UnitHasBuffBJ(u, 1110454576) then
			SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id) + (3 + udg_xinggeA[i]) * (wuxing[i] + 5 + GetRandomInt(0, R2I(r / 60))) * (5 + GetUnitAbilityLevel(u, 1093677654) // 2 + 2 * udg_jwjs[i]) * (2 + QiJueCoefficient(u)) // 40)
		else
			SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id) + (3 + udg_xinggeA[i]) * (wuxing[i] + 5 + GetRandomInt(0, R2I(r / 60))) * (4 + 2 * udg_jwjs[i]) * (2 + QiJueCoefficient(u)) // 40)
		end
		SaveStr(YDHT, GetHandleId(GetOwningPlayer(u)), id * 2, (I2S(LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id)) or "") .. "/" .. (I2S(R2I(r * level)) or ""))
		if LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id) > R2I(r) * level then
			SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id, 0)
			IncUnitAbilityLevel(u, id)
			SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id * 5, GetUnitAbilityLevel(u, id))
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" .. (I2S(i) or "") .. "领悟了武功：" .. (GetObjectName(id) or "") .. "第" .. (I2S(level + 1) or "") .. "重")
		end
	elseif level > 0 and level < 9 then
		if GetRandomReal(1.0, r * I2R(level)) <= I2R(wuxing[i]) / 2 * (1 + 0.6 * udg_jwjs[i]) or UnitHasBuffBJ(u, 1110454576) and GetRandomReal(1.0, r * I2R(level)) <= I2R(wuxing[i]) / 2 * (2 + 0.3 * GetUnitAbilityLevel(u, 1093677654) + 0.6 * udg_jwjs[i]) then
			if id ~= 1093678935 then
				IncUnitAbilityLevel(u, id)
				SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id * 5, GetUnitAbilityLevel(u, id))
				DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" .. (I2S(i) or "") .. "领悟了武功：" .. (GetObjectName(id) or "") .. "第" .. (I2S(level + 1) or "") .. "重")
				if level + 1 == 9 and Ce[i] == 8 then
					wuxuedian[i] = wuxuedian[i] + 2
					DisplayTextToPlayer(p, 0, 0, "|cff66ff00精武师有技能升级到九重，获得两个自创武学点")
					if udg_jwjs[i] <= 2 and udg_jwjsbool[i] == false then
						udg_jwjs[i] = udg_jwjs[i] + 1
						DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您练成第" .. (I2S(udg_jwjs[i]) or "") .. "个九重武功，练成3个可获得宗师哦")
					end
					if udg_jwjs[i] == 3 and udg_jwjsbool[i] == false then
						udg_jwjsbool[i] = true
						if udg_zhangmen[i] == true then
						else
							SaveStr(YDHT, GetHandleId(p), GetHandleId(p), "〓精武宗师〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
						end
						DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" .. (GetPlayerName(p) or "") .. "获得精武宗师")
						SetPlayerName(p, "〓精武宗师〓" .. (GetPlayerName(p) or ""))
					end
				end
			end
		else
			if udg_xinggeB[i] >= 4 or UnitHaveItem(u, 1227895114) then
				if id ~= 1093678935 then
					if UnitHasBuffBJ(u, 1110454576) then
						SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id) + (3 + udg_xinggeA[i]) * (wuxing[i] + 5 + GetRandomInt(0, R2I(r / 60))) * (2 + QiJueCoefficient(u)) // 20 * (2 + GetUnitAbilityLevel(u, 1093677654) // 4 + udg_jwjs[i]) // 3 * 2)
					else
						SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id) + (3 + udg_xinggeA[i]) * (wuxing[i] + 5 + GetRandomInt(0, R2I(r / 60))) * (2 + QiJueCoefficient(u)) // 20 * (2 + udg_jwjs[i]) // 3 * 2)
					end
				end
				SaveStr(YDHT, GetHandleId(GetOwningPlayer(u)), id * 2, (I2S(LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id)) or "") .. "/" .. (I2S(R2I(r * level)) or ""))
				if LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id) > R2I(r) * level then
					SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id, 0)
					IncUnitAbilityLevel(u, id)
					SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id * 5, GetUnitAbilityLevel(u, id))
					DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff66ff00恭喜玩家" .. (I2S(i) or "") .. "领悟了武功：" .. (GetObjectName(id) or "") .. "第" .. (I2S(level + 1) or "") .. "重")
					if level + 1 == 9 and Ce[i] == 8 then
						wuxuedian[i] = wuxuedian[i] + 2
						DisplayTextToPlayer(p, 0, 0, "|cff66ff00精武师有技能升级到九重，获得两个自创武学点")
						if udg_jwjs[i] <= 2 and udg_jwjsbool[i] == false then
							udg_jwjs[i] = udg_jwjs[i] + 1
							DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您练成第" .. (I2S(udg_jwjs[i]) or "") .. "个九重武功，练成3个可获得宗师哦")
						end
						if udg_jwjs[i] == 3 and udg_jwjsbool[i] == false then
							udg_jwjsbool[i] = true
							if udg_zhangmen[i] == true then
							else
								SaveStr(YDHT, GetHandleId(p), GetHandleId(p), "〓精武宗师〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
							end
							DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" .. (GetPlayerName(p) or "") .. "获得精武宗师")
							SetPlayerName(p, "〓精武宗师〓" .. (GetPlayerName(p) or ""))
						end
					end
				end
			end
		end
	end

	p = nil
end
--击退系统
function knock_back_condition()
	local u = LoadUnitHandle(YDHT, StringHash("击退"), 0)
	local shanghai = LoadReal(YDHT, StringHash("击退"), 1)
	local uc = GetFilterUnit()
	if IsUnitEnemy(uc, GetOwningPlayer(u)) then
	--call DisplayTextToPlayer(GetOwningPlayer(u),0,0,R2S(shanghai))
	--call WuGongShangHai(u,uc,shanghai)
	end
	uc = nil
	u = nil
	FlushChildHashtable(YDHT, StringHash("击退"))
	return false
end
function knock_back_on_timer()
	local t = GetExpiredTimer()
	local p = GetHandleId(t)
	local u = LoadUnitHandle(YDHT, p, 0)
	local step = LoadInteger(YDHT, p, 1) + 1
	local shanghai = LoadReal(YDHT, p, 6)
	local g = CreateGroup()
	--call  DisplayTextToPlayer(GetOwningPlayer(u),0,0,R2S(shanghai))
	SaveInteger(YDHT, p, 1, step)
	if IsTerrainPathable(GetUnitX(u) + LoadReal(YDHT, p, 3), GetUnitY(u) + LoadReal(YDHT, p, 4), PATHING_TYPE_WALKABILITY) == false then
		SetUnitX(u, CheckX(GetUnitX(u) + LoadReal(YDHT, p, 3)))
		SetUnitY(u, CheckY(GetUnitY(u) + LoadReal(YDHT, p, 4)))
		DestroyEffect(AddSpecialEffect(LoadStr(YDHT, p, 5), GetUnitX(u), GetUnitY(u)))
	end
	SaveUnitHandle(YDHT, StringHash("击退"), 0, u)
	SaveReal(YDHT, StringHash("击退"), 1, shanghai)
	GroupEnumUnitsInRange(g, CheckX(GetUnitX(u)), CheckY(GetUnitY(u)), 500, Condition(knock_back_condition))
	if step >= LoadInteger(YDHT, p, 2) then
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, p)
	end
	GroupClear(g)
	DestroyGroup(g)
	g = nil
	u = nil
	t = nil
end
--击退函数
function knock_back(u, angle, dist, time, period, model, shanghai)
	local t = CreateTimer()
	local p = GetHandleId(t)
	local m = R2I(time / period)
	dist = dist / m --  单次位移距离
	SaveUnitHandle(YDHT, p, 0, u) --  存储被击退单位
	SaveInteger(YDHT, p, 1, 0) --  存储循环计数
	SaveInteger(YDHT, p, 2, m) --  存储次数
	SaveReal(YDHT, p, 3, dist * Cos(angle)) --  存储x轴速度分量
	SaveReal(YDHT, p, 4, dist * Sin(angle)) --  存储y轴速度分量
	SaveStr(YDHT, p, 5, model)
	SaveReal(YDHT, p, 6, shanghai) --存储伤害
	TimerStart(t, period, true, knock_back_on_timer)
	t = nil
end
function IsCertainWuGong(u, uc, id)
	return GetRandomReal(0.0, 100) < 15 + fuyuan[1 + GetPlayerId(GetOwningPlayer(u))] // 5 and GetUnitAbilityLevel(u, id) >= 1 and IsUnitEnemy(uc, GetOwningPlayer(u))
end
--BOSS AI放技能
function IsUnitBoss()
	return GetUnitPointValue(GetTriggerUnit()) == 101
end
function BossFangJiNeng()
	local u = GetTriggerUnit()
	local uc = GetEventDamageSource()
	local x = GetUnitX(uc)
	local y = GetUnitY(uc)
	if GetRandomInt(1, 100) < 50 then
		if GetUnitTypeId(GetTriggerUnit()) == u7[1] then
			IssuePointOrderById(u, 852600, x, y)
		elseif GetUnitTypeId(GetTriggerUnit()) == u7[2] then
			if GetRandomInt(1, 3) == 1 then
				IssueTargetOrderById(u, 852600, uc)
			elseif GetRandomInt(1, 2) == 1 then
				IssueImmediateOrderById(u, 852177)
			else
				IssueImmediateOrderById(u, 852178)
			end
		elseif GetUnitTypeId(GetTriggerUnit()) == u7[3] then
			IssuePointOrderById(u, 852600, x, y)
		elseif GetUnitTypeId(GetTriggerUnit()) == u7[4] then
			IssuePointOrderById(u, 852600, x, y)
		elseif GetUnitTypeId(GetTriggerUnit()) == u7[5] then
			IssueTargetOrder(u, "chemicalrage", u)
		elseif GetUnitTypeId(GetTriggerUnit()) == u7[6] then
			IssueTargetOrder(u, "devour", u)
		end
	end
	u = nil
	uc = nil
end

function WanBuff_1(buffnum, num, uc, id, orderid, l__ut, s)
	local u
	local p
	local loc
	if buffnum == num then
		p = GetOwningPlayer(uc)
		loc = GetUnitLoc(l__ut)
		CreateNUnitsAtLoc(1, 1697656880, p, loc, bj_UNIT_FACING)
		u = bj_lastCreatedUnit
		ShowUnitHide(u)
		UnitAddAbility(u, id)
		if num == 12 or num == 14 then
			IncUnitAbilityLevel(u, id)
		end
		IssueTargetOrderById(u, orderid, l__ut)
		UnitApplyTimedLife(u, 1112045413, 2.0)
		CreateTextTagLocBJ(s, loc, 60.0, 12.0, 65.0, 55.0, 42.0, 0)
		Nw(3.0, bj_lastCreatedTextTag)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
		RemoveLocation(loc)
	end
	loc = nil
	p = nil
	u = nil
end
function WanBuff(u, l__ut, buffnum)
	WanBuff_1(buffnum, 1, u, 1093678903, 852111, l__ut, "内伤")
	WanBuff_1(buffnum, 2, u, 1093678905, 852668, l__ut, "走火入魔")
	WanBuff_1(buffnum, 3, u, 1093678901, 852527, l__ut, "流血")
	WanBuff_1(buffnum, 4, u, 1093678665, 852189, l__ut, "混乱")
	WanBuff_1(buffnum, 5, u, 1093681498, 852075, l__ut, "昏迷")
	WanBuff_1(buffnum, 6, u, 1093678902, 852075, l__ut, "重伤")
	WanBuff_1(buffnum, 7, u, 1093678904, 852527, l__ut, "血流不止")
	WanBuff_1(buffnum, 8, u, 1093681497, 852190, l__ut, "麻痹")
	WanBuff_1(buffnum, 9, u, 1093677369, 852149, l__ut, "破防")
	WanBuff_1(buffnum, 10, u, 1093678414, 852190, l__ut, "神经错乱")
	WanBuff_1(buffnum, 11, u, 1093678412, 852095, l__ut, "封穴")
	WanBuff_1(buffnum, 12, u, 1093678412, 852095, l__ut, "穴位全封")
	WanBuff_1(buffnum, 13, u, 1093678900, 852527, l__ut, "中毒")
	WanBuff_1(buffnum, 14, u, 1093678900, 852527, l__ut, "深度中毒")
end
--封装CreateTimerDialog方法并使对话框自动显示
function createTimerDialog(t, title)
	CreateTimerDialogBJ(t, title)
	TimerDialogDisplay(bj_lastCreatedTimerDialog, true)
	return bj_lastCreatedTimerDialog
end

function maJiaUseAbilityAtEnemysLoc(owner, unitId, abilityId, orderId, target, lifeTime)
	local loc = GetUnitLoc(target)
	CreateNUnitsAtLoc(1, unitId, GetOwningPlayer(owner), loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, abilityId)
	IssueTargetOrderById(bj_lastCreatedUnit, orderId, target)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, lifeTime)
	RemoveLocation(loc)
	loc = nil
end

function maJiaUseLeveldAbilityAtTargetLoc(owner, unitId, abilityId, ablilityLevel, orderId, target, lifeTime)
	local loc = GetUnitLoc(target)
	CreateNUnitsAtLoc(1, unitId, GetOwningPlayer(owner), loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, abilityId)
	SetUnitAbilityLevel(bj_lastCreatedUnit, abilityId, ablilityLevel)
	IssueTargetOrderById(bj_lastCreatedUnit, orderId, target)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, lifeTime)
	RemoveLocation(loc)
	loc = nil
end

function PassiveWuGongCondition(playerControllingUnit, enemy, abilityId)
	return GetUnitAbilityLevel(playerControllingUnit, abilityId) >= 1 and IsUnitEnemy(enemy, GetOwningPlayer(playerControllingUnit))
end

function PassiveWuGongAction(playerControllingUnit, enemy, possibility, range, filter, callback, abilityId, upgradeSpeed)
	local loc = GetUnitLoc(playerControllingUnit)
	local i = 1 + GetPlayerId(GetOwningPlayer(playerControllingUnit))
	if GetRandomInt(1, 100) <= fuyuan[i] // 5 + possibility then
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range, loc, filter), callback)
		WuGongShengChong(playerControllingUnit, abilityId, upgradeSpeed)
	end
	RemoveLocation(loc)
	loc = nil
end

function DamageFilter(playerControllingUnit, filtered)
	return IsUnitAliveBJ(filtered) and IsUnitEnemy(filtered, GetOwningPlayer(playerControllingUnit))
end

function DamageCoefficientByAbility(u, abilityId, coefficient)
	if GetUnitAbilityLevel(u, abilityId) >= 1 then
		return coefficient
	end
	return 0.0
end

function DamageCoefficientByItem(u, itemId, coefficient)
	if UnitHaveItem(u, itemId) then
		return coefficient
	end
	return 0.0
end

function PassiveWuGongEffectAndDamage(playerControllingUnit, enemy, modelName, w1, w2, damageCoefficient, abilityId)
	local loc = GetUnitLoc(enemy)
	DestroyEffect(AddSpecialEffectLoc(modelName, loc))
	WuGongShangHai(playerControllingUnit, enemy, ShangHaiGongShi(playerControllingUnit, enemy, w1, w2, damageCoefficient, abilityId))
	RemoveLocation(loc)
	loc = nil
end

function FontFloat(s, loc, zoffset, size, red, green, blue, transparency, time)
	CreateTextTagLocBJ(s, loc, zoffset, size, red, green, blue, transparency)
	Nw(time, bj_lastCreatedTextTag)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
end

function clearTimer(tm)
	FlushChildHashtable(YDHT, GetHandleId(tm))
	PauseTimer(tm)
	DestroyTimer(tm)
end
-----------------------------------
-- 游戏逻辑处理
-- 1. 基地保护逻辑
-- 2. 选择英雄及门派
-- 3. 设置游戏模式和难度
-- 4. 游戏界面显示相关
-- 5. 游戏胜利和失败
-- 6. 玩家英雄阵亡和复活
-- 7. 刷怪相关
-- 8. 鸟的技能
-- 9. 英雄升级
-- 10. 各类回复
-- 11. 远程传送
-- 12. 古董系统
-- 14. 积分和声望换物品、武学精要
-- 15. 学习和遗忘武功（含激活残章）
-- 16. 合成物品
-- 17. 伴侣系统
-- 18. 整理地图上物品
-- 19. 其他琐碎逻辑
-----------------------------------

--基地保护机制
function IsJiDiBaoHu()
	return GetTriggerUnit() == udg_ZhengPaiWL and GetEventDamage() > GetUnitState(udg_ZhengPaiWL, UNIT_STATE_MAX_LIFE) * 0.03
end
function JiDiBaoHu()
	WuDi(udg_ZhengPaiWL)
	SetUnitLifePercentBJ(udg_ZhengPaiWL, GetUnitLifePercent(udg_ZhengPaiWL) - 3.0)
end
--云大救家
function Trig_YunDaXianShenConditions()
	return GetTriggerUnit() == udg_ZhengPaiWL and GetUnitLifePercent(udg_ZhengPaiWL) <= 25.0 and udg_yunyangxianshen == false
end
function Trig_YunDaXianShenActions()
	udg_yunyangxianshen = true
	CreateNUnitsAtLoc(1, 1214409837, Player(5), OffsetLocation(GetUnitLoc(udg_ZhengPaiWL), 0, 200), 90.0)
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|cFFFF6600基地严重受创，云杨现身相助")
	UnitApplyTimedLife(GetLastCreatedUnit(), 1112045413, 20.0)
	UnitAddAbility(udg_ZhengPaiWL, 1098282348)
	YDWEPolledWaitNull(20.0)
	UnitRemoveAbilityBJ(1098282348, udg_ZhengPaiWL)
end
--买基地无敌
function BuyJiDiWuDi()
	return GetItemTypeId(GetManipulatedItem()) == 1227896664
end
function JiDiWuDi()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 849994952, udg_ZhengPaiWL)
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00ff33在正义之士的庇护下，武林暂时无敌了（20秒后解除）")
	SetUnitInvulnerable(LoadUnitHandle(YDHT, id * cx, 849994952), true)
	YDWEPolledWaitNull(20.0)
	SaveInteger(YDHT, id, -320330265, cx)
	SetUnitInvulnerable(LoadUnitHandle(YDHT, id * cx, 849994952), false)
	FlushChildHashtable(YDHT, id * cx)
end
--基地挨打
function JiDiAiDa_Conditions()
	return GetPlayerController(GetOwningPlayer(GetAttacker())) == MAP_CONTROL_COMPUTER
end
function laojiayouren()
	return IsUnitAlly(GetFilterUnit(), Player(0)) and IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) and GetPlayerController(GetOwningPlayer(GetFilterUnit())) == MAP_CONTROL_USER
end
function JiDiAiDa_Actions()
	--==============反仇恨机制定义单位组==============
	local g = CreateGroup()
	--==============反仇恨机制定义单位组==============
	PingMinimapLocForForce(GetPlayersAll(), GetUnitLoc(udg_ZhengPaiWL), 1)
	if GetRandomInt(30, 50) == 48 then
		DisplayTextToForce(GetPlayersAll(), "|CFFCCFF00正派武林受到攻击，请赶紧回防")
	end
	if GetRandomInt(30, 50) == 45 and GetUnitTypeId(GetAttacker()) ~= u7[1] and GetUnitTypeId(GetAttacker()) ~= u7[2] and GetUnitTypeId(GetAttacker()) ~= u7[3] and GetUnitTypeId(GetAttacker()) ~= u7[4] and GetUnitTypeId(GetAttacker()) ~= u7[5] and GetUnitTypeId(GetAttacker()) ~= u7[6] and GetUnitTypeId(GetAttacker()) ~= u7[7] and GetUnitTypeId(GetAttacker()) ~= u7[8] then
		SetUnitPositionLoc(GetAttacker(), GetRectCenter(udg_jail))
		DisplayTextToForce(GetPlayersAll(), "|CFFCCFFCC正派武林将攻击单位抓进了监狱")
	end
	--==========反仇恨机制，按云大建议去掉==============
	GroupEnumUnitsInRangeOfLoc(g, GetUnitLoc(udg_ZhengPaiWL), 800, Condition(laojiayouren))
	if IsUnitGroupEmptyBJ(g) == false then
		UnitAddAbility(udg_ZhengPaiWL, 1093677139)
		--call SetUnitInvulnerable(udg_ZhengPaiWL,true)
		GroupClear(g)
		YDWEPolledWaitNull(5.0)
		--call SetUnitInvulnerable(udg_ZhengPaiWL,false)
		UnitRemoveAbility(udg_ZhengPaiWL, 1093677139)
		g = nil
	end
--==========反仇恨机制，按云大建议去掉==============
end
--购买城防
function BuyChengFang()
	return GetItemTypeId(GetManipulatedItem()) == 1227896147
end
function ShengChengFang()
	local id = GetHandleId(GetTriggeringTrigger())
	SaveInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	if GetPlayerTechCountSimple(1378889776, Player(5)) <= 29 then
		SetPlayerTechResearchedSwap(1378889776, GetPlayerTechCountSimple(1378889776, Player(5)) + 1, Player(5))
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFD700在玩家：" .. (GetPlayerName(GetOwningPlayer(GetTriggerUnit())) or "") .. "的无私奉献下，正派武林的城防得到加强了")
		shoujiajf[LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -1587459251)] = shoujiajf[LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -1587459251)] + 15
		DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFF34FF00守家积分+15")
	else
		AdjustPlayerStateBJ(20000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
		DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFF0000城防已达最高，无法继续升级|r")
	end
end
--高级城防
function BuyGaoChengFang()
	return GetItemTypeId(GetManipulatedItem()) == 1227896917
end
function ShengGaoChengFang()
	local id = GetHandleId(GetTriggeringTrigger())
	SaveInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	if udg_boshu >= 18 then
		if GetPlayerTechCountSimple(1378889778, Player(5)) <= 9 then
			SetPlayerTechResearchedSwap(1378889778, GetPlayerTechCountSimple(1378889778, Player(5)) + 1, Player(5))
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFD700在玩家：" .. (GetPlayerName(GetOwningPlayer(GetTriggerUnit())) or "") .. "的无私奉献下，正派武林的高级城防得到加强了")
			shoujiajf[LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -1587459251)] = shoujiajf[LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -1587459251)] + 25
			DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFF34FF00守家积分+25")
		else
			AdjustPlayerStateBJ(50000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
			DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFF0000高级城防已达最高，无法继续升级|r")
		end
	else
		AdjustPlayerStateBJ(50000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
		DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFF000018波进攻怪以后才能使用此功能哦|r")
	end
end

--选择英雄
function fx()
	return udg_hashero[1 + GetPlayerId(GetTriggerPlayer())] == false and IsUnitInGroup(GetTriggerUnit(), i7)
end
function SelectHero()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	local u = GetTriggerUnit()
	if GetUnitTypeId(L4[i]) == GetUnitTypeId(u) then
		if u == K4[1] or u == K4[2] or u == K4[3] or u == K4[4] or u == K4[5] or u == K4[6] or u == K4[7] then
			Q4 = GetRandomLocInRect(Ge)
			CreateNUnitsAtLoc(1, GetUnitTypeId(u), p, Q4, bj_UNIT_FACING)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
		end
		if u == K4[1] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "恭喜获得英雄：|CFFCCFF00若蝶|r\n请选择下列门派后开启江湖之旅：\n|CFF00FFCC古墓 丐帮 全真 恒山 峨眉 武当 星宿 灵鹫宫（隐藏） 姑苏慕容（隐藏） 明教（特殊） 神龙教（女）|r\n\n")
			wuxing[i] = wuxing[i] + 5
			fuyuan[i] = fuyuan[i] + 2
			yishu[i] = yishu[i] + 3
			udg_xinggeA[i] = GetRandomInt(1, 3)
			udg_xinggeB[i] = GetRandomInt(3, 5)
			RemoveUnit(K4[1])
			RemoveUnit(vipbanlv[i])
		elseif u == K4[2] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "恭喜获得英雄：|CFFCCFF00潇侠|r\n请选择下列门派后开启江湖之旅：\n|CFF00FFCC少林 古墓 丐帮 华山 全真 峨眉 武当 灵鹫宫（隐藏） 姑苏慕容（隐藏） 明教（特殊） 神龙教（男）|r\n")
			wuxing[i] = wuxing[i] + 2
			gengu[i] = gengu[i] + 2
			danpo[i] = danpo[i] + 1
			fuyuan[i] = fuyuan[i] + 5
			udg_xinggeA[i] = GetRandomInt(2, 4)
			udg_xinggeB[i] = GetRandomInt(2, 4)
			RemoveUnit(K4[2])
			RemoveUnit(vipbanlv[i])
		elseif u == K4[3] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "恭喜获得英雄：|CFFCCFF00莫言|r\n请选择下列门派后开启江湖之旅：\n|CFF00FFCC古墓 丐帮 华山 血刀 恒山 峨眉 星宿 灵鹫宫（隐藏） 姑苏慕容（隐藏） 明教（特殊）  神龙教（女）|r\n")
			wuxing[i] = wuxing[i] + 2
			danpo[i] = danpo[i] + 5
			jingmai[i] = jingmai[i] + 1
			yishu[i] = yishu[i] + 2
			udg_xinggeA[i] = GetRandomInt(3, 5)
			udg_xinggeB[i] = GetRandomInt(1, 3)
			RemoveUnit(K4[3])
			RemoveUnit(vipbanlv[i])
		elseif u == K4[4] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "恭喜获得英雄：|CFFCCFF00浪云|r\n请选择下列门派后开启江湖之旅：\n|CFF00FFCC少林 古墓 丐帮 华山 血刀 武当 星宿 灵鹫宫（隐藏） 姑苏慕容（隐藏） 明教（特殊）  神龙教（男）|r\n")
			gengu[i] = gengu[i] + 3
			jingmai[i] = jingmai[i] + 5
			yishu[i] = yishu[i] + 2
			udg_xinggeA[i] = GetRandomInt(2, 4)
			udg_xinggeB[i] = GetRandomInt(2, 4)
			RemoveUnit(K4[4])
			RemoveUnit(vipbanlv[i])
		elseif u == K4[5] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "恭喜获得英雄：|CFFCCFF00魔君|r\n请选择下列门派后开启江湖之旅：\n|CFF00FFCC少林 华山 全真 血刀 峨眉 武当 星宿 灵鹫宫（隐藏） 姑苏慕容（隐藏） 明教（特殊）  神龙教（男）|r\n")
			gengu[i] = gengu[i] + 5
			danpo[i] = danpo[i] + 2
			jingmai[i] = jingmai[i] + 3
			udg_xinggeA[i] = GetRandomInt(1, 3)
			udg_xinggeB[i] = GetRandomInt(3, 5)
			RemoveUnit(K4[5])
			RemoveUnit(vipbanlv[i])
		elseif u == K4[6] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "恭喜获得英雄：|CFFCCFF00兰馨|r\n请选择任意门派后开启江湖之旅|r\n")
			gengu[i] = gengu[i] + 3
			danpo[i] = danpo[i] + 3
			jingmai[i] = jingmai[i] + 3
			wuxing[i] = wuxing[i] + 3
			yishu[i] = yishu[i] + 3
			fuyuan[i] = fuyuan[i] + 3
			udg_xinggeA[i] = GetRandomInt(3, 5)
			udg_xinggeB[i] = GetRandomInt(3, 5)
			--call RemoveUnit(K4[6])
			RemoveUnit(vipbanlv[i])
		elseif u == K4[7] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "恭喜获得英雄：|CFFCCFF00瑾轩|r\n请选择任意门派后开启江湖之旅|r\n")
			gengu[i] = gengu[i] + 3
			danpo[i] = danpo[i] + 3
			jingmai[i] = jingmai[i] + 3
			wuxing[i] = wuxing[i] + 3
			yishu[i] = yishu[i] + 3
			fuyuan[i] = fuyuan[i] + 3
			udg_xinggeA[i] = GetRandomInt(3, 5)
			udg_xinggeB[i] = GetRandomInt(3, 5)
			--call RemoveUnit(K4[6])
			RemoveUnit(vipbanlv[i])
		end
		if u == K4[1] or u == K4[2] or u == K4[3] or u == K4[4] or u == K4[5] or u == K4[6] or u == K4[7] then
			SelectUnitRemoveForPlayer(u, p)
			SelectUnitAddForPlayer(bj_lastCreatedUnit, p)
			udg_hashero[i] = true
			AddSpecialEffectTargetUnitBJ("overhead", bj_lastCreatedUnit, "Abilities\\Spells\\Other\\Awaken\\Awaken.mdl")
			DestroyEffect(bj_lastCreatedEffect)
			udg_hero[i] = bj_lastCreatedUnit
			O4 = O4 + 1
			RemoveLocation(Q4)
			DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|CFFFF0000请从天下门派处选择你喜欢的门派后方可离开此地|r")
			DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|CFFFF0000输入-random可随机选择门派并获得额外60个木头，选取方式请到F9中寻找|r")
		end
	else
		L4[i] = u
		if u == K4[1] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFCCFF00若蝶|r\n可加入门派：\n|CFF00FFCC古墓 丐帮 全真 恒山 峨眉 武当 灵鹫宫 姑苏慕容 明教  神龙教（女）|r\n基础全属性+9\n额外属性\n|cFF00FF00悟性+5 福缘+2 医术+3\n|r\n")
			SetUnitAnimation(u, "attack")
			YDWEPolledWaitNull(2)
			ResetUnitAnimation(K4[1])
		elseif u == K4[2] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFCCFF00潇侠|r\n可加入门派：\n|CFF00FFCC少林 古墓 丐帮 华山 全真 峨眉 武当 灵鹫宫 姑苏慕容 明教  神龙教（男）|r\n基础全属性+9\n额外属性\n|cFF00FF00根骨+2 悟性+2 福缘+5 胆魄+1\n|r\n")
			SetUnitAnimation(u, "attack")
			YDWEPolledWaitNull(2)
			ResetUnitAnimation(K4[2])
		elseif u == K4[3] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFCCFF00莫言|r\n可加入门派：\n|CFF00FFCC古墓 丐帮 华山 血刀 恒山 峨眉 灵鹫宫 姑苏慕容 明教  神龙教（女）|r\n基础全属性+9\n额外属性\n|cFF00FF00悟性+2 经脉+1 胆魄+5 医术+2\n|r\n")
			SetUnitAnimation(u, "attack")
			YDWEPolledWaitNull(2)
			ResetUnitAnimation(K4[3])
		elseif u == K4[4] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFCCFF00浪云|r\n可加入门派：\n|CFF00FFCC少林 古墓 丐帮 华山 血刀 武当 灵鹫宫 姑苏慕容 明教  神龙教（男）|r\n基础全属性+9\n额外属性\n|cFF00FF00根骨+3 经脉+5 医术+2\n|r\n")
			SetUnitAnimation(u, "attack")
			YDWEPolledWaitNull(2)
			ResetUnitAnimation(K4[4])
		elseif u == K4[5] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFCCFF00魔君|r\n可加入门派：\n|CFF00FFCC少林 华山 全真 血刀 峨眉 武当 灵鹫宫 姑苏慕容 明教  神龙教（男）|r\n基础全属性+9\n额外属性\n|cFF00FF00根骨+5 经脉+3 胆魄+2\n|r\n")
			SetUnitAnimation(u, "attack")
			YDWEPolledWaitNull(2)
			ResetUnitAnimation(K4[5])
		elseif u == K4[6] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFCCFF00兰馨|r\n可加入门派：\n|CFF00FFCC全部门派|r\n基础全属性+9\n额外属性\n|cFF00FF00全属性+3\n|r\n")
			SetUnitAnimation(u, "attack")
			YDWEPolledWaitNull(2)
			ResetUnitAnimation(K4[6])
		elseif u == K4[7] then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFCCFF00瑾轩|r\n可加入门派：\n|CFF00FFCC全部门派|r\n基础全属性+9\n额外属性\n|cFF00FF00全属性+3\n|r\n")
			SetUnitAnimation(u, "attack")
			YDWEPolledWaitNull(2)
			ResetUnitAnimation(K4[7])
		end
	end
	p = nil
	u = nil
end
--选择门派
function kx()
	return GetTriggerUnit() == Rs and udg_runamen[1 + GetPlayerId(GetTriggerPlayer())] == 0
end
function MenPai()
	if GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558130 then
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 15.0, "当前可加入以下门派：\n|CFF00FFCC古墓 丐帮 全真 恒山 峨眉 武当 灵鹫宫 姑苏慕容 明教|r\n")
	elseif GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558129 then
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 15.0, "当前可加入以下门派：\n|CFF00FFCC少林 古墓 丐帮 华山 全真 峨眉 武当 灵鹫宫 姑苏慕容 明教|r\n")
	elseif GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558131 then
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 15.0, "当前可加入以下门派：\n|CFF00FFCC古墓 丐帮 华山 血刀 恒山 峨眉 灵鹫宫 姑苏慕容 明教|r\n")
	elseif GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558132 then
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 15.0, "当前可加入以下门派：\n|CFF00FFCC少林 古墓 丐帮 华山 血刀 武当 灵鹫宫 姑苏慕容 明教|r\n")
	elseif GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558128 then
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 15.0, "当前可加入以下门派：\n|CFF00FFCC少林 华山 全真 血刀 峨眉 武当 灵鹫宫 姑苏慕容 明教|r\n")
	elseif GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558643 then
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 15.0, "当前可加入任意门派|r\n")
	elseif GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558666 then
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 15.0, "当前可加入任意门派|r\n")
	end
end
--选择门派加入
function WuMenPai_Condition()
	return IsUnitType(GetLeavingUnit(), UNIT_TYPE_HERO) ~= nil and udg_runamen[1 + GetPlayerId(GetOwningPlayer(GetLeavingUnit()))] == 0 and GetPlayerController(GetOwningPlayer(GetLeavingUnit())) == MAP_CONTROL_USER -- INLINED!!
end
--自由门派
function WuMenPai_Action()
	local u = GetLeavingUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	udg_runamen[i] = 11
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "选择了〓自由门派〓|r")
	SetPlayerName(p, "〓自由门派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
	DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦），请在NPC郭靖处选择副职")
	UnitAddAbility(u, 1093678418)
	AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
	AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
	UnitAddAbility(u, 1093678128)
	UnitAddAbility(u, 1093678129)
	UnitAddAbility(u, 1093678130)
	I7[(i - 1) * 20 + 8] = 1093678418
	UnitRemoveAbility(u, 1098282348)
	Q4 = GetRandomLocInRect(He)
	SetUnitPositionLoc(u, Q4)
	PanCameraToTimedLocForPlayer(p, Q4, 0)
	CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
	AdjustPlayerStateBJ(60, p, PLAYER_STATE_RESOURCE_LUMBER)
	P4[i] = bj_lastCreatedUnit
	udg_shuxing[i] = udg_shuxing[i] + 5
	RemoveLocation(Q4)
	UnitAddItemByIdSwapped(1227896394, u)
	u = nil
	p = nil
end
-- 加入门派的itemid
function ox()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and (GetItemTypeId(GetManipulatedItem()) == 1227894833 or GetItemTypeId(GetManipulatedItem()) == 1227894834 or GetItemTypeId(GetManipulatedItem()) == 1227894835 or GetItemTypeId(GetManipulatedItem()) == 1227894836 or GetItemTypeId(GetManipulatedItem()) == 1227894837 or GetItemTypeId(GetManipulatedItem()) == 1227894838 or GetItemTypeId(GetManipulatedItem()) == 1227894839 or GetItemTypeId(GetManipulatedItem()) == 1227894840 or GetItemTypeId(GetManipulatedItem()) == 1227894841 or GetItemTypeId(GetManipulatedItem()) == 1227897157 or GetItemTypeId(GetManipulatedItem()) == 1227894849 or GetItemTypeId(GetManipulatedItem()) == 1227897166 or GetItemTypeId(GetManipulatedItem()) == 1227899186 or GetItemTypeId(GetManipulatedItem()) == 1227899723 or GetItemTypeId(GetManipulatedItem()) == 1227899736) -- INLINED!!
end
function JiaRuMenPai()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if udg_runamen[i] ~= 0 then
		if GetItemTypeId(GetManipulatedItem()) == 1227897157 and udg_runamen[i] == 11 and GetUnitLevel(u) < 2 and GetPlayerState(p, PLAYER_STATE_RESOURCE_LUMBER) >= 60 then
			udg_runamen[i] = 13
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "改拜入了〓姑苏慕容〓，大家一起膜拜他|r")
			SetPlayerName(p, "〓姑苏慕容〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			AdjustPlayerStateBJ(-60, p, PLAYER_STATE_RESOURCE_LUMBER)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你已经加过门派了|r")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227894833 then
		if GetUnitTypeId(u) ~= 1328558130 and GetUnitTypeId(u) ~= 1328558131 then
			udg_runamen[i] = 1
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓少林派〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓少林派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			UnitRemoveAbility(u, 1098282348)
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			gengu[i] = gengu[i] + 3
			jingmai[i] = jingmai[i] + 2
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你的角色不能加入该门派")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227894834 then
		if GetUnitTypeId(u) ~= 1328558128 then
			udg_runamen[i] = 3
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓丐帮〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓丐帮〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			UnitRemoveAbility(u, 1098282348)
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			danpo[i] = danpo[i] + 3
			jingmai[i] = jingmai[i] + 2
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你的角色不能加入该门派")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227894835 then
		if GetUnitTypeId(u) ~= 1328558130 then
			udg_runamen[i] = 4
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓华山派〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓华山派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			UnitRemoveAbility(u, 1098282348)
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			wuxing[i] = wuxing[i] + 3
			danpo[i] = danpo[i] + 2
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你的角色不能加入该门派")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227894836 then
		if GetUnitTypeId(u) ~= 1328558132 and GetUnitTypeId(u) ~= 1328558131 then
			udg_runamen[i] = 5
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓全真教〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓全真教〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			UnitRemoveAbility(u, 1098282348)
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			jingmai[i] = jingmai[i] + 3
			fuyuan[i] = fuyuan[i] + 2
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你的角色不能加入该门派")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227894837 then
		if GetUnitTypeId(u) ~= 1328558129 and GetUnitTypeId(u) ~= 1328558130 then
			udg_runamen[i] = 6
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓血刀门〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓血刀门〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			UnitRemoveAbility(u, 1098282348)
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			gengu[i] = gengu[i] + 2
			danpo[i] = danpo[i] + 3
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你的角色不能加入该门派")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227894838 then
		if GetUnitTypeId(u) ~= 1328558132 and GetUnitTypeId(u) ~= 1328558128 and GetUnitTypeId(u) ~= 1328558129 then
			udg_runamen[i] = 7
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓恒山派〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓恒山派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			UnitRemoveAbility(u, 1098282348)
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			yishu[i] = yishu[i] + 3
			fuyuan[i] = fuyuan[i] + 2
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你的角色不能加入该门派")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227894839 then
		if GetUnitTypeId(u) ~= 1328558132 then
			udg_runamen[i] = 8
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓峨眉派〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓峨眉派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			UnitRemoveAbility(u, 1098282348)
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			yishu[i] = yishu[i] + 1
			jingmai[i] = jingmai[i] + 1
			fuyuan[i] = fuyuan[i] + 3
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你的角色不能加入该门派")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227894840 then
		if GetUnitTypeId(u) ~= 1328558129 then
			udg_runamen[i] = 10
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓星宿派〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓星宿派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			Q4 = GetRandomLocInRect(He)
			UnitRemoveAbility(u, 1098282348)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			danpo[i] = danpo[i] + 2
			yishu[i] = yishu[i] + 1
			jingmai[i] = jingmai[i] + 2
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你的角色不能加入该门派")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227894841 then
		if GetUnitTypeId(u) ~= 1328558131 then
			udg_runamen[i] = 9
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓武当派〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓武当派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			UnitRemoveAbility(u, 1098282348)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			gengu[i] = gengu[i] + 1
			jingmai[i] = jingmai[i] + 2
			fuyuan[i] = fuyuan[i] + 2
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你的角色不能加入该门派")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227894849 then
		if GetUnitTypeId(u) ~= 1328558128 then
			udg_runamen[i] = 2
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓古墓派〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓古墓派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			UnitRemoveAbility(u, 1098282348)
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			wuxing[i] = wuxing[i] + 2
			jingmai[i] = jingmai[i] + 1
			fuyuan[i] = fuyuan[i] + 2
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你的角色不能加入该门派")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227897166 then
		udg_runamen[i] = 14
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓明教〓，请在NPC郭靖处选择副职|r")
		SetPlayerName(p, "〓明教〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
		UnitAddAbility(u, 1093678418)
		AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
		AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
		UnitAddAbility(u, 1093678128)
		UnitAddAbility(u, 1093678129)
		UnitAddAbility(u, 1093678130)
		I7[(i - 1) * 20 + 8] = 1093678418
		UnitRemoveAbility(u, 1098282348)
		Q4 = GetRandomLocInRect(He)
		SetUnitPositionLoc(u, Q4)
		PanCameraToTimedLocForPlayer(p, Q4, 0)
		CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
		P4[i] = bj_lastCreatedUnit
		wuxing[i] = wuxing[i] + 3
		jingmai[i] = jingmai[i] + 2
		fuyuan[i] = fuyuan[i] + 2
		RemoveLocation(Q4)
		UnitAddItemByIdSwapped(1227896394, u)
	elseif GetItemTypeId(GetManipulatedItem()) == 1227899186 then
		if GetUnitTypeId(u) ~= 1328558130 and GetUnitTypeId(u) ~= 1328558131 then
			udg_runamen[i] = 15
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓衡山派〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓衡山派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			UnitRemoveAbility(u, 1098282348)
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			wuxing[i] = wuxing[i] + 3
			yishu[i] = yishu[i] + 2
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你的角色不能加入该门派")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227899723 then
		if GetUnitTypeId(u) == 1328558128 or GetUnitTypeId(u) == 1328558129 or GetUnitTypeId(u) == 1328558132 or GetUnitTypeId(u) == 1328558666 then
			udg_runamen[i] = 16
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓神龙教〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓神龙教〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			UnitRemoveAbility(u, 1098282348)
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			gengu[i] = gengu[i] + 2
			fuyuan[i] = fuyuan[i] + 2
			danpo[i] = danpo[i] + 1
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			udg_runamen[i] = 17
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓神龙教〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓神龙教〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			UnitRemoveAbility(u, 1098282348)
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			gengu[i] = gengu[i] + 2
			fuyuan[i] = fuyuan[i] + 2
			danpo[i] = danpo[i] + 1
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227899736 then
		if GetUnitTypeId(u) ~= 1328558131 then
			udg_runamen[i] = 18
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933恭喜加入〓泰山派〓，请在NPC郭靖处选择副职|r")
			SetPlayerName(p, "〓泰山派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步（可以在主城和传送石之间任意传送了）\n获得新手大礼包（可以在背包中打开获得惊喜哦）")
			UnitAddAbility(u, 1093678418)
			AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
			AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
			UnitAddAbility(u, 1093678128)
			UnitAddAbility(u, 1093678129)
			UnitAddAbility(u, 1093678130)
			I7[(i - 1) * 20 + 8] = 1093678418
			UnitRemoveAbility(u, 1098282348)
			Q4 = GetRandomLocInRect(He)
			SetUnitPositionLoc(u, Q4)
			PanCameraToTimedLocForPlayer(p, Q4, 0)
			CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
			P4[i] = bj_lastCreatedUnit
			gengu[i] = gengu[i] + 3
			wuxing[i] = wuxing[i] + 1
			yishu[i] = yishu[i] + 1
			RemoveLocation(Q4)
			UnitAddItemByIdSwapped(1227896394, u)
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff0000你的角色不能加入该门派")
		end
	end
	p = nil
	u = nil
end

--主机选择模式
function Trig_____________u_Func002C()
	return GetPlayerController(Player(0)) == MAP_CONTROL_USER and GetPlayerSlotState(Player(0)) == PLAYER_SLOT_STATE_PLAYING
end
function ChooseMoShi()
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF40主机开始选择游戏模式")
	if GetPlayerController(Player(0)) == MAP_CONTROL_USER and GetPlayerSlotState(Player(0)) == PLAYER_SLOT_STATE_PLAYING then -- INLINED!!
		DialogClear(udg_index)
		DialogSetMessage(udg_index, "请选择游戏模式")
		udg_index0 = DialogAddButtonBJ(udg_index, "|cFF00CC00普通模式")
		udg_index1 = DialogAddButtonBJ(udg_index, "|cFFCC0066特殊事件模式")
		udg_index2 = DialogAddButtonBJ(udg_index, "|cFFFF6600生存模式")
		udg_index3 = DialogAddButtonBJ(udg_index, "|cFF6600FF快速通关模式")
		DialogDisplayBJ(true, udg_index, Player(0))
	end
end
function ChooseMoShi_Action()
	if GetClickedButton() == udg_index0 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了普通模式")
		udg_teshushijian = false
		udg_shengchun = false
	end
	if GetClickedButton() == udg_index1 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了特殊事件模式")
		udg_teshushijian = true
		udg_shengchun = false
	end
	if GetClickedButton() == udg_index2 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了生存模式")
		udg_teshushijian = false
		udg_shengchun = true
	end
	if GetClickedButton() == udg_index3 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了快速通关模式")
		udg_teshushijian = false
		udg_shengchun = false
		udg_sutong = true
	end
end
--调整游戏难度
function GameNanDu_Condition()
	--非特殊事件模式、非生存模式
	return udg_teshushijian == false and udg_shengchun == false
end
function GameNanDu()
	local t = GetTriggeringTrigger()
	local id = GetHandleId(t)
	local i = 0
	local level = 0
	if S2I(SubStringBJ(GetEventPlayerChatString(), 3, 5)) == 0 then
		i = 10
	else
		i = S2I(SubStringBJ(GetEventPlayerChatString(), 3, 5)) * 10
	end
	level = GetPlayerTechCountSimple(1378889777, Player(12))
	if level == 50 then
		DisplayTextToPlayer(Player(0), 0, 0, "当前已为最高难度了")
	else
		if level + i >= 50 then
			i = 50 - level
		end
		AddPlayerTechResearched(Player(12), 1378889777, i)
		AddPlayerTechResearched(Player(6), 1378889777, i)
		AddPlayerTechResearched(Player(15), 1378889777, i)
		udg_nandu = udg_nandu + i // 10
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "玩家1输入“up”提高了游戏难度，目前游戏难度为" .. (I2S(udg_nandu) or ""))
		if udg_nandu == 5 then
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF该模式下进攻怪具有|cFFFF0000抽血术")
		end
	end
	t = nil
end
function ChooseNanDu()
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF40主机开始选择游戏难度")
	if GetPlayerController(Player(0)) == MAP_CONTROL_USER and GetPlayerSlotState(Player(0)) == PLAYER_SLOT_STATE_PLAYING then -- INLINED!!
		DialogClear(udg_nan)
		DialogSetMessage(udg_nan, "请选择游戏难度")
		if udg_nandu <= 0 then
			udg_nan0 = DialogAddButtonBJ(udg_nan, "|cFF00CC00初入江湖")
		end
		if udg_nandu <= 1 then
			udg_nan1 = DialogAddButtonBJ(udg_nan, "|cFFCC0066牛刀小试")
		end
		if udg_nandu <= 2 then
			udg_nan2 = DialogAddButtonBJ(udg_nan, "|cFFFF6600登堂入室")
		end
		if udg_nandu <= 3 then
			udg_nan3 = DialogAddButtonBJ(udg_nan, "|cFF0041FF炉火纯青")
		end
		if udg_nandu <= 4 then
			udg_nan4 = DialogAddButtonBJ(udg_nan, "|cFF1FBF00华山论剑")
		end
		if udg_nandu <= 5 then
			udg_nan5 = DialogAddButtonBJ(udg_nan, "|cFFFF0000决战江湖")
		end
		DialogDisplayBJ(true, udg_nan, Player(0))
	end
end
-- 设置游戏难度和经验获得率的函数
function setDifficultyAndExpRate(difficulty)
	udg_nandu = difficulty
	SetPlayerHandicapXPBJ(Player(0), 200.0 - 20.0 * difficulty)
	SetPlayerHandicapXPBJ(Player(1), 200.0 - 20.0 * difficulty)
	SetPlayerHandicapXPBJ(Player(2), 200.0 - 20.0 * difficulty)
	SetPlayerHandicapXPBJ(Player(3), 200.0 - 20.0 * difficulty)
	SetPlayerHandicapXPBJ(Player(4), 200.0 - 20.0 * difficulty)
end
function ChooseNanDu_Action()
	if GetClickedButton() == udg_nan0 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了难度|cFF00CC00初入江湖")
		SetPlayerTechResearched(Player(12), 1378889777, 0)
		SetPlayerTechResearched(Player(6), 1378889777, 0)
		SetPlayerTechResearched(Player(15), 1378889777, 0)
		setDifficultyAndExpRate(0)
	end
	if GetClickedButton() == udg_nan1 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了难度|cFFCC0066牛刀小试")
		SetPlayerTechResearched(Player(12), 1378889777, 10)
		SetPlayerTechResearched(Player(6), 1378889777, 10)
		SetPlayerTechResearched(Player(15), 1378889777, 10)
		setDifficultyAndExpRate(1)
	end
	if GetClickedButton() == udg_nan2 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了难度|cFFFF6600登堂入室")
		SetPlayerTechResearched(Player(12), 1378889777, 20)
		SetPlayerTechResearched(Player(6), 1378889777, 20)
		SetPlayerTechResearched(Player(15), 1378889777, 20)
		setDifficultyAndExpRate(2)
	end
	if GetClickedButton() == udg_nan3 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了难度|cFF0041FF炉火纯青")
		SetPlayerTechResearched(Player(12), 1378889777, 30)
		SetPlayerTechResearched(Player(6), 1378889777, 30)
		SetPlayerTechResearched(Player(15), 1378889777, 30)
		setDifficultyAndExpRate(3)
	end
	if GetClickedButton() == udg_nan4 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了难度|cFF1FBF00华山论剑")
		SetPlayerTechResearched(Player(12), 1378889777, 40)
		SetPlayerTechResearched(Player(6), 1378889777, 40)
		SetPlayerTechResearched(Player(15), 1378889777, 40)
		setDifficultyAndExpRate(4)
	end
	if GetClickedButton() == udg_nan5 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF主机选择了难度|cFFFF0000决战江湖")
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FFFF该模式下进攻怪具有|cFFFF0000抽血术")
		SetPlayerTechResearched(Player(12), 1378889777, 50)
		SetPlayerTechResearched(Player(6), 1378889777, 50)
		SetPlayerTechResearched(Player(15), 1378889777, 50)
		setDifficultyAndExpRate(5)
	end
end
--试玩模式
function BeforeAttack()
	return hd == false
end
function SetShiWan()
	ShiFouShuaGuai = false
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF00FF00玩家一选择了试玩模式，怪物不会进攻主城，大家可以尽情的去体验玩法了")
end

--系统窗口
function SystemWindow()
	local i = 0
	local s = nil
	CreateMultiboardBJ(5, 20, "系统窗口")
	MultiboardSetItemsStyle(bj_lastCreatedMultiboard, true, false)
	MultiboardSetItemsWidth(bj_lastCreatedMultiboard, 0.07)
	i = 1
	for _ in _loop_() do
		if i >= 6 then break end
		if udg_MaxDamage[i] < 10000.0 then
			s = R2S(udg_MaxDamage[i])
		elseif udg_MaxDamage[i] < 100000000.0 then
			s = (R2S(udg_MaxDamage[i]) or "") .. "万"
		elseif udg_MaxDamage[i] / 10000.0 < 100000000.0 then
			s = (R2S(udg_MaxDamage[i]) or "") .. "亿"
		elseif udg_MaxDamage[i] / 100000000.0 < 100000000.0 then
			s = (R2S(udg_MaxDamage[i]) or "") .. "万亿"
		else
			s = (R2S(udg_MaxDamage[i]) or "") .. "亿亿"
		end
		MultiboardSetTitleText(bj_lastCreatedMultiboard, "|cFFFFCC33这并不是系统窗口")
		DuoMianBan(bj_lastCreatedMultiboard, 1, 4 * i - 3, "|c00FF0080" .. (GetPlayerName(Player(i - 1)) or ""))
		DuoMianBan(bj_lastCreatedMultiboard, 2, 4 * i - 3, "|c0000FF00" .. "等级：" .. (I2S(GetUnitLevel(udg_hero[i])) or ""))
		DuoMianBan(bj_lastCreatedMultiboard, 3, 4 * i - 3, "|cFF00CCFF" .. (udg_menpainame[udg_runamen[i]] or ""))
		DuoMianBan(bj_lastCreatedMultiboard, 4, 4 * i - 3, "|cFFFF6600" .. "最高伤害：" .. (s or ""))
		if Ce[i] == 1 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99炼丹师")
		elseif Ce[i] == 2 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99锻造师")
		elseif Ce[i] == 3 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99兵器师")
		elseif Ce[i] == 4 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99鉴定师")
		elseif Ce[i] == 5 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99练气师")
		elseif Ce[i] == 6 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99寻宝师")
		elseif Ce[i] == 7 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99丫鬟")
		elseif Ce[i] == 8 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99精武师")
		else
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99未选择")
		end
		if I7[20 * (i - 1) + 1] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 1, 4 * i - 2, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 1]) or ""))
		end
		if I7[20 * (i - 1) + 2] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 2, 4 * i - 2, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 2]) or ""))
		end
		if I7[20 * (i - 1) + 3] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 3, 4 * i - 2, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 3]) or ""))
		end
		if I7[20 * (i - 1) + 4] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 4, 4 * i - 2, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 4]) or ""))
		end
		if I7[20 * (i - 1) + 5] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 1, 4 * i - 1, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 5]) or ""))
		end
		if I7[20 * (i - 1) + 6] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 2, 4 * i - 1, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 6]) or ""))
		end
		if I7[20 * (i - 1) + 7] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 3, 4 * i - 1, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 7]) or ""))
		end
		if I7[20 * (i - 1) + 8] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 4, 4 * i - 1, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 8]) or ""))
		end
		if I7[20 * (i - 1) + 9] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 1, 4 * i, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 9]) or ""))
		end
		if I7[20 * (i - 1) + 10] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 2, 4 * i, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 10]) or ""))
		end
		if I7[20 * (i - 1) + 11] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 3, 4 * i, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 11]) or ""))
		end
		i = i + 1
	end
	MultiboardDisplay(bj_lastCreatedMultiboard, true)
end
function uuyy()
	local i = 0
	local s = nil
	i = 1
	for _ in _loop_() do
		if i >= 6 then break end
		if udg_MaxDamage[i] < 10000.0 then
			s = I2S(R2I(udg_MaxDamage[i] / 1.0))
		elseif udg_MaxDamage[i] < 100000000.0 then
			s = (I2S(R2I(udg_MaxDamage[i] / 10000.0)) or "") .. "万"
		elseif udg_MaxDamage[i] / 10000.0 < 100000000.0 then
			s = (I2S(R2I(udg_MaxDamage[i] / 100000000.0)) or "") .. "亿"
		elseif udg_MaxDamage[i] / 100000000.0 < 100000000.0 then
			s = (I2S(R2I(udg_MaxDamage[i] / -727379968.0)) or "") .. "万亿"
		else
			s = (I2S(R2I(udg_MaxDamage[i] / 1874919424.0)) or "") .. "亿亿"
		end
		MultiboardSetTitleText(bj_lastCreatedMultiboard, "|cFFFFCC33这并不是系统窗口")
		DuoMianBan(bj_lastCreatedMultiboard, 1, 4 * i - 3, "|c00FF0080" .. (GetPlayerName(Player(i - 1)) or ""))
		DuoMianBan(bj_lastCreatedMultiboard, 2, 4 * i - 3, "|c0000FF00" .. "等级：" .. (I2S(GetUnitLevel(udg_hero[i])) or ""))
		DuoMianBan(bj_lastCreatedMultiboard, 3, 4 * i - 3, "|cFF00CCFF" .. (udg_menpainame[udg_runamen[i]] or ""))
		DuoMianBan(bj_lastCreatedMultiboard, 4, 4 * i - 3, "|cFFFF6600" .. "最高伤害：" .. (s or ""))
		if Ce[i] == 1 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99炼丹师")
		elseif Ce[i] == 2 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99锻造师")
		elseif Ce[i] == 3 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99兵器师")
		elseif Ce[i] == 4 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99鉴定师")
		elseif Ce[i] == 5 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99练气师")
		elseif Ce[i] == 6 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99寻宝师")
		elseif Ce[i] == 7 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99丫鬟")
		elseif Ce[i] == 8 then
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99精武师")
		else
			DuoMianBan(bj_lastCreatedMultiboard, 5, 4 * i - 3, "|c00FFEE99未选择")
		end
		if I7[20 * (i - 1) + 1] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 1, 4 * i - 2, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 1]) or ""))
		end
		if I7[20 * (i - 1) + 2] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 2, 4 * i - 2, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 2]) or ""))
		end
		if I7[20 * (i - 1) + 3] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 3, 4 * i - 2, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 3]) or ""))
		end
		if I7[20 * (i - 1) + 4] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 4, 4 * i - 2, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 4]) or ""))
		end
		if I7[20 * (i - 1) + 5] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 1, 4 * i - 1, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 5]) or ""))
		end
		if I7[20 * (i - 1) + 6] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 2, 4 * i - 1, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 6]) or ""))
		end
		if I7[20 * (i - 1) + 7] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 3, 4 * i - 1, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 7]) or ""))
		end
		if I7[20 * (i - 1) + 8] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 4, 4 * i - 1, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 8]) or ""))
		end
		if I7[20 * (i - 1) + 9] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 1, 4 * i, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 9]) or ""))
		end
		if I7[20 * (i - 1) + 10] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 2, 4 * i, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 10]) or ""))
		end
		if I7[20 * (i - 1) + 11] ~= 1095067243 then
			DuoMianBan(bj_lastCreatedMultiboard, 3, 4 * i, "|c0000FF00" .. (GetObjectName(I7[20 * (i - 1) + 11]) or ""))
		end
		i = i + 1
	end
end
--最大伤害
function wy()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) ~= MAP_CONTROL_USER and GetEventDamage() > udg_MaxDamage[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
end
function SetMaxDamage()
	udg_MaxDamage[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))] = GetEventDamage()
end
--玩家离开
function Xx()
	bj_forLoopBIndex = 1
	bj_forLoopBIndexEnd = 6
	for _ in _loop_() do
		if bj_forLoopBIndex > bj_forLoopBIndexEnd then break end
		UnitRemoveItemSwapped(UnitItemInSlotBJ(GetEnumUnit(), bj_forLoopBIndex), GetEnumUnit())
		bj_forLoopBIndex = bj_forLoopBIndex + 1
	end
	RemoveUnit(GetEnumUnit())
end
function PlayerLeave()
	ForGroupBJ(AddPlayerUnitIntoGroup(GetTriggerPlayer(), nil), Xx)
	yv(bj_lastCreatedMultiboard, 4, 1 + GetPlayerId(GetTriggerPlayer()) + 2, 100.0, 20.0, 100.0, 0)
	DuoMianBan(bj_lastCreatedMultiboard, 5, (1 + GetPlayerId(GetTriggerPlayer())) * 4 - 2, "离开")
end
--F9显示
function Qx()
	CreateQuestBJ(0, "|cFFFF00001.53版本更新内容", "|cff00ff00新增元素|n|r|cffffff00开放新门派|r：泰山派|n|cffffff00装备调整|r：七绝护符、天璇护腕、神行鞋和神迹戒变更为神器|n|cff00ff00平衡性调整|n|r|cffffff00门派调整|r：全面平衡各门派伤害和升重速度|n|cffffff00删除了救火任务和青龙团队副本。|n积分兑换金钱和珍稀币随难度不同而不同。|n历练3的声望要求降至3200，十恶不赦基础血量降至30000。|n杀矮子王爆江湖忠，杀南海神尼爆九阴锻骨篇。|n大量游戏细节优化调整。|r|cff00ff00|nBUG修复|n|r|cffffff00修复部分装备不能正确加攻速和移速的BUG。|n修复部分武功属性要求显示不正确的BUG。|r", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	CreateQuestBJ(0, "|cFFFF00001.54版本更新内容", "|cff00ff00平衡性调整|n|r|cffffff00降低天柱云气触发概率。|n略微提升泰山十八盘的升重速度和触发概率。|n降低号令天下令的声望加成。|n缩小独孤九剑范围、减少时间、提升伤害。|n泰山派岱宗如何触发概率由100%改为15%。|n略微提高神行鞋爆率。|n其他细节优化。|r|cff00ff00|nBUG修复|n|r|cffffff00修复泰山十八盘+小无相无效的BUG。|n修正剑意和新手帮助的描述错误。|n修复神行鞋无CD的BUG。|r", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	CreateQuestBJ(0, "|cFFFF0000人物属性", "招式伤害：影响人物的所有武功的威力，中后期影响较大\n内力：加成武功伤害百分比，中后期影响较大\n真实伤害：造成不受内力影响的实际伤害，前期影响较大\n绝学领悟力：影响绝学的发挥效果和威力\n根骨：影响任务和武功学习条件，同时提高技能暴击力\n悟性：影响任务和武功学习条件，同时决定技能升级的概率\n经脉：影响任务和武功学习条件，同时提高法力回复速度\n福缘：影响任务和武功学习条件，同时提高被动武学触发概率\n胆魄：影响任务和武功学习条件，同时提高杀怪回复能力\n医术：影响任务和武功学习条件，同时提高自然生命回复速度", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	CreateQuestBJ(0, "|cFFFF6600人物武功", "门派武功：加入门派后每个英雄都会有3个武功，分别在3、8、15级时自动领悟\n门派心法：每个门派都有两种心法，可以在完成历练2后二选其一修习\n江湖武功：分为武功和心法两大类，需要通过使用武功秘籍获得\n绝学和绝内：后期厉害的大招，也需要通过使用武功秘籍获得\n绝阵：开放部分门派绝阵，请到聚贤庄寻找", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	CreateQuestBJ(0, "|cFF00FF00游戏指令", "按键Esc：|cFFCCFF33查看人物属性|r\n输入“sj”：|cFFCCFF33恢复视角|r\n输入“bl”：|cFFCCFF33查看伴侣属性|r\n输入“jy”：|cFFCCFF33将剑意转化为性格属性|r\n输入“up”：|cFFCCFF33非特殊事件模式下提高难度（只能提不能降）|r\n输入“fb”：|cFFCCFF33查询副本重置时间|r\n输入“yx”：|cFFCCFF33查询宝宝携带草药的总药性|r\n游戏开始2分钟内输入“sw”：|cFFCCFF33试玩模式|r\n", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	CreateQuestBJ(0, "|cFF0000FF游戏指令2", "输入“cksx”：|cFFCCFF33查看剩余自由属性点数|r\n输入属性拼音首字母如“gg”：|cFFCCFF33根骨+1|r\n输入属性拼音首字母加数值如“fy5”：|cFFCCFF33福缘+5|r\n输入“ckwq”：|cFFCCFF33查询自制武器属性|r\n输入“ckwg”：|cFFCCFF33查询自创武功|r\n输入“ckjn”：|cFFCCFF33查询人物性格和技能升重进度|r\n输入“ck”：|cFFCCFF33查询技能伤害|r\n输入“ckjf”：|cFFCCFF33查询守家积分|r\n", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	CreateQuestBJ(2, "|cFFFF00CC称号系统", "在游戏中，可以获得两种称号：门派称号和副职称号\n门派称号：如果你的所有门派武学和门派内功均达到6级，可以获得各门派的掌门称号；在获得掌门之前达成一定的条件，获得掌门称号时还可以获得额外的门派称号，具体门派称号的获得方法可以参考论坛的攻略。注意获得门派称号的契机只有一次。\n副职称号：游戏中的七种副职达到一定条件时，可以分别获得相应的副职大师称号，增加与该副职相关的额外能力，具体副职大师称号的获得方法可以参考论坛的攻略", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	--call CreateQuestBJ(2,"|cFFFFFF00武器系统","在游戏中，每一把武器都有自己的耐久度，每击杀一个单位耐久度减1，耐久度为0后武器破损消失\n如果副职选择兵器师，则武器不减少耐久度。\n每个玩家对每一种武器有一定的熟练度，每击杀一个单位增加一定熟练度，不同武器熟练度上限不同，熟练度上升武功的伤害将随之上升\n副职选择兵器师大幅提升武器的熟练度上限\n对某种武器极不熟练时伤害要低于不拿武器时的伤害","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	CreateQuestBJ(2, "|cFFFF0000副职玩法", "玩家可在NPC郭靖处选择自己的副职，加入副职后会获得一些独特的能力\n副职满足一定条件后，可以获得相应的大师称号，获得大师后会额外获得一些能力\n炼丹师：可使用炼丹系统并可多服食五颗丹药\n锻造师：可使用镶嵌和锻造系统\n兵器师：镇妖死亡不掉落，拾取和冶炼兵器不受历练限制\n练气师：每提升一次等级增加4-12点招式伤害或内力或真实伤害\n寻宝师：副本双倍掉落\n鉴定师：爆双倍古董，可以使用古董换书，古董以最高价卖出\n丫鬟：携带两把武器及两件衣服\n精武师：技能升级到九重获得额外自创武学点，可以打出奇武\n更多大师获得方式和作用请到NPC随风而逝de风处查看", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	CreateQuestBJ(2, "|cFFFF6600称号系统", "玩家4个门派武功全部达到6级可获得掌门称号\n在获得掌门称号时若达到一定条件，可同时获得其他称号\n有一些称号与掌门无关，具体可参考网站或论坛的攻略\n", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	CreateQuestBJ(2, "|cFF00FF00隐藏门派", "游戏中有两个隐藏门派：姑苏慕容和灵鹫宫\n隐藏门派的选择方式:灵鹫宫选人后输入www.juezhanjianghu.com，慕容世家选人后输入jzjh.uuu9.com或3级前去找慕容复\n", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	CreateQuestBJ(2, "|cFF0000FF游戏网站", "专区论坛：|cFFCCFF33jzjhbbs.uuu9.com|r\n游戏作者：|cFFCCFF33云杨 Zei_kale|r\n游戏QQ群：|cFFCCFF33159030768, 369925013\n\n关注武侠，支持作者，详情请在网站和论坛查询", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
end
--ESC查看人物属性
function RenWuShuXing()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	ClearTextMessagesBJ(ov(p))
	DisplayTextToPlayer(p, 0, 0, "|cFFFF0000人物属性：")
	DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
	DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF暴击率 ：   " .. (I2S(IMinBJ(R2I(udg_baojilv[i] * 100.0), 100)) or "") .. "%")
	DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF暴击伤害 ：   " .. (I2S(R2I(udg_baojishanghai[i] * 100.0)) or "") .. "%")
	DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF武功伤害加成 ：   " .. (I2S(R2I(udg_shanghaijiacheng[i] * 100.0)) or "") .. "%")
	DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF伤害吸收 ：   " .. (I2S(IMinBJ(R2I(udg_shanghaixishou[i] * 100.0), 80)) or "") .. "%")
	DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
	DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF根骨 ：   " .. (I2S(gengu[i]) or ""))
	DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF悟性 ：   " .. (I2S(wuxing[i]) or ""))
	DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF经脉 ：   " .. (I2S(jingmai[i]) or ""))
	DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF福缘 ：   " .. (I2S(fuyuan[i]) or ""))
	DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF胆魄 ：   " .. (I2S(danpo[i]) or ""))
	DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF医术 ：   " .. (I2S(yishu[i]) or ""))
	DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
	DisplayTextToPlayer(p, 0, 0, "|cFF33FF00绝学领悟力：" .. (I2S(juexuelingwu[i]) or ""))
	DisplayTextToPlayer(p, 0, 0, "|cFF33FF00修行：" .. (I2S(xiuxing[i]) or ""))
	DisplayTextToPlayer(p, 0, 0, "|cFF33FF00武学修为：第" .. (I2S(wugongxiuwei[i]) or "") .. "层")
	DisplayTextToPlayer(p, 0, 0, "|cFF33FF00江湖声望：" .. (I2S(shengwang[i]) or ""))
	DisplayTextToPlayer(p, 0, 0, "|cFF33FF00守家积分：" .. (I2S(shoujiajf[i]) or ""))
	if Ce[i] ~= 1 then
		DisplayTextToPlayer(p, 0, 0, "|cFF33FF00当前用丹数量：" .. (I2S(yongdanshu[i]) or "") .. " / 10")
	else
		DisplayTextToPlayer(p, 0, 0, "|cFF33FF00当前用丹数量：" .. (I2S(yongdanshu[i]) or "") .. " / 15")
	end
	p = nil
end


function hy()
	return GetUnitTypeId(GetTriggerUnit()) == 1851942003
end
--是否达到胜利条件
function IsVictory()
	if de == false then
		FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		DestroyTimer(GetExpiredTimer())
	else
		if LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1587459251) <= 10.0 then
			SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1587459251, 100.0)
		else
			SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1587459251, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1587459251) - 10.0)
		end
		if LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1676716706) <= 10.0 then
			SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1676716706, 100.0)
		else
			SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1676716706, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1676716706) - 10.0)
		end
		if LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1559655710) <= 0.1 then
			SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1559655710, 100.0)
		else
			SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1559655710, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1559655710) - 10.0)
		end
		if LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1663695754) <= 0.0 then
			SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1663695754, 70.0)
		else
			SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1663695754, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1663695754) - 10.0)
		end
		SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558, 1)
		if udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)] ~= nil then
			DestroyTextTag(ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)])
			SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951, GetUnitLoc(udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)]))
			SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584, pu(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951), 150.0, 110.0))
			CreateTextTagLocBJ("武林盟主", LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584), 100.0, 11.0, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1587459251), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1676716706), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1559655710), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1663695754))
			RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951))
			RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584))
			ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)] = bj_lastCreatedTextTag
		end
		SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558) + 1)
		if udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)] ~= nil then
			DestroyTextTag(ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)])
			SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951, GetUnitLoc(udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)]))
			SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584, pu(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951), 150.0, 110.0))
			CreateTextTagLocBJ("武林盟主", LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584), 100.0, 11.0, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1587459251), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1676716706), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1559655710), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1663695754))
			RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951))
			RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584))
			ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)] = bj_lastCreatedTextTag
		end
		SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558) + 1)
		if udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)] ~= nil then
			DestroyTextTag(ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)])
			SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951, GetUnitLoc(udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)]))
			SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584, pu(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951), 150.0, 110.0))
			CreateTextTagLocBJ("武林盟主", LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584), 100.0, 11.0, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1587459251), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1676716706), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1559655710), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1663695754))
			RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951))
			RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584))
			ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)] = bj_lastCreatedTextTag
		end
		SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558) + 1)
		if udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)] ~= nil then
			DestroyTextTag(ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)])
			SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951, GetUnitLoc(udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)]))
			SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584, pu(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951), 150.0, 110.0))
			CreateTextTagLocBJ("武林盟主", LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584), 100.0, 11.0, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1587459251), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1676716706), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1559655710), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1663695754))
			RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951))
			RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584))
			ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)] = bj_lastCreatedTextTag
		end
		SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558) + 1)
		if udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)] ~= nil then
			DestroyTextTag(ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)])
			SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951, GetUnitLoc(udg_hero[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)]))
			SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584, pu(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951), 150.0, 110.0))
			CreateTextTagLocBJ("武林盟主", LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584), 100.0, 11.0, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1587459251), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1676716706), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1559655710), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1663695754))
			RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951))
			RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -1925439584))
			ee[LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -1449975558)] = bj_lastCreatedTextTag
		end
	end
end
--胜利动作
function Victory()
	local ky
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	local i = 0
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	i = 1
	for _ in _loop_() do
		if i >= 6 then break end
		udg_MeiJuJiFen[i] = udg_MeiJuJiFen[i] + ae // 50
		YDWE_PreloadSL_Set(Player(i - 1), "总积分", 1, udg_MeiJuJiFen[i])
		YDWE_PreloadSL_Save(Player(i - 1), "JueZhan", "JiangHu" .. (I2S(i) or ""), 1)
		i = i + 1
	end
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF00B2决战江湖1.55的游戏总评分：" .. (I2S(ae) or "") .. "分（通关）")
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF00B2恭喜你们通关，游戏将在2分钟后结束\n游戏专区论坛：jzjhbbs.uuu9.com\n游戏交流QQ群：159030768 369925013\n关注武侠，让决战江湖走得更远，期待你的参与，详情请在专区论坛查询")
	de = true
	SaveReal(YDHT, id * cx, -1587459251, 40.0)
	SaveReal(YDHT, id * cx, -1676716706, 70.0)
	SaveReal(YDHT, id * cx, -1559655710, 100.0)
	SaveReal(YDHT, id * cx, -1663695754, 70.0)
	ky = CreateTimer()
	SaveReal(YDHT, GetHandleId(ky), -1587459251, LoadReal(YDHT, id * cx, -1587459251))
	SaveReal(YDHT, GetHandleId(ky), -1676716706, LoadReal(YDHT, id * cx, -1676716706))
	SaveReal(YDHT, GetHandleId(ky), -1559655710, LoadReal(YDHT, id * cx, -1559655710))
	SaveReal(YDHT, GetHandleId(ky), -1663695754, LoadReal(YDHT, id * cx, -1663695754))
	TimerStart(ky, 0.04, true, IsVictory)
	YDWEPolledWaitNull(60.0)
	SaveInteger(YDHT, id, -320330265, cx)
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF00B2决战江湖1.55的游戏总评分：" .. (I2S(ae) or "") .. "分（通关）")
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF00B2恭喜你们通关，游戏将在1分钟后结束\n游戏专区论坛：jzjhbbs.uuu9.com\n游戏交流QQ群：159030768 369925013\n关注武侠，让决战江湖走得更远，期待你的参与，详情请在专区论坛查询")
	YDWEPolledWaitNull(60.0)
	SaveInteger(YDHT, id, -320330265, cx)
	CustomVictoryBJ(Player(0), true, true)
	CustomVictoryBJ(Player(1), true, true)
	CustomVictoryBJ(Player(2), true, true)
	CustomVictoryBJ(Player(3), true, true)
	CustomVictoryBJ(Player(4), true, true)
	FlushChildHashtable(YDHT, id * cx)
	ky = nil
end
--失败动作
function Lose()
	local i = 0
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF00B2决战江湖1.55的游戏总评分：" .. (I2S(ae) or "") .. "分（战败）")
	i = 1
	for _ in _loop_() do
		if i >= 6 then break end
		udg_MeiJuJiFen[i] = udg_MeiJuJiFen[i] + ae // 100
		YDWE_PreloadSL_Set(Player(i - 1), "总积分", 1, udg_MeiJuJiFen[i])
		YDWE_PreloadSL_Save(Player(i - 1), "JueZhan", "JiangHu" .. (I2S(i) or ""), 1)
		i = i + 1
	end
	CustomDefeatBJ(Player(0), "没有能守护住正派武林!")
	CustomDefeatBJ(Player(1), "没有能守护住正派武林!")
	CustomDefeatBJ(Player(2), "没有能守护住正派武林!")
	CustomDefeatBJ(Player(3), "没有能守护住正派武林!")
	CustomDefeatBJ(Player(4), "没有能守护住正派武林!")
end


--玩家英雄阵亡
function Ex()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function PlayerDeath()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if ge[i] then
		StartTimerBJ(udg_revivetimer[i], false, 7.0)
	else
		StartTimerBJ(udg_revivetimer[i], false, 15.0)
	end
	TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, p)
	CreateTimerDialogBJ(bj_lastStartedTimer, "复活倒计时:")
	R7[i] = bj_lastCreatedTimerDialog
	he[i] = true
	N8[i] = 0
	GroupRemoveUnit(k9, u)
	GroupRemoveUnit(j9, u)
	GroupRemoveUnit(s9, u)
	GroupRemoveUnit(r9, u)
	if UnitHaveItem(u, 1227895379) or UnitHaveItem(u, 1227895373) or UnitHaveItem(u, 1227895377) or UnitHaveItem(u, 1227895378) or UnitHaveItem(u, 1227895376) then
		if Ce[i] ~= 3 then
			DisplayTextToPlayer(p, 0, 0, "|cFFff0000养武消失了")
		end
	end
	u = nil
	p = nil
end
--五个玩家复活
function PlayerReviveA()
	DestroyTimerDialog(R7[1])
	Q4 = GetRectCenter(He)
	ReviveHeroLoc(udg_hero[1], Q4, true)
	PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_hero[1]), Q4, 0)
	RemoveLocation(Q4)
	he[1] = false
	if UnitHaveItem(udg_hero[1], 1227895379) or UnitHaveItem(udg_hero[1], 1227895373) or UnitHaveItem(udg_hero[1], 1227895377) or UnitHaveItem(udg_hero[1], 1227895378) or UnitHaveItem(udg_hero[1], 1227895376) then
		if Ce[1] ~= 3 then
			RemoveItem(FetchUnitItem(udg_hero[1], 1227895379))
			RemoveItem(FetchUnitItem(udg_hero[1], 1227895373))
			RemoveItem(FetchUnitItem(udg_hero[1], 1227895377))
			RemoveItem(FetchUnitItem(udg_hero[1], 1227895378))
			RemoveItem(FetchUnitItem(udg_hero[1], 1227895376))
		end
	end
	if GetUnitAbilityLevel(udg_hero[1], 1093677877) > 0 then
		UnitRemoveAbility(udg_hero[1], 1093677877)
		UnitAddAbility(udg_hero[1], 1093677876)
		SetUnitAbilityLevel(udg_hero[1], 1093677876, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(udg_hero[1])), 1093677876 * 5))
	end
	AddCharacterABuff(udg_hero[1], udg_xinggeA[1])
	AddCharacterBBuff(udg_hero[1], udg_xinggeB[1])
end
function PlayerReviveB()
	DestroyTimerDialog(R7[2])
	Q4 = GetRectCenter(He)
	ReviveHeroLoc(udg_hero[2], Q4, true)
	PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_hero[2]), Q4, 0)
	RemoveLocation(Q4)
	he[2] = false
	if UnitHaveItem(udg_hero[2], 1227895379) or UnitHaveItem(udg_hero[2], 1227895373) or UnitHaveItem(udg_hero[2], 1227895377) or UnitHaveItem(udg_hero[2], 1227895378) or UnitHaveItem(udg_hero[2], 1227895376) then
		if Ce[2] ~= 3 then
			RemoveItem(FetchUnitItem(udg_hero[2], 1227895379))
			RemoveItem(FetchUnitItem(udg_hero[2], 1227895373))
			RemoveItem(FetchUnitItem(udg_hero[2], 1227895377))
			RemoveItem(FetchUnitItem(udg_hero[2], 1227895378))
			RemoveItem(FetchUnitItem(udg_hero[2], 1227895376))
		end
	end
	if GetUnitAbilityLevel(udg_hero[2], 1093677877) > 0 then
		UnitRemoveAbility(udg_hero[2], 1093677877)
		UnitAddAbility(udg_hero[2], 1093677876)
		SetUnitAbilityLevel(udg_hero[2], 1093677876, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(udg_hero[2])), 1093677876 * 5))
	end
	AddCharacterABuff(udg_hero[2], udg_xinggeA[2])
	AddCharacterBBuff(udg_hero[2], udg_xinggeB[2])
end
function PlayerReviveC()
	DestroyTimerDialog(R7[3])
	Q4 = GetRectCenter(He)
	ReviveHeroLoc(udg_hero[3], Q4, true)
	PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_hero[3]), Q4, 0)
	RemoveLocation(Q4)
	he[3] = false
	if UnitHaveItem(udg_hero[3], 1227895379) or UnitHaveItem(udg_hero[3], 1227895373) or UnitHaveItem(udg_hero[3], 1227895377) or UnitHaveItem(udg_hero[3], 1227895378) or UnitHaveItem(udg_hero[3], 1227895376) then
		if Ce[3] ~= 3 then
			RemoveItem(FetchUnitItem(udg_hero[3], 1227895379))
			RemoveItem(FetchUnitItem(udg_hero[3], 1227895373))
			RemoveItem(FetchUnitItem(udg_hero[3], 1227895377))
			RemoveItem(FetchUnitItem(udg_hero[3], 1227895378))
			RemoveItem(FetchUnitItem(udg_hero[3], 1227895376))
		end
	end
	if GetUnitAbilityLevel(udg_hero[3], 1093677877) > 0 then
		UnitRemoveAbility(udg_hero[3], 1093677877)
		UnitAddAbility(udg_hero[3], 1093677876)
		SetUnitAbilityLevel(udg_hero[3], 1093677876, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(udg_hero[3])), 1093677876 * 5))
	end
	AddCharacterABuff(udg_hero[3], udg_xinggeA[3])
	AddCharacterBBuff(udg_hero[3], udg_xinggeB[3])
end
function PlayerReviveD()
	DestroyTimerDialog(R7[4])
	Q4 = GetRectCenter(He)
	ReviveHeroLoc(udg_hero[4], Q4, true)
	PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_hero[4]), Q4, 0)
	RemoveLocation(Q4)
	he[4] = false
	if UnitHaveItem(udg_hero[4], 1227895379) or UnitHaveItem(udg_hero[4], 1227895373) or UnitHaveItem(udg_hero[4], 1227895377) or UnitHaveItem(udg_hero[4], 1227895378) or UnitHaveItem(udg_hero[4], 1227895376) then
		if Ce[4] ~= 3 then
			RemoveItem(FetchUnitItem(udg_hero[4], 1227895379))
			RemoveItem(FetchUnitItem(udg_hero[4], 1227895373))
			RemoveItem(FetchUnitItem(udg_hero[4], 1227895377))
			RemoveItem(FetchUnitItem(udg_hero[4], 1227895378))
			RemoveItem(FetchUnitItem(udg_hero[4], 1227895376))
		end
	end
	if GetUnitAbilityLevel(udg_hero[4], 1093677877) > 0 then
		UnitRemoveAbility(udg_hero[4], 1093677877)
		UnitAddAbility(udg_hero[4], 1093677876)
		SetUnitAbilityLevel(udg_hero[4], 1093677876, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(udg_hero[4])), 1093677876 * 5))
	end
	AddCharacterABuff(udg_hero[4], udg_xinggeA[4])
	AddCharacterBBuff(udg_hero[4], udg_xinggeB[4])
end
function PlayerReviveE()
	DestroyTimerDialog(R7[5])
	Q4 = GetRectCenter(He)
	ReviveHeroLoc(udg_hero[5], Q4, true)
	PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_hero[5]), Q4, 0)
	RemoveLocation(Q4)
	he[5] = false
	if UnitHaveItem(udg_hero[5], 1227895379) or UnitHaveItem(udg_hero[5], 1227895373) or UnitHaveItem(udg_hero[5], 1227895377) or UnitHaveItem(udg_hero[5], 1227895378) or UnitHaveItem(udg_hero[5], 1227895376) then
		if Ce[5] ~= 3 then
			RemoveItem(FetchUnitItem(udg_hero[5], 1227895379))
			RemoveItem(FetchUnitItem(udg_hero[5], 1227895373))
			RemoveItem(FetchUnitItem(udg_hero[5], 1227895377))
			RemoveItem(FetchUnitItem(udg_hero[5], 1227895378))
			RemoveItem(FetchUnitItem(udg_hero[5], 1227895376))
		end
	end
	if GetUnitAbilityLevel(udg_hero[5], 1093677877) > 0 then
		UnitRemoveAbility(udg_hero[5], 1093677877)
		UnitAddAbility(udg_hero[5], 1093677876)
		SetUnitAbilityLevel(udg_hero[5], 1093677876, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(udg_hero[5])), 1093677876 * 5))
	end
	AddCharacterABuff(udg_hero[5], udg_xinggeA[5])
	AddCharacterBBuff(udg_hero[5], udg_xinggeB[5])
end

function CA()
	udg_counter1 = udg_counter1 + 1
	q7[udg_counter1] = GetUnitTypeId(GetEnumUnit())
	r7[udg_counter1] = GetEnumUnit()
	m7[udg_counter1] = GetUnitLoc(GetEnumUnit())
end
function cA()
	m7[0] = GetRectCenter(Ge)
	nn7 = CountUnitsInGroup(AddPlayerUnitIntoGroup(Player(12), nil))
	o7 = CountUnitsInGroup(AddPlayerUnitIntoGroup(Player(15), nil))
	ForGroupBJ(AddPlayerUnitIntoGroup(Player(12), nil), CA)
	ForGroupBJ(AddPlayerUnitIntoGroup(Player(15), nil), CA)
end
--怪物死后重新刷怪
function EA()
	--圣兽死后不刷新
	if GetTriggerUnit() ~= udg_qinglong and GetTriggerUnit() ~= udg_baihu and GetTriggerUnit() ~= udg_zhuque and GetTriggerUnit() ~= udg_xuanwu and GetTriggerUnit() ~= gg_unit_n00M_0131 then
		YDWEPolledWaitNull(0.02)
		s7 = 1
		--call BJDebugMsg(GetUnitName(GetTriggerUnit()))
		--call BJDebugMsg(I2S(GetUnitTypeId(GetTriggerUnit())))
		for _ in _loop_() do
			if s7 > nn7 + o7 then break end
			if GetTriggerUnit() == r7[s7] then
				if s7 <= nn7 then
					--call BJDebugMsg("s7="+I2S(s7))
					--call BJDebugMsg(I2S(q7[s7]))
					if GetUnitTypeId(GetTriggerUnit()) ~= 1848651824 then
						CreateNUnitsAtLoc(1, 1848651824, Player(12), m7[0], bj_UNIT_FACING)
						UnitApplyTimedLifeBJ((0.18 - 0.01 * I2R(O4)) * I2R(GetUnitPointValueByType(GetUnitTypeId(GetTriggerUnit()))), 1112820806, bj_lastCreatedUnit)
						r7[s7] = bj_lastCreatedUnit
						return
					else
						CreateNUnitsAtLoc(1, q7[s7], Player(12), m7[s7], bj_UNIT_FACING)
						r7[s7] = bj_lastCreatedUnit
						return
					end
				else
					if GetUnitTypeId(GetTriggerUnit()) ~= 1848651824 then
						CreateNUnitsAtLoc(1, 1848651824, Player(12), m7[0], bj_UNIT_FACING)
						UnitApplyTimedLifeBJ((0.18 - 0.01 * I2R(O4)) * I2R(GetUnitPointValueByType(GetUnitTypeId(GetTriggerUnit()))), 1112820806, bj_lastCreatedUnit)
						r7[s7] = bj_lastCreatedUnit
						return
					else
						CreateNUnitsAtLoc(1, q7[s7], Player(15), m7[s7], bj_UNIT_FACING)
						r7[s7] = bj_lastCreatedUnit
						return
					end
				end
			end
			s7 = s7 + 1
		end
	end
end
function GA()
	return ShiFouShuaGuai
end
--BOSS成长
function BOSSChengZhang()
	local t = GetExpiredTimer()
	if udg_boss[udg_boshu // 4] ~= nil then
		if IsUnitAliveBJ(udg_boss[udg_boshu // 4]) then
			if GetUnitAbilityLevel(udg_boss[udg_boshu // 4], 1093682242) == 0 then
				UnitAddAbility(udg_boss[udg_boshu // 4], 1093682242)
				DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033邪教BOSS" .. (GetUnitName(udg_boss[udg_boshu // 4]) or "") .. "已加强")
			else
				if GetUnitAbilityLevel(udg_boss[udg_boshu // 4], 1093682242) < 10 then
					IncUnitAbilityLevel(udg_boss[udg_boshu // 4], 1093682242)
					DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033邪教BOSS" .. (GetUnitName(udg_boss[udg_boshu // 4]) or "") .. "已加强")
				end
			end
			if GetUnitAbilityLevel(udg_boss[udg_boshu // 4], 1093682000) == 0 then
				UnitAddAbility(udg_boss[udg_boshu // 4], 1093682000)
			else
				if GetUnitAbilityLevel(udg_boss[udg_boshu // 4], 1093682000) < 6 then
					IncUnitAbilityLevel(udg_boss[udg_boshu // 4], 1093682000)
				else
					UnitAddAbility(udg_boss[udg_boshu // 4], 1093681969)
				end
			end
		else
			PauseTimer(t)
			DestroyTimer(t)
		end
	else
		PauseTimer(t)
		DestroyTimer(t)
	end
	t = nil
end
--玩家等级大于波数*4
function LevelGuoGao()
	local i = 0
	local totallevel = 0
	local r = 0.0
	for _ in _loop_() do
		if i > 11 then break end
		if udg_hero[i] ~= nil then
			totallevel = totallevel + GetUnitLevel(udg_hero[i])
		end
		i = i + 1
	end
	if udg_teshushijian and I2R(totallevel) > udg_boshu * 4 * I2R(GetNumPlayer()) then
		return true
	end
	return false
end
-- 下一波怪的警告
function NextWaveWarning()
	if udg_boshu == 9 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能神圣护甲和10倍暴击")
	elseif udg_boshu == 11 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能咆哮和重击")
	elseif udg_boshu == 12 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪为空军")
	elseif udg_boshu == 13 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能噬血术")
	elseif udg_boshu == 14 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪为绞肉车，死亡后会产生小蜘蛛")
	elseif udg_boshu == 15 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪为空军，拥有技能20倍暴击")
	elseif udg_boshu == 16 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能精灵之火")
	elseif udg_boshu == 17 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能狂战士和30倍暴击")
	elseif udg_boshu == 18 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪血量很高，并拥有技能嘲讽")
	elseif udg_boshu == 19 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能狂热")
	elseif udg_boshu == 20 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能变相移动")
	elseif udg_boshu == 21 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能反魔法外壳")
	elseif udg_boshu == 22 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能重击")
	elseif udg_boshu == 23 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能90%闪避")
	elseif udg_boshu == 24 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能卡布恩（自爆）")
	elseif udg_boshu == 25 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能闪电攻击")
	elseif udg_boshu == 26 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪拥有技能神圣护甲")
	elseif udg_boshu == 27 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：下一波怪血量很高，并拥有技能永久献祭和重生")
	elseif udg_boshu == 28 then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033※警告※：本波为最后一波进攻，本波结束后教主即将出现")
	end
end
function BOSSAttack(t)
	if ModuloInteger(udg_boshu, 4) == 0 and udg_boshu < 28 and udg_shengchun == false then
		CreateNUnitsAtLocFacingLocBJ(1, u7[udg_boshu // 4], Player(6), v7[8], v7[3])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[3])
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033邪教趁我方不备，偷偷地派出BOSS从背后杀过来了，请准备防御")
	end
	if ModuloInteger(udg_boshu, 4) == 0 and udg_boshu < 30 and udg_shengchun == false then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033邪教派出BOSS前来进攻，请准备防御")
		CreateNUnitsAtLocFacingLocBJ(1, u7[udg_boshu // 4], Player(6), v7[6], v7[4])
		if udg_boshu == 4 then
			UnitAddAbility(bj_lastCreatedUnit, 1093681970)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093681970, IMinBJ(udg_nandu * 2, 9))
			UnitAddAbility(bj_lastCreatedUnit, 1093681973)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093681973, IMinBJ(udg_nandu * 2, 9))
			UnitAddAbility(bj_lastCreatedUnit, 1093681975)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093681975, IMinBJ(udg_nandu * 2, 9))
		elseif udg_boshu == 8 then
			UnitAddAbility(bj_lastCreatedUnit, 1093681990)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093681990, IMinBJ(udg_nandu * 2, 9))
			--call UnitAddAbility(bj_lastCreatedUnit,'A0CM')
			--call SetUnitAbilityLevel(bj_lastCreatedUnit,'A0CM',IMinBJ(udg_nandu*2,9))
			UnitAddAbility(bj_lastCreatedUnit, 1093682241)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093682241, IMinBJ(udg_nandu * 2, 9))
		elseif udg_boshu == 12 then
			UnitAddAbility(bj_lastCreatedUnit, 1093681993)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093681993, IMinBJ(udg_nandu * 2, 9))
			UnitAddAbility(bj_lastCreatedUnit, 1093681994)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093681994, IMinBJ(udg_nandu * 2, 9))
			UnitAddAbility(bj_lastCreatedUnit, 1093681998)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093681998, IMinBJ(udg_nandu * 2, 9))
		elseif udg_boshu == 16 then
			UnitAddAbility(bj_lastCreatedUnit, 1093681976)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093681976, IMinBJ(udg_nandu * 2, 9))
			UnitAddAbility(bj_lastCreatedUnit, 1093681977)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093681977, IMinBJ(udg_nandu * 2, 9))
			UnitAddAbility(bj_lastCreatedUnit, 1093681986)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093681986, IMinBJ(udg_nandu * 2, 9))
		elseif udg_boshu == 20 then
			UnitAddAbility(bj_lastCreatedUnit, 1093681992)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093681992, IMinBJ(udg_nandu * 2, 9))
			UnitAddAbility(bj_lastCreatedUnit, 1093682245)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093682245, IMinBJ(udg_nandu * 2, 9))
		elseif udg_boshu == 24 then
			UnitAddAbility(bj_lastCreatedUnit, 1093681995)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093681995, IMinBJ(udg_nandu * 2, 9))
			UnitAddAbility(bj_lastCreatedUnit, 1093682248)
			SetUnitAbilityLevel(bj_lastCreatedUnit, 1093682248, IMinBJ(udg_nandu * 2, 9))
		end
		udg_boss[udg_boshu // 4] = bj_lastCreatedUnit
		TimerStart(t, 20, true, BOSSChengZhang)
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
	elseif ModuloInteger(udg_boshu, 4) ~= 0 and udg_boshu < 28 and udg_shengchun == false then
		if LevelGuoGao() then
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033由于激活特殊事件，邪教派出BOSS前来进攻，请准备防御")
			CreateNUnitsAtLocFacingLocBJ(1, u7[udg_boshu // 4 + 1], Player(6), v7[6], v7[4])
			udg_boss[udg_boshu // 4] = bj_lastCreatedUnit
			TimerStart(t, 20, true, BOSSChengZhang)
			GroupAddUnit(w7, bj_lastCreatedUnit)
			IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
		end
	end
end
--刷怪
function HA()
	local t = CreateTimer()
	if udg_boshu == 4 and udg_teshushijian == true then
		ChooseNanDu()
	end
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033邪教势力：第" .. (I2S(udg_boshu) or "") .. "|CFFFF0033波")
	NextWaveWarning() --下波警告
	if LevelGuoGao() then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033激活特殊事件|cFFDDA0DD※邪教全力进攻※")
	end
	StopMusic(false)
	PlayMusicBJ(yh) -- 切换BGM
	EnableTrigger(Yi) -- 刷正面的进攻怪
	YDWEPolledWaitNull(40.0)
	if O4 > 1 then -- 游戏人数>1
		EnableTrigger(Zi) -- 刷背面的进攻怪
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033邪教趁我方不备，偷偷地从背后杀过来了")
	end
	YDWEPolledWaitNull(20.0)
	if ue > 0 then
		ConditionalTriggerExecute(dj)
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033名门高手开始进攻，大家要小心应付了！")
	end
	DisableTrigger(Yi)
	YDWEPolledWaitNull(10.0)
	if O4 > 1 then
		DisableTrigger(Zi)
	end
	YDWEPolledWaitNull(10.0)
	BOSSAttack(t)
	udg_boshu = udg_boshu + 1
	StopMusic(false)
	PlayMusicBJ(xh)
	if udg_sutong == false then
		YDWEPolledWaitNull(145 - GetNumPlayer() * 10)
	end
	if udg_boshu >= 29 and udg_shengchun == false then
		StopMusic(false)
		PlayMusicBJ(zh)
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033西域势力最后BOSS即将发起最后进攻，请作好防守准备")
		CreateNUnitsAtLocFacingLocBJ(1, u7[8], Player(6), v7[6], v7[4])
		udg_boss[udg_boshu // 4] = bj_lastCreatedUnit
		TimerStart(t, 20, true, BOSSChengZhang)
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
	else
		if udg_shengchun then
			AddPlayerTechResearched(Player(12), 1378889780, 1)
			AddPlayerTechResearched(Player(6), 1378889780, 1)
		end
		if x7 >= 1 then
			TriggerExecute(ij)
		else
			TriggerExecute(hj)
		end
	end
	t = nil
end
function JiaJiNeng(u)
	if udg_boshu >= 8 then
		UnitAddAbility(u, 1093682008)
		if udg_boshu >= 18 then
			UnitAddAbility(u, 1093682009)
			if udg_boshu >= 28 then
				UnitAddAbility(u, 1093682010)
			end
		end
	end
end
function FrontAttack()
	if udg_shengchun == false then
		CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu], Player(6), v7[6], v7[4])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
		CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu], Player(6), v7[7], v7[4])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
		CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu], Player(6), v7[5], v7[4])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
		if LevelGuoGao() then
			CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu], Player(6), v7[6], v7[4])
			GroupAddUnit(w7, bj_lastCreatedUnit)
			IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
			CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu], Player(6), v7[7], v7[4])
			GroupAddUnit(w7, bj_lastCreatedUnit)
			IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
			CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu], Player(6), v7[5], v7[4])
			GroupAddUnit(w7, bj_lastCreatedUnit)
			IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
		end
	else
		CreateNUnitsAtLocFacingLocBJ(1, 1848651827, Player(6), v7[6], v7[4])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
		JiaJiNeng(bj_lastCreatedUnit)
		CreateNUnitsAtLocFacingLocBJ(1, 1848651827, Player(6), v7[7], v7[4])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
		JiaJiNeng(bj_lastCreatedUnit)
		CreateNUnitsAtLocFacingLocBJ(1, 1848651827, Player(6), v7[5], v7[4])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
		JiaJiNeng(bj_lastCreatedUnit)
	end
end
function BackAttack()
	if udg_shengchun == false then
		CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu + 1], Player(6), v7[8], v7[3])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[3])
		if LevelGuoGao() then
			CreateNUnitsAtLocFacingLocBJ(1, y7[udg_boshu + 1], Player(6), v7[8], v7[3])
			GroupAddUnit(w7, bj_lastCreatedUnit)
			IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[3])
		end
	else
		CreateNUnitsAtLocFacingLocBJ(1, 1848651827, Player(6), v7[8], v7[3])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[3])
		JiaJiNeng(bj_lastCreatedUnit)
	end
end
function MA()
	return ShiFouShuaGuai
end
function NA()
	local i = 1
	local j = 1
	local l__l = 0
	local r1 = 0
	local r2 = 0
	local rr3 = 1.0
	local rr4 = 1.0
	if ue == 1 then
		r1 = 1.26
		r2 = 1.4
	elseif ue == 2 then
		r1 = 1.28
		r2 = 1.43
	elseif ue == 3 then
		r1 = 1.3
		r2 = 1.46
	elseif ue == 4 then
		r1 = 1.32
		r2 = 1.49
	elseif ue == 5 then
		r1 = 1.34
		r2 = 1.52
	end
	for _ in _loop_() do
		if i > ue then break end
		for _ in _loop_() do
			if j > udg_boshu then break end
			if j < udg_boshu then
				rr3 = rr3 * r1
				rr4 = rr4 * r2
			end
			j = j + 1
		end
		l__l = GetRandomInt(1, 11)
		CreateNUnitsAtLocFacingLocBJ(1, ve[l__l], Player(6), v7[GetRandomInt(5, 8)], v7[4])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851983, v7[4])
		SetHeroLevelBJ(bj_lastCreatedUnit, 4 * udg_boshu, false)
		YDWEGeneralBounsSystemUnitSetBonus(bj_lastCreatedUnit, 3, 0, R2I(I2R(xe[l__l]) * (rr3 * 3.3)))
		YDWEGeneralBounsSystemUnitSetBonus(bj_lastCreatedUnit, 2, 0, (udg_boshu - 1) * ye[l__l] * 9 // 10 * ue)
		--call YDWEGeneralBounsSystemUnitSetBonus(bj_lastCreatedUnit,1,0,R2I(I2R(ze[l])*rr4))
		unitadditembyidswapped(Ae[udg_boshu], bj_lastCreatedUnit)
		i = i + 1
	end
--set ue=0
end
function PA()
	DestroyTimerDialog(z7[1])
	ConditionalTriggerExecute(Xi)
end
function RA()
	DestroyTimerDialog(z7[2])
	ConditionalTriggerExecute(Xi)
--set x7=0
end
function TA()
	DestroyTimerDialog(z7[3])
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFDDA0DD西域邪教开始了进攻正派武林，玩家务必要确保正派武林不被摧毁，否则游戏失败|r")
	if udg_teshushijian == true then
		ChooseNanDu()
	end
	ConditionalTriggerExecute(Xi)
end
function VA()
	StartTimerBJ(A7[1], false, 30.0 + I2R(ie))
	CreateTimerDialogBJ(bj_lastStartedTimer, "邪教下次进攻时间")
	z7[1] = bj_lastCreatedTimerDialog
	ie = 0
end
function XA()
	StartTimerBJ(A7[2], false, x7 * 60.0 + 30.0 + I2R(ie))
	CreateTimerDialogBJ(bj_lastStartedTimer, "邪教下次进攻时间")
	z7[2] = bj_lastCreatedTimerDialog
	ie = 0
	x7 = 0
end
function ZA()
	return GetItemTypeId(GetManipulatedItem()) == 1227894853
end
function ea()
	x7 = x7 + 1
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF00FF4C在武林弟子的奋力帮助下，邪教的进攻势力被延缓了，大家有1分钟的时间，赶紧去做任务吧~")
	PlaySoundOnUnitBJ(Dh, 100, GetTriggerUnit())
	shoujiajf[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = shoujiajf[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] + 10
	DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFF00FF4C守家积分+10")
end
function ja()
	return IsUnitInGroup(GetTriggerUnit(), w7)
end
function ka()
	GroupRemoveUnit(w7, GetTriggerUnit())
end
--练功房刷怪
function na()
	return GetOwningPlayer(GetFilterUnit()) == Player(7) and IsUnitAliveBJ(GetFilterUnit())
end
function qa()
	if CountUnitsInGroup(wv(Ie, Condition(na))) <= 3 then
		CreateNUnitsAtLoc(12, y7[IMinBJ(IMaxBJ(udg_boshu, 1), 28)], Player(7), v7[1], bj_UNIT_FACING)
	end
	if CountUnitsInGroup(wv(Re, Condition(na))) <= 3 then
		CreateNUnitsAtLoc(12, y7[IMinBJ(IMaxBJ(udg_boshu, 1), 28)], Player(7), v7[10], bj_UNIT_FACING)
	end
	if CountUnitsInGroup(wv(le, Condition(na))) <= 3 then
		CreateNUnitsAtLoc(12, y7[IMinBJ(IMaxBJ(udg_boshu, 1), 28)], Player(7), v7[2], bj_UNIT_FACING)
	end
end
--练功房
function sa()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895350 -- INLINED!!
end
function ua()
	DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00进入少林寺练功房二")
	SetUnitPosition(GetTriggerUnit(), 4750, -3650)
	PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 4250, -3650, 0)
end
function wa()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895351 -- INLINED!!
end
function xa()
	DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00进入少林寺练功房三")
	SetUnitPosition(GetTriggerUnit(), 5920, -4750)
	PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 5920, -4750, 0)
end
function za()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895361 -- INLINED!!
end
function Aa()
	DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00进入少林寺练功房一")
	SetUnitPosition(GetTriggerUnit(), 3730, -4690)
	PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 3730, -4690, 0)
end


--切换背包
function Ba()
	return GetSpellAbilityId() == 1093677134
end
function ba()
	B7 = 1
	for _ in _loop_() do
		if B7 > 6 then break end
		UnitAddItem(b7[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], UnitItemInSlotBJ(C7[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], B7))
		B7 = B7 + 1
	end
	B7 = 1
	for _ in _loop_() do
		if B7 > 6 then break end
		UnitAddItem(C7[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], UnitItemInSlotBJ(GetTriggerUnit(), B7))
		B7 = B7 + 1
	end
	B7 = 1
	for _ in _loop_() do
		if B7 > 6 then break end
		UnitAddItem(GetTriggerUnit(), UnitItemInSlotBJ(b7[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], B7))
		B7 = B7 + 1
	end
end
--鸟的贩卖技能
function ca()
	return GetSpellAbilityId() == 1093679433
end
function Da()
	CreateNUnitsAtLoc(1, 1853257068, GetOwningPlayer(GetTriggerUnit()), v7[9], bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddItem(bj_lastCreatedUnit, CreateItem(GetItemTypeId(GetSpellTargetItem()), 0, 0))
	UnitDropItemTarget(bj_lastCreatedUnit, UnitItemInSlotBJ(bj_lastCreatedUnit, 1), Rs)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 5.0)
	RemoveItem(GetSpellTargetItem())
	PlaySoundOnUnitBJ(Ih, 100, GetTriggerUnit())
	AddSpecialEffectTargetUnitBJ("overhead", GetTriggerUnit(), "Abilities\\Spells\\Items\\ResourceItems\\ResourceEffectTarget.mdl")
	DestroyEffect(bj_lastCreatedEffect)
end
--切换物品
function IsQieHuanItem()
	return GetSpellAbilityId() == 1093677133 and he[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == false
end
function QieHuanItem()
	UnitAddItem(Vs, UnitItemInSlotBJ(GetTriggerUnit(), 1))
	UnitAddItem(GetTriggerUnit(), UnitItemInSlotBJ(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], 1))
	UnitAddItem(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], UnitItemInSlotBJ(Vs, 1))
end

--英雄达到某等级
function Ja()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function HeroLevel()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	-- 练气师
	if Ce[i] == 5 then
		if GetRandomInt(1, 3) == 1 then
			ModifyHeroStat(0, u, 0, GetRandomInt(4, 8))
		elseif GetRandomInt(1, 2) == 1 then
			ModifyHeroStat(1, u, 0, GetRandomInt(4, 8))
		else
			ModifyHeroStat(2, u, 0, GetRandomInt(4, 8))
		end
		if GetUnitLevel(u) == 80 then
			juexuelingwu[i] = juexuelingwu[i] + 10
			if udg_zhangmen[i] == true then
			else
				SaveStr(YDHT, GetHandleId(p), GetHandleId(p), "〓练气大师〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			end
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" .. (GetPlayerName(p) or "") .. "获得练气大师")
			SetPlayerName(p, "〓练气大师〓" .. (GetPlayerName(p) or ""))
		end
	end
	if GetUnitTypeId(u) == 1328558132 then
		YDWEGeneralBounsSystemUnitSetBonus(u, 0, 0, 400)
	else
		YDWEGeneralBounsSystemUnitSetBonus(u, 0, 0, 350)
	end
	if GetUnitTypeId(u) == 1328558128 then
		YDWEGeneralBounsSystemUnitSetBonus(u, 3, 0, 40)
	else
		YDWEGeneralBounsSystemUnitSetBonus(u, 3, 0, 35)
	end
	if GetUnitTypeId(u) == 1328558129 then
		YDWEGeneralBounsSystemUnitSetBonus(u, 2, 0, 5)
	else
		YDWEGeneralBounsSystemUnitSetBonus(u, 2, 0, 4)
	end
	if GetUnitLevel(u) >= 3 and Z8[i] == false then
		Z8[i] = true
		d8[i] = 1
		for _ in _loop_() do
			if d8[i] > 20 then break end --门派数
			if udg_runamen[i] == d8[i] then
				--if d8[i]==11 then
				--	if GetRandomInt(1,100)<=99 then
				--		set X7[d8[i]] = LoadInteger(YDHT, StringHash("武学")+GetRandomInt(1,18), 2)
				--	else
				--		set X7[d8[i]] = LoadInteger(YDHT, StringHash("武学")+GetRandomInt(19,36), 2)
				--	endif
				--endif
				if d8[i] ~= 11 then
					UnitAddAbility(u, X7[d8[i]])
					UnitMakeAbilityPermanent(u, true, X7[d8[i]])
					DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" .. (GetObjectName(X7[d8[i]]) or ""))
					DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF66玩家" .. (I2S(1 + GetPlayerId(p)) or "") .. "成为" .. (udg_menpainame[udg_runamen[i]] or "") .. "初级弟子")
					SetPlayerName(p, "〓" .. (udg_menpainame[udg_runamen[i]] or "") .. "初级弟子〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
				end
				if udg_runamen[i] == 11 then
					udg_shuxing[i] = udg_shuxing[i] + 5
					DisplayTextToPlayer(p, 0, 0, "|cff00FF66自由门派3级奖励5点自由属性点及随机武功秘籍一本、小概率获得奇武秘籍一本")
					if GetRandomInt(1, 100) <= 10 then
						unitadditembyidswapped(LoadInteger(YDHT, StringHash("武学") + GetRandomInt(42, 46), 1), u)
					end
					if GetRandomInt(1, 100) <= 99 then
						unitadditembyidswapped(LoadInteger(YDHT, StringHash("武学") + GetRandomInt(19, 36), 1), u)
					else
						unitadditembyidswapped(LoadInteger(YDHT, StringHash("武学") + GetRandomInt(1, 18), 1), u)
					end
				--set S9=1
				--           	loop
				--           	    exitwhen S9>20
				--           	    if (X7[d8[i]]==MM9[S9]) then
				--           	        set udg_shanghaijiacheng[i] = udg_shanghaijiacheng[i] + udg_jueneishjc[S9]
				--           	        call ModifyHeroStat(1,u,0,udg_jueneiminjie[S9])
				--           	        set udg_baojilv[i] = udg_baojilv[i] + udg_jueneibaojilv[S9]
				--		set juexuelingwu[i] = juexuelingwu[i] + udg_jueneijxlw[S9]
				--		set udg_shanghaixishou[i] = udg_shanghaixishou[i] + udg_jueneishxs[S9]
				--           	    endif
				--           	    set S9=S9+1
				--           	endloop
				end
				L7[i] = 1
				for _ in _loop_() do
					if L7[i] > wugongshu[i] then break end
					if I7[GetPlayerId(p) * 20 + L7[i]] ~= 1095067243 then
					else
						I7[(i - 1) * 20 + L7[i]] = X7[d8[i]]
						if true then break end
					end
					L7[i] = L7[i] + 1
				end
			end
			d8[i] = d8[i] + 1
		end
	end
	if GetUnitLevel(u) >= 3 and GetUnitAbilityLevel(u, X7[udg_runamen[i]]) >= 2 and e9[i] == false then
		e9[i] = true
		d8[i] = 1
		for _ in _loop_() do
			if d8[i] > 20 then break end
			if d8[i] ~= 11 then
				if udg_runamen[i] == d8[i] then
					UnitAddAbility(u, Z7[d8[i]])
					UnitMakeAbilityPermanent(u, true, Z7[d8[i]])
					DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" .. (GetObjectName(Z7[d8[i]]) or ""))
					DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF66玩家" .. (I2S(1 + GetPlayerId(p)) or "") .. "成为" .. (udg_menpainame[udg_runamen[i]] or "") .. "中级弟子")
					SetPlayerName(p, "〓" .. (udg_menpainame[udg_runamen[i]] or "") .. "中级弟子〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
					L7[i] = 1
					for _ in _loop_() do
						if L7[i] > wugongshu[i] then break end
						if I7[GetPlayerId(p) * 20 + L7[i]] ~= 1095067243 then
						else
							I7[(i - 1) * 20 + L7[i]] = Z7[d8[i]]
							if true then break end
						end
						L7[i] = L7[i] + 1
					end
				end
			end
			d8[i] = d8[i] + 1
		end
	end
	if GetUnitLevel(u) >= 3 and GetUnitAbilityLevel(u, Z7[udg_runamen[i]]) >= 2 and d9[i] == false then
		d9[i] = true
		d8[i] = 1
		for _ in _loop_() do
			if d8[i] > 20 then break end
			if d8[i] ~= 11 then
				if udg_runamen[i] == d8[i] then
					UnitAddAbility(u, Y7[d8[i]])
					DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" .. (GetObjectName(Y7[d8[i]]) or ""))
					DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF66玩家" .. (I2S(1 + GetPlayerId(p)) or "") .. "成为" .. (udg_menpainame[udg_runamen[i]] or "") .. "高级弟子")
					SetPlayerName(p, "〓" .. (udg_menpainame[udg_runamen[i]] or "") .. "高级弟子〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
					UnitMakeAbilityPermanent(u, true, Y7[d8[i]])
					L7[i] = 1
					for _ in _loop_() do
						if L7[i] > wugongshu[i] then break end
						if I7[GetPlayerId(p) * 20 + L7[i]] ~= 1095067243 then
						else
							I7[(i - 1) * 20 + L7[i]] = Y7[d8[i]]
							if true then break end
						end
						L7[i] = L7[i] + 1
					end
				end
			end
			d8[i] = d8[i] + 1
		end
	end
	if GetUnitLevel(u) == 10 then
		DisplayTimedTextToPlayer(p, 0, 0, 30.0, "|cff66ff00恭喜你升到了10级，你可以前往全真教（小地图指示点）完成历练1任务（大战江南七怪）了，完成历练任务可以提升修行，对人物的武功伤害占有重要影响，切记切记！！")
		loc = GetRectCenter(Te)
		PingMinimapLocForForce(ov(p), loc, 5.0)
		RemoveLocation(loc)
	end
	if GetUnitLevel(u) == 25 then
		DisplayTimedTextToPlayer(p, 0, 0, 30.0, "|cff66ff00恭喜你升到了25级，你可以前往少林后山（小地图指示点）完成历练2任务（挑战十八罗汉）了，完成历练任务可以提升修行，对人物的武功伤害占有重要影响，切记切记！！")
		loc = GetRectCenter(ag)
		PingMinimapLocForForce(ov(p), loc, 5.0)
		RemoveLocation(loc)
	end
	if GetUnitLevel(u) == 40 then
		DisplayTimedTextToPlayer(p, 0, 0, 30.0, "|cff66ff00恭喜你升到了40级，你可以前往武林城外（小地图指示点）完成历练3任务（勇闯十恶不赦岛）了，完成历练任务可以提升修行，对人物的武功伤害占有重要影响，切记切记！！")
		loc = GetRectCenter(Bg)
		PingMinimapLocForForce(ov(p), loc, 5.0)
		RemoveLocation(loc)
	end
	if GetUnitLevel(u) == 55 then
		DisplayTimedTextToPlayer(p, 0, 0, 30.0, "|cff66ff00恭喜你升到了55级，你可以前往光明顶（小地图指示点）完成历练4任务（勇闯光明顶）了，完成历练任务可以提升修行，对人物的武功伤害占有重要影响，切记切记！！")
		loc = GetRectCenter(Lg)
		PingMinimapLocForForce(ov(p), loc, 5.0)
		RemoveLocation(loc)
	end
	if GetUnitLevel(u) == 70 then
		DisplayTimedTextToPlayer(p, 0, 0, 30.0, "|cff66ff00恭喜你升到了70级，你可以前往少林寺后山（小地图指示点）完成历练5任务（华山论剑）了，完成历练任务可以提升修行，对人物的武功伤害占有重要影响，切记切记！！")
		loc = GetRectCenter(Rg)
		PingMinimapLocForForce(ov(p), loc, 5.0)
		RemoveLocation(loc)
	end
	if GetUnitLevel(u) >= 80 and jiawuxue[i] == false then
		DisplayTimedTextToPlayer(p, 0, 0, 30.0, "|cff66ff00恭喜你升到了80级，获得5个自创武学点（vip玩家获得7个），在通过历练6以后你可以到聚贤庄游坦之处自创武学")
		wuxuedian[i] = wuxuedian[i] + 5
		wuxuedian[i] = wuxuedian[i] + 2
		jiawuxue[i] = true
		zizhiwugong[i] = sc__ZiZhiWuGong_create(0, 0, GetRandomInt(1, 10), 0, 0)
	end
	u = nil
	p = nil
	loc = nil
end


--杀怪回血
function Ma()
	return GetPlayerController(GetOwningPlayer(GetKillingUnit())) == MAP_CONTROL_USER
end
function KillGuaiJiaXie()
	if GetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))], 1093677914) < 1 then
		SetWidgetLife(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))], GetUnitState(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))], UNIT_STATE_LIFE) + (shaguaihufui[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] + I2R(danpo[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]) / 2000.0 * GetUnitState(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))], UNIT_STATE_MAX_LIFE)))
	end
end
--每秒回血回蓝
function YiShuHuiXie()
	c7 = 1
	for _ in _loop_() do
		if c7 > 5 then break end
		if GetPlayerController(Player(-1 + c7)) == MAP_CONTROL_USER and UnitHasBuffBJ(udg_hero[c7], 1110454580) == false then
			SetUnitLifePercentBJ(udg_hero[c7], GetUnitLifePercent(udg_hero[c7]) + I2R(yishu[c7]) / 2000.0 + 10 * GetUnitAbilityLevel(udg_hero[c7], 1093682228) + guixihuixie[c7])
			if UnitHaveItem(udg_hero[c7], 1227895108) then
				SetUnitLifePercentBJ(udg_hero[c7], GetUnitLifePercent(udg_hero[c7]) + 6)
			end
			SetUnitLifeBJ(udg_hero[c7], GetUnitState(udg_hero[c7], UNIT_STATE_LIFE) + shengminghuifu[c7])
			SetUnitManaBJ(udg_hero[c7], GetUnitStateSwap(UNIT_STATE_MANA, udg_hero[c7]) + 0.3 * I2R(yishu[c7]) + falihuifu[c7] + 5 * GetUnitAbilityLevel(udg_hero[c7], 1093682228))
		end
		c7 = c7 + 1
	end
end
--伤害回复
function Ra()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function Sa()
	if GetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], 1093677914) < 1 then
		SetWidgetLife(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], GetUnitState(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], UNIT_STATE_LIFE) + (shanghaihuifu[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] / 10.0 + I2R(danpo[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]) / 1500.0 * GetUnitState(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], UNIT_STATE_MAX_LIFE)))
	end
end
--伤害吸收
function Ua()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function Va()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local r = (1 - RMinBJ(udg_shanghaixishou[i], 0.8)) * GetEventDamage()
	SetWidgetLife(udg_hero[i], GetUnitState(udg_hero[i], UNIT_STATE_LIFE) + RMinBJ(udg_shanghaixishou[i], 0.8) * GetEventDamage())
	if UnitHasBuffBJ(GetTriggerUnit(), 1110454340) and GetUnitAbilityLevel(GetTriggerUnit(), 1093678930) ~= 0 then
		SetWidgetLife(udg_hero[i], GetUnitState(udg_hero[i], UNIT_STATE_LIFE) + 0.3 * GetEventDamage())
	end
	if UnitHaveItem(udg_hero[i], 1227897178) then
		if GetUnitAbilityLevel(udg_hero[i], 1093677903) ~= 0 then
			r = r / 3
		end
		if GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) >= R2I(r) // 20 then
			AdjustPlayerStateBJ( - R2I(r) // 20, p, PLAYER_STATE_RESOURCE_GOLD)
			SetWidgetLife(udg_hero[i], RMinBJ(GetUnitState(udg_hero[i], UNIT_STATE_LIFE) + r, GetUnitState(udg_hero[i], UNIT_STATE_MAX_LIFE)))
		else
			AdjustPlayerStateBJ(GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) * -1, p, PLAYER_STATE_RESOURCE_GOLD)
			SetWidgetLife(udg_hero[i], RMinBJ(GetUnitState(udg_hero[i], UNIT_STATE_LIFE) + 5 * I2R(GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD)), GetUnitState(udg_hero[i], UNIT_STATE_MAX_LIFE)))
		end
	end
	u = nil
	p = nil
end

--传送至桃花岛
function mB()
	return GetItemTypeId(GetManipulatedItem()) == 1227897174 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function nB()
	SetUnitPosition(GetTriggerUnit(), 9631, 1139)
	PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 9631, 1139, 0)
	DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00进入桃花岛")
	DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00”源思英年,巴巴西洛普,雪陆文出；源思英年,巴巴西洛普,雪陆文出！“")
end
--终南山
function GQ()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896148 -- INLINED!!
end
function HQ()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if GetUnitLevel(u) < 10 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足10级无法传送")
	else
		if shengwang[i] < 500 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足500无法传送")
		else
			loc = GetRectCenter(Te)
			SetUnitPositionLoc(u, loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
			DisplayTextToPlayer(p, 0, 0, "|cff66ff33进入终南山")
		end
	end
	u = nil
	p = nil
	loc = nil
end
--少林寺后山
function lQ()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896149 -- INLINED!!
end
function JQ()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if GetUnitLevel(u) < 25 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足25级无法传送")
	else
		if shengwang[i] < 1500 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足1500无法传送")
		else
			loc = GetRectCenter(ag)
			SetUnitPositionLoc(u, loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
			DisplayTextToPlayer(p, 0, 0, "|cff66ff33进入少林寺后山")
		end
	end
	u = nil
	p = nil
	loc = nil
end
--塞外
function LQ()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896150 -- INLINED!!
end
function MQ()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if GetUnitLevel(u) < 40 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足40级无法传送")
	else
		if shengwang[i] < 2500 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足2500无法传送")
		else
			loc = GetRectCenter(Bg)
			SetUnitPositionLoc(u, loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
			DisplayTextToPlayer(p, 0, 0, "|cff66ff33进入塞外")
		end
	end
	u = nil
	p = nil
	loc = nil
end
--光明顶
function OQ()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896151 -- INLINED!!
end
function PQ()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if GetUnitLevel(u) < 55 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足55级无法传送")
	else
		if shengwang[i] < 4000 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足4000无法传送")
		else
			loc = GetRectCenter(Lg)
			SetUnitPositionLoc(u, loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
			DisplayTextToPlayer(p, 0, 0, "|cff66ff33进入光明顶")
		end
	end
	u = nil
	p = nil
	loc = nil
end
--少林寺后山
function RQ()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896152 -- INLINED!!
end
function SQ()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if GetUnitLevel(u) < 70 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足70级无法传送")
	else
		if shengwang[i] < 6000 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足6000无法传送")
		else
			loc = GetRectCenter(Rg)
			SetUnitPositionLoc(u, loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
			DisplayTextToPlayer(p, 0, 0, "|cff66ff33进入少林寺后山")
		end
	end
	u = nil
	p = nil
	loc = nil
end
--边疆
function UQ()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896385 -- INLINED!!
end
function VQ()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if GetUnitLevel(u) < 100 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足100级无法传送")
	else
		if shengwang[i] < 9000 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足9000无法传送")
		else
			loc = GetRectCenter(Zg)
			SetUnitPositionLoc(u, loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
			DisplayTextToPlayer(p, 0, 0, "|cff66ff33进入边疆")
		end
	end
	u = nil
	p = nil
	loc = nil
end
--驿站传送
function IsYiZhan()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and (GetItemTypeId(GetManipulatedItem()) == 1227899472 or GetItemTypeId(GetManipulatedItem()) == 1227899473 or GetItemTypeId(GetManipulatedItem()) == 1227899474 or GetItemTypeId(GetManipulatedItem()) == 1227899475 or GetItemTypeId(GetManipulatedItem()) == 1227899476 or GetItemTypeId(GetManipulatedItem()) == 1227899477 or GetItemTypeId(GetManipulatedItem()) == 1227899478 or GetItemTypeId(GetManipulatedItem()) == 1227899479 or GetItemTypeId(GetManipulatedItem()) == 1227899480) -- INLINED!!
end
function YiZhanChuanSong()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetItemTypeId(GetManipulatedItem()) == 1227899472 then
		SetUnitPosition(udg_hero[i], 3763, -9091)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), 3763, -9091, 0)
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至牛妖幻境")
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227899473 then
		SetUnitPosition(udg_hero[i], 1446, -2317)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), 1446, -2317, 0)
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至初入江湖")
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227899474 then
		SetUnitPosition(udg_hero[i], 1863, 0)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), 1863, 0, 0)
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至少林寺外")
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227899475 then
		SetUnitPosition(udg_hero[i], -1476, 8139)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), -1476, 8139, 0)
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至光明顶下")
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227899476 then
		SetUnitPosition(udg_hero[i], -2400, -3900)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), -2400, -3900, 0)
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至江南水乡")
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227899477 then
		SetUnitPosition(udg_hero[i], -4400, -2950)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), -4400, -2950, 0)
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至全真三子")
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227899478 then
		SetUnitPosition(udg_hero[i], -5960, -160)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), -5960, -160, 0)
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至雁门关内")
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227899479 then
		SetUnitPosition(udg_hero[i], -13000, -15500)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), -13000, -15500, 0)
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至大辽国")
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227899480 then
		SetUnitPosition(udg_hero[i], -9000, -14000)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), -9000, -14000, 0)
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33传送至聚贤庄")
	end
	p = nil
	u = nil
end

--古董价格
function s5()
	gudong[1] = 1227896115
	nd[1] = 500
	od[1] = 6000
	gudong[2] = 1227896116
	nd[2] = 500
	od[2] = 6000
	gudong[3] = 1227896117
	nd[3] = 500
	od[3] = 6000
	gudong[4] = 1227896118
	nd[4] = 1000
	od[4] = 20000
	gudong[5] = 1227896119
	nd[5] = 1000
	od[5] = 20000
	gudong[6] = 1227896120
	nd[6] = 1000
	od[6] = 20000
	gudong[7] = 1227896121
	nd[7] = 7000
	od[7] = 50000
	gudong[8] = 1227896129
	nd[8] = 7000
	od[8] = 50000
	gudong[9] = 1227896130
	nd[9] = 7000
	od[9] = 50000
	gudong[10] = 1227896131
	nd[10] = 20000
	od[10] = 100000
end
--古董价格变动
function u5()
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cfffff000古董商人收购价格发生变动了~")
	pd[1] = GetRandomInt(nd[1], od[1])
	pd[2] = GetRandomInt(nd[2], od[2])
	pd[3] = GetRandomInt(nd[3], od[3])
	pd[4] = GetRandomInt(nd[4], od[4])
	pd[5] = GetRandomInt(nd[5], od[5])
	pd[6] = GetRandomInt(nd[6], od[6])
	pd[7] = GetRandomInt(nd[7], od[7])
	pd[8] = GetRandomInt(nd[8], od[8])
	pd[9] = GetRandomInt(nd[9], od[9])
	pd[10] = GetRandomInt(nd[10], od[10])
end
--查询古董价格
function w5()
	return GetItemTypeId(GetManipulatedItem()) == 1227896112
end
function x5()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1
	i = 1
	for _ in _loop_() do
		if i > 10 then break end
		createitemloc(gudong[i], v7[9])
		if UnitHaveItem(u, gudong[i]) then
			DisplayTimedTextToPlayer(p, 0, 0, 30, "|cff00ff00" .. (GetItemName(bj_lastCreatedItem) or "") .. "：" .. (I2S(pd[i]) or "") .. " ( " .. (I2S(nd[i]) or "") .. " ， " .. (I2S(od[i]) or "") .. " )")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 30, (GetItemName(bj_lastCreatedItem) or "") .. "：" .. (I2S(pd[i]) or "") .. " ( " .. (I2S(nd[i]) or "") .. " ， " .. (I2S(od[i]) or "") .. " )")
		end
		RemoveItem(bj_lastCreatedItem)
		i = i + 1
	end
	u = nil
	p = nil
end
--卖古董
function z5()
	return GetItemTypeId(GetManipulatedItem()) == 1227896113
end
function A5()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1
	for _ in _loop_() do
		if i > 10 then break end
		if GetItemTypeId(UnitItemInSlotBJ(u, 1)) == gudong[i] then
			if Ce[1 + GetPlayerId(p)] ~= 4 then
				DisplayTimedTextToPlayer(p, 0, 0, 30, "|CFF00FF00卖出" .. (GetItemName(UnitItemInSlotBJ(u, 1)) or "") .. "，获得金钱+" .. (I2S(pd[i]) or ""))
				AdjustPlayerStateBJ(pd[i], p, PLAYER_STATE_RESOURCE_GOLD)
			else
				DisplayTimedTextToPlayer(p, 0, 0, 30, "|CFF00FF00你是鉴定师，以最高价格卖出" .. (GetItemName(UnitItemInSlotBJ(u, 1)) or "") .. "，获得金钱+" .. (I2S(od[i]) or ""))
				AdjustPlayerStateBJ(od[i], p, PLAYER_STATE_RESOURCE_GOLD)
			end
			RemoveItem(UnitItemInSlotBJ(u, 1))
		end
		i = i + 1
	end
	u = nil
	p = nil
end
function B5()
	return GetItemTypeId(GetManipulatedItem()) == 1227896114
end
function b5()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1
	local j = 1
	j = 1
	for _ in _loop_() do
		if j > 6 then break end
		i = 1
		for _ in _loop_() do
			if i > 10 then break end
			if GetItemTypeId(UnitItemInSlotBJ(u, j)) == gudong[i] then
				if Ce[1 + GetPlayerId(p)] ~= 4 then
					DisplayTimedTextToPlayer(p, 0, 0, 30, "|CFF00FF00卖出" .. (GetItemName(UnitItemInSlotBJ(u, j)) or "") .. "，获得金钱+" .. (I2S(pd[i]) or ""))
					AdjustPlayerStateBJ(pd[i], GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
				else
					DisplayTimedTextToPlayer(p, 0, 0, 30, "|CFF00FF00你是鉴定师，以最高价格卖出" .. (GetItemName(UnitItemInSlotBJ(u, j)) or "") .. "，获得金钱+" .. (I2S(od[i]) or ""))
					AdjustPlayerStateBJ(od[i], GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
				end
				RemoveItem(UnitItemInSlotBJ(u, j))
			end
			i = i + 1
		end
		j = j + 1
	end
	u = nil
	p = nil
end
--收集古董
function CollectGuDong_Conditions()
	return GetItemTypeId(GetManipulatedItem()) == 1227897139 or GetItemTypeId(GetManipulatedItem()) == 1227897140 or GetItemTypeId(GetManipulatedItem()) == 1227897141 or GetItemTypeId(GetManipulatedItem()) == 1227897142
end
function CollectGuDong_Actions()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetItemTypeId(GetManipulatedItem()) == 1227897139 then
		if Ce[i] == 4 then
			if udg_gudongD == 0 then
				DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00我自幼喜欢收集古董，如果你能收集一套D等级古董，我将送你一本秘籍")
				udg_gudongD = 1
			else
				if UnitHaveItem(u, 1227896115) and UnitHaveItem(u, 1227896116) and UnitHaveItem(u, 1227896117) then
					RemoveItem(FetchUnitItem(u, 1227896115))
					RemoveItem(FetchUnitItem(u, 1227896116))
					RemoveItem(FetchUnitItem(u, 1227896117))
					DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00谢谢你的古董，这本江湖秘籍送给你了")
					unitadditembyidswapped(udg_jianghu[GetRandomInt(1, 18)], u)
					udg_jdds[i] = udg_jdds[i] + 2
					if udg_jdds[i] <= 10 and udg_jddsbool[i] == false and Ce[i] == 4 then
						DisplayTextToPlayer(p, 0, 0, "|CFF66FF00您的鉴定师已经得了" .. (I2S(udg_jdds[i]) or "") .. "分，得到10分可获得鉴定大师哦")
					end
					--if Ce[1+GetPlayerId(p)]==4 then
					-- call unitadditembyidswapped(udg_jianghu[GetRandomInt(1,18)],u)
					-- call DisplayTimedTextToPlayer(p,0,0,15,"|CFF00FF00谢谢你教我鉴定古董，再送你一本江湖秘籍吧")
					--endif
					udg_gudongD = 0
				else
					DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00你还没有收集齐一套D古董哦")
				end
			end
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00非鉴定师不能接此任务")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227897140 then
		if Ce[i] == 4 then
			if udg_gudongC == 0 then
				DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00我自幼喜欢收集古董，如果你能收集一套C等级古董，我将送你一本秘籍")
				udg_gudongC = 1
			else
				if UnitHaveItem(u, 1227896118) and UnitHaveItem(u, 1227896119) and UnitHaveItem(u, 1227896120) then
					RemoveItem(FetchUnitItem(u, 1227896118))
					RemoveItem(FetchUnitItem(u, 1227896119))
					RemoveItem(FetchUnitItem(u, 1227896120))
					DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00谢谢你的古董，这本绝学秘籍送给你了")
					unitadditembyidswapped(udg_juexue[GetRandomInt(1, 10)], u)
					udg_jdds[i] = udg_jdds[i] + 4
					if udg_jdds[i] <= 10 and udg_jddsbool[i] == false and Ce[i] == 4 then
						DisplayTextToPlayer(p, 0, 0, "|CFF66FF00您的鉴定师已经得了" .. (I2S(udg_jdds[i]) or "") .. "分，得到10分可获得鉴定大师哦")
					end
					--   if Ce[1+GetPlayerId(p)]==4 then
					-- call unitadditembyidswapped(udg_juexue[GetRandomInt(1,10)],u)
					-- call DisplayTimedTextToPlayer(p,0,0,15,"|CFF00FF00谢谢你教我鉴定古董，再送你一本绝学秘籍吧")
					--endif
					udg_gudongC = 0
				else
					DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00你还没有收集齐一套C古董哦")
				end
			end
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00非鉴定师不能接此任务")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227897141 then
		if Ce[i] == 4 then
			if udg_gudongB == 0 then
				DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00我自幼喜欢收集古董，如果你能收集一套B等级古董，我将送你一本秘籍")
				udg_gudongB = 1
			else
				if UnitHaveItem(u, 1227896121) and UnitHaveItem(u, 1227896129) and UnitHaveItem(u, 1227896130) then
					RemoveItem(FetchUnitItem(u, 1227896121))
					RemoveItem(FetchUnitItem(u, 1227896129))
					RemoveItem(FetchUnitItem(u, 1227896130))
					DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00谢谢你的古董，这本绝内秘籍送给你了")
					unitadditembyidswapped(udg_juenei[GetRandomInt(1, 8)], u)
					udg_jdds[i] = udg_jdds[i] + 6
					if udg_jdds[i] <= 10 and udg_jddsbool[i] == false and Ce[i] == 4 then
						DisplayTextToPlayer(p, 0, 0, "|CFF66FF00您的鉴定师已经得了" .. (I2S(udg_jdds[i]) or "") .. "分，得到10分可获得鉴定大师哦")
					end
					--   if Ce[1+GetPlayerId(p)]==4 then
					-- call unitadditembyidswapped(udg_juenei[GetRandomInt(1,8)],u)
					-- call DisplayTimedTextToPlayer(p,0,0,15,"|CFF00FF00谢谢你教我鉴定古董，再送你一本绝内秘籍吧")
					--endif
					udg_gudongB = 0
				else
					DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00你还没有收集齐一套B古董哦")
				end
			end
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00非鉴定师不能接此任务")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227897142 then
		if Ce[i] == 4 then
			if udg_gudongA == 0 then
				DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00我自幼喜欢收集古董，如果你能收集两个A等级古董，我将送你一本秘籍")
				udg_gudongA = 1
			else
				if UnitHaveItem(u, 1227896131) then
					RemoveItem(FetchUnitItem(u, 1227896131))
					if UnitHaveItem(u, 1227896131) then
						RemoveItem(FetchUnitItem(u, 1227896131))
						DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00谢谢你的古董，这本残章送给你了")
						unitadditembyidswapped(udg_canzhang[GetRandomInt(1, 10)], u)
						udg_jdds[i] = udg_jdds[i] + 10
						if udg_jdds[i] <= 10 and udg_jddsbool[i] == false and Ce[i] == 4 then
							DisplayTextToPlayer(p, 0, 0, "|CFF66FF00您的鉴定师已经得了" .. (I2S(udg_jdds[i]) or "") .. "分，得到10分可获得鉴定大师哦")
						end
						--   if Ce[1+GetPlayerId(p)]==4 then
						-- call unitadditembyidswapped(udg_canzhang[GetRandomInt(1,10)],u)
						-- call DisplayTimedTextToPlayer(p,0,0,15,"|CFF00FF00谢谢你教我鉴定古董，再送你一本残章吧")
						--endif
						udg_gudongA = 0
					else
						UnitAddItemById(u, 1227896131)
						DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00你还没有收集齐两个A古董哦")
					end
				else
					DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00你还没有收集齐两个A古董哦")
				end
			end
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15, "|CFF00FF00非鉴定师不能接此任务")
		end
	end
	if udg_jdds[i] >= 10 and udg_jddsbool[i] == false and Ce[i] == 4 then
		udg_jddsbool[i] = true
		if udg_zhangmen[i] == true then
		else
			SaveStr(YDHT, GetHandleId(p), GetHandleId(p), "〓鉴定大师〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
		end
		DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" .. (GetPlayerName(p) or "") .. "获得鉴定大师")
		SetPlayerName(p, "〓鉴定大师〓" .. (GetPlayerName(p) or ""))
	end
	u = nil
	p = nil
end

----------守家积分换物品系统开始--------//
function IsJiFenHuan(it)
	if GetItemTypeId(it) == 1227896399 or GetItemTypeId(it) == 1227899184 or GetItemTypeId(it) == 1227896403 or GetItemTypeId(it) == 1227896404 or GetItemTypeId(it) == 1227896402 or GetItemTypeId(it) == 1227896405 or GetItemTypeId(it) == 1227896400 or GetItemTypeId(it) == 1227896401 then
		return true
	end
	return false
end
function JiFenHuan(u, it, id1, num, id2)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetItemTypeId(it) == id1 then
		if shoujiajf[i] >= num then
			shoujiajf[i] = shoujiajf[i] - num
			if id1 == 1227896403 or id1 == 1227896404 or id1 == 1227896402 or id1 == 1227896405 or id1 == 1227896401 then
				unitadditembyidswapped(id2, u)
				DisplayTextToPlayer(p, 0, 0, "|CFF34FF00获得" .. (GetItemName(bj_lastCreatedItem) or ""))
			elseif id1 == 1227896400 then
				AdjustPlayerStateBJ(20 - udg_nandu * 2, p, PLAYER_STATE_RESOURCE_LUMBER)
				DisplayTextToPlayer(p, 0, 0, "|CFF34FF00获得珍稀币+" .. (I2S(20 - udg_nandu * 2) or ""))
			elseif id1 == 1227896399 then
				AdjustPlayerStateBJ(5000 - udg_nandu * 500, p, PLAYER_STATE_RESOURCE_GOLD)
				DisplayTextToPlayer(p, 0, 0, "|CFF34FF00获得金钱+" .. (I2S(5000 - udg_nandu * 500) or ""))
			elseif id1 == 1227899184 then
				unitadditembyidswapped(id2, udg_hero[i])
				DisplayTextToPlayer(p, 0, 0, "|CFF34FF00获得" .. (GetItemName(bj_lastCreatedItem) or ""))
			end
			DisplayTextToPlayer(p, 0, 0, "|cFF00CCff当前剩余守家积分：" .. (I2S(shoujiajf[i]) or ""))
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00守家积分不足")
		end
	end
	p = nil
end
function BuyKuanDong()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and IsJiFenHuan(GetManipulatedItem())
end
function KuanDongHua()
	local u = GetTriggerUnit()
	JiFenHuan(u, GetManipulatedItem(), 1227896399, 20, 300)
	JiFenHuan(u, GetManipulatedItem(), 1227899184, 50, 1227895892)
	JiFenHuan(u, GetManipulatedItem(), 1227896403, 200, YaoCao[GetRandomInt(1, 12)])
	JiFenHuan(u, GetManipulatedItem(), 1227896404, 100, 1227895374)
	JiFenHuan(u, GetManipulatedItem(), 1227896402, 300, 1227896395)
	JiFenHuan(u, GetManipulatedItem(), 1227896405, 600, 1227895372)
	JiFenHuan(u, GetManipulatedItem(), 1227896400, 100, 5)
	JiFenHuan(u, GetManipulatedItem(), 1227896401, 200, 1227896398)
	u = nil
end
----------江湖声望换物品系统开始--------//
function IsShengWangHuan(it)
	if GetItemTypeId(it) == 1227899215 or GetItemTypeId(it) == 1227899216 or GetItemTypeId(it) == 1227899217 or GetItemTypeId(it) == 1227899218 then
		return true
	end
	return false
end
function ShengWangHuan(u, it, id1, num, id2)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetItemTypeId(it) == id1 then
		if shengwang[i] >= num then
			shengwang[i] = shengwang[i] - num
			unitadditembyidswapped(id2, u)
			DisplayTextToPlayer(p, 0, 0, "|CFF34FF00获得" .. (GetItemName(bj_lastCreatedItem) or ""))
			DisplayTextToPlayer(p, 0, 0, "|cFF00CCff当前剩余江湖声望：" .. (I2S(shengwang[i]) or ""))
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00江湖声望不足")
		end
	end
	p = nil
end
function BuyKuanDong_1()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and IsShengWangHuan(GetManipulatedItem())
end
function KuanDongHua_1()
	local u = GetTriggerUnit()
	ShengWangHuan(u, GetManipulatedItem(), 1227899215, 200, 1227896395)
	ShengWangHuan(u, GetManipulatedItem(), 1227899216, 4000, 1227896919)
	ShengWangHuan(u, GetManipulatedItem(), 1227899217, 2000, 1227899219)
	ShengWangHuan(u, GetManipulatedItem(), 1227899218, 1000, udg_canzhang[GetRandomInt(1, 10)])
	u = nil
end
function IsWuXueJingYao()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227899219
end
function WuXueJingYao()
	local p = GetOwningPlayer(GetTriggerUnit())
	local i = 1 + GetPlayerId(p)
	local u = udg_hero[i]
	local j = GetRandomInt(1, 8)
	local level = GetUnitAbilityLevel(u, I7[(i - 1) * 20 + j])
	if I7[(i - 1) * 20 + j] ~= 1093678418 then
		IncUnitAbilityLevel(u, I7[(i - 1) * 20 + j])
		if GetUnitAbilityLevel(u, I7[(i - 1) * 20 + j]) == level then
			unitadditembyidswapped(1227899219, GetTriggerUnit())
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00随机到九重或无法升重的技能，使用武学精要失败")
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00恭喜技能" .. (GetAbilityName(I7[(i - 1) * 20 + j]) or "") .. "升重")
		end
	else
		unitadditembyidswapped(1227899219, GetTriggerUnit())
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00随机到凌波微步，使用武学精要失败")
	end
	u = nil
	p = nil
end


--遗忘武功
function YiWangJiNeng()
	return GetSpellAbilityId() == 1093678417
end
function ForgetAbility()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local j = 1
	if UnitHaveItem(u, 1227896395) or udg_yiwang[i] == true then
		DialogSetMessage(K7[i], "请选择遗忘的武功（遗忘后无法找回）！")
		if I7[(i - 1) * 20 + 1] ~= 1095067243 then
			DialogAddButtonBJ(K7[i], GetObjectName(I7[(i - 1) * 20 + 1]))
			S4[i] = bj_lastCreatedButton
		end
		if I7[(i - 1) * 20 + 2] ~= 1095067243 then
			DialogAddButtonBJ(K7[i], GetObjectName(I7[(i - 1) * 20 + 2]))
			T4[i] = bj_lastCreatedButton
		end
		if I7[(i - 1) * 20 + 3] ~= 1095067243 then
			DialogAddButtonBJ(K7[i], GetObjectName(I7[(i - 1) * 20 + 3]))
			U4[i] = bj_lastCreatedButton
		end
		if I7[(i - 1) * 20 + 4] ~= 1095067243 then
			DialogAddButtonBJ(K7[i], GetObjectName(I7[(i - 1) * 20 + 4]))
			V4[i] = bj_lastCreatedButton
		end
		if I7[(i - 1) * 20 + 5] ~= 1095067243 then
			DialogAddButtonBJ(K7[i], GetObjectName(I7[(i - 1) * 20 + 5]))
			W4[i] = bj_lastCreatedButton
		end
		if I7[(i - 1) * 20 + 6] ~= 1095067243 then
			DialogAddButtonBJ(K7[i], GetObjectName(I7[(i - 1) * 20 + 6]))
			X4[i] = bj_lastCreatedButton
		end
		if I7[(i - 1) * 20 + 7] ~= 1095067243 then
			DialogAddButtonBJ(K7[i], GetObjectName(I7[(i - 1) * 20 + 7]))
			J7[i] = bj_lastCreatedButton
		end
		if I7[(i - 1) * 20 + 8] ~= 1095067243 then
			DialogAddButtonBJ(K7[i], GetObjectName(I7[(i - 1) * 20 + 8]))
			J78[i] = bj_lastCreatedButton
		end
		if I7[(i - 1) * 20 + 9] ~= 1095067243 then
			DialogAddButtonBJ(K7[i], GetObjectName(I7[(i - 1) * 20 + 9]))
			J79[i] = bj_lastCreatedButton
		end
		if I7[(i - 1) * 20 + 10] ~= 1095067243 then
			DialogAddButtonBJ(K7[i], GetObjectName(I7[(i - 1) * 20 + 10]))
			J710[i] = bj_lastCreatedButton
		end
		if I7[(i - 1) * 20 + 11] ~= 1095067243 then
			DialogAddButtonBJ(K7[i], GetObjectName(I7[(i - 1) * 20 + 11]))
			J711[i] = bj_lastCreatedButton
		end
		DialogAddButtonBJ(K7[i], "取消")
		l7[i] = bj_lastCreatedButton
		DialogDisplay(p, K7[i], true)
	else
		DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000遗忘武功需要消耗道具遗忘之石！")
	end
	u = nil
	p = nil
end
function Forget(p, num)
	local i = 1 + GetPlayerId(p)
	if I7[(i - 1) * 20 + num] == 1093677902 and UnitHasBuffBJ(udg_hero[i], 1112504171) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|CFFFF9933" .. (GetObjectName(I7[(i - 1) * 20 + num]) or "") .. "施展期间不能遗忘！！！")
	else
		S9 = 1
		for _ in _loop_() do
			if S9 > 20 then break end
			if I7[20 * (i - 1) + num] == MM9[S9] then
				udg_shanghaijiacheng[i] = udg_shanghaijiacheng[i] - udg_jueneishjc[S9]
				ModifyHeroStat(1, udg_hero[i], 1, udg_jueneiminjie[S9])
				juexuelingwu[i] = juexuelingwu[i] - udg_jueneijxlw[S9]
				udg_baojilv[i] = udg_baojilv[i] - udg_jueneibaojilv[S9]
				udg_shanghaixishou[i] = udg_shanghaixishou[i] - udg_jueneishxs[S9]
			end
			S9 = S9 + 1
		end
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|CFFFF9933成功遗忘技能：" .. (GetObjectName(I7[(i - 1) * 20 + num]) or ""))
		UnitRemoveAbility(udg_hero[i], I7[20 * (i - 1) + num])
		if I7[(i - 1) * 20 + num] == 1093677904 then
			UnitRemoveAbility(udg_hero[i], 1093677901)
		end
		if I7[(i - 1) * 20 + num] == 1093677908 then
			UnitRemoveAbility(udg_hero[i], 1093682242)
		end
		if I7[20 * (i - 1) + num] == 1093677634 then
			udg_zhemei[i] = 0
		end
		I7[20 * (i - 1) + num] = 1095067243
		RemoveItem(FetchUnitItem(P4[i], 1227896395))
	end
end
function jB()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	if GetClickedButton() == S4[i] then
		Forget(p, 1)
	elseif GetClickedButton() == T4[i] then
		Forget(p, 2)
	elseif GetClickedButton() == U4[i] then
		Forget(p, 3)
	elseif GetClickedButton() == V4[i] then
		Forget(p, 4)
	elseif GetClickedButton() == W4[i] then
		Forget(p, 5)
	elseif GetClickedButton() == X4[i] then
		Forget(p, 6)
	elseif GetClickedButton() == J7[i] then
		Forget(p, 7)
	elseif GetClickedButton() == J78[i] then
		Forget(p, 8)
	elseif GetClickedButton() == J79[i] then
		Forget(p, 9)
	elseif GetClickedButton() == J710[i] then
		Forget(p, 10)
	elseif GetClickedButton() == J711[i] then
		Forget(p, 11)
	end
	DialogClear(K7[i])
	p = nil
end
function GetBookNum(id)
	local i = 1
	for _ in _loop_() do
		if i > MAX_WU_GONG_NUM then break end
		if LoadInteger(YDHT, StringHash("武学") + i, 1) == id then
			return i
		end
		i = i + 1
	end
	return 0
end
function LearnJiNeng(l__ut, it)
	local p = GetOwningPlayer(l__ut)
	local i = 1 + GetPlayerId(p)
	local u = udg_hero[i]
	local num = GetBookNum(GetItemTypeId(it))
	local id = LoadInteger(YDHT, StringHash("武学") + num, 2)
	local dp1 = LoadInteger(YDHT, StringHash("武学") + num, 4)
	local fy1 = LoadInteger(YDHT, StringHash("武学") + num, 5)
	local gg1 = LoadInteger(YDHT, StringHash("武学") + num, 6)
	local jm1 = LoadInteger(YDHT, StringHash("武学") + num, 7)
	local wx1 = LoadInteger(YDHT, StringHash("武学") + num, 8)
	local ys1 = LoadInteger(YDHT, StringHash("武学") + num, 9)
	if GetUnitAbilityLevel(u, id) > 0 then
		DisplayTextToPlayer(p, 0, 0, "|CFFFF0033你已经拥有此武功了")
		unitadditembyidswapped(GetItemTypeId(it), l__ut)
	else
		if danpo[i] >= dp1 and fuyuan[i] >= fy1 and gengu[i] >= gg1 and jingmai[i] >= jm1 and wuxing[i] >= wx1 and yishu[i] >= ys1 then
			if id == 1093677905 then
				UnitAddAbility(u, id)
				UnitMakeAbilityPermanent(u, true, id)
				DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" .. (GetPlayerName(p) or "") .. "习得" .. (GetObjectName(id) or ""))
				AddPlayerTechResearched(p, 1382576745, 1)
			else
				L7[i] = 1
				for _ in _loop_() do
					if L7[i] > wugongshu[i] then break end
					if I7[20 * (i - 1) + L7[i]] ~= 1095067243 then
						if L7[i] == wugongshu[i] then
							DisplayTextToPlayer(p, 0, 0, "|CFFFF0033学习技能已达上限，请先遗忘部分技能")
							unitadditembyidswapped(GetItemTypeId(it), l__ut)
						end
					else
						UnitAddAbility(u, id)
						UnitMakeAbilityPermanent(u, true, id)
						if LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id * 5) >= 2 then
							SetUnitAbilityLevel(u, id, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), id * 5))
						end
						I7[20 * (i - 1) + L7[i]] = id
						if GetUnitAbilityLevel(u, id) >= 2 then
							DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" .. (GetPlayerName(p) or "") .. "想起" .. (GetObjectName(id) or ""))
						else
							DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" .. (GetPlayerName(p) or "") .. "习得" .. (GetObjectName(id) or ""))
						end
						S9 = 1
						for _ in _loop_() do
							if S9 > 20 then break end
							if id == MM9[S9] then
								udg_shanghaijiacheng[i] = udg_shanghaijiacheng[i] + udg_jueneishjc[S9]
								ModifyHeroStat(1, u, 0, udg_jueneiminjie[S9])
								udg_baojilv[i] = udg_baojilv[i] + udg_jueneibaojilv[S9]
								juexuelingwu[i] = juexuelingwu[i] + udg_jueneijxlw[S9]
								udg_shanghaixishou[i] = udg_shanghaixishou[i] + udg_jueneishxs[S9]
							end
							S9 = S9 + 1
						end
						if true then break end
					end
					L7[i] = L7[i] + 1
				end
			end
		else
			DisplayTextToPlayer(p, 0, 0, "|CFFFF0033学习条件不足")
			if danpo[i] >= dp1 then
			else
				DisplayTextToPlayer(p, 0, 0, "|CFFFF0033胆魄缺少：" .. (I2S(dp1 - danpo[i]) or ""))
			end
			if gengu[i] >= gg1 then
			else
				DisplayTextToPlayer(p, 0, 0, "|CFFFF0033根骨缺少：" .. (I2S(gg1 - gengu[i]) or ""))
			end
			if fuyuan[i] >= fy1 then
			else
				DisplayTextToPlayer(p, 0, 0, "|CFFFF0033福缘缺少：" .. (I2S(fy1 - fuyuan[i]) or ""))
			end
			if wuxing[i] >= wx1 then
			else
				DisplayTextToPlayer(p, 0, 0, "|CFFFF0033悟性缺少：" .. (I2S(wx1 - wuxing[i]) or ""))
			end
			if jingmai[i] >= jm1 then
			else
				DisplayTextToPlayer(p, 0, 0, "|CFFFF0033经脉缺少：" .. (I2S(jm1 - jingmai[i]) or ""))
			end
			if yishu[i] >= ys1 then
			else
				DisplayTextToPlayer(p, 0, 0, "|CFFFF0033医术缺少：" .. (I2S(ys1 - yishu[i]) or ""))
			end
			unitadditembyidswapped(GetItemTypeId(it), l__ut)
		end
	end
	p = nil
	u = nil
end
--学习武功
function IsWuGongBook()
	return GetBookNum(GetItemTypeId(GetManipulatedItem())) ~= 0
end
function BookLearnWuGong()
	LearnJiNeng(GetTriggerUnit(), GetManipulatedItem())
end
--内功加成属性
function NeiGongJiaCheng(i, id, baoji, shxs, jxlw, minjie, shjc)
	MM9[i] = id
	udg_jueneibaojilv[i] = baoji
	udg_jueneishxs[i] = shxs
	udg_jueneijxlw[i] = jxlw
	udg_jueneiminjie[i] = minjie
	udg_jueneishjc[i] = shjc
end
function NeiGongJiaChengS()
	--序号、ID、暴击率、伤害吸收、绝学领悟、内力、伤害加成
	NeiGongJiaCheng(1, 1093682232, 0.15, 0.2, 5, 30, 1.0)
	NeiGongJiaCheng(2, 1093679154, 0.08, 0.25, 4, 150, 0.4)
	NeiGongJiaCheng(3, 1093679155, 0.05, 0.3, 3, 100, 0.3)
	NeiGongJiaCheng(4, 1093679428, 0.06, 0.4, 4, 120, 0.8)
	NeiGongJiaCheng(5, 1093679152, 0.12, 0.2, 3, 130, 0.7)
	NeiGongJiaCheng(6, 1093678936, 0.16, 0.15, 3, 60, 0.5)
	NeiGongJiaCheng(7, 1093679156, 0.1, 0.1, 2, 80, 0.6)
	NeiGongJiaCheng(8, 1395666994, 0.2, 0.2, 1, 50, 0.9)
	NeiGongJiaCheng(9, 1093678927, 0.04, 0, 0, 25, 0.2)
	NeiGongJiaCheng(10, 1093678928, 0.06, 0, 0, 30, 0.12)
	NeiGongJiaCheng(11, 1093678929, 0.08, 0, 0, 30, 0.14)
	NeiGongJiaCheng(12, 1093678930, 0.06, 0, 0, 20, 0.15)
	NeiGongJiaCheng(13, 1093678931, 0.1, 0, 0, 40, 0.25)
	NeiGongJiaCheng(14, 1093678932, 0.1, 0, 0, 30, 0.3)
	NeiGongJiaCheng(15, 1093678933, 0.07, 0, 0, 50, 0.18)
	NeiGongJiaCheng(16, 1093678935, 0.09, 0, 0, 50, 0.1)
	NeiGongJiaCheng(17, 1093682254, 0.03, 0, 0, 40, 0.18)
	NeiGongJiaCheng(18, 1093682226, 0.2, 0, 0, 80, 0.5)
	NeiGongJiaCheng(19, 1093682230, 0.8, 0, 0, 10, 0.15)
	NeiGongJiaCheng(20, 1093682228, -0.2, 0, 0, -40, -0.25)
end
--------学习武功系统结束------
--------武功效果系统开始------
function uC()
	return UnitHasBuffBJ(GetAttacker(), 1110454322)
end
function vC()
	local u = GetAttacker()
	if GetUnitState(u, UNIT_STATE_LIFE) <= 0.001 * GetUnitState(u, UNIT_STATE_MAX_LIFE) then
		SetWidgetLife(u, 1.0)
	else
		SetWidgetLife(u, GetUnitState(u, UNIT_STATE_LIFE) - 0.001 * GetUnitState(u, UNIT_STATE_MAX_LIFE))
	end
	u = nil
end
function xC()
	return UnitHasBuffBJ(GetAttacker(), 1112437615)
end
function yC()
	local u = GetAttacker()
	if GetUnitState(u, UNIT_STATE_LIFE) <= 0.003 * GetUnitState(u, UNIT_STATE_MAX_LIFE) then
		SetWidgetLife(u, 1.0)
	else
		SetWidgetLife(u, GetUnitState(u, UNIT_STATE_LIFE) - 0.003 * GetUnitState(u, UNIT_STATE_MAX_LIFE))
	end
	u = nil
end
function AC()
	return IsUnitAliveBJ(GetFilterUnit()) and (UnitHasBuffBJ(GetFilterUnit(), 1111847784) or UnitHasBuffBJ(GetFilterUnit(), 1110454602) or UnitHasBuffBJ(GetFilterUnit(), 1110454323) or UnitHasBuffBJ(GetFilterUnit(), 1113813609) or UnitHasBuffBJ(GetFilterUnit(), 1110454324) or UnitHasBuffBJ(GetFilterUnit(), 1110454342) or UnitHasBuffBJ(GetFilterUnit(), 1110454343))
end
function aC()
	local loc = GetUnitLoc(GetEnumUnit())
	local loc2 = nil
	if UnitHasBuffBJ(GetEnumUnit(), 1111847784) then
		if GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) <= 0.001 * GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) then
			SetWidgetLife(GetEnumUnit(), 1.0)
		else
			SetUnitState(GetEnumUnit(), UNIT_STATE_LIFE, GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) - 0.001 * GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE))
		end
	end
	if UnitHasBuffBJ(GetEnumUnit(), 1110454602) then
		if GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) <= 0.003 * GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) then
			SetWidgetLife(GetEnumUnit(), 1.0)
		else
			SetUnitState(GetEnumUnit(), UNIT_STATE_LIFE, GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) - 0.003 * GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE))
		end
	end
	if UnitHasBuffBJ(GetEnumUnit(), 1110454323) then
		if GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) <= 0.002 * GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) then
			SetWidgetLife(GetEnumUnit(), 1.0)
		else
			SetUnitState(GetEnumUnit(), UNIT_STATE_LIFE, GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) - 0.002 * GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE))
		end
	end
	if UnitHasBuffBJ(GetEnumUnit(), 1113813609) then
		loc2 = pu(loc, 256.0, GetRandomReal(0, 360.0))
		IssuePointOrderByIdLoc(GetEnumUnit(), 851986, loc2)
		RemoveLocation(loc2)
	end
	if UnitHasBuffBJ(GetEnumUnit(), 1110454324) then
		if GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) <= 0.003 * GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) then
			SetWidgetLife(GetEnumUnit(), 1.0)
		else
			SetUnitState(GetEnumUnit(), UNIT_STATE_LIFE, GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) - 0.003 * GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE))
		end
	end
	if UnitHasBuffBJ(GetEnumUnit(), 1110454342) then
		if ModuloInteger(GetUnitPointValue(GetEnumUnit()), 10) ~= 0 then
			if GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) <= 0.01 * GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) then
				SetWidgetLife(GetEnumUnit(), 1.0)
			else
				SetUnitState(GetEnumUnit(), UNIT_STATE_LIFE, GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) - 0.01 * GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE))
			end
		else
			if GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) <= 0.03 * GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) then
				SetWidgetLife(GetEnumUnit(), 1.0)
			else
				SetUnitState(GetEnumUnit(), UNIT_STATE_LIFE, GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) - 0.03 * GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE))
			end
		end
		CreateTextTagLocBJ("脑神丹效果", loc, 60.0, 12.0, 65.0, 55.0, 42.0, 0)
		Nw(3.0, bj_lastCreatedTextTag)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
	end
	if UnitHasBuffBJ(GetEnumUnit(), 1110454343) then
		--if(GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<=0.03*GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE))then
		--	call SetWidgetLife(GetEnumUnit(),1.)
		--else
		SetUnitState(GetEnumUnit(), UNIT_STATE_LIFE, GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) - 0.03 * GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE))
		--endif
		CreateTextTagLocBJ("化尸粉效果", loc, 60.0, 12.0, 65.0, 55.0, 42.0, 0)
		Nw(3.0, bj_lastCreatedTextTag)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
	end
	RemoveLocation(loc)
	loc = nil
	loc2 = nil
end
--每秒钟做一次
function BC()
	ForGroupBJ(wv(bj_mapInitialPlayableArea, Condition(AC)), aC)
end
-------激活残章-----
function ActCanZhang(l__ut, it, id1, lwd, id2, id3, id4, s, flag)
	local p = GetOwningPlayer(l__ut)
	local i = 1 + GetPlayerId(p)
	local u = udg_hero[i]
	if GetUnitAbilityLevel(u, id1) <= 0 then
		DisplayTextToPlayer(p, 0, 0, "|CFFFF0033你尚未学会该武功，无法激活隐藏招式")
		unitadditembyidswapped(GetItemTypeId(it), l__ut)
	else
		if flag >= 1 then
			DisplayTextToPlayer(p, 0, 0, "|CFFFF0033你之前已经激活过了")
			unitadditembyidswapped(GetItemTypeId(it), l__ut)
		else
			if juexuelingwu[i] >= lwd and GetUnitAbilityLevel(u, id2) ~= 0 and GetUnitAbilityLevel(u, id3) ~= 0 and GetUnitAbilityLevel(u, id4) ~= 0 then
				flag = 1
				DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了" .. (s or ""))
			else
				DisplayTextToPlayer(p, 0, 0, "|CFFFF0033条件不足，激活失败")
				unitadditembyidswapped(GetItemTypeId(it), l__ut)
			end
		end
	end
	u = nil
	p = nil
	return flag
end
function CC()
	return GetItemTypeId(GetManipulatedItem()) == 1227896371
end
function cC()
	Jd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = ActCanZhang(GetTriggerUnit(), GetManipulatedItem(), 1093678920, 5, 1093678935, 1093678933, 1093679152, "反两仪刀法第1式：行气如虹", Jd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
end
function EC()
	return GetItemTypeId(GetManipulatedItem()) == 1227896370
end
function FC()
	Id[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = ActCanZhang(GetTriggerUnit(), GetManipulatedItem(), 1093679157, 5, 1093678928, 1093678930, 1093679154, "六脉神剑第1式：少商剑", Id[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
end
function HC()
	return GetItemTypeId(GetManipulatedItem()) == 1227896369
end
function IC()
	Qd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = ActCanZhang(GetTriggerUnit(), GetManipulatedItem(), 1093678924, 5, 1093679154, 1093678929, 1093682254, "打狗棒法第1式：恶狗拦路", Qd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
end
function JC()
	return GetItemTypeId(GetManipulatedItem()) == 1227896374
end
function KC()
	ld[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = ActCanZhang(GetTriggerUnit(), GetManipulatedItem(), 1093678918, 5, 1093679428, 1093679152, 1093678897, "独孤九剑第1式：破剑式", ld[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
end
function MC()
	return GetItemTypeId(GetManipulatedItem()) == 1227896372
end
function NC()
	Od[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = ActCanZhang(GetTriggerUnit(), GetManipulatedItem(), 1093679158, 5, 1093679155, 1093678936, 1093678669, "胡家刀法第1式：八方藏刀式", Od[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
end
function PC()
	return GetItemTypeId(GetManipulatedItem()) == 1227896368
end
function QC()
	Pd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = ActCanZhang(GetTriggerUnit(), GetManipulatedItem(), 1093679161, 5, 1093679156, 1093682226, 1093678931, "西毒棍法第1式：蛇盘青竹", Pd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
end
function SC()
	return GetItemTypeId(GetManipulatedItem()) == 1227896377
end
function TC()
	Kd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = ActCanZhang(GetTriggerUnit(), GetManipulatedItem(), 1093678922, 5, 1093678666, 1093678932, 1395666994, "辟邪剑法第1式：流星赶月", Kd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
end
function VC()
	return GetItemTypeId(GetManipulatedItem()) == 1227896376
end
function WC()
	Ld[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = ActCanZhang(GetTriggerUnit(), GetManipulatedItem(), 1093678921, 5, 1093678926, 1093682232, 1093678936, "野球拳第1式：翻肘裂捶", Ld[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
end
function YC()
	return GetItemTypeId(GetManipulatedItem()) == 1227896375
end
function ZC()
	Nd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = ActCanZhang(GetTriggerUnit(), GetManipulatedItem(), 1093678917, 5, 1093682232, 1093678927, 1093682254, "降龙十八掌第1式：神龙摆尾", Nd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
end
function ec()
	return GetItemTypeId(GetManipulatedItem()) == 1227896373
end
function gc()
	Md[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = ActCanZhang(GetTriggerUnit(), GetManipulatedItem(), 1093678919, 5, 1093678664, 1093678931, 1093679156, "黯然销魂掌第1式：无中生有", Md[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
end
--九阳真经残卷
function isJiuYangCanJuan()
	return GetItemTypeId(GetManipulatedItem()) == 1227899735
end
function jiuYangCanJuan()
	JYd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = ActCanZhang(GetTriggerUnit(), GetManipulatedItem(), 1093682254, 5, 1093682254, 1093679428, 1093678936, "九阳真经残卷", JYd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
end
--武魂石系统
function IsWuHunShi()
	if GetItemTypeId(GetManipulatedItem()) == 1227897169 then
		if De[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == false and Ee[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == false then
			DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFFFF0033未集齐决战套装或江湖套装，激活失败")
			return false
		else
			return true
		end
	end
	return false
end
function WuHunShi()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	DialogClear(wuhun)
	RemoveItem(GetManipulatedItem())
	DialogSetMessage(wuhun, "请选择要激活的残章")
	if Jd[i] == 0 then
		wuhun1[1] = DialogAddButtonBJ(wuhun, "反两仪刀法")
	end
	if Id[i] == 0 then
		wuhun1[2] = DialogAddButtonBJ(wuhun, "六脉神剑")
	end
	if Qd[i] == 0 then
		wuhun1[3] = DialogAddButtonBJ(wuhun, "打狗棒法")
	end
	if ld[i] == 0 then
		wuhun1[4] = DialogAddButtonBJ(wuhun, "独孤九剑")
	end
	if Od[i] == 0 then
		wuhun1[5] = DialogAddButtonBJ(wuhun, "胡家刀法")
	end
	if Pd[i] == 0 then
		wuhun1[6] = DialogAddButtonBJ(wuhun, "西毒棍法")
	end
	if Kd[i] == 0 then
		wuhun1[7] = DialogAddButtonBJ(wuhun, "辟邪剑法")
	end
	if Ld[i] == 0 then
		wuhun1[8] = DialogAddButtonBJ(wuhun, "野球拳法")
	end
	if Nd[i] == 0 then
		wuhun1[9] = DialogAddButtonBJ(wuhun, "降龙十八掌")
	end
	if Md[i] == 0 then
		wuhun1[10] = DialogAddButtonBJ(wuhun, "黯然销魂掌")
	end
	wuhun1[11] = DialogAddButtonBJ(wuhun, "取消")
	DialogDisplay(p, wuhun, true)
	u = nil
	p = nil
end
function JiHuoCanZhang()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	if GetClickedButton() == wuhun1[1] then
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了反两仪刀法第1式：行气如虹")
		Jd[i] = 1
	end
	if GetClickedButton() == wuhun1[2] then
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了六脉神剑第1式：少商剑")
		Id[i] = 1
	end
	if GetClickedButton() == wuhun1[3] then
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了打狗棒法第1式：恶狗拦路")
		Qd[i] = 1
	end
	if GetClickedButton() == wuhun1[4] then
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了独孤九剑第1式：破剑式")
		ld[i] = 1
	end
	if GetClickedButton() == wuhun1[5] then
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了胡家刀法第1式：八方藏刀式")
		Od[i] = 1
	end
	if GetClickedButton() == wuhun1[6] then
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了西毒棍法第1式：蛇盘青竹")
		Pd[i] = 1
	end
	if GetClickedButton() == wuhun1[7] then
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了辟邪剑法第1式：流星赶月")
		Kd[i] = 1
	end
	if GetClickedButton() == wuhun1[8] then
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了野球拳第1式：翻肘裂捶")
		Ld[i] = 1
	end
	if GetClickedButton() == wuhun1[9] then
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了降龙十八掌第1式：神龙摆尾")
		Nd[i] = 1
	end
	if GetClickedButton() == wuhun1[10] then
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33恭喜激活了黯然销魂掌第1式：无中生有")
		Md[i] = 1
	end
	if GetClickedButton() == wuhun1[11] then
		UnitAddItemById(P4[i], 1227897169)
	end
	p = nil
end
--学习门派内功
function pR()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895856 -- INLINED!!
end
function LearnNeiGong()
	local b = GetClickedButton()
	local u = LoadUnitHandle(YDHT, StringHash("门派内功"), 3)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local id = LoadInteger(YDHT, StringHash("门派内功"), 4)
	local p = GetOwningPlayer(u)
	if b == LoadButtonHandle(YDHT, StringHash("门派内功"), 1) then
		UnitAddAbility(u, Q8[id])
		UnitMakeAbilityPermanent(u, true, Q8[id])
		DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cff00FF66恭喜领悟技能：" .. (GetObjectName(Q8[id]) or ""))
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF66玩家" .. (I2S(1 + GetPlayerId(p)) or "") .. "成为" .. (udg_menpainame[udg_runamen[i]] or "") .. "长老")
		SetPlayerName(p, "〓" .. (udg_menpainame[udg_runamen[i]] or "") .. "长老〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
		L7[i] = 1
		for _ in _loop_() do
			if L7[i] > wugongshu[i] then break end
			if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
			else
				I7[(i - 1) * 20 + L7[i]] = Q8[id]
				if true then break end
			end
			L7[i] = L7[i] + 1
		end
	elseif b == LoadButtonHandle(YDHT, StringHash("门派内功"), 2) then
		if P8[id] == 1093678935 then
			if GetUnitAbilityLevel(u, 1093678935) >= 1 then
				IncUnitAbilityLevel(u, P8[id])
			else
				UnitAddAbility(u, P8[id])
				L7[i] = 1
				for _ in _loop_() do
					if L7[i] > wugongshu[i] then break end
					if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
					else
						I7[(i - 1) * 20 + L7[i]] = P8[id]
						if true then break end
					end
					L7[i] = L7[i] + 1
				end
			end
			IncUnitAbilityLevel(u, P8[id])
		else
			UnitAddAbility(u, P8[id])
			UnitMakeAbilityPermanent(u, true, P8[id])
			L7[i] = 1
			for _ in _loop_() do
				if L7[i] > wugongshu[i] then break end
				if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
				else
					I7[(i - 1) * 20 + L7[i]] = P8[id]
					if true then break end
				end
				L7[i] = L7[i] + 1
			end
		end
		DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cff00FF66恭喜领悟技能：" .. (GetObjectName(P8[id]) or ""))
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF66玩家" .. (I2S(1 + GetPlayerId(p)) or "") .. "成为" .. (udg_menpainame[udg_runamen[i]] or "") .. "长老")
		SetPlayerName(p, "〓" .. (udg_menpainame[udg_runamen[i]] or "") .. "长老〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
	end
	DialogClear(udg_menpaineigong)
	FlushChildHashtable(YDHT, StringHash("门派内功"))
	DialogDestroy(udg_menpaineigong)
	udg_menpaineigong = nil
	b = nil
	u = nil
	p = nil
end
function qR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	local i = 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	local b1 = nil
	local b2 = nil
	local t = CreateTrigger()
	local j = 0
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, i)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if UnitHaveItem(GetTriggerUnit(), 1227895642) == false then
		DisplayTextToPlayer(Player(-1 + i), 0, 0, "|CFF34FF00你必须携带门派毕业卷才能获得修习资格")
	else
		if O8[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
			DisplayTextToPlayer(Player(-1 + i), 0, 0, "|CFF34FF00你已经修行过了")
		else
			if GetUnitAbilityLevel(udg_hero[i], Y7[udg_runamen[i]]) < 2 then
				DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 15, "你的" .. (GetAbilityName(Y7[udg_runamen[i]]) or "") .. "|r还没修炼到位")
			else
				j = 1
				for _ in _loop_() do
					if j > wugongshu[i] then break end
					if I7[GetPlayerId(GetOwningPlayer(GetTriggerUnit())) * 20 + j] ~= 1095067243 then
						--call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"j="+I2S(j))
						if j == wugongshu[i] then
							DisplayTextToPlayer(Player(-1 + i), 0, 0, "|CFF34FF00学习技能已达上限，请先遗忘部分技能")
						end
					else
						O8[LoadInteger(YDHT, id * cx, -1587459251)] = 1
						RemoveItem(FetchUnitItem(GetTriggerUnit(), 1227895642))
						bj_forLoopBIndex = 1
						bj_forLoopBIndexEnd = 20
						for _ in _loop_() do
							if bj_forLoopBIndex > bj_forLoopBIndexEnd then break end
							if udg_runamen[LoadInteger(YDHT, id * cx, -1587459251)] == 11 then
								DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 15, "自由门派没有内功")
								if true then break end
							elseif udg_runamen[LoadInteger(YDHT, id * cx, -1587459251)] == 13 then
								DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 15, "该门派不在此学习内功")
								unitadditembyidswapped(1227895642, GetTriggerUnit())
								O8[LoadInteger(YDHT, id * cx, -1587459251)] = 0
								if true then break end
							else
								if udg_runamen[LoadInteger(YDHT, id * cx, -1587459251)] == bj_forLoopBIndex then
									udg_menpaineigong = DialogCreate()
									DialogSetMessage(udg_menpaineigong, "请选择你要修习的内功")
									b1 = DialogAddButtonBJ(udg_menpaineigong, GetObjectName(Q8[bj_forLoopBIndex]))
									b2 = DialogAddButtonBJ(udg_menpaineigong, GetObjectName(P8[bj_forLoopBIndex]))
									SaveButtonHandle(YDHT, StringHash("门派内功"), 1, b1)
									SaveButtonHandle(YDHT, StringHash("门派内功"), 2, b2)
									SaveUnitHandle(YDHT, StringHash("门派内功"), 3, GetTriggerUnit())
									SaveInteger(YDHT, StringHash("门派内功"), 4, bj_forLoopBIndex)
									DialogDisplay(GetOwningPlayer(GetTriggerUnit()), udg_menpaineigong, true)
									TriggerRegisterDialogEvent(t, udg_menpaineigong)
									TriggerAddAction(t, LearnNeiGong)
								end
							end
							bj_forLoopBIndex = bj_forLoopBIndex + 1
						end
						if true then break end
					end
					j = j + 1
				end
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
	b1 = nil
	b2 = nil
end
function IsMuRongNeiGong()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227897158 -- INLINED!!
end
function MuRongNeiGong()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local j = 1
	if udg_runamen[i] ~= 13 then
		DisplayTextToPlayer(p, 0, 0, "|CFF34FF00你没有拜入姑苏慕容")
	else
		if UnitHaveItem(u, 1227895642) == false then
			DisplayTextToPlayer(p, 0, 0, "|CFF34FF00你必须携带门派毕业卷才能获得修习资格")
		else
			if GetUnitAbilityLevel(u, Y7[udg_runamen[i]]) < 2 then
				DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 15, "你的" .. (GetAbilityName(Y7[udg_runamen[i]]) or "") .. "|r还没修炼到位")
			else
				if O8[i] == 1 then
					DisplayTextToPlayer(p, 0, 0, "|CFF34FF00你已经修行过了")
				else
					j = 1
					for _ in _loop_() do
						if j > wugongshu[i] then break end
						if I7[(i - 1) * 20 + j] ~= 1095067243 then
							if j == wugongshu[i] then
								DisplayTextToPlayer(p, 0, 0, "|CFF34FF00学习技能已达上限，请先遗忘部分技能")
							end
						else
							O8[i] = 1
							RemoveItem(FetchUnitItem(u, 1227895642))
							if danpo[i] > 20 then
								UnitAddAbility(u, P8[13])
								UnitMakeAbilityPermanent(u, true, P8[13])
								DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" .. (GetObjectName(P8[13]) or ""))
								DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF66玩家" .. (I2S(1 + GetPlayerId(p)) or "") .. "成为" .. (udg_menpainame[udg_runamen[i]] or "") .. "长老")
								SetPlayerName(p, "〓" .. (udg_menpainame[udg_runamen[i]] or "") .. "长老〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
								L7[i] = 1
								for _ in _loop_() do
									if L7[i] > wugongshu[i] then break end
									if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
									else
										I7[(i - 1) * 20 + L7[i]] = P8[13]
										if true then break end
									end
									L7[i] = L7[i] + 1
								end
							else
								UnitAddAbility(u, Q8[13])
								UnitMakeAbilityPermanent(u, true, Q8[13])
								DisplayTextToPlayer(p, 0, 0, "|cff00FF66你还是先掌握" .. (GetObjectName(Q8[13]) or "") .. "吧")
								DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00FF66玩家" .. (I2S(1 + GetPlayerId(p)) or "") .. "成为" .. (udg_menpainame[udg_runamen[i]] or "") .. "长老")
								SetPlayerName(p, "〓" .. (udg_menpainame[udg_runamen[i]] or "") .. "长老〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
								L7[i] = 1
								for _ in _loop_() do
									if L7[i] > wugongshu[i] then break end
									if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
									else
										I7[(i - 1) * 20 + L7[i]] = Q8[13]
										if true then break end
									end
									L7[i] = L7[i] + 1
								end
							end
							if true then break end
						end
						j = j + 1
					end
				end
			end
		end
	end
	u = nil
	p = nil
end


--===========================================================================
--合成物品
function HeCheng_Conditions()
	--call BJDebugMsg(I2S(GetUnitTypeId(GetTriggerUnit())))
	return Ce[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 2 or GetItemTypeId(GetManipulatedItem()) == 1227897145 or GetItemTypeId(GetManipulatedItem()) == 1227897153 or GetItemTypeId(GetManipulatedItem()) == 1227897154 or GetItemTypeId(GetManipulatedItem()) == 1227897156
end
function HeCheng_Actions()
	--二合一
	--if GetItemTypeId(GetManipulatedItem()) == 'I09C' or GetItemTypeId(GetManipulatedItem()) == 'I09P' then
	--   	call YDWENewItemsFormula( 'I09C', 1, 'I09P', 1, 'ches', 0, 'ches', 0, 'ches', 0, 'ches', 0, 'I00B' )
	--endif
	--if GetItemTypeId(GetManipulatedItem()) == 'I098' or GetItemTypeId(GetManipulatedItem()) == 'I09P' then
	--   	call YDWENewItemsFormula( 'I098', 1, 'I09P', 1, 'ches', 0, 'ches', 0, 'ches', 0, 'ches', 0, 'I00D' )
	--endif
	if GetItemTypeId(GetManipulatedItem()) == 1227894850 or GetItemTypeId(GetManipulatedItem()) == 1227894852 then
		YDWENewItemsFormula(1227894850, 1, 1227894852, 1, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1227894852)
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227895379 or GetItemTypeId(GetManipulatedItem()) == 1227897168 then
		YDWENewItemsFormula(1227895379, 1, 1227897168, 1, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1227895373)
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227895373 or GetItemTypeId(GetManipulatedItem()) == 1227897168 then
		YDWENewItemsFormula(1227895373, 1, 1227897168, 1, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1227895377)
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227895377 or GetItemTypeId(GetManipulatedItem()) == 1227897168 then
		YDWENewItemsFormula(1227895377, 1, 1227897168, 1, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1227895378)
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227895378 or GetItemTypeId(GetManipulatedItem()) == 1227897168 then
		YDWENewItemsFormula(1227895378, 1, 1227897168, 1, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1227895376)
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227897145 or GetItemTypeId(GetManipulatedItem()) == 1227897153 then
		YDWENewItemsFormula(1227897145, 1, 1227897153, 1, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1227897155)
	end
	--三合一
	if GetItemTypeId(GetManipulatedItem()) == 1227896115 or GetItemTypeId(GetManipulatedItem()) == 1227896120 or GetItemTypeId(GetManipulatedItem()) == 1227896129 then
		YDWENewItemsFormula(1227896115, 1, 1227896120, 1, 1227896129, 1, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1227896131)
	end
	--四合一
	--五合一
	--六合一
	if GetItemTypeId(GetManipulatedItem()) == 1227895376 or GetItemTypeId(GetManipulatedItem()) == 1227897168 then
		YDWENewItemsFormula(1227895376, 1, 1227897168, 1, 1227897168, 1, 1227897168, 1, 1227897168, 1, 1227897168, 1, 1227896918)
	end
--call BJDebugMsg(GetItemName(GetLastCombinedItem())+"A")
--if GetItemType(GetLastCombinedItem())==ITEM_TYPE_ARTIFACT then
--    call SaveInteger(YDHT,GetHandleId(GetLastCombinedItem()),0,WeaponNaiJiu(GetLastCombinedItem()))
--   endif
end
--锻造大师补属性
function DZDSBuShuXing(u)
	local ii7 = 0
	local ii8 = 0
	local ii9 = 0
	local it = nil
	local j = 1
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	for _ in _loop_() do
		if j >= 7 then break end
		it = UnitItemInSlotBJ(u, j)
		ii7 = ModuloInteger(GetItemUserData(it) // 100, 10)
		ii8 = ModuloInteger(GetItemUserData(it) // 10, 10)
		ii9 = ModuloInteger(GetItemUserData(it) // 1, 10)
		--call BJDebugMsg("第"+I2S(j)+"格子物品的数值为"+I2S(ii7*100+ii8*10+ii9))
		if ii7 == 1 then
			gengu[i] = gengu[i] + 2
		elseif ii7 == 2 then
			wuxing[i] = wuxing[i] + 2
		elseif ii7 == 3 then
			jingmai[i] = jingmai[i] + 2
		elseif ii7 == 4 then
			fuyuan[i] = fuyuan[i] + 2
		elseif ii7 == 5 then
			danpo[i] = danpo[i] + 2
		elseif ii7 == 6 then
			yishu[i] = yishu[i] + 2
		end
		if ii8 == 1 then
			gengu[i] = gengu[i] + 2
		elseif ii8 == 2 then
			wuxing[i] = wuxing[i] + 2
		elseif ii8 == 3 then
			jingmai[i] = jingmai[i] + 2
		elseif ii8 == 4 then
			fuyuan[i] = fuyuan[i] + 2
		elseif ii8 == 5 then
			danpo[i] = danpo[i] + 2
		elseif ii8 == 6 then
			yishu[i] = yishu[i] + 2
		end
		if ii9 == 1 then
			gengu[i] = gengu[i] + 2
		elseif ii9 == 2 then
			wuxing[i] = wuxing[i] + 2
		elseif ii9 == 3 then
			jingmai[i] = jingmai[i] + 2
		elseif ii9 == 4 then
			fuyuan[i] = fuyuan[i] + 2
		elseif ii9 == 5 then
			danpo[i] = danpo[i] + 2
		elseif ii9 == 6 then
			yishu[i] = yishu[i] + 2
		end
		j = j + 1
	end
	it = nil
end
--为合成的武器增加耐久度
function WuPinHeCheng()
	local it = bj_lastCombinedItem -- INLINED!!
	local i = 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if Ce[i] == 2 and LoadBoolean(YDHT, GetHandleId(GetOwningPlayer(GetTriggerUnit())), GetItemTypeId(it)) == false and udg_dzds[i] <= 5 then
		udg_dzds[i] = udg_dzds[i] + 1
		DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFF66FF00恭喜您锻造成功第" .. (I2S(udg_dzds[i]) or "") .. "件装备，锻造成功5件装备可以获得锻造大师哦")
		SaveBoolean(YDHT, GetHandleId(GetOwningPlayer(GetTriggerUnit())), GetItemTypeId(it), true)
	end
	if Ce[i] == 2 and udg_dzds[i] >= 5 and udg_dzdsbool[i] == false then
		udg_dzdsbool[i] = true
		DZDSBuShuXing(udg_hero[i])
		if udg_zhangmen[i] == true then
		else
			SaveStr(YDHT, GetHandleId(GetOwningPlayer(GetTriggerUnit())), GetHandleId(GetOwningPlayer(GetTriggerUnit())), "〓锻造大师〓" .. (LoadStr(YDHT, GetHandleId(GetOwningPlayer(GetTriggerUnit())), GetHandleId(GetOwningPlayer(GetTriggerUnit()))) or ""))
		end
		DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" .. (GetPlayerName(GetOwningPlayer(GetTriggerUnit())) or "") .. "获得锻造大师")
		SetPlayerName(GetOwningPlayer(GetTriggerUnit()), "〓锻造大师〓" .. (GetPlayerName(GetOwningPlayer(GetTriggerUnit())) or ""))
	end
	--call BJDebugMsg(GetItemName(it))
	if GetItemType(it) == ITEM_TYPE_ARTIFACT then
		SaveInteger(YDHT, GetHandleId(it), 0, WeaponNaiJiu(it))
	end
	it = nil
end


--伴侣属性
function BanLvShuXing_1(num, id1, id2, blgg, blwx, bljm, blfy, bldp, blys)
	R8[num] = id1
	S8[num] = id2
	udg_blgg[num] = blgg
	udg_blwx[num] = blwx
	udg_bljm[num] = bljm
	udg_blfy[num] = blfy
	udg_bldp[num] = bldp
	udg_blys[num] = blys
end
function LO()
	BanLvShuXing_1(1, 1697656885, 1227895865, 2, 0, 0, 0, 3, 0)
	BanLvShuXing_1(2, 1697656886, 1227895874, 2, 2, 2, 2, 2, 2)
	BanLvShuXing_1(3, 1697656887, 1227895380, 0, 0, 0, 0, 1, 1)
	BanLvShuXing_1(4, 1697656888, 1227895864, 0, 2, 2, 1, 0, 0)
	BanLvShuXing_1(5, 1697656889, 1227895858, 2, 0, 1, 0, 0, 0)
	BanLvShuXing_1(6, 1697656898, 1227895859, 0, 2, 0, 0, 0, 1)
	BanLvShuXing_1(7, 1697656897, 1227895857, 0, 0, 0, 2, 0, 0)
	BanLvShuXing_1(8, 1697656899, 1227895873, 2, 2, 2, 2, 2, 2)
	BanLvShuXing_1(9, 1697656900, 1227895863, 2, 0, 0, 2, 1, 0)
	BanLvShuXing_1(10, 1697656901, 1227895862, 0, 1, 3, 0, 0, 1)
	BanLvShuXing_1(11, 1697656902, 1227895861, 1, 1, 0, 0, 0, 2)
	BanLvShuXing_1(12, 1697656903, 1227895860, 0, 0, 2, 1, 1, 0)
	BanLvShuXing_1(13, 1697657154, 1227899728, 2, 2, 2, 2, 2, 2)
	BanLvShuXing_1(14, 1697657155, 1227899731, 3, 3, 3, 3, 3, 3) --白猿
end
--结成伴侣
function NO()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemType(GetManipulatedItem()) == ITEM_TYPE_PERMANENT
end
function OO()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local j = 1
	local loc = GetUnitLoc(u)
	if IsUnitType(u, UNIT_TYPE_HERO) ~= nil then -- INLINED!!
		for _ in _loop_() do
			if j > MAX_BAN_LV_NUM then break end
			if GetUnitTypeId(k8[i]) == R8[j] then
				jingmai[i] = jingmai[i] - udg_bljm[j]
				fuyuan[i] = fuyuan[i] - udg_blfy[j]
				wuxing[i] = wuxing[i] - udg_blwx[j]
				yishu[i] = yishu[i] - udg_blys[j]
				gengu[i] = gengu[i] - udg_blgg[j]
				danpo[i] = danpo[i] - udg_bldp[j]
			end
			j = j + 1
		end
		RemoveUnit(k8[i])
		j = 1
		for _ in _loop_() do
			if j > MAX_BAN_LV_NUM then break end
			if GetItemTypeId(GetManipulatedItem()) == S8[j] then
				PlaySoundOnUnitBJ(Fh, 100, u)
				CreateNUnitsAtLoc(1, R8[j], p, loc, bj_UNIT_FACING)
				zw(bj_lastCreatedUnit, u, 1.0, 250.0, 1000.0, 1500.0, 75)
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00恭喜你与" .. (GetUnitName(bj_lastCreatedUnit) or "") .. "结成伴侣")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00查看伴侣属性输入“bl”")
				k8[i] = bj_lastCreatedUnit
				jingmai[i] = jingmai[i] + udg_bljm[j]
				fuyuan[i] = fuyuan[i] + udg_blfy[j]
				wuxing[i] = wuxing[i] + udg_blwx[j]
				yishu[i] = yishu[i] + udg_blys[j]
				gengu[i] = gengu[i] + udg_blgg[j]
				danpo[i] = danpo[i] + udg_bldp[j]
				RemoveLocation(loc)
			end
			j = j + 1
		end
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
	end
	u = nil
	p = nil
	loc = nil
end


--整理物品
function SO()
	if GetWidgetLife(GetEnumItem()) == 101.0 then --D古董
		SetItemPositionLoc(GetEnumItem(), GetRectCenter(nh))
		RemoveLocation(GetRectCenter(nh))
	elseif GetWidgetLife(GetEnumItem()) == 102.0 then --C古董
		SetItemPositionLoc(GetEnumItem(), GetRectCenter(oh))
		RemoveLocation(GetRectCenter(oh))
	elseif GetWidgetLife(GetEnumItem()) == 103.0 then --B古董
		SetItemPositionLoc(GetEnumItem(), GetRectCenter(ph))
		RemoveLocation(GetRectCenter(ph))
	elseif GetWidgetLife(GetEnumItem()) == 104.0 then --A古董
		SetItemPositionLoc(GetEnumItem(), GetRectCenter(qh))
		RemoveLocation(GetRectCenter(qh))
	elseif GetWidgetLife(GetEnumItem()) == 105.0 then --C草药
		SetItemPositionLoc(GetEnumItem(), GetRectCenter(rh))
		RemoveLocation(GetRectCenter(rh))
	elseif GetWidgetLife(GetEnumItem()) == 106.0 then --B草药
		SetItemPositionLoc(GetEnumItem(), GetRectCenter(sh))
		RemoveLocation(GetRectCenter(sh))
	elseif GetWidgetLife(GetEnumItem()) == 107.0 then --A草药
		SetItemPositionLoc(GetEnumItem(), GetRectCenter(th))
		RemoveLocation(GetRectCenter(th))
	elseif GetWidgetLife(GetEnumItem()) == 108.0 then --18种江湖武功
		SetItemPosition(GetEnumItem(), -1819.0, 484.0)
	elseif GetWidgetLife(GetEnumItem()) == 109.0 then
		SetItemPosition(GetEnumItem(), -1300.0, -300.0)
	end
end
function TO()
	EnumItemsInRectBJ(bj_mapInitialPlayableArea, SO)
end


--------轻功系统------//
function Trig_ttConditions()
	return GetSpellAbilityId() == 1093677653 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true
end
function qinggongxiaoshi()
	local tm = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(tm), 0)
	DestroyEffect(udg_JTX[GetPlayerId(GetOwningPlayer(u)) + 1])
	PauseTimer(tm)
	DestroyTimer(tm)
	u = nil
	tm = nil
end
function Trig_ttActions()
	local d1 = GetUnitLoc(GetTriggerUnit())
	local d2 = GetSpellTargetLoc()
	local agi = I2R(GetHeroAgi(GetTriggerUnit(), false))
	local l__jd = AngleBetweenPoints(d1, d2)
	local distance = 500 + I2R(GetHeroStr(GetTriggerUnit(), false)) / 3
	local velocity = 48.027 * Pow(agi, 0.3131)
	local lasttime = 5.0
	local tm = CreateTimer()
	if velocity > 1000 then
		velocity = 1000
	end
	if distance > 2000 then
		distance = 2000
	end
	SaveReal(YDHT, GetHandleId(GetTriggerUnit()), StringHash("轻功distance"), distance)
	if distance > DistanceBetweenPoints(d1, d2) then
		distance = DistanceBetweenPoints(d1, d2)
	end
	lasttime = distance / velocity
	SaveReal(YDHT, GetHandleId(GetTriggerUnit()), StringHash("轻功velocity"), velocity)
	SaveUnitHandle(YDHT, GetHandleId(tm), 0, GetTriggerUnit())
	SetUnitFacing(GetTriggerUnit(), l__jd)
	DestroyEffect(AddSpecialEffectTargetUnitBJ("origin", GetTriggerUnit(), "Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl"))
	udg_JTX[GetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1] = AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", GetTriggerUnit(), "origin")
	SetUnitAnimation(GetTriggerUnit(), "walk")
	YDWEJumpTimer(GetTriggerUnit(), l__jd, distance, lasttime, 0.03, 100)
	TimerStart(tm, lasttime, false, qinggongxiaoshi)
	RemoveLocation(d1)
	RemoveLocation(d2)
	d1 = nil
	d2 = nil
	tm = nil
end
--伤害测试桩
function IsCeShiShangHai()
	return GetItemTypeId(GetManipulatedItem()) == 1227899447
end
function CeShiJieShu()
	local t = GetExpiredTimer()
	ceshi = false
	SetUnitOwner(gg_unit_N00I_0116, Player(5), true)
	BJDebugMsg("|cff00ff00测试总伤害为" .. (R2S(ceshizongshanghai) or ""))
	PauseTimer(t)
	DestroyTimer(t)
	t = nil
end
function CeShiShangHai()
	local t = CreateTimer()
	ceshi = true
	ceshizongshanghai = 0
	BJDebugMsg(GetUnitName(gg_unit_N00I_0116))
	SetUnitOwner(gg_unit_N00I_0116, Player(6), true)
	TimerStart(t, 10, false, CeShiJieShu)
	t = nil
end
function IsCalcShangHai()
	return ceshi
end
function CalcShangHai()
	ceshizongshanghai = ceshizongshanghai + GetEventDamage()
end
--抽血术
function ChouXie_Condition()
	return IsUnitInGroup(GetAttacker(), w7) and GetPlayerTechCountSimple(1378889777, Player(6)) == 50 and GetTriggerUnit() ~= udg_ZhengPaiWL and GetUnitTypeId(GetTriggerUnit()) ~= 1214409837 and GetUnitTypeId(GetTriggerUnit()) ~= 1865429574 and GetUnitTypeId(GetTriggerUnit()) ~= 1865429575
end
function ChouXie_Action()
	if GetRandomInt(1, 100) <= 20 then
		SetUnitLifePercentBJ(GetTriggerUnit(), GetUnitLifePercent(GetTriggerUnit()) - 6.0)
	end
end
--杀怪(进攻怪及练功房)
function ey()
	return IsUnitEnemy(GetDyingUnit(), GetOwningPlayer(GetKillingUnit())) and (GetOwningPlayer(GetTriggerUnit()) == Player(6) or GetOwningPlayer(GetTriggerUnit()) == Player(7))
end
function KillGuai()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	local i = 1
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	if GetOwningPlayer(GetTriggerUnit()) == Player(7) then
		if UnitHaveItem(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))], 1227896391) then
			T7 = GetRandomReal(0.95, 0.95 + I2R(fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]) / 50.0)
			U7 = T7 * (30.0 * (I2R(udg_boshu + 1) / 1.0))
			AdjustPlayerStateBJ(R2I(U7), GetOwningPlayer(GetKillingUnit()), PLAYER_STATE_RESOURCE_GOLD)
		else
			T7 = GetRandomReal(0.95, 0.95 + I2R(fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]) / 50.0)
			U7 = T7 * (15.0 * (I2R(udg_boshu + 1) / 1.0))
			AdjustPlayerStateBJ(R2I(U7), GetOwningPlayer(GetKillingUnit()), PLAYER_STATE_RESOURCE_GOLD)
		end
		if UnitHaveItem(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))], 1227896393) then
			if GetRandomInt(1, 100) <= 15 then
				AdjustPlayerStateBJ(1, GetOwningPlayer(GetKillingUnit()), PLAYER_STATE_RESOURCE_LUMBER)
			end
		end
		if UnitHaveItem(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))], 1227896390) then
			shengwang[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] = shengwang[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] + udg_boshu // 5
		end
		if UnitHaveItem(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))], 1227896392) then
			AddHeroXP(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))], GetUnitLevel(GetTriggerUnit()) * 20, true)
		end
	else
		T7 = GetRandomReal(0.95, 0.95 + I2R(fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]) / 50.0)
		U7 = T7 * (25.0 * (I2R(udg_boshu + 1) / 1.0))
		AdjustPlayerStateBJ(R2I(U7), GetOwningPlayer(GetKillingUnit()), PLAYER_STATE_RESOURCE_GOLD)
		if GetUnitPointValue(GetTriggerUnit()) == 102 then
			i = 1
			for _ in _loop_() do
				if i >= 6 then break end
				shoujiajf[i] = shoujiajf[i] + 15 * (10 - GetNumPlayer()) // 10
				i = i + 1
			end
			ae = ae + (10 + GetPlayerTechCountSimple(1378889777, Player(6)))
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "击杀名门高手，每位玩家获得守家积分+" .. (I2S(shoujiajf[i] + 15 * (10 - GetNumPlayer()) // 10) or ""))
			SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
			if GetRandomInt(1, 50) <= 5 then
				createitemloc(YaoCao[GetRandomInt(1, 12)], LoadLocationHandle(YDHT, id * cx, 392811314))
				if udg_lddsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] then
					createitemloc(YaoCao[GetRandomInt(1, 12)], LoadLocationHandle(YDHT, id * cx, 392811314))
				end
			end
			if GetRandomInt(1, 50) <= 2 then
				createitemloc(1227897138, LoadLocationHandle(YDHT, id * cx, 392811314))
			else
				if GetRandomInt(1, 100) <= 10 then
					createitemloc(1227896398, LoadLocationHandle(YDHT, id * cx, 392811314))
				else
					if GetRandomInt(1, 90) <= 10 then
						createitemloc(1227896395, LoadLocationHandle(YDHT, id * cx, 392811314))
					else
						if GetRandomInt(1, 80) <= 10 then
							createitemloc(1227896397, LoadLocationHandle(YDHT, id * cx, 392811314))
						end
					end
				end
			end
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			--判断是否为进攻BOSS
			if GetUnitPointValue(GetTriggerUnit()) == 101 then
				i = 1
				for _ in _loop_() do
					if i >= 6 then break end
					shoujiajf[i] = shoujiajf[i] + 30 * (10 - GetNumPlayer()) // 10
					i = i + 1
				end
				ae = ae + (10 + GetPlayerTechCountSimple(1378889777, Player(6)))
				DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "击杀BOSS，每位玩家获得守家积分+" .. (I2S(shoujiajf[i] + 30 * (10 - GetNumPlayer()) // 10) or ""))
				ae = ae + (30 + GetPlayerTechCountSimple(1378889777, Player(6)))
				if GetRandomInt(1, 100) <= 50 then
					udg_shuxing[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] = udg_shuxing[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] + 1
					DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFF33CC00" .. (GetPlayerName(GetOwningPlayer(GetKillingUnit())) or "") .. "|cFF33CC00击杀了BOSS" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cFF33CC00获得了一个自由属性点")
				end
				SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
				createitemloc(YaoCao[GetRandomInt(1, 12)], LoadLocationHandle(YDHT, id * cx, 392811314))
				createitemloc(YaoCao[GetRandomInt(1, 12)], LoadLocationHandle(YDHT, id * cx, 392811314))
				if udg_lddsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] then
					createitemloc(YaoCao[GetRandomInt(1, 12)], LoadLocationHandle(YDHT, id * cx, 392811314))
					createitemloc(YaoCao[GetRandomInt(1, 12)], LoadLocationHandle(YDHT, id * cx, 392811314))
				end
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
			else
				if GetKillingUnit() ~= nil then
					shoujiajf[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] = shoujiajf[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] + 1
				end
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
--魔教救人
function MoJiaoJiuRen_1()
	SetUnitPosition(GetEnumUnit(), -910, 750)
end
function MoJiaoJiuRen()
	DisplayTextToForce(GetPlayersAll(), "|CFFCCFF00魔教潜入监狱救走了被抓住的敌人")
	ForGroupBJ(YDWEGetUnitsInRectOfPlayerNull(udg_jail, Player(6)), MoJiaoJiuRen_1)
end
--杀怪加声望
function Xa()
	return GetPlayerController(GetOwningPlayer(GetKillingUnit())) == MAP_CONTROL_USER
end
function Ya()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))
	local x
	local y
	shengwang[i] = shengwang[i] + udg_boshu // 7 + 1
	if ModuloInteger(GetUnitPointValue(u), 10) == 1 then
		shengwang[i] = shengwang[i] + 8
	end
	if p == Player(6) then
		zd = zd + GetRandomInt(1, 2)
		if zd >= 100 then
			zd = 0
			x = GetUnitX(u)
			y = GetUnitY(u)
			createitem(gudong[GetRandomInt(1, 6 + udg_boshu // 5)], x, y)
		end
	end
	u = nil
	p = nil
end
function dB()
	return GetPlayerController(GetOwningPlayer(GetKillingUnit())) == MAP_CONTROL_USER
end
function eB()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))
	shengwang[i] = shengwang[i] + 1
	if ModuloInteger(GetUnitPointValue(GetTriggerUnit()), 10) == 1 then
		shengwang[i] = shengwang[i] + 5
	elseif ModuloInteger(GetUnitPointValue(GetTriggerUnit()), 10) == 2 then
		shengwang[i] = shengwang[i] + 10
	end
end
--经验符
function oQ()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1952807024
end
function pQ()
	AddHeroXP(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], 200000, true)
end
--购买等级
function rQ()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896154
end
function sQ()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetUnitLevel(udg_hero[i]) >= 100 then
		AdjustPlayerStateBJ(10000, p, PLAYER_STATE_RESOURCE_GOLD)
		DisplayTimedTextToPlayer(p, 0, 0, 15, "|cFFFFCC00等级高于100无法购买等级")
	else
		if Ce[i] == 5 then
			AdjustPlayerStateBJ(10000, p, PLAYER_STATE_RESOURCE_GOLD)
			DisplayTimedTextToPlayer(p, 0, 0, 15, "|cFFFFCC00选择该副职无法购买等级")
		else
			SetHeroLevel(udg_hero[i], GetUnitLevel(udg_hero[i]) + 1, true)
		end
	end
	u = nil
	p = nil
end
--新手大礼包
function uQ()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896394
end
function vQ()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	if GetRandomInt(1, 12) <= 3 then
		AdjustPlayerStateBJ(20000, p, PLAYER_STATE_RESOURCE_GOLD)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用新手大礼包获得金钱+20000")
	else
		if GetRandomInt(1, 9) <= 3 then
			UnitAddItemById(u, udg_jianghu[GetRandomInt(1, 18)])
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用新手大礼包获得随机江湖武功")
		else
			if GetRandomInt(1, 6) <= 3 then
				UnitAddAbility(u, 1093679441)
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用新手大礼包获得神行状态")
				TriggerSleepAction(300.0)
				UnitRemoveAbility(u, 1093679441)
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000失去神行效果")
			else
				YDWEGeneralBounsSystemUnitSetBonus(u, 3, 0, 20000)
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用新手大礼包获得狂暴状态")
				TriggerSleepAction(120.0)
				YDWEGeneralBounsSystemUnitSetBonus(u, 3, 1, 20000)
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000失去狂暴效果")
			end
		end
	end
	u = nil
	p = nil
end
--装备打孔
function xQ()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896398
end
function yQ()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i11 = 0
	local i12 = 0
	if GetItemType(UnitItemInSlotBJ(u, 1)) == ITEM_TYPE_ARTIFACT or GetItemType(UnitItemInSlotBJ(u, 1)) == ITEM_TYPE_PURCHASABLE or GetItemType(UnitItemInSlotBJ(u, 1)) == ITEM_TYPE_CHARGED then
		i12 = ModuloInteger(GetItemUserData(UnitItemInSlotBJ(u, 1)) // 1000, 10)
		i11 = ModuloInteger(GetItemUserData(UnitItemInSlotBJ(u, 1)) // 100, 10)
		if i11 > 0 then
			i12 = i12 + 1
		end
		i11 = ModuloInteger(GetItemUserData(UnitItemInSlotBJ(u, 1)) // 10, 10)
		if i11 > 0 then
			i12 = i12 + 1
		end
		i11 = ModuloInteger(GetItemUserData(UnitItemInSlotBJ(u, 1)), 10)
		if i11 > 0 then
			i12 = i12 + 1
		end
		if i12 < 3 then
			SetItemUserData(UnitItemInSlotBJ(u, 1), GetItemUserData(UnitItemInSlotBJ(u, 1)) + 1000)
			DisplayTimedTextToPlayer(p, 0, 0, 30, "|cff00ffff打孔成功！")
		else
			unitadditembyidswapped(1227896398, u)
			DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000第一格物品不能再打孔了")
		end
	else
		unitadditembyidswapped(1227896398, u)
		DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000第一格物品不是装备")
	end
	u = nil
	p = nil
end
--加入副职
function AQ()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and (GetItemTypeId(GetManipulatedItem()) == 1227896913 or GetItemTypeId(GetManipulatedItem()) == 1227899188 or GetItemTypeId(GetManipulatedItem()) == 1227899189 or GetItemTypeId(GetManipulatedItem()) == 1227899190 or GetItemTypeId(GetManipulatedItem()) == 1227899191 or GetItemTypeId(GetManipulatedItem()) == 1227896915 or GetItemTypeId(GetManipulatedItem()) == 1227896916 or GetItemTypeId(GetManipulatedItem()) == 1227899719)
end
function aQ()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if Ce[i] == 0 then
		if GetItemTypeId(GetManipulatedItem()) == 1227896913 then
			yishu[i] = yishu[i] + 5
			Ce[i] = 1
			DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5.0, "|cffffff00恭喜成为炼丹师，获得医术+5")
		elseif GetItemTypeId(GetManipulatedItem()) == 1227896915 then
			gengu[i] = gengu[i] + 5
			Ce[i] = 2
			DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5.0, "|cffffff00恭喜成为锻造师，获得根骨+5")
		elseif GetItemTypeId(GetManipulatedItem()) == 1227896916 then
			danpo[i] = danpo[i] + 5
			Ce[i] = 3
			DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5.0, "|cffffff00恭喜成为兵器师，获得胆魄+5")
		elseif GetItemTypeId(GetManipulatedItem()) == 1227899188 then
			wuxing[i] = wuxing[i] + 5
			Ce[i] = 4
			DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5.0, "|cffffff00恭喜成为鉴定师，获得悟性+5")
		elseif GetItemTypeId(GetManipulatedItem()) == 1227899189 then
			jingmai[i] = jingmai[i] + 5
			Ce[i] = 5
			DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5.0, "|cffffff00恭喜成为练气师，获得经脉+5")
		elseif GetItemTypeId(GetManipulatedItem()) == 1227899190 then
			fuyuan[i] = fuyuan[i] + 5
			Ce[i] = 6
			DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5.0, "|cffffff00恭喜成为寻宝师，获得福缘+5")
		elseif GetItemTypeId(GetManipulatedItem()) == 1227899191 then
			if GetUnitTypeId(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]) == 1328558130 or GetUnitTypeId(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]) == 1328558131 or GetUnitTypeId(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]) == 1328558643 or GetUnitTypeId(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]) == 1328558664 or GetUnitTypeId(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]) == 1328558665 then
				Ce[i] = 7
				DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5.0, "|cffffff00恭喜成为丫鬟，获得全属性+1")
				danpo[i] = danpo[i] + 1
				wuxing[i] = wuxing[i] + 1
				gengu[i] = gengu[i] + 1
				fuyuan[i] = fuyuan[i] + 1
				jingmai[i] = jingmai[i] + 1
				yishu[i] = yishu[i] + 1
			else
				DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5.0, "|cffffff00男性角色不可加入该副职")
			end
		elseif GetItemTypeId(GetManipulatedItem()) == 1227899719 then
			if GetUnitTypeId(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]) ~= 1328558130 and GetUnitTypeId(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]) ~= 1328558131 and GetUnitTypeId(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]) ~= 1328558643 and GetUnitTypeId(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]) ~= 1328558664 and GetUnitTypeId(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]) ~= 1328558665 then
				Ce[i] = 8
				DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5.0, "|cffffff00恭喜成为精武师，获得全属性+1")
				danpo[i] = danpo[i] + 1
				wuxing[i] = wuxing[i] + 1
				gengu[i] = gengu[i] + 1
				fuyuan[i] = fuyuan[i] + 1
				jingmai[i] = jingmai[i] + 1
				yishu[i] = yishu[i] + 1
			else
				DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5.0, "|cffffff00女性角色不可加入该副职")
			end
		end
	else
		DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 5.0, "|cffff0000你已经加入专精了！（每个角色只能选择一种专精，也可以不选择）")
	end
end
--结拜系统
function MaiHuangZhi_Conditions()
	return GetItemTypeId(GetManipulatedItem()) == 1227894832
end
function MaiHuangZhi()
	unitadditembyidswapped(1227896153, GetTriggerUnit())
	unitadditembyidswapped(1227896153, GetTriggerUnit())
end
function IsHuangZhi()
	return GetItemTypeId(GetManipulatedItem()) == 1227896153
end
function ShaoHuangZhi()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if Bd[i] then
		DisplayTimedTextToPlayer(p, 0, 0, 20.0, "|cffff0000你已经使用过黄纸了，还是等等另外一个人的响应吧")
		unitadditembyidswapped(1227896153, GetTriggerUnit())
	else
		Bd[i] = true
		ad = ad + 1
		bd[ad] = udg_hero[i]
		if ModuloInteger(ad, 2) == 0 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 20.0, "|cffff66ff恭喜" .. (GetPlayerName(GetOwningPlayer(bd[ad - 1])) or "") .. "和" .. (GetPlayerName(GetOwningPlayer(bd[ad])) or "") .. "结拜为兄弟")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 20.0, "|cffff66ff使用成功，等待另外一位玩家与你结拜....")
		end
	end
	u = nil
	p = nil
end
function kT()
	return Bd[1 + GetPlayerId(GetTriggerPlayer())]
end
function mT()
	local i = 1 + GetPlayerId(GetTriggerPlayer())
	local j = 1
	local x
	local y
	for _ in _loop_() do
		if j > 6 then break end
		if udg_hero[i] == bd[j] then
			if ModuloInteger(j, 2) == 0 then
				if bd[j - 1] ~= nil then
					x = GetUnitX(bd[j - 1])
					y = GetUnitY(bd[j - 1])
					SetUnitPosition(udg_hero[i], x, y)
					PanCameraToTimedForPlayer(GetTriggerPlayer(), x, y, 0)
				end
			else
				if bd[j + 1] ~= nil then
					x = GetUnitX(bd[j + 1])
					y = GetUnitY(bd[j + 1])
					SetUnitPosition(udg_hero[i], x, y)
					PanCameraToTimedForPlayer(GetTriggerPlayer(), x, y, 0)
				end
			end
		end
		j = j + 1
	end
end
function qT()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and (GetItemTypeId(GetManipulatedItem()) == 1227899471 or GetItemTypeId(GetManipulatedItem()) == 1227896659)
end
function rT()
	--if GetItemTypeId(GetManipulatedItem())==1227896663 then
	--	set ue = 1
	--endif
	--if GetItemTypeId(GetManipulatedItem())==1227896661 then
	--	set ue = 2
	--endif
	--if GetItemTypeId(GetManipulatedItem())==1227896660 then
	--	set ue = 3
	--endif
	--if GetItemTypeId(GetManipulatedItem())==1227896662 then
	--	set ue = 4
	--endif
	if GetItemTypeId(GetManipulatedItem()) == 1227896659 then
		ue = 5
		DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30.0, "|cff00ffff有玩家开始预约名门挑战，本波进攻怪物将会增加名门高手，大家要小心应付了！")
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227899471 then
		ue = 0
		DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30.0, "|cff00ffff有玩家取消了预约名门挑战，下波进攻怪物将不会增加名门高手，大家要小心应付了！")
	end
end
-- 攻破城门
function cT()
	return GetUnitTypeId(GetTriggerUnit()) == 1752003700
end
function DT()
	ModifyGateBJ(1, Gt)
	YDWEPolledWaitNull((0.18 - 0.01 * I2R(O4)) * 2000.0)
	ModifyGateBJ(0, Gt)
end
--爆炸
function FT()
	return GetUnitAbilityLevel(GetTriggerUnit(), 1093681749) ~= 0
end
function GT()
	local id = GetHandleId(GetTriggeringTrigger())
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function HT()
	local id = GetHandleId(GetTriggeringTrigger())
	SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -655065443, GetEnumUnit())
	SetWidgetLife(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -655065443), GetUnitState(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -655065443), UNIT_STATE_LIFE) - 200.0 * I2R(GetUnitLevel(GetEnumUnit())))
end
function IT()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	AddSpecialEffectLocBJ(loc, "war3mapImported\\ChaosExplosion.mdl")
	DestroyEffect(bj_lastCreatedEffect)
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(300.0, loc, Condition(GT)), HT)
	RemoveLocation(loc)
	u = nil
	loc = nil
end
-- 流星
function JT()
	return GetUnitAbilityLevel(GetAttacker(), 1093681753) ~= 0 and GetRandomInt(1, 70) <= 5
end
function KT()
	local u = GetAttacker()
	local loc = GetUnitLoc(u)
	CreateNUnitsAtLoc(1, 1697656919, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	UnitAddAbility(bj_lastCreatedUnit, 1093681754)
	IssueImmediateOrderById(bj_lastCreatedUnit, 852183)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 15.0)
	ShowUnitHide(bj_lastCreatedUnit)
	RemoveLocation(loc)
	u = nil
	loc = nil
end
-- 冰缓
function MT()
	return GetUnitAbilityLevel(GetAttacker(), 1093681968) ~= 0 and GetRandomInt(1, 70) <= 5
end
function NT()
	local u = GetAttacker()
	local loc = GetUnitLoc(u)
	CreateNUnitsAtLoc(1, 1697656918, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 15.0)
	RemoveLocation(loc)
	u = nil
	loc = nil
end
--辽国进攻
function LiaoGuoJinGong_1()
	local t = GetExpiredTimer()
	local j = LoadInteger(YDHT, GetHandleId(t), 0)
	local jmax = 40
	if j < jmax then
		CreateNUnitsAtLocFacingLocBJ(1, 1751871081, Player(6), Location(-5600, 100), v7[4])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssueTargetOrderById(bj_lastCreatedUnit, 851983, udg_ZhengPaiWL)
		SaveInteger(YDHT, GetHandleId(t), 0, j + 1)
	else
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, GetHandleId(t))
	end
	t = nil
end
function LiaoGuoJinGong()
	local t
	if Sd[1] ~= 2 and Sd[2] ~= 2 and Sd[3] ~= 2 and Sd[4] ~= 2 and Sd[5] ~= 2 and udg_teshushijian then
		t = CreateTimer()
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033激活特殊事件|cFFDDA0DD※边境入侵※")
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033由于激活特殊事件，辽国派出骑兵前来进攻，请准备防御")
		TimerStart(t, 2.0, true, LiaoGuoJinGong_1)
	end
	t = nil
end
--灵鹫宫进攻：触发条件，有玩家选择了灵鹫宫
function LingJiuGongJinGong()
	if (udg_runamen[1] == 12 or udg_runamen[2] == 12 or udg_runamen[3] == 12 or udg_runamen[4] == 12 or udg_runamen[5] == 12) and udg_teshushijian then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033激活特殊事件|cFFDDA0DD※灵鹫宫劫※")
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033由于激活特殊事件，灵鹫宫派出高手前来进攻，请准备防御")
		CreateNUnitsAtLocFacingLocBJ(1, 1852270642, Player(6), Location(1800, -100), v7[4])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssueTargetOrderById(bj_lastCreatedUnit, 851983, udg_ZhengPaiWL)
		CreateNUnitsAtLocFacingLocBJ(1, 1852207984, Player(6), Location(1800, -100), v7[4])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssueTargetOrderById(bj_lastCreatedUnit, 851983, udg_ZhengPaiWL)
		CreateNUnitsAtLocFacingLocBJ(1, 1852663652, Player(6), Location(1800, -100), v7[4])
		GroupAddUnit(w7, bj_lastCreatedUnit)
		IssueTargetOrderById(bj_lastCreatedUnit, 851983, udg_ZhengPaiWL)
	end
end


function GameLogic_Trigger()
	local t = CreateTrigger()
	--选择英雄
	Jh = CreateTrigger()
	TriggerRegisterPlayerSelectionEventBJ(Jh, Player(0), true)
	TriggerRegisterPlayerSelectionEventBJ(Jh, Player(1), true)
	TriggerRegisterPlayerSelectionEventBJ(Jh, Player(2), true)
	TriggerRegisterPlayerSelectionEventBJ(Jh, Player(3), true)
	TriggerRegisterPlayerSelectionEventBJ(Jh, Player(4), true)
	TriggerAddCondition(Jh, Condition(fx))
	TriggerAddAction(Jh, SelectHero)
	--查看当前可加入门派
	Lh = CreateTrigger()
	TriggerRegisterPlayerSelectionEventBJ(Lh, Player(0), true)
	TriggerRegisterPlayerSelectionEventBJ(Lh, Player(1), true)
	TriggerRegisterPlayerSelectionEventBJ(Lh, Player(2), true)
	TriggerRegisterPlayerSelectionEventBJ(Lh, Player(3), true)
	TriggerRegisterPlayerSelectionEventBJ(Lh, Player(4), true)
	TriggerAddCondition(Lh, Condition(kx))
	TriggerAddAction(Lh, MenPai)
	-- 加入门派
	Mh = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Mh, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Mh, Condition(ox))
	TriggerAddAction(Mh, JiaRuMenPai)
	-- 伤害测试
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsCeShiShangHai))
	TriggerAddAction(t, CeShiShangHai)
	t = CreateTrigger()
	TriggerRegisterUnitEvent(t, gg_unit_N00I_0116, EVENT_UNIT_DAMAGED)
	TriggerAddCondition(t, Condition(IsCalcShangHai))
	TriggerAddAction(t, CalcShangHai)
	-- 自由门派
	Mh = CreateTrigger()
	YDWETriggerRegisterLeaveRectSimpleNull(Mh, udg_xuanmenpai)
	TriggerAddCondition(Mh, Condition(WuMenPai_Condition))
	TriggerAddAction(Mh, WuMenPai_Action)
	-- 按ESC查看人物属性
	Rh = CreateTrigger()
	TriggerRegisterPlayerEventEndCinematic(Rh, Player(0))
	TriggerRegisterPlayerEventEndCinematic(Rh, Player(1))
	TriggerRegisterPlayerEventEndCinematic(Rh, Player(2))
	TriggerRegisterPlayerEventEndCinematic(Rh, Player(3))
	TriggerRegisterPlayerEventEndCinematic(Rh, Player(4))
	TriggerAddAction(Rh, RenWuShuXing)
	-- up提升游戏难度
	Sh = CreateTrigger()
	TriggerRegisterPlayerChatEvent(Sh, Player(0), "up", false)
	TriggerAddCondition(Sh, Condition(GameNanDu_Condition))
	TriggerAddAction(Sh, GameNanDu)
	-- 玩家英雄阵亡
	Th = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Th, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Th, Condition(Ex))
	TriggerAddAction(Th, PlayerDeath)
	-- 玩家英雄复活
	Uh = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Uh, udg_revivetimer[1])
	TriggerAddAction(Uh, PlayerReviveA)
	Vh = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Vh, udg_revivetimer[2])
	TriggerAddAction(Vh, PlayerReviveB)
	Wh = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Wh, udg_revivetimer[3])
	TriggerAddAction(Wh, PlayerReviveC)
	Xh = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Xh, udg_revivetimer[4])
	TriggerAddAction(Xh, PlayerReviveD)
	Yh = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Yh, udg_revivetimer[5])
	TriggerAddAction(Yh, PlayerReviveE)
	-- 生成F9信息
	Zh = CreateTrigger()
	TriggerRegisterTimerEventSingle(Zh, 5)
	TriggerAddAction(Zh, Qx)
	-- 玩家离开游戏
	fi = CreateTrigger()
	TriggerRegisterPlayerEventLeave(fi, Player(0))
	TriggerRegisterPlayerEventLeave(fi, Player(1))
	TriggerRegisterPlayerEventLeave(fi, Player(2))
	TriggerRegisterPlayerEventLeave(fi, Player(3))
	TriggerRegisterPlayerEventLeave(fi, Player(4))
	TriggerAddAction(fi, PlayerLeave)
	-- 杀进攻怪及练功房怪
	gi = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(gi, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(gi, Condition(ey))
	TriggerAddAction(gi, KillGuai)
	-- 击杀最终BOSS游戏胜利
	hi = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(hi, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(hi, Condition(hy))
	TriggerAddAction(hi, Victory)
	-- 老家灭了游戏失败
	ii = CreateTrigger()
	TriggerRegisterUnitEvent(ii, udg_ZhengPaiWL, EVENT_UNIT_DEATH)
	TriggerAddAction(ii, Lose)
	-- 购买老家无敌
	ji = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(ji, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(ji, Condition(BuyJiDiWuDi))
	TriggerAddAction(ji, JiDiWuDi)
	-- 首次显示系统窗口信息
	ki = CreateTrigger()
	TriggerRegisterTimerEventSingle(ki, 10.0)
	TriggerAddAction(ki, SystemWindow)
	-- 刷新系统窗口信息
	mi = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(mi, 4.0)
	TriggerAddAction(mi, uuyy)
	-- 计算玩家最大伤害
	ni = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(ni)
	TriggerAddCondition(ni, Condition(wy))
	TriggerAddAction(ni, SetMaxDamage)
	-- 开启试玩模式
	oi = CreateTrigger()
	TriggerRegisterPlayerChatEvent(oi, Player(0), "sw", true)
	TriggerAddCondition(oi, Condition(BeforeAttack))
	TriggerAddAction(oi, SetShiWan)
	-- 购买城防
	pi = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(pi, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(pi, Condition(BuyChengFang))
	TriggerAddAction(pi, ShengChengFang)
	-- 购买高级城防
	ri = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(ri, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(ri, Condition(BuyGaoChengFang))
	TriggerAddAction(ri, ShengGaoChengFang)
	-- 积分换物品
	si = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(si, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(si, Condition(BuyKuanDong))
	TriggerAddAction(si, KuanDongHua)
	-- 声望换物品
	si = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(si, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(si, Condition(BuyKuanDong_1))
	TriggerAddAction(si, KuanDongHua_1)
	-- FIXME 使用武学精要（目前有BUG）
	si = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(si, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(si, Condition(IsWuXueJingYao))
	TriggerAddAction(si, WuXueJingYao)

	--将地图上初始所有单位加入单位组
	Vi = CreateTrigger()
	TriggerRegisterTimerEventSingle(Vi, 2.0)
	TriggerAddAction(Vi, cA)
	--怪物死后重新刷怪
	Wi = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(Wi, Player(12), EVENT_PLAYER_UNIT_DEATH)
	TriggerRegisterPlayerUnitEventSimple(Wi, Player(15), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddAction(Wi, EA)
	--刷进攻怪
	Xi = CreateTrigger()
	TriggerAddCondition(Xi, Condition(GA))
	TriggerAddAction(Xi, HA)
	--刷正面的进攻怪
	Yi = CreateTrigger()
	DisableTrigger(Yi)
	TriggerRegisterTimerEventPeriodic(Yi, 3.0)
	TriggerAddAction(Yi, FrontAttack)
	--刷背面的进攻怪
	Zi = CreateTrigger()
	DisableTrigger(Zi)
	TriggerRegisterTimerEventPeriodic(Zi, 2.0)
	TriggerAddAction(Zi, BackAttack)
	-- 刷名门
	dj = CreateTrigger()
	TriggerAddCondition(dj, Condition(MA))
	TriggerAddAction(dj, NA)
	-- 时间到刷怪
	ej = CreateTrigger()
	TriggerRegisterTimerExpireEvent(ej, A7[1])
	TriggerAddAction(ej, PA)
	fj = CreateTrigger()
	TriggerRegisterTimerExpireEvent(fj, A7[2])
	TriggerAddAction(fj, RA)
	gj = CreateTrigger()
	TriggerRegisterTimerExpireEvent(gj, A7[3])
	TriggerAddAction(gj, TA)
	hj = CreateTrigger()
	TriggerAddAction(hj, VA)
	ij = CreateTrigger()
	TriggerAddAction(ij, XA)
	-- 停怪
	jj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(jj, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(jj, Condition(ZA))
	TriggerAddAction(jj, ea)
	-- 将死亡单位从单位组移除
	mj = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(mj, Player(6), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(mj, Condition(ja))
	TriggerAddAction(mj, ka)
	-- 练功房刷怪
	nj = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(nj, 6.0)
	TriggerAddAction(nj, qa)
	-- 进入练功房
	oj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(oj, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(oj, Condition(sa))
	TriggerAddAction(oj, ua)
	-- 进入练功房
	pj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(pj, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(pj, Condition(wa))
	TriggerAddAction(pj, xa)
	-- 进入练功房
	qj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(qj, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(qj, Condition(za))
	TriggerAddAction(qj, Aa)
	-- 切换背包
	rj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(rj, EVENT_PLAYER_UNIT_SPELL_CAST)
	TriggerAddCondition(rj, Condition(Ba))
	TriggerAddAction(rj, ba)
	-- 鸟的贩卖技能
	sj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(sj, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(sj, Condition(ca))
	TriggerAddAction(sj, Da)
	-- 轻功系统
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(Trig_ttConditions))
	TriggerAddAction(t, Trig_ttActions)
	-- 切换物品
	tj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(tj, EVENT_PLAYER_UNIT_SPELL_CAST)
	TriggerAddCondition(tj, Condition(IsQieHuanItem))
	TriggerAddAction(tj, QieHuanItem)
	-- 英雄达到某等级
	vj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(vj, EVENT_PLAYER_HERO_LEVEL)
	TriggerAddCondition(vj, Condition(Ja))
	TriggerAddAction(vj, HeroLevel)
	-- 杀怪回血
	wj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(wj, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(wj, Condition(Ma))
	TriggerAddAction(wj, KillGuaiJiaXie)
	-- 每秒回血回蓝
	xj = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(xj, 1.0)
	TriggerAddAction(xj, YiShuHuiXie)
	-- 攻击回复（伤害回复）
	yj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(yj, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(yj, Condition(Ra))
	TriggerAddAction(yj, Sa)
	-- 伤害吸收
	zj = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(zj)
	TriggerAddCondition(zj, Condition(Ua))
	TriggerAddAction(zj, Va)
	-- 杀怪加声望
	Aj = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(Aj, Player(6), EVENT_PLAYER_UNIT_DEATH)
	TriggerRegisterPlayerUnitEventSimple(Aj, Player(7), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Aj, Condition(Xa))
	TriggerAddAction(Aj, Ya)
	aj = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(aj, Player(12), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(aj, Condition(dB))
	TriggerAddAction(aj, eB)
	-- 遗忘武功
	Bj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Bj, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(Bj, Condition(YiWangJiNeng))
	TriggerAddAction(Bj, ForgetAbility)
	-- 为合成的物品补属性
	t = CreateTrigger()
	YDWESyStemItemCombineRegistTrigger(t)
	TriggerAddAction(t, WuPinHeCheng)
	-- 选择遗忘的武功
	bj = CreateTrigger()
	TriggerRegisterDialogEvent(bj, K7[1])
	TriggerRegisterDialogEvent(bj, K7[2])
	TriggerRegisterDialogEvent(bj, K7[3])
	TriggerRegisterDialogEvent(bj, K7[4])
	TriggerRegisterDialogEvent(bj, K7[5])
	TriggerAddAction(bj, jB)
	-- 传送至桃花岛
	Cj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Cj, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(Cj, Condition(mB))
	TriggerAddAction(Cj, nB)
	-- 学习武功
	cj = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(cj, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(cj, Condition(IsWuGongBook))
	TriggerAddAction(cj, BookLearnWuGong)
	-- 初始化内功加成
	fk = CreateTrigger()
	TriggerRegisterTimerEventSingle(fk, 0.1)
	TriggerAddAction(fk, NeiGongJiaChengS)
	pk = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(pk, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(pk, Condition(uC))
	TriggerAddAction(pk, vC)
	qk = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(qk, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(qk, Condition(xC))
	TriggerAddAction(qk, yC)
	rk = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(rk, 1.0)
	TriggerAddAction(rk, BC)
	sk = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(sk, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(sk, Condition(CC))
	TriggerAddAction(sk, cC)
	tk = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(tk, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(tk, Condition(EC))
	TriggerAddAction(tk, FC)
	uk = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(uk, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(uk, Condition(HC))
	TriggerAddAction(uk, IC)
	vk = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(vk, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(vk, Condition(JC))
	TriggerAddAction(vk, KC)
	wk = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(wk, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(wk, Condition(MC))
	TriggerAddAction(wk, NC)
	xk = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(xk, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(xk, Condition(PC))
	TriggerAddAction(xk, QC)
	yk = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(yk, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(yk, Condition(SC))
	TriggerAddAction(yk, TC)
	zk = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(zk, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(zk, Condition(VC))
	TriggerAddAction(zk, WC)
	Ak = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Ak, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(Ak, Condition(YC))
	TriggerAddAction(Ak, ZC)
	ak = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(ak, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(ak, Condition(ec))
	TriggerAddAction(ak, gc)
	ak = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(ak, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(ak, Condition(isJiuYangCanJuan))
	TriggerAddAction(ak, jiuYangCanJuan)
	ak = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(ak, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(ak, Condition(IsWuHunShi))
	TriggerAddAction(ak, WuHunShi)
	Bk = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(Bk)
	TriggerAddCondition(Bk, Condition(IsUnitBoss))
	TriggerAddAction(Bk, BossFangJiNeng)
	-- 预约名门和取消预约
	Gs = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Gs, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Gs, Condition(qT))
	TriggerAddAction(Gs, rT)
	-- 攻破城门
	Ks = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Ks, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Ks, Condition(cT))
	TriggerAddAction(Ks, DT)
	-- 爆炸
	Ht = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Ht, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Ht, Condition(FT))
	TriggerAddAction(Ht, IT)
	-- 流星
	It = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(It, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(It, Condition(JT))
	TriggerAddAction(It, KT)
	-- 冰缓
	Jt = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Jt, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(Jt, Condition(MT))
	TriggerAddAction(Jt, NT)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsYiZhan))
	TriggerAddAction(t, YiZhanChuanSong)
	--抽血术
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(ChouXie_Condition))
	TriggerAddAction(t, ChouXie_Action)
	-- 初始化伴侣属性
	uq = CreateTrigger()
	TriggerRegisterTimerEventSingle(uq, 0.2)
	TriggerAddAction(uq, LO)
	-- 结成伴侣
	vq = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(vq, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(vq, Condition(NO))
	TriggerAddAction(vq, OO)
	-- 整理物品
	xq = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(xq, 400.0)
	TriggerAddAction(xq, TO)

	-- 吃经验符
	kr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(kr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(kr, Condition(oQ))
	TriggerAddAction(kr, pQ)
	-- 购买等级
	mr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(mr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(mr, Condition(rQ))
	TriggerAddAction(mr, sQ)
	-- 新手大礼包
	nr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(nr, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(nr, Condition(uQ))
	TriggerAddAction(nr, vQ)
	-- 装备打孔
	pr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(pr, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(pr, Condition(xQ))
	TriggerAddAction(pr, yQ)
	-- 加入副职
	qr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(qr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(qr, Condition(AQ))
	TriggerAddAction(qr, aQ)
	-- 传送到钟南山
	tr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(tr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(tr, Condition(GQ))
	TriggerAddAction(tr, HQ)
	-- 传送到少林寺后山（25级）
	ur = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(ur, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(ur, Condition(lQ))
	TriggerAddAction(ur, JQ)
	-- 传送到塞外
	vr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(vr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(vr, Condition(LQ))
	TriggerAddAction(vr, MQ)
	-- 传送到光明顶
	wr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(wr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(wr, Condition(OQ))
	TriggerAddAction(wr, PQ)
	-- 传送到少林寺后山（70级）
	xr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(xr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(xr, Condition(RQ))
	TriggerAddAction(xr, SQ)
	-- 传送到边疆
	yr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(yr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(yr, Condition(UQ))
	TriggerAddAction(yr, VQ)
	-- 学习门派内功
	br = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(br, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(br, Condition(pR))
	TriggerAddAction(br, qR)
	-- 学习慕容派内功
	br = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(br, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(br, Condition(IsMuRongNeiGong))
	TriggerAddAction(br, MuRongNeiGong)

	-- 初始化古董价格区间
	rs = CreateTrigger()
	TriggerRegisterTimerEventSingle(rs, 0.5)
	TriggerAddAction(rs, s5)
	-- 古董价格变动
	ss = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(ss, 200.0)
	TriggerAddAction(ss, u5)
	-- 查询古董价格
	ts = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(ts, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(ts, Condition(w5))
	TriggerAddAction(ts, x5)
	-- 卖古董
	us = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(us, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(us, Condition(z5))
	TriggerAddAction(us, A5)
	vs = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(vs, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(vs, Condition(B5))
	TriggerAddAction(vs, b5)
	-- 收集古董
	vs = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(vs, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(vs, Condition(CollectGuDong_Conditions))
	TriggerAddAction(vs, CollectGuDong_Actions)
	-- 合成物品
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(HeCheng_Conditions))
	TriggerAddAction(t, HeCheng_Actions)


	-- 买黄纸
	cs = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(cs, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(cs, Condition(MaiHuangZhi_Conditions))
	TriggerAddAction(cs, MaiHuangZhi)
	-- 烧黄纸
	Ds = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Ds, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(Ds, Condition(IsHuangZhi))
	TriggerAddAction(Ds, ShaoHuangZhi)
	-- 跳到结拜兄弟/夫妻处
	Es = CreateTrigger()
	TriggerRegisterPlayerChatEvent(Es, Player(0), "~", true)
	TriggerRegisterPlayerChatEvent(Es, Player(1), "~", true)
	TriggerRegisterPlayerChatEvent(Es, Player(2), "~", true)
	TriggerRegisterPlayerChatEvent(Es, Player(3), "~", true)
	TriggerRegisterPlayerChatEvent(Es, Player(4), "~", true)
	TriggerRegisterPlayerChatEvent(Es, Player(5), "~", true)
	TriggerAddCondition(Es, Condition(kT))
	TriggerAddAction(Es, mT)
	t = CreateTrigger()
	TriggerRegisterDialogEvent(t, udg_index)
	TriggerAddAction(t, ChooseMoShi_Action)
	t = CreateTrigger()
	TriggerRegisterDialogEvent(t, wuhun)
	TriggerAddAction(t, JiHuoCanZhang)
	t = CreateTrigger()
	TriggerRegisterDialogEvent(t, udg_nan)
	TriggerAddAction(t, ChooseNanDu_Action)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsJiDiBaoHu))
	TriggerAddAction(t, JiDiBaoHu)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(Trig_YunDaXianShenConditions))
	TriggerAddAction(t, Trig_YunDaXianShenActions)

	t = CreateTrigger()
	TriggerRegisterUnitEvent(t, udg_ZhengPaiWL, EVENT_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(JiDiAiDa_Conditions))
	TriggerAddAction(t, JiDiAiDa_Actions)
	t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 1000.0)
	TriggerAddAction(t, MoJiaoJiuRen)
	t = nil
end
-----------------------------------
-- 武器和装备相关
-----------------------------------
--鸟拿东西显示附加属性
function Zy()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil == false and GetItemUserData(GetManipulatedItem()) > 0 -- INLINED!!
end
function dz()
	local it = GetManipulatedItem()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local ii1 = ModuloInteger(GetItemUserData(it) // 100000000, 10)
	local ii2 = ModuloInteger(GetItemUserData(it) // 10000000, 10)
	local ii3 = ModuloInteger(GetItemUserData(it) // 1000000, 10)
	local ii4 = ModuloInteger(GetItemUserData(it) // 100000, 10)
	local ii5 = ModuloInteger(GetItemUserData(it) // 10000, 10)
	local ii6 = ModuloInteger(GetItemUserData(it) // 1000, 10)
	local ii7 = ModuloInteger(GetItemUserData(it) // 100, 10)
	local ii8 = ModuloInteger(GetItemUserData(it) // 10, 10)
	local ii9 = ModuloInteger(GetItemUserData(it) // 1, 10)
	local j = 0
	local l__l = 0
	local m = 0
	local n = 0
	local o = 0
	DisplayTimedTextToPlayer(p, 0, 0, 15.0, (GetItemName(it) or "") .. "|cff66cc33附加属性：|r")
	if ii2 == 1 then
		j = j + ii3 * 300
	elseif ii2 == 2 then
		l__l = l__l + ii3 * 40
	elseif ii2 == 3 then
		m = m + ii3 * 40
	elseif ii2 == 4 then
		n = n + ii3 * 25
	elseif ii2 == 5 then
		o = o + ii3 * 25
	end
	if ii4 == 1 then
		j = j + ii5 * 300
	elseif ii4 == 2 then
		l__l = l__l + ii5 * 40
	elseif ii4 == 3 then
		m = m + ii5 * 40
	elseif ii4 == 4 then
		n = n + ii5 * 25
	elseif ii4 == 5 then
		o = o + ii5 * 25
	end
	if j > 0 then
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff攻击+" .. (I2S(j) or ""))
	end
	if l__l > 0 then
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff防御+" .. (I2S(l__l) or ""))
	end
	if m > 0 then
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff招式伤害+" .. (I2S(m) or ""))
	end
	if n > 0 then
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff内力+" .. (I2S(n) or ""))
	end
	if o > 0 then
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff真实伤害+" .. (I2S(o) or ""))
	end
	DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff装备剩余凹槽：" .. (I2S(ii6) or ""))
	DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff镶嵌效果：")
	if ii7 == 1 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+3")
		end
	elseif ii7 == 2 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+3")
		end
	elseif ii7 == 3 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+3")
		end
	elseif ii7 == 4 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+3")
		end
	elseif ii7 == 5 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+3")
		end
	elseif ii7 == 6 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+3")
		end
	end
	if ii8 == 1 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+3")
		end
	elseif ii8 == 2 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+3")
		end
	elseif ii8 == 3 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+3")
		end
	elseif ii8 == 4 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+3")
		end
	elseif ii8 == 5 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+3")
		end
	elseif ii8 == 6 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+3")
		end
	end
	if ii9 == 1 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+3")
		end
	elseif ii9 == 2 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+3")
		end
	elseif ii9 == 3 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+3")
		end
	elseif ii9 == 4 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+3")
		end
	elseif ii9 == 5 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+3")
		end
	elseif ii9 == 6 then
		if udg_dzdsbool[i] == false then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+1")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+3")
		end
	end
	if ii1 == 1 then
		DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得青龙套件")
	elseif ii1 == 2 then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFF33ffff获得朱雀套件")
	elseif ii1 == 3 then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFF33ffff获得玄武套件")
	elseif ii1 == 4 then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFF33ffff获得白虎套件")
	end
	u = nil
	p = nil
	it = nil
end
--英雄拿上东西显示附加属性
function fz()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function gz()
	local it = GetManipulatedItem()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local ii1 = ModuloInteger(GetItemUserData(it) // 100000000, 10)
	local ii2 = ModuloInteger(GetItemUserData(it) // 10000000, 10)
	local ii3 = ModuloInteger(GetItemUserData(it) // 1000000, 10)
	local ii4 = ModuloInteger(GetItemUserData(it) // 100000, 10)
	local ii5 = ModuloInteger(GetItemUserData(it) // 10000, 10)
	local ii6 = ModuloInteger(GetItemUserData(it) // 1000, 10)
	local ii7 = ModuloInteger(GetItemUserData(it) // 100, 10)
	local ii8 = ModuloInteger(GetItemUserData(it) // 10, 10)
	local ii9 = ModuloInteger(GetItemUserData(it) // 1, 10)
	local j = 0
	local l__l = 0
	local m = 0
	local n = 0
	local o = 0
	local q = 0
	if GetItemUserData(it) > 0 then
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, (GetItemName(it) or "") .. "|cff66cc33获得附加属性：|r")
		if ii2 == 1 then
			j = j + ii3 * 300
		elseif ii2 == 2 then
			l__l = l__l + ii3 * 40
		elseif ii2 == 3 then
			m = m + ii3 * 40
		elseif ii2 == 4 then
			n = n + ii3 * 25
		elseif ii2 == 5 then
			o = o + ii3 * 25
		end
		if ii4 == 1 then
			j = j + ii5 * 300
		elseif ii4 == 2 then
			l__l = l__l + ii5 * 40
		elseif ii4 == 3 then
			m = m + ii5 * 40
		elseif ii4 == 4 then
			n = n + ii5 * 25
		elseif ii4 == 5 then
			o = o + ii5 * 25
		end
		if j > 0 then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff攻击+" .. (I2S(j) or ""))
			YDWEGeneralBounsSystemUnitSetBonus(u, 3, 0, j)
		end
		if l__l > 0 then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff防御+" .. (I2S(l__l) or ""))
			YDWEGeneralBounsSystemUnitSetBonus(u, 2, 0, l__l)
		end
		if m > 0 then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff招式伤害+" .. (I2S(m) or ""))
			ModifyHeroStat(0, u, 0, m)
		end
		if n > 0 then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff内力+" .. (I2S(n) or ""))
			ModifyHeroStat(1, u, 0, n)
		end
		if o > 0 then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff真实伤害+" .. (I2S(o) or ""))
			ModifyHeroStat(2, u, 0, o)
		end
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff装备剩余凹槽：" .. (I2S(ii6) or ""))
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff镶嵌效果：")
		if ii7 == 1 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+1")
				gengu[i] = gengu[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+3")
				gengu[i] = gengu[i] + 3
			end
		elseif ii7 == 2 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+1")
				wuxing[i] = wuxing[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+3")
				wuxing[i] = wuxing[i] + 3
			end
		elseif ii7 == 3 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+1")
				jingmai[i] = jingmai[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+3")
				jingmai[i] = jingmai[i] + 3
			end
		elseif ii7 == 4 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+1")
				fuyuan[i] = fuyuan[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+3")
				fuyuan[i] = fuyuan[i] + 3
			end
		elseif ii7 == 5 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+1")
				danpo[i] = danpo[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+3")
				danpo[i] = danpo[i] + 3
			end
		elseif ii7 == 6 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+1")
				yishu[i] = yishu[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+3")
				yishu[i] = yishu[i] + 3
			end
		end
		if ii8 == 1 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+1")
				gengu[i] = gengu[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+3")
				gengu[i] = gengu[i] + 3
			end
		elseif ii8 == 2 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+1")
				wuxing[i] = wuxing[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+3")
				wuxing[i] = wuxing[i] + 3
			end
		elseif ii8 == 3 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+1")
				jingmai[i] = jingmai[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+3")
				jingmai[i] = jingmai[i] + 3
			end
		elseif ii8 == 4 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+1")
				fuyuan[i] = fuyuan[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+3")
				fuyuan[i] = fuyuan[i] + 3
			end
		elseif ii8 == 5 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+1")
				danpo[i] = danpo[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+3")
				danpo[i] = danpo[i] + 3
			end
		elseif ii8 == 6 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+1")
				yishu[i] = yishu[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+3")
				yishu[i] = yishu[i] + 3
			end
		end
		if ii9 == 1 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+1")
				gengu[i] = gengu[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+3")
				gengu[i] = gengu[i] + 3
			end
		elseif ii9 == 2 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+1")
				wuxing[i] = wuxing[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+3")
				wuxing[i] = wuxing[i] + 3
			end
		elseif ii9 == 3 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+1")
				jingmai[i] = jingmai[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+3")
				jingmai[i] = jingmai[i] + 3
			end
		elseif ii9 == 4 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+1")
				fuyuan[i] = fuyuan[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+3")
				fuyuan[i] = fuyuan[i] + 3
			end
		elseif ii9 == 5 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+1")
				danpo[i] = danpo[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+3")
				danpo[i] = danpo[i] + 3
			end
		elseif ii9 == 6 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+1")
				yishu[i] = yishu[i] + 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+3")
				yishu[i] = yishu[i] + 3
			end
		end
		if ii1 == 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得青龙套件")
		elseif ii1 == 2 then
			DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得朱雀套件")
		elseif ii1 == 3 then
			DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得玄武套件")
		elseif ii1 == 4 then
			DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得白虎套件")
		end
		k7 = 1
		for _ in _loop_() do
			if k7 > 6 then break end
			if GetItemUserData(UnitItemInSlotBJ(u, k7)) // 100000000 == ii1 and UnitItemInSlotBJ(u, k7) ~= GetManipulatedItem() then
				q = q + 1
			end
			k7 = k7 + 1
		end
		if q == 2 then
			if ii1 == 1 then
				ModifyHeroStat(0, u, 0, 200)
				juexuelingwu[i] = juexuelingwu[i] + 1
				udg_baojilv[i] = udg_baojilv[i] + 0.04
				UnitAddAbility(u, 1093677106)
				YDWEGeneralBounsSystemUnitSetBonus(u, 3, 0, 1000)
				gengu[i] = gengu[i] + 2
				wuxing[i] = wuxing[i] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFF6600集齐青龙套装：")
				DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff――――――――――")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF招式伤害+200")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF绝学领悟力+1")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF暴击率+4%")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF攻击速度+50%")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF攻击+1000")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF根骨+2")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF悟性+1")
			elseif ii1 == 2 then
				ModifyHeroStat(1, u, 0, 150)
				juexuelingwu[i] = juexuelingwu[i] + 1
				udg_baojishanghai[i] = udg_baojishanghai[i] + 0.5
				shaguaihufui[i] = shaguaihufui[i] + 1000.0
				UnitAddAbility(u, 1093677107)
				yishu[i] = yishu[i] + 1
				jingmai[i] = jingmai[i] + 2
				DisplayTextToPlayer(p, 0, 0, "|cFFFF6600集齐朱雀套装：")
				DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff――――――――――")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF内力+150")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF绝学领悟力+1")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF暴击伤害+50%")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF杀怪回复+1000")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF法术回复+10")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF医术+1")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF经脉+2")
			elseif ii1 == 3 then
				ModifyHeroStat(0, u, 0, 150)
				juexuelingwu[i] = juexuelingwu[i] + 1
				UnitAddAbility(u, 1093677108)
				UnitAddAbility(u, 1093677109)
				YDWEGeneralBounsSystemUnitSetBonus(u, 2, 0, 200)
				wuxing[i] = wuxing[i] + 2
				danpo[i] = danpo[i] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFF6600集齐玄武套装：")
				DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff――――――――――")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF招式伤害+150")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF绝学领悟力+1")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF气血+30000")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF气血回复+600")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF防御+200")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF悟性+2")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF胆魄+1")
			elseif ii1 == 4 then
				ModifyHeroStat(1, u, 0, 200)
				ModifyHeroStat(2, u, 0, 100)
				UnitAddAbility(u, 1093677110)
				juexuelingwu[i] = juexuelingwu[i] + 2
				fuyuan[i] = fuyuan[i] + 2
				danpo[i] = danpo[i] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFF6600集齐白虎套装：")
				DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff――――――――――")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF内力+200")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF绝学领悟力+2")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF真实伤害+100")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF移动速度最大化")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF福缘+2")
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF胆魄+1")
			end
		else
			if ii1 == 1 then
				DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得青龙套件，（已收集到" .. (I2S(q + 1) or "") .. "件）")
			elseif ii1 == 2 then
				DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得朱雀套件，（已收集到" .. (I2S(q + 1) or "") .. "件）")
			elseif ii1 == 3 then
				DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得玄武套件，（已收集到" .. (I2S(q + 1) or "") .. "件）")
			elseif ii1 == 4 then
				DisplayTextToPlayer(p, 0, 0, "|cFF33ffff获得白虎套件，（已收集到" .. (I2S(q + 1) or "") .. "件）")
			end
		end
	end
	u = nil
	p = nil
	it = nil
end
function iz()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function jz()
	local it = GetManipulatedItem()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local ii1 = ModuloInteger(GetItemUserData(it) // 100000000, 10)
	local ii2 = ModuloInteger(GetItemUserData(it) // 10000000, 10)
	local ii3 = ModuloInteger(GetItemUserData(it) // 1000000, 10)
	local ii4 = ModuloInteger(GetItemUserData(it) // 100000, 10)
	local ii5 = ModuloInteger(GetItemUserData(it) // 10000, 10)
	local ii6 = ModuloInteger(GetItemUserData(it) // 1000, 10)
	local ii7 = ModuloInteger(GetItemUserData(it) // 100, 10)
	local ii8 = ModuloInteger(GetItemUserData(it) // 10, 10)
	local ii9 = ModuloInteger(GetItemUserData(it) // 1, 10)
	local i = 1 + GetPlayerId(p)
	local j = 0
	local l__l = 0
	local m = 0
	local n = 0
	local o = 0
	local q = 0
	if GetItemUserData(it) > 0 then
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, (GetItemName(it) or "") .. "|cff66cc33失去附加属性：|r")
		if ii2 == 1 then
			j = j + ii3 * 300
		elseif ii2 == 2 then
			l__l = l__l + ii3 * 40
		elseif ii2 == 3 then
			m = m + ii3 * 40
		elseif ii2 == 4 then
			n = n + ii3 * 25
		elseif ii2 == 5 then
			o = o + ii3 * 25
		end
		if ii4 == 1 then
			j = j + ii5 * 300
		elseif ii4 == 2 then
			l__l = l__l + ii5 * 40
		elseif ii4 == 3 then
			m = m + ii5 * 40
		elseif ii4 == 4 then
			n = n + ii5 * 25
		elseif ii4 == 5 then
			o = o + ii5 * 25
		end
		if j > 0 then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff攻击+" .. (I2S(j) or ""))
			YDWEGeneralBounsSystemUnitSetBonus(u, 3, 1, j)
		end
		if l__l > 0 then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff防御+" .. (I2S(l__l) or ""))
			YDWEGeneralBounsSystemUnitSetBonus(u, 2, 1, l__l)
		end
		if m > 0 then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff招式伤害+" .. (I2S(m) or ""))
			ModifyHeroStat(0, u, 1, m)
		end
		if n > 0 then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff内力+" .. (I2S(n) or ""))
			ModifyHeroStat(1, u, 1, n)
		end
		if o > 0 then
			DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff真实伤害+" .. (I2S(o) or ""))
			ModifyHeroStat(2, u, 1, o)
		end
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff装备剩余凹槽：" .. (I2S(ii6) or ""))
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff镶嵌效果：")
		if ii7 == 1 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+1")
				gengu[i] = gengu[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+3")
				gengu[i] = gengu[i] - 3
			end
		elseif ii7 == 2 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+1")
				wuxing[i] = wuxing[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+3")
				wuxing[i] = wuxing[i] - 3
			end
		elseif ii7 == 3 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+1")
				jingmai[i] = jingmai[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+3")
				jingmai[i] = jingmai[i] - 3
			end
		elseif ii7 == 4 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+1")
				fuyuan[i] = fuyuan[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+3")
				fuyuan[i] = fuyuan[i] - 3
			end
		elseif ii7 == 5 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+1")
				danpo[i] = danpo[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+3")
				danpo[i] = danpo[i] - 3
			end
		elseif ii7 == 6 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+1")
				yishu[i] = yishu[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+3")
				yishu[i] = yishu[i] - 3
			end
		end
		if ii8 == 1 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+1")
				gengu[i] = gengu[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+3")
				gengu[i] = gengu[i] - 3
			end
		elseif ii8 == 2 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+1")
				wuxing[i] = wuxing[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+3")
				wuxing[i] = wuxing[i] - 3
			end
		elseif ii8 == 3 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+1")
				jingmai[i] = jingmai[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+3")
				jingmai[i] = jingmai[i] - 3
			end
		elseif ii8 == 4 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+1")
				fuyuan[i] = fuyuan[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+3")
				fuyuan[i] = fuyuan[i] - 3
			end
		elseif ii8 == 5 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+1")
				danpo[i] = danpo[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+3")
				danpo[i] = danpo[i] - 3
			end
		elseif ii8 == 6 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+1")
				yishu[i] = yishu[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+3")
				yishu[i] = yishu[i] - 3
			end
		end
		if ii9 == 1 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+1")
				gengu[i] = gengu[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff根骨+3")
				gengu[i] = gengu[i] - 3
			end
		elseif ii9 == 2 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+1")
				wuxing[i] = wuxing[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff悟性+3")
				wuxing[i] = wuxing[i] - 3
			end
		elseif ii9 == 3 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+1")
				jingmai[i] = jingmai[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff经脉+3")
				jingmai[i] = jingmai[i] - 3
			end
		elseif ii9 == 4 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+1")
				fuyuan[i] = fuyuan[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff福缘+3")
				fuyuan[i] = fuyuan[i] - 3
			end
		elseif ii9 == 5 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+1")
				danpo[i] = danpo[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff胆魄+3")
				danpo[i] = danpo[i] - 3
			end
		elseif ii9 == 6 then
			if udg_dzdsbool[i] == false then
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+1")
				yishu[i] = yishu[i] - 1
			else
				DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|cFFff66ff医术+3")
				yishu[i] = yishu[i] - 3
			end
		end
		k7 = 1
		for _ in _loop_() do
			if k7 > 6 then break end
			if GetItemUserData(UnitItemInSlotBJ(u, k7)) // 100000000 == ii1 and UnitItemInSlotBJ(u, k7) ~= GetManipulatedItem() then
				q = q + 1
			end
			k7 = k7 + 1
		end
		if q == 2 then
			if ii1 == 1 then
				ModifyHeroStat(0, u, 1, 200)
				juexuelingwu[i] = juexuelingwu[i] - 1
				udg_baojilv[i] = udg_baojilv[i] - 0.04
				UnitRemoveAbility(u, 1093677106)
				YDWEGeneralBounsSystemUnitSetBonus(u, 3, 1, 1000)
				gengu[i] = gengu[i] - 2
				wuxing[i] = wuxing[i] - 1
				DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFFFF0000失去青龙套装")
			elseif ii1 == 2 then
				ModifyHeroStat(1, u, 1, 150)
				juexuelingwu[i] = juexuelingwu[i] - 1
				udg_baojishanghai[i] = udg_baojishanghai[i] - 0.5
				shaguaihufui[i] = shaguaihufui[i] - 1000.0
				UnitRemoveAbility(u, 1093677107)
				yishu[i] = yishu[i] - 1
				jingmai[i] = jingmai[i] - 2
				DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFFFF0000失去朱雀套装")
			elseif ii1 == 3 then
				ModifyHeroStat(0, u, 1, 150)
				juexuelingwu[i] = juexuelingwu[i] - 1
				UnitRemoveAbility(u, 1093677108)
				UnitRemoveAbility(u, 1093677109)
				YDWEGeneralBounsSystemUnitSetBonus(u, 2, 1, 200)
				wuxing[i] = wuxing[i] - 2
				danpo[i] = danpo[i] - 1
				DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFFFF0000失去玄武套装")
			elseif ii1 == 4 then
				ModifyHeroStat(1, u, 1, 200)
				ModifyHeroStat(2, u, 1, 100)
				UnitRemoveAbility(u, 1093677110)
				juexuelingwu[i] = juexuelingwu[i] - 2
				fuyuan[i] = fuyuan[i] - 2
				danpo[i] = danpo[i] - 1
				DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cFFFF0000失去白虎套装")
			end
		end
	end
	u = nil
	p = nil
	it = nil
end
--穿上装备
function mz()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and (GetItemType(GetManipulatedItem()) == ITEM_TYPE_ARTIFACT or GetItemType(GetManipulatedItem()) == ITEM_TYPE_PURCHASABLE or GetItemType(GetManipulatedItem()) == ITEM_TYPE_CHARGED) -- INLINED!!
end
function nz()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	local id = GetItemTypeId(GetManipulatedItem())
	local j = 1
	for _ in _loop_() do
		if j >= 30 then break end
		if id == s__ShopWeapon_id[shopweapon[j]] then --在smelt_weapon里
			sc__ShopWeapon_PickUpWeapon(shopweapon[j], GetTriggerUnit(), GetManipulatedItem())
			if true then break end
		end
		j = j + 1
	end
	YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 3, 0, R2I(LoadReal(YDHT, id, StringHash("攻击力"))))
	YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 2, 0, R2I(LoadReal(YDHT, id, StringHash("防御"))))
	YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 1, 0, R2I(LoadReal(YDHT, id, StringHash("法力上限"))))
	ModifyHeroStat(0, GetTriggerUnit(), 0, R2I(LoadReal(YDHT, id, StringHash("招式伤害"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("招式伤害"))))
	ModifyHeroStat(1, GetTriggerUnit(), 0, R2I(LoadReal(YDHT, id, StringHash("内力"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("内力"))))
	ModifyHeroStat(2, GetTriggerUnit(), 0, R2I(LoadReal(YDHT, id, StringHash("真实伤害"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("真实伤害"))))
	udg_baojishanghai[i] = udg_baojishanghai[i] + LoadReal(YDHT, id, StringHash("暴击伤害")) + LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("暴击伤害"))
	udg_baojilv[i] = udg_baojilv[i] + LoadReal(YDHT, id, StringHash("暴击率")) + LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("暴击率"))
	juexuelingwu[i] = juexuelingwu[i] + R2I(LoadReal(YDHT, id, StringHash("绝学领悟"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("绝学领悟")))
	gengu[i] = gengu[i] + R2I(LoadReal(YDHT, id, StringHash("根骨"))) + R2I(LoadReal(YDHT, id, StringHash("全属性"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("根骨")))
	danpo[i] = danpo[i] + R2I(LoadReal(YDHT, id, StringHash("胆魄"))) + R2I(LoadReal(YDHT, id, StringHash("全属性"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("胆魄")))
	wuxing[i] = wuxing[i] + R2I(LoadReal(YDHT, id, StringHash("悟性"))) + R2I(LoadReal(YDHT, id, StringHash("全属性"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("悟性")))
	yishu[i] = yishu[i] + R2I(LoadReal(YDHT, id, StringHash("医术"))) + R2I(LoadReal(YDHT, id, StringHash("全属性"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("医术")))
	jingmai[i] = jingmai[i] + R2I(LoadReal(YDHT, id, StringHash("经脉"))) + R2I(LoadReal(YDHT, id, StringHash("全属性"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("经脉")))
	fuyuan[i] = fuyuan[i] + R2I(LoadReal(YDHT, id, StringHash("福缘"))) + R2I(LoadReal(YDHT, id, StringHash("全属性"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("福缘")))
	shanghaihuifu[i] = shanghaihuifu[i] + LoadReal(YDHT, id, StringHash("伤害回复")) + LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("伤害回复"))
	shaguaihufui[i] = shaguaihufui[i] + LoadReal(YDHT, id, StringHash("杀怪回复")) + LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("杀怪回复"))
	shengminghuifu[i] = shengminghuifu[i] + LoadReal(YDHT, id, StringHash("生命回复")) + LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("生命回复"))
	falihuifu[i] = falihuifu[i] + LoadReal(YDHT, id, StringHash("法力回复")) + LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("法力回复"))
end
--脱下装备
function pz()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and (GetItemType(GetManipulatedItem()) == ITEM_TYPE_ARTIFACT or GetItemType(GetManipulatedItem()) == ITEM_TYPE_PURCHASABLE or GetItemType(GetManipulatedItem()) == ITEM_TYPE_CHARGED) -- INLINED!!
end
function qz()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	local id = GetItemTypeId(GetManipulatedItem())
	YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 3, 1, R2I(LoadReal(YDHT, id, StringHash("攻击力"))))
	YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 2, 1, R2I(LoadReal(YDHT, id, StringHash("防御"))))
	YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 1, 1, R2I(LoadReal(YDHT, id, StringHash("法力上限"))))
	ModifyHeroStat(0, GetTriggerUnit(), 1, R2I(LoadReal(YDHT, id, StringHash("招式伤害"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("招式伤害"))))
	ModifyHeroStat(1, GetTriggerUnit(), 1, R2I(LoadReal(YDHT, id, StringHash("内力"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("内力"))))
	ModifyHeroStat(2, GetTriggerUnit(), 1, R2I(LoadReal(YDHT, id, StringHash("真实伤害"))) + R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("真实伤害"))))
	udg_baojishanghai[i] = udg_baojishanghai[i] - LoadReal(YDHT, id, StringHash("暴击伤害")) - LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("暴击伤害"))
	udg_baojilv[i] = udg_baojilv[i] - LoadReal(YDHT, id, StringHash("暴击率")) - LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("暴击率"))
	juexuelingwu[i] = juexuelingwu[i] - R2I(LoadReal(YDHT, id, StringHash("绝学领悟"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("绝学领悟")))
	gengu[i] = gengu[i] - R2I(LoadReal(YDHT, id, StringHash("根骨"))) - R2I(LoadReal(YDHT, id, StringHash("全属性"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("根骨")))
	danpo[i] = danpo[i] - R2I(LoadReal(YDHT, id, StringHash("胆魄"))) - R2I(LoadReal(YDHT, id, StringHash("全属性"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("胆魄")))
	wuxing[i] = wuxing[i] - R2I(LoadReal(YDHT, id, StringHash("悟性"))) - R2I(LoadReal(YDHT, id, StringHash("全属性"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("悟性")))
	yishu[i] = yishu[i] - R2I(LoadReal(YDHT, id, StringHash("医术"))) - R2I(LoadReal(YDHT, id, StringHash("全属性"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("医术")))
	jingmai[i] = jingmai[i] - R2I(LoadReal(YDHT, id, StringHash("经脉"))) - R2I(LoadReal(YDHT, id, StringHash("全属性"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("经脉")))
	fuyuan[i] = fuyuan[i] - R2I(LoadReal(YDHT, id, StringHash("福缘"))) - R2I(LoadReal(YDHT, id, StringHash("全属性"))) - R2I(LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("福缘")))
	shanghaihuifu[i] = shanghaihuifu[i] - LoadReal(YDHT, id, StringHash("伤害回复")) - LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("伤害回复"))
	shaguaihufui[i] = shaguaihufui[i] - LoadReal(YDHT, id, StringHash("杀怪回复")) - LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("杀怪回复"))
	shengminghuifu[i] = shengminghuifu[i] - LoadReal(YDHT, id, StringHash("生命回复")) - LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("生命回复"))
	falihuifu[i] = falihuifu[i] - LoadReal(YDHT, id, StringHash("法力回复")) - LoadReal(YDHT, GetHandleId(GetManipulatedItem()), StringHash("法力回复"))
end
--江湖忠
function UnitHaveJueZhanBa()
	return UnitHaveItem(GetAttacker(), 1227896918)
end
function JueZhanBaXiaoGuo()
	local u = GetTriggerUnit()
	if ModuloInteger(GetUnitPointValue(u), 100) == 0 then
		if GetUnitState(u, UNIT_STATE_LIFE) <= 0.1 * GetUnitState(u, UNIT_STATE_MAX_LIFE) then
			SetWidgetLife(u, 1.0)
		else
			SetWidgetLife(u, GetWidgetLife(u) - 0.05 * GetUnitState(u, UNIT_STATE_MAX_LIFE))
		end
	else
		if GetUnitState(u, UNIT_STATE_LIFE) <= 0.01 * GetUnitState(u, UNIT_STATE_MAX_LIFE) then
			SetWidgetLife(u, 1.0)
		else
			SetWidgetLife(u, GetWidgetLife(u) - 0.01 * GetUnitState(u, UNIT_STATE_MAX_LIFE))
		end
	end
	u = nil
end
--决战霸
function UnitHaveJiangHuZhong()
	return UnitHaveItem(GetTriggerUnit(), 1227897136)
end
function JiangHuZhongXiaoGuo()
	local u = GetAttacker()
	if ModuloInteger(GetUnitPointValue(u), 100) == 0 then
		if GetUnitState(u, UNIT_STATE_LIFE) <= 0.1 * GetUnitState(u, UNIT_STATE_MAX_LIFE) then
			SetWidgetLife(u, 1.0)
		else
			SetWidgetLife(u, GetWidgetLife(u) - 0.05 * GetUnitState(u, UNIT_STATE_MAX_LIFE))
		end
	else
		if GetUnitState(u, UNIT_STATE_LIFE) <= 0.01 * GetUnitState(u, UNIT_STATE_MAX_LIFE) then
			SetWidgetLife(u, 1.0)
		else
			SetWidgetLife(u, GetWidgetLife(u) - 0.01 * GetUnitState(u, UNIT_STATE_MAX_LIFE))
		end
	end
	u = nil
end
--穿武器或衣服
function Mz()
	return (GetItemType(GetManipulatedItem()) == ITEM_TYPE_ARTIFACT or GetItemType(GetManipulatedItem()) == ITEM_TYPE_PURCHASABLE) and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function ItemChongFu()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	E8 = 1
	udg_wuqishu[i] = 0
	udg_yifushu[i] = 0
	for _ in _loop_() do
		if E8 > 6 then break end
		if GetItemType(UnitItemInSlotBJ(u, E8)) == ITEM_TYPE_ARTIFACT then
			udg_wuqishu[i] = udg_wuqishu[i] + 1
		end
		if GetItemType(UnitItemInSlotBJ(u, E8)) == ITEM_TYPE_PURCHASABLE then
			udg_yifushu[i] = udg_yifushu[i] + 1
		end
		if GetItemType(UnitItemInSlotBJ(u, E8)) == GetItemType(GetManipulatedItem()) and UnitItemInSlotBJ(u, E8) ~= GetManipulatedItem() and Ce[i] ~= 7 then
			UnitRemoveItemSwapped(UnitItemInSlotBJ(u, E8), u)
			DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000非丫鬟角色最多只能携带一件武器和衣服")
		end
		E8 = E8 + 1
	end
	if Ce[i] == 7 and udg_junzhu[i] == false then
		if GetItemType(GetManipulatedItem()) == ITEM_TYPE_ARTIFACT and udg_wuqishu[i] >= 3 then
			UnitRemoveItemSwapped(GetManipulatedItem(), u)
			DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000丫鬟最多只能携带两件武器")
		end
		if GetItemType(GetManipulatedItem()) == ITEM_TYPE_PURCHASABLE and udg_yifushu[i] >= 3 then
			UnitRemoveItemSwapped(GetManipulatedItem(), u)
			DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000丫鬟最多只能穿两件衣服")
		end
	end
	u = nil
	p = nil
end
---------套装系统开始--------
function Pz()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and (GetItemLevel(GetManipulatedItem()) == 3 or GetItemLevel(GetManipulatedItem()) == 6) -- INLINED!!
end
function Qz()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if F8[i] == false and UnitHaveItem(u, 1227895116) and UnitHaveItem(u, 1227895117) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffFF4d00※精钢套装※|R\n|CFFB2FF00招式伤害+150\n暴击率+4%\n暴击伤害+30%\n杀怪回复+500\n根骨+1\n胆魄+1|R")
		F8[i] = true
		ModifyHeroStat(0, u, 0, 150)
		udg_baojilv[i] = udg_baojilv[i] + 0.04
		udg_baojishanghai[i] = udg_baojishanghai[i] + 0.3
		shaguaihufui[i] = shaguaihufui[i] + 500.0
		gengu[i] = gengu[i] + 1
		danpo[i] = danpo[i] + 1
	end
	if XNKL[i] == false and UnitHaveItem(u, 1227899192) and UnitHaveItem(u, 1227899193) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffFF4d00※新年快乐套装※|R\n|CFFB2FF00全属性+1000\n全性格属性+5|R")
		XNKL[i] = true
		ModifyHeroStat(0, u, 0, 1000)
		ModifyHeroStat(1, u, 0, 1000)
		ModifyHeroStat(2, u, 0, 1000)
		jingmai[i] = jingmai[i] + 5
		fuyuan[i] = fuyuan[i] + 5
		wuxing[i] = wuxing[i] + 5
		yishu[i] = yishu[i] + 5
		gengu[i] = gengu[i] + 5
		danpo[i] = danpo[i] + 5
	end
	if H8[i] == false and UnitHaveItem(u, 1227895118) and UnitHaveItem(u, 1227895119) and UnitHaveItem(u, 1227895120) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffFF4d00※七星套装※|R\n|CFFB2FF00招式伤害+200\n魔法上限+15\n法力恢复+5\n气血+10000\n每秒恢复+130\n医术+1\n悟性+1|R")
		H8[i] = true
		ModifyHeroStat(0, u, 0, 200)
		YDWEGeneralBounsSystemUnitSetBonus(u, 1, 0, 15)
		YDWEGeneralBounsSystemUnitSetBonus(u, 0, 0, 10000)
		UnitAddAbility(u, 1093678424)
		UnitAddAbility(u, 1093678425)
		wuxing[i] = wuxing[i] + 1
		yishu[i] = yishu[i] + 1
	end
	if I8[i] == false and UnitHaveItem(u, 1227895121) and UnitHaveItem(u, 1227895122) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffFF4d00※破军套装※|R\n|CFFB2FF00攻击速度+30%\n气血+10000\n每秒回复+400\n防御+30\n胆魄+1\n福缘+1")
		I8[i] = true
		UnitAddAbility(u, 1093678426)
		UnitAddAbility(u, 1093678640)
		YDWEGeneralBounsSystemUnitSetBonus(u, 0, 0, 10000)
		YDWEGeneralBounsSystemUnitSetBonus(u, 2, 0, 30)
		danpo[i] = danpo[i] + 1
		fuyuan[i] = fuyuan[i] + 1
	end
	if l8[i] == false and UnitHaveItem(u, 1227894872) and UnitHaveItem(u, 1227894873) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffFF4d00※绝恋套装※|R\n|CFFB2FF00招式伤害+150\n真实伤害+100\n绝学领悟力+1\n气血+15000\n每秒回复+300\n伤害回复+300\n全性格属性+1")
		l8[i] = true
		ModifyHeroStat(0, u, 0, 150)
		ModifyHeroStat(2, u, 0, 100)
		juexuelingwu[i] = juexuelingwu[i] + 1
		YDWEGeneralBounsSystemUnitSetBonus(u, 0, 0, 15000)
		UnitAddAbility(u, 1093678641)
		shanghaihuifu[i] = shanghaihuifu[i] + 300.0
		jingmai[i] = jingmai[i] + 1
		fuyuan[i] = fuyuan[i] + 1
		wuxing[i] = wuxing[i] + 1
		yishu[i] = yishu[i] + 1
		gengu[i] = gengu[i] + 1
		danpo[i] = danpo[i] + 1
	end
	if G8[i] == false and UnitHaveItem(u, 1227894874) and UnitHaveItem(u, 1227895088) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffFF4d00※倾城套装※|R\n|CFFB2FF00防御+170\n绝学领悟力+1\n暴击率+4%\n暴击伤害+30%\n杀怪回复+600\n全性格属性+1")
		G8[i] = true
		YDWEGeneralBounsSystemUnitSetBonus(u, 2, 0, 170)
		juexuelingwu[i] = juexuelingwu[i] + 1
		udg_baojilv[i] = udg_baojilv[i] + 0.04
		udg_baojishanghai[i] = udg_baojishanghai[i] + 0.3
		shaguaihufui[i] = shaguaihufui[i] + 600.0
		jingmai[i] = jingmai[i] + 1
		fuyuan[i] = fuyuan[i] + 1
		wuxing[i] = wuxing[i] + 1
		yishu[i] = yishu[i] + 1
		gengu[i] = gengu[i] + 1
		danpo[i] = danpo[i] + 1
	end
	if Ee[i] == false and UnitHaveItem(u, 1227896918) and UnitHaveItem(u, 1227896919) and UnitHaveItem(u, 1227896920) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffFF4d00※江湖套装※|R\n|CFFB2FF00内力+300\n真实伤害+200\n暴击伤害+150%\n法力恢复+10\n暴击率+20%\n绝学领悟力+4\n全性格属性+3\n武功伤害+60%")
		Ee[i] = true
		ModifyHeroStat(1, u, 0, 300)
		ModifyHeroStat(2, u, 0, 200)
		UnitAddAbility(u, 1093681741)
		udg_baojilv[i] = udg_baojilv[i] + 0.2
		udg_baojishanghai[i] = udg_baojishanghai[i] + 1.5
		juexuelingwu[i] = juexuelingwu[i] + 4
		jingmai[i] = jingmai[i] + 3
		fuyuan[i] = fuyuan[i] + 3
		wuxing[i] = wuxing[i] + 3
		yishu[i] = yishu[i] + 3
		gengu[i] = gengu[i] + 3
		danpo[i] = danpo[i] + 3
		udg_shanghaijiacheng[i] = udg_shanghaijiacheng[i] + 0.6
	end
	if De[i] == false and UnitHaveItem(u, 1227897136) and UnitHaveItem(u, 1227896922) and UnitHaveItem(u, 1227896921) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffFF4d00※决战套装※|R\n|CFFB2FF00招式伤害+1000\n伤害回复+600\n气血+100000\n每秒恢复+1000\n防御+1000\n绝学领悟力+4\n全性格属性+3\n伤害吸收+30%")
		De[i] = true
		ModifyHeroStat(0, u, 0, 1000)
		shanghaihuifu[i] = shanghaihuifu[i] + 600.0
		UnitAddAbility(u, 1093681742)
		UnitAddAbility(u, 1093681743)
		YDWEGeneralBounsSystemUnitSetBonus(u, 2, 0, 1000)
		juexuelingwu[i] = juexuelingwu[i] + 4
		jingmai[i] = jingmai[i] + 3
		fuyuan[i] = fuyuan[i] + 3
		wuxing[i] = wuxing[i] + 3
		yishu[i] = yishu[i] + 3
		gengu[i] = gengu[i] + 3
		danpo[i] = danpo[i] + 3
		udg_shanghaixishou[i] = udg_shanghaixishou[i] + 0.3
	end
	u = nil
	p = nil
end
--失去套装
function Sz()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and (GetItemLevel(GetManipulatedItem()) == 3 or GetItemLevel(GetManipulatedItem()) == 6) -- INLINED!!
end
function Tz()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	YDWEPolledWaitNull(0.01)
	if F8[i] and (UnitHaveItem(u, 1227895116) == false or UnitHaveItem(u, 1227895117) == false) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffff00ff失去精钢套装属性|R")
		F8[i] = false
		ModifyHeroStat(0, u, 1, 150)
		udg_baojilv[i] = udg_baojilv[i] - 0.04
		udg_baojishanghai[i] = udg_baojishanghai[i] - 0.3
		shaguaihufui[i] = shaguaihufui[i] - 500.0
		gengu[i] = gengu[i] - 1
		danpo[i] = danpo[i] - 1
	end
	if XNKL[i] and (UnitHaveItem(u, 1227899192) == false or UnitHaveItem(u, 1227899193) == false) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffff00ff失去新年快乐套装属性|R")
		XNKL[i] = false
		ModifyHeroStat(0, u, 1, 1000)
		ModifyHeroStat(1, u, 1, 1000)
		ModifyHeroStat(2, u, 1, 1000)
		jingmai[i] = jingmai[i] - 5
		fuyuan[i] = fuyuan[i] - 5
		wuxing[i] = wuxing[i] - 5
		yishu[i] = yishu[i] - 5
		gengu[i] = gengu[i] - 5
		danpo[i] = danpo[i] - 5
	end
	if H8[i] and (UnitHaveItem(u, 1227895118) == false or UnitHaveItem(u, 1227895119) == false or UnitHaveItem(u, 1227895120) == false) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffff00ff失去七星套装属性|R")
		H8[i] = false
		ModifyHeroStat(0, u, 1, 200)
		YDWEGeneralBounsSystemUnitSetBonus(u, 1, 1, 15)
		YDWEGeneralBounsSystemUnitSetBonus(u, 0, 1, 10000)
		UnitRemoveAbility(u, 1093678424)
		UnitRemoveAbility(u, 1093678425)
		wuxing[i] = wuxing[i] - 1
		yishu[i] = yishu[i] - 1
	end
	if I8[i] and (UnitHaveItem(u, 1227895121) == false or UnitHaveItem(u, 1227895122) == false) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffff00ff失去破军套装属性|R")
		I8[i] = false
		UnitRemoveAbility(u, 1093678426)
		UnitRemoveAbility(u, 1093678640)
		YDWEGeneralBounsSystemUnitSetBonus(u, 0, 1, 10000)
		YDWEGeneralBounsSystemUnitSetBonus(u, 2, 1, 30)
		danpo[i] = danpo[i] - 1
		fuyuan[i] = fuyuan[i] - 1
	end
	if l8[i] and (UnitHaveItem(u, 1227894872) == false or UnitHaveItem(u, 1227894873) == false) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffff00ff失去绝恋套装属性|R")
		l8[i] = false
		ModifyHeroStat(0, u, 1, 150)
		ModifyHeroStat(2, u, 1, 100)
		juexuelingwu[i] = juexuelingwu[i] - 1
		YDWEGeneralBounsSystemUnitSetBonus(u, 0, 1, 15000)
		UnitRemoveAbility(u, 1093678641)
		shanghaihuifu[i] = shanghaihuifu[i] - 300.0
		jingmai[i] = jingmai[i] - 1
		fuyuan[i] = fuyuan[i] - 1
		wuxing[i] = wuxing[i] - 1
		yishu[i] = yishu[i] - 1
		gengu[i] = gengu[i] - 1
		danpo[i] = danpo[i] - 1
	end
	if G8[i] and (UnitHaveItem(u, 1227894874) == false or UnitHaveItem(u, 1227895088) == false) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffff00ff失去倾城套装属性|R")
		G8[i] = false
		YDWEGeneralBounsSystemUnitSetBonus(u, 2, 1, 170)
		juexuelingwu[i] = juexuelingwu[i] - 1
		udg_baojilv[i] = udg_baojilv[i] - 0.04
		udg_baojishanghai[i] = udg_baojishanghai[i] - 0.3
		shaguaihufui[i] = shaguaihufui[i] - 600.0
		jingmai[i] = jingmai[i] - 1
		fuyuan[i] = fuyuan[i] - 1
		wuxing[i] = wuxing[i] - 1
		yishu[i] = yishu[i] - 1
		gengu[i] = gengu[i] - 1
		danpo[i] = danpo[i] - 1
	end
	if Ee[i] and (UnitHaveItem(u, 1227896918) == false or UnitHaveItem(u, 1227896919) == false or UnitHaveItem(u, 1227896920) == false) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffff00ff失去江湖套装属性|R")
		Ee[i] = false
		ModifyHeroStat(1, u, 1, 300)
		ModifyHeroStat(2, u, 1, 200)
		UnitRemoveAbility(u, 1093681741)
		udg_baojilv[i] = udg_baojilv[i] - 0.2
		udg_baojishanghai[i] = udg_baojishanghai[i] - 1.5
		juexuelingwu[i] = juexuelingwu[i] - 4
		jingmai[i] = jingmai[i] - 3
		fuyuan[i] = fuyuan[i] - 3
		wuxing[i] = wuxing[i] - 3
		yishu[i] = yishu[i] - 3
		gengu[i] = gengu[i] - 3
		danpo[i] = danpo[i] - 3
		udg_shanghaijiacheng[i] = udg_shanghaijiacheng[i] - 0.6
	end
	if De[i] and (UnitHaveItem(u, 1227897136) == false or UnitHaveItem(u, 1227896922) == false or UnitHaveItem(u, 1227896921) == false) then
		DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|cffff00ff失去决战套装属性|R")
		De[i] = false
		ModifyHeroStat(0, u, 1, 1000)
		shanghaihuifu[i] = shanghaihuifu[i] - 600.0
		UnitRemoveAbility(u, 1093681742)
		UnitRemoveAbility(u, 1093681743)
		YDWEGeneralBounsSystemUnitSetBonus(u, 2, 1, 1000)
		juexuelingwu[i] = juexuelingwu[i] - 4
		jingmai[i] = jingmai[i] - 3
		fuyuan[i] = fuyuan[i] - 3
		wuxing[i] = wuxing[i] - 3
		yishu[i] = yishu[i] - 3
		gengu[i] = gengu[i] - 3
		danpo[i] = danpo[i] - 3
		udg_shanghaixishou[i] = udg_shanghaixishou[i] - 0.3
	end
	u = nil
	p = nil
end
--镇妖升级
function DoHaveZhenYao(uc, l__ut)
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(uc))]
	if uc == nil or GetUnitTypeId(l__ut) == 1848651824 or GetUnitPointValue(l__ut) == 10 then
		return false
	else
		if UnitHaveItem(u, 1227895379) or UnitHaveItem(u, 1227895373) or UnitHaveItem(u, 1227895377) or UnitHaveItem(u, 1227895378) then
			return true
		end
	end
	return false
end
function Vz()
	return DoHaveZhenYao(GetKillingUnit(), GetTriggerUnit())
end
function ZhenYaoLevelUp(u, id, id2, value)
	local i = 0
	SetWidgetLife(FetchUnitItem(u, id), GetWidgetLife(FetchUnitItem(u, id)) - 1)
	if UnitHaveItem(u, id) then
		if 500000.0 - GetWidgetLife(FetchUnitItem(u, id)) < I2R(value) then
			DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "成长值：" .. (I2S(R2I(500000.0 - GetWidgetLife(FetchUnitItem(u, id)))) or "") .. " / " .. (I2S(value) or ""))
		else
			i = GetItemUserData(FetchUnitItem(u, id))
			RemoveItem(FetchUnitItem(u, id))
			createitemloc(id2, v7[9])
			SetItemUserData(bj_lastCreatedItem, i)
			UnitAddItem(u, bj_lastCreatedItem)
			DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFF33FF00恭喜养武等级获得提升")
		end
	end
end
function Wz()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
	ZhenYaoLevelUp(u, 1227895379, 1227895373, 200)
	ZhenYaoLevelUp(u, 1227895373, 1227895377, 500)
	ZhenYaoLevelUp(u, 1227895377, 1227895378, 800)
	ZhenYaoLevelUp(u, 1227895378, 1227895376, 1200)
end
---------镶嵌宝石系统开始-------//
function IsXiangQian(it, u)
	if GetItemTypeId(it) == 1227896146 or GetItemTypeId(it) == 1227896145 or GetItemTypeId(it) == 1227896141 or GetItemTypeId(it) == 1227896143 or GetItemTypeId(it) == 1227896144 or GetItemTypeId(it) == 1227896142 then
		if Ce[1 + GetPlayerId(GetOwningPlayer(u))] ~= 2 then
			DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00你不是锻造师，不可以镶嵌宝石")
			AdjustPlayerStateBJ(20000, GetOwningPlayer(u), PLAYER_STATE_RESOURCE_GOLD)
			return false
		else
			return true
		end
	end
	return false
end
function kA()
	return IsXiangQian(GetManipulatedItem(), GetTriggerUnit())
end
function XiangQian(u, it, it2, id, i)
	local p = GetOwningPlayer(u)
	local ii1 = ModuloInteger(GetItemUserData(it) // 1000, 10)
	local ii2 = ModuloInteger(GetItemUserData(it) // 100, 10)
	local ii3 = ModuloInteger(GetItemUserData(it) // 10, 10)
	if GetItemTypeId(it2) == id then
		if ii1 == 0 then
			AdjustPlayerStateBJ(20000, p, PLAYER_STATE_RESOURCE_GOLD)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你的第一格物品无法镶嵌宝石")
		else
			SetItemPositionLoc(it, v7[9])
			if ii2 == 0 then
				SetItemUserData(it, GetItemUserData(it) + 100 * i - 1000)
			else
				if ii3 == 0 then
					SetItemUserData(it, GetItemUserData(it) + 10 * i - 1000)
				else
					SetItemUserData(it, GetItemUserData(it) + 1 * i - 1000)
				end
			end
			UnitAddItem(u, it)
		end
	end
	p = nil
end
function mA()
	local u = GetTriggerUnit()
	local it = UnitItemInSlotBJ(u, 1)
	XiangQian(u, it, GetManipulatedItem(), 1227896141, 1)
	XiangQian(u, it, GetManipulatedItem(), 1227896144, 2)
	XiangQian(u, it, GetManipulatedItem(), 1227896143, 3)
	XiangQian(u, it, GetManipulatedItem(), 1227896145, 4)
	XiangQian(u, it, GetManipulatedItem(), 1227896146, 5)
	XiangQian(u, it, GetManipulatedItem(), 1227896142, 6)
	u = nil
	it = nil
end
---------镶嵌宝石系统结束-------//
function Equipment_Trigger()
	local t = CreateTrigger()
	--鸟拿东西显示附加属性
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(Zy))
	TriggerAddAction(t, dz)
	--英雄拿东西显示附加属性
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(fz))
	TriggerAddAction(t, gz)
	--英雄放下东西显示失去附加属性
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DROP_ITEM)
	TriggerAddCondition(t, Condition(iz))
	TriggerAddAction(t, jz)
	--英雄穿上装备
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(mz))
	TriggerAddAction(t, nz)
	--英雄脱下装备
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DROP_ITEM)
	TriggerAddCondition(t, Condition(pz))
	TriggerAddAction(t, qz)
	--只能穿一件衣服或武器的判断
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(Mz))
	TriggerAddAction(t, ItemChongFu)
	--集齐套装
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(Pz))
	TriggerAddAction(t, Qz)
	--失去套装
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DROP_ITEM)
	TriggerAddCondition(t, Condition(Sz))
	TriggerAddAction(t, Tz)
	--镇妖升级
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(Vz))
	TriggerAddAction(t, Wz)
	--镶嵌宝石系统
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(kA))
	TriggerAddAction(t, mA)
	t = nil
end
----------------------------------
--   
--    副  本  系  统
--
----------------------------------
--杀野猪首领
function WI()
	return GetUnitTypeId(GetTriggerUnit()) == 1852924467
end
function XI()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 100) <= udg_baolv[1] then
			createitemloc(1227895345, LoadLocationHandle(YDHT, id * cx, 392811314))
			udg_baolv[1] = udg_baolv[1] * 9 // 10 - 1
		else
			udg_baolv[1] = udg_baolv[1] * 11 // 10 + 1
			if udg_baolv[1] < 0 then
				udg_baolv[1] = 0
			end
			if udg_baolv[1] > 100 then
				udg_baolv[1] = 100
			end
		end
		N7 = N7 + 1
	end
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	if e8[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
		unitadditembyidswapped(1227896391, GetKillingUnit())
		if GetRandomInt(1, 50) <= 25 then
			unitadditembyidswapped(1227895347, GetKillingUnit())
		else
			unitadditembyidswapped(1227895346, GetKillingUnit())
		end
		AddHeroXP(GetKillingUnit(), 150, true)
		PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得经验+150、江湖声望+50、富可敌国令和" .. (GetItemName(bj_lastCreatedItem) or ""))
		shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 50
		e8[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--杀豺狼
function ZI()
	return GetUnitTypeId(GetTriggerUnit()) == 1852272243
end
function dl()
	BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 0, 0, 0, 0, 0, 8, YaoCao[1])
end
--杀江南水怪
function fl()
	return GetUnitTypeId(GetTriggerUnit()) == 1752654196
end
function gl()
	BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 0, 0, 0, 0, 0, 8, YaoCao[2])
end
--FB1
function il()
	return GetUnitTypeId(GetTriggerUnit()) == 1869834349 or GetUnitTypeId(GetTriggerUnit()) == 1851880307 or GetUnitTypeId(GetTriggerUnit()) == 1868853091 or GetUnitTypeId(GetTriggerUnit()) == 1869767017 or GetUnitTypeId(GetTriggerUnit()) == 1869898101 or GetUnitTypeId(GetTriggerUnit()) == 1868852084 or GetUnitTypeId(GetTriggerUnit()) == 1969316719
end
function jl()
	if GetUnitTypeId(GetTriggerUnit()) == 1869834349 or GetUnitTypeId(GetTriggerUnit()) == 1851880307 then
		BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 8, 1227895370, 1227895369, 0, 0, 8, YaoCao[3])
		BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 1, 1227895127, 0, 0, 0, 0, 0)
	elseif GetUnitTypeId(GetTriggerUnit()) == 1868853091 then
		BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 100, 1227895125, 1227895130, 0, 0, 0, 0)
	elseif GetUnitTypeId(GetTriggerUnit()) == 1869767017 then
		BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 100, 1227895123, 1227895129, 1227895128, 0, 0, 0)
	--火功头陀
	elseif GetUnitTypeId(GetTriggerUnit()) == 1869898101 then
		BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 100, 1227895386, 1227895620, 0, 0, 0, 0)
		if GetRandomReal(1, 100) <= 3.0 or GetRandomReal(1, 100) <= 6.0 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 8 then
			createitemloc(1227899701, GetUnitLoc(GetKillingUnit()))
		end
	elseif GetUnitTypeId(GetTriggerUnit()) == 1868852084 then
		BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 100, 1227895381, 1227895623, 1227895383, 0, 0, 0)
	--毒手药王
	elseif GetUnitTypeId(GetTriggerUnit()) == 1969316719 then
		BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 100, 1227895372, 1227895374, 1227895371, 0, 0, 0)
		if GetRandomReal(1, 100) <= 50.0 or Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 8 then
			createitemloc(1227899714, GetUnitLoc(GetKillingUnit()))
		end
	end
end
--FB2
function al()
	return GetUnitTypeId(GetTriggerUnit()) == 1701212014 or GetUnitTypeId(GetTriggerUnit()) == 1852798818
end
function Bl()
	BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 8, 1227895113, 1227895365, 1227895368, 0, 0, 0)
--call BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit() , 1, 'I01J', 0, 0, 0, 0, 0)
end
--杀唐文亮
function cl()
	return GetUnitTypeId(GetTriggerUnit()) == 1851942007
end
function KillTangWenLiang()
	BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 100, 1227895116, 1227895117, 1227895121, 1227895122, 0, 0)
end
--杀关能
function Fl()
	return GetUnitTypeId(GetTriggerUnit()) == 1852076663
end
function Gl()
	BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 100, 1227895118, 1227895120, 1227895119, 0, 0, 0)
end
--杀李莫愁
function Il()
	return GetUnitTypeId(GetTriggerUnit()) == 1702258030
end
function ll()
	BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 100, 1227895621, 1227895626, 0, 0, 0, 0)
end
--杀木灵子
function Kl()
	return GetUnitTypeId(GetTriggerUnit()) == 1700884333
end
function Ll()
	BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 100, 1227895628, 1227895382, 0, 0, 0, 0)
end
--杀狄云
function Nl()
	return GetUnitTypeId(GetTriggerUnit()) == 1852007777
end
function Ol()
	BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 100, 1227895603, 1227895627, 0, 0, 0, 0)
end
--杀林朝英
function Ql()
	return GetUnitTypeId(GetTriggerUnit()) == 1852076403
end
function Rl()
	local loc = GetUnitLoc(GetTriggerUnit())
	local loc2 = nil
	local i = 1
	shengwang[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] = shengwang[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] + 50
	DisplayTextToPlayer(GetOwningPlayer(GetKillingUnit()), 0, 0, "|cff00ff00击杀林朝英，获得江湖声望+50")
	--call BJDebugMsg(I2S(LoadInteger(YDHT, StringHash("武学")+GetRandomInt(42, 46), 2)))
	BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 100, udg_jianghu[GetRandomInt(1, 18)], 0, 0, 0, 0, 0)
	if Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 8 then
		if GetRandomReal(1, 100) <= 10.0 then
			createitemloc(1227899700, loc)
		end
		if GetRandomReal(1, 100) <= 10.0 then
			createitemloc(1227899701, loc)
		end
		if GetRandomReal(1, 100) <= 10.0 then
			createitemloc(1227899704, loc)
		end
		if GetRandomReal(1, 100) <= 10.0 then
			createitemloc(1227899722, loc)
		end
	else
		if GetRandomReal(1, 100) <= 5.0 then
			createitemloc(1227899700, loc)
		end
		if GetRandomReal(1, 100) <= 5.0 then
			createitemloc(1227899701, loc)
		end
		if GetRandomReal(1, 100) <= 5.0 then
			createitemloc(1227899704, loc)
		end
		if GetRandomReal(1, 100) <= 5.0 then
			createitemloc(1227899722, loc)
		end
	end
	if udg_lddsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == true then
		createitemloc(YaoCao[9], loc)
	end
	i = 0
	for _ in _loop_() do
		if i >= 5 then break end
		AdjustPlayerStateBJ(16 * (10 - GetNumPlayer()) // 10, Player(i), PLAYER_STATE_RESOURCE_LUMBER)
		i = i + 1
	end
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "击杀林朝英，每位玩家奖励珍稀" .. (I2S(16 * (10 - GetNumPlayer()) // 10) or "") .. "个")
	loc2 = pu(loc, GetRandomReal(30.0, 200.0), GetRandomReal(0, 360.0))
	createitemloc(gudong[GetRandomInt(4, 6)], loc2)
	RemoveLocation(loc2)
	loc2 = pu(loc, GetRandomReal(30.0, 200.0), GetRandomReal(0, 360.0))
	createitemloc(gudong[GetRandomInt(1, 6)], loc2)
	RemoveLocation(loc2)
	loc2 = pu(loc, GetRandomReal(30.0, 200.0), GetRandomReal(0, 360.0))
	createitemloc(gudong[GetRandomInt(1, 6)], loc2)
	RemoveLocation(loc2)
	loc2 = pu(loc, GetRandomReal(30.0, 200.0), GetRandomReal(0, 360.0))
	createitemloc(1227895897, loc2)
	RemoveLocation(loc2)
	loc2 = pu(loc, GetRandomReal(30.0, 200.0), GetRandomReal(0, 360.0))
	createitemloc(1227895897, loc2)
	RemoveLocation(loc2)
	loc2 = pu(loc, GetRandomReal(30.0, 200.0), GetRandomReal(0, 360.0))
	createitemloc(1227895897, loc2)
	RemoveLocation(loc2)
	loc2 = pu(loc, GetRandomReal(30.0, 200.0), GetRandomReal(0, 360.0))
	createitemloc(1227895897, loc2)
	RemoveLocation(loc2)
	loc2 = pu(loc, GetRandomReal(30.0, 200.0), GetRandomReal(0, 360.0))
	createitemloc(1227895897, loc2)
	RemoveLocation(loc2)
	RemoveLocation(loc)
	loc = nil
	loc2 = nil
end
--杀古墓弟子
function Tl()
	return GetUnitTypeId(GetTriggerUnit()) == 1852076406
end
function Ul()
	BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 25, 1227895897, 0, 0, 0, 15, YaoCao[11])
	BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] // 4, gudong[GetRandomInt(1, 6)], 0, 0, 0, 0, 0)
end
--FB3杀南海鳄神
function Wl()
	return GetUnitTypeId(GetTriggerUnit()) == 1853059439
end
function Xl()
	BaoWuDiaoLuo(GetKillingUnit(), GetTriggerUnit(), 100, 1227895095, 1227895107, 1227895097, 0, 0, 0)
end
--FB3杀叶二娘
function Zl()
	return GetUnitTypeId(GetTriggerUnit()) == 1852338802
end
function dd1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 60) <= 20 then
			createitemloc(1227895877, LoadLocationHandle(YDHT, id * cx, 392811314))
			SaveInteger(YDHT, id * cx, -1587459251, 0)
			SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -2002008616, 0)
			SaveInteger(YDHT, id * cx, -758038261, 0)
			SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 2))
			SaveInteger(YDHT, id * cx, -1313985866, 0)
			SaveInteger(YDHT, id * cx, 1141342265, 0)
			SaveInteger(YDHT, id * cx, -1872571105, 0)
			SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
		else
			if GetRandomInt(1, 50) <= 25 then
				createitemloc(1227895096, LoadLocationHandle(YDHT, id * cx, 392811314))
			else
				createitemloc(1227895106, LoadLocationHandle(YDHT, id * cx, 392811314))
			end
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB3杀段延庆
function f1()
	return GetUnitTypeId(GetTriggerUnit()) == 1853186679
end
function g1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 60) <= 60 then
			createitemloc(1227895878, LoadLocationHandle(YDHT, id * cx, 392811314))
			SaveInteger(YDHT, id * cx, -1587459251, 0)
			SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -2002008616, 0)
			SaveInteger(YDHT, id * cx, -758038261, 0)
			SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 1))
			SaveInteger(YDHT, id * cx, -1313985866, 0)
			SaveInteger(YDHT, id * cx, 1141342265, 0)
			SaveInteger(YDHT, id * cx, -1872571105, 0)
			SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
		else
		--call createitemloc(1227895108,LoadLocationHandle(YDHT,id*cx,$1769D332))
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB3杀梅超风
function i1()
	return GetUnitTypeId(GetTriggerUnit()) == 1702061422
end
function j1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 60) <= 20 then
			createitemloc(1227895624, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			if GetRandomInt(1, 50) <= 25 then
				createitemloc(1227895625, LoadLocationHandle(YDHT, id * cx, 392811314))
			else
				createitemloc(1227895384, LoadLocationHandle(YDHT, id * cx, 392811314))
			end
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB3杀云中鹤
function m1()
	return GetUnitTypeId(GetTriggerUnit()) == 1852796263
end
function nn1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 50) <= 25 then
			createitemloc(1227895105, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			createitemloc(1227895094, LoadLocationHandle(YDHT, id * cx, 392811314))
		end
		--擒龙控鹤
		if GetRandomReal(1, 100) <= 10.0 or GetRandomReal(1, 100) <= 20.0 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 8 then
			createitemloc(1227899715, LoadLocationHandle(YDHT, id * cx, 392811314))
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB3杀张无忌
function p1()
	return GetUnitTypeId(GetTriggerUnit()) == 1701672039
end
function q1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 50) <= 25 then
			createitemloc(1227895600, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			createitemloc(1227895385, LoadLocationHandle(YDHT, id * cx, 392811314))
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB3杀武三通
function t1()
	return GetUnitTypeId(GetTriggerUnit()) == 1970169187
end
function u1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 50) <= 25 then
			createitemloc(1227895622, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			createitemloc(1227895601, LoadLocationHandle(YDHT, id * cx, 392811314))
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--杀门派叛徒和武林恶徒
function ww1()
	return GetUnitTypeId(GetTriggerUnit()) == 1852206962 or GetUnitTypeId(GetTriggerUnit()) == 1852733298
end
function z1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 500) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] then
			createitemloc(gudong[GetRandomInt(4, 9)], LoadLocationHandle(YDHT, id * cx, 392811314))
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	if Td[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
		if GetUnitTypeId(GetTriggerUnit()) == 1852206962 then
			if Vd[LoadInteger(YDHT, id * cx, -1587459251)] < 10 then
				Vd[LoadInteger(YDHT, id * cx, -1587459251)] = Vd[LoadInteger(YDHT, id * cx, -1587459251)] + 1
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "门派叛徒：" .. (I2S(Vd[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 10")
			else
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "门派叛徒：" .. (I2S(Vd[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 10")
			end
		else
			if Ud[LoadInteger(YDHT, id * cx, -1587459251)] < 10 then
				Ud[LoadInteger(YDHT, id * cx, -1587459251)] = Ud[LoadInteger(YDHT, id * cx, -1587459251)] + 1
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "武林恶徒：" .. (I2S(Ud[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 10")
			else
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "武林恶徒：" .. (I2S(Ud[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 10")
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
--杀极恶领主
function a1()
	return GetUnitTypeId(GetTriggerUnit()) == 1852206966
end
function B1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	createitemloc(1227895379, LoadLocationHandle(YDHT, id * cx, 392811314))
	SaveInteger(YDHT, id * cx, -1587459251, 0)
	SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
	SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 6))
	SaveInteger(YDHT, id * cx, -2002008616, 0)
	SaveInteger(YDHT, id * cx, -758038261, 0)
	SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 1))
	SaveInteger(YDHT, id * cx, -1313985866, 0)
	SaveInteger(YDHT, id * cx, 1141342265, 0)
	SaveInteger(YDHT, id * cx, -1872571105, 0)
	SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
	SaveLocationHandle(YDHT, id * cx, -408723394, pu(LoadLocationHandle(YDHT, id * cx, 392811314), GetRandomReal(30.0, 120.0), GetRandomReal(0, 360.0)))
	createitemloc(gudong[GetRandomInt(4, 9)], LoadLocationHandle(YDHT, id * cx, -408723394))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -408723394))
	SaveLocationHandle(YDHT, id * cx, -408723394, pu(LoadLocationHandle(YDHT, id * cx, 392811314), GetRandomReal(30.0, 120.0), GetRandomReal(0, 360.0)))
	createitemloc(gudong[GetRandomInt(4, 9)], LoadLocationHandle(YDHT, id * cx, -408723394))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -408723394))
	SaveLocationHandle(YDHT, id * cx, -408723394, pu(LoadLocationHandle(YDHT, id * cx, 392811314), GetRandomReal(30.0, 120.0), GetRandomReal(0, 360.0)))
	createitemloc(gudong[GetRandomInt(4, 9)], LoadLocationHandle(YDHT, id * cx, -408723394))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -408723394))
	SaveLocationHandle(YDHT, id * cx, -408723394, pu(LoadLocationHandle(YDHT, id * cx, 392811314), GetRandomReal(30.0, 120.0), GetRandomReal(0, 360.0)))
	createitemloc(gudong[GetRandomInt(4, 9)], LoadLocationHandle(YDHT, id * cx, -408723394))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -408723394))
	SaveLocationHandle(YDHT, id * cx, -408723394, pu(LoadLocationHandle(YDHT, id * cx, 392811314), GetRandomReal(30.0, 120.0), GetRandomReal(0, 360.0)))
	createitemloc(1952807024, LoadLocationHandle(YDHT, id * cx, -408723394))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -408723394))
	SaveLocationHandle(YDHT, id * cx, -408723394, pu(LoadLocationHandle(YDHT, id * cx, 392811314), GetRandomReal(30.0, 120.0), GetRandomReal(0, 360.0)))
	createitemloc(1952807024, LoadLocationHandle(YDHT, id * cx, -408723394))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -408723394))
	SaveLocationHandle(YDHT, id * cx, -408723394, pu(LoadLocationHandle(YDHT, id * cx, 392811314), GetRandomReal(30.0, 120.0), GetRandomReal(0, 360.0)))
	createitemloc(1952807024, LoadLocationHandle(YDHT, id * cx, -408723394))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -408723394))
	SaveLocationHandle(YDHT, id * cx, -408723394, pu(LoadLocationHandle(YDHT, id * cx, 392811314), GetRandomReal(30.0, 120.0), GetRandomReal(0, 360.0)))
	createitemloc(1952807024, LoadLocationHandle(YDHT, id * cx, -408723394))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -408723394))
	SaveLocationHandle(YDHT, id * cx, -408723394, pu(LoadLocationHandle(YDHT, id * cx, 392811314), GetRandomReal(30.0, 120.0), GetRandomReal(0, 360.0)))
	createitemloc(1952807024, LoadLocationHandle(YDHT, id * cx, -408723394))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -408723394))
	SaveLocationHandle(YDHT, id * cx, -408723394, pu(LoadLocationHandle(YDHT, id * cx, 392811314), GetRandomReal(30.0, 120.0), GetRandomReal(0, 360.0)))
	createitemloc(1952807024, LoadLocationHandle(YDHT, id * cx, -408723394))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -408723394))
	SaveLocationHandle(YDHT, id * cx, -408723394, pu(LoadLocationHandle(YDHT, id * cx, 392811314), GetRandomReal(30.0, 120.0), GetRandomReal(0, 360.0)))
	createitemloc(1952807024, LoadLocationHandle(YDHT, id * cx, -408723394))
	createitemloc(YaoCao[10], LoadLocationHandle(YDHT, id * cx, 392811314))
	if udg_lddsbool[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] then
		createitemloc(YaoCao[10], LoadLocationHandle(YDHT, id * cx, 392811314))
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -408723394))
	FlushChildHashtable(YDHT, id * cx)
end
--边境掉落
function C1()
	if GetRandomInt(1, 4) == 1 then
		Zd = 1227896396
	else
		if GetRandomInt(1, 3) == 1 then
			Zd = 1227896397
		else
			if GetRandomInt(1, 2) == 1 then
				Zd = 1227896395
			else
				Zd = 1227895379
			end
		end
	end
	createitemloc(Zd, v7[11])
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33边境刷新掉落：|cFF33FFFF" .. (GetItemName(bj_lastCreatedItem) or ""))
	RemoveItem(bj_lastCreatedItem)
end
--边境掉落
function D1()
	return RectContainsUnit(df, GetTriggerUnit())
end
function E1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 100) <= 5 then
			createitemloc(Zd, LoadLocationHandle(YDHT, id * cx, 392811314))
			if Zd == 1227895379 then
				SaveInteger(YDHT, id * cx, -1587459251, 0)
				SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
				SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 6))
				SaveInteger(YDHT, id * cx, -2002008616, 0)
				SaveInteger(YDHT, id * cx, -758038261, 0)
				SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 1))
				SaveInteger(YDHT, id * cx, -1313985866, 0)
				SaveInteger(YDHT, id * cx, 1141342265, 0)
				SaveInteger(YDHT, id * cx, -1872571105, 0)
				SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
			end
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--杀扫地神僧
function G1()
	return GetUnitTypeId(GetTriggerUnit()) == 1853059688
end
function H1()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(GetKillingUnit())
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(u)
	shengwang[i] = shengwang[i] + 100
	DisplayTextToPlayer(p, 0, 0, "|cff00ff00击杀扫地神僧，获得江湖声望+100")
	if GetRandomInt(1, 1000) <= fuyuan[i] or GetRandomInt(1, 100) <= 30 and Ce[i] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		createitemloc(udg_juexue[GetRandomInt(1, 10)], loc)
		createitemloc(YaoCao[9], loc)
		if Ce[i] == 8 then
			if GetRandomReal(1, 100) <= 10.0 then
				createitemloc(1227899699, loc)
			end
			if GetRandomReal(1, 100) <= 10.0 then
				createitemloc(1227899705, loc)
			end
			if GetRandomReal(1, 100) <= 10.0 then
				createitemloc(1227899716, loc)
			end
		else
			if GetRandomReal(1, 100) <= 5.0 then
				createitemloc(1227899699, loc)
			end
			if GetRandomReal(1, 100) <= 5.0 then
				createitemloc(1227899705, loc)
			end
			if GetRandomReal(1, 100) <= 5.0 then
				createitemloc(1227899716, loc)
			end
		end
		if udg_lddsbool[i] == true then
			createitemloc(YaoCao[9], loc)
		end
		N7 = N7 + 1
	end
	RemoveLocation(loc)
	u = nil
	p = nil
	loc = nil
end
--FB4杀南海神尼
function l1()
	return GetUnitTypeId(GetTriggerUnit()) == 1852140642
end
function J1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		createitemloc(1227897161, LoadLocationHandle(YDHT, id * cx, 392811314))
		if GetRandomInt(1, 50) <= 30 then
			createitemloc(YaoCao[6], LoadLocationHandle(YDHT, id * cx, 392811314))
			if udg_lddsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] then
				createitemloc(YaoCao[6], LoadLocationHandle(YDHT, id * cx, 392811314))
			end
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB4杀公孙止
function L1()
	return GetUnitTypeId(GetTriggerUnit()) == 1852207221
end
function MM1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 60) <= 25 then
			createitemloc(1227895089, LoadLocationHandle(YDHT, id * cx, 392811314))
			SaveInteger(YDHT, id * cx, -1587459251, 0)
			SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 6))
			SaveInteger(YDHT, id * cx, -2002008616, 0)
			SaveInteger(YDHT, id * cx, -758038261, 0)
			SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 2))
			SaveInteger(YDHT, id * cx, -1313985866, 0)
			SaveInteger(YDHT, id * cx, 1141342265, 0)
			SaveInteger(YDHT, id * cx, -1872571105, 0)
			SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
		else
			if GetRandomInt(1, 50) <= 30 then
				createitemloc(1227895091, LoadLocationHandle(YDHT, id * cx, 392811314))
			else
				createitemloc(1227895371, LoadLocationHandle(YDHT, id * cx, 392811314))
			end
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB4杀裘千仞
function O1()
	return GetUnitTypeId(GetTriggerUnit()) == 1852663666
end
function P1()
	local loc = GetUnitLoc(GetTriggerUnit())
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(0, 100) <= 5 then
			createitemloc(1227895090, loc)
			SetItemUserData(bj_lastCreatedItem, GetRandomInt(1, 6) * 10000000 + GetRandomInt(1, 5) * 1000000 + GetRandomInt(0, 2) * 1000)
		else
			createitemloc(1227897145, loc)
		end
		N7 = N7 + 1
	end
	RemoveLocation(loc)
	loc = nil
end
--FB4杀裘千尺
function R1()
	return GetUnitTypeId(GetTriggerUnit()) == 1852335728
end
function S1()
	local loc = GetUnitLoc(GetTriggerUnit())
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(0, 100) <= 5 then
			createitemloc(1227895372, loc)
		else
			createitemloc(1227897153, loc)
		end
		N7 = N7 + 1
	end
	RemoveLocation(loc)
	loc = nil
end
--FB4杀长须老鬼
function U1()
	return GetUnitTypeId(GetTriggerUnit()) == 1852996194
end
function V1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 100) <= 25 then
			createitemloc(1227895092, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			if GetRandomInt(1, 75) <= 25 then
				createitemloc(1227895093, LoadLocationHandle(YDHT, id * cx, 392811314))
			else
				if GetRandomInt(1, 50) <= 25 then
					createitemloc(1227894874, LoadLocationHandle(YDHT, id * cx, 392811314))
				else
					createitemloc(1227895088, LoadLocationHandle(YDHT, id * cx, 392811314))
				end
			end
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB5杀李秋水
function X1()
	return GetUnitTypeId(GetTriggerUnit()) == 1852270642
end
function Y1()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 50) <= 25 then
			createitemloc(1227894870, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			createitemloc(1227894869, LoadLocationHandle(YDHT, id * cx, 392811314))
		end
		SaveInteger(YDHT, id * cx, -1587459251, 0)
		SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
		SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 7))
		SaveInteger(YDHT, id * cx, -2002008616, GetRandomInt(1, 5))
		SaveInteger(YDHT, id * cx, -758038261, GetRandomInt(1, 7))
		SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 2))
		SaveInteger(YDHT, id * cx, -1313985866, 0)
		SaveInteger(YDHT, id * cx, 1141342265, 0)
		SaveInteger(YDHT, id * cx, -1872571105, 0)
		SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB5杀天山童姥
function dJ()
	return GetUnitTypeId(GetTriggerUnit()) == 1852207984
end
function eJ()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(0, 100) <= 100 then
			createitemloc(1227894871, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
		--call createitemloc('I00T',LoadLocationHandle(YDHT,id*cx,$1769D332))
		end
		SaveInteger(YDHT, id * cx, -1587459251, 0)
		SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
		SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 7))
		SaveInteger(YDHT, id * cx, -2002008616, GetRandomInt(1, 5))
		SaveInteger(YDHT, id * cx, -758038261, GetRandomInt(1, 7))
		SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 2))
		SaveInteger(YDHT, id * cx, -1313985866, 0)
		SaveInteger(YDHT, id * cx, 1141342265, 0)
		SaveInteger(YDHT, id * cx, -1872571105, 0)
		SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB5杀无崖子
function gJ()
	return GetUnitTypeId(GetTriggerUnit()) == 1852663652
end
function hJ()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 50) <= 25 then
			createitemloc(1227894864, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			createitemloc(1227894863, LoadLocationHandle(YDHT, id * cx, 392811314))
		end
		if GetRandomReal(1, 100) <= 3.0 or GetRandomReal(1, 100) <= 6.0 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 8 then
			createitemloc(1227899713, LoadLocationHandle(YDHT, id * cx, 392811314))
		end
		SaveInteger(YDHT, id * cx, -1587459251, 0)
		SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
		SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 7))
		SaveInteger(YDHT, id * cx, -2002008616, GetRandomInt(1, 5))
		SaveInteger(YDHT, id * cx, -758038261, GetRandomInt(1, 7))
		SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 2))
		SaveInteger(YDHT, id * cx, -1313985866, 0)
		SaveInteger(YDHT, id * cx, 1141342265, 0)
		SaveInteger(YDHT, id * cx, -1872571105, 0)
		SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB5杀闪电蜥蜴
function jJ()
	return GetUnitTypeId(GetTriggerUnit()) == 1853058166
end
function kJ()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		createitemloc(1227895861, LoadLocationHandle(YDHT, id * cx, 392811314))
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB5杀千山雪母
function nJ()
	return GetUnitTypeId(GetTriggerUnit()) == 1853055597
end
function oJ()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(u)
	if GetRandomInt(1, 1000) <= fuyuan[i] or GetRandomInt(1, 100) <= 30 and Ce[i] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		createitemloc(1227895860, loc)
		N7 = N7 + 1
	end
	RemoveLocation(loc)
	u = nil
	p = nil
	loc = nil
end
--杀黄裳
function qJ()
	return GetUnitTypeId(GetTriggerUnit()) == 1752395892
end
function rJ()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	shengwang[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] = shengwang[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] + 200
	DisplayTextToPlayer(GetOwningPlayer(GetKillingUnit()), 0, 0, "|cff00ff00击杀黄裳，获得江湖声望+200")
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 80) <= 10 then
			createitemloc(1227895635, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			if GetRandomInt(1, 70) <= 10 then
				createitemloc(1227895629, LoadLocationHandle(YDHT, id * cx, 392811314))
			else
				if GetRandomInt(1, 60) <= 10 then
					createitemloc(1227895637, LoadLocationHandle(YDHT, id * cx, 392811314))
				else
					if GetRandomInt(1, 50) <= 10 then
						createitemloc(1227895634, LoadLocationHandle(YDHT, id * cx, 392811314))
					else
						if GetRandomInt(1, 40) <= 10 then
							createitemloc(1227895632, LoadLocationHandle(YDHT, id * cx, 392811314))
						else
							if GetRandomInt(1, 30) <= 10 then
								createitemloc(1227895633, LoadLocationHandle(YDHT, id * cx, 392811314))
							else
								if GetRandomInt(1, 20) <= 10 then
									createitemloc(1227895631, LoadLocationHandle(YDHT, id * cx, 392811314))
								else
									createitemloc(1227895636, LoadLocationHandle(YDHT, id * cx, 392811314))
								end
							end
						end
					end
				end
			end
		end
		createitemloc(YaoCao[12], LoadLocationHandle(YDHT, id * cx, 392811314))
		if udg_lddsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] then
			createitemloc(YaoCao[12], LoadLocationHandle(YDHT, id * cx, 392811314))
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB6杀令狐冲
function tJ()
	return GetUnitTypeId(GetTriggerUnit()) == 1751672179
end
function uJ()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 50) <= 25 then
			createitemloc(1227894857, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			createitemloc(1227894862, LoadLocationHandle(YDHT, id * cx, 392811314))
		end
		SaveInteger(YDHT, id * cx, -1587459251, GetRandomInt(1, 4))
		SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
		SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 8))
		SaveInteger(YDHT, id * cx, -2002008616, GetRandomInt(1, 5))
		SaveInteger(YDHT, id * cx, -758038261, GetRandomInt(1, 8))
		SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 3))
		SaveInteger(YDHT, id * cx, -1313985866, 0)
		SaveInteger(YDHT, id * cx, 1141342265, 0)
		SaveInteger(YDHT, id * cx, -1872571105, 0)
		SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB6杀风清扬
function wJ()
	return GetUnitTypeId(GetTriggerUnit()) == 1851942252
end
function xJ()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 50) <= 25 then
			createitemloc(1227895874, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			createitemloc(1227894855, LoadLocationHandle(YDHT, id * cx, 392811314))
			SaveInteger(YDHT, id * cx, -1587459251, GetRandomInt(1, 4))
			SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 8))
			SaveInteger(YDHT, id * cx, -2002008616, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -758038261, GetRandomInt(1, 8))
			SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 3))
			SaveInteger(YDHT, id * cx, -1313985866, 0)
			SaveInteger(YDHT, id * cx, 1141342265, 0)
			SaveInteger(YDHT, id * cx, -1872571105, 0)
			SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB6杀独孤求败
function zJ()
	return GetUnitTypeId(GetTriggerUnit()) == 1852142199
end
function AJ()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 50) <= 25 then
			createitemloc(1227895873, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			createitemloc(1227894851, LoadLocationHandle(YDHT, id * cx, 392811314))
			SaveInteger(YDHT, id * cx, -1587459251, GetRandomInt(1, 4))
			SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 8))
			SaveInteger(YDHT, id * cx, -2002008616, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -758038261, GetRandomInt(1, 8))
			SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 3))
			SaveInteger(YDHT, id * cx, -1313985866, 0)
			SaveInteger(YDHT, id * cx, 1141342265, 0)
			SaveInteger(YDHT, id * cx, -1872571105, 0)
			SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
		end
		createitemloc(YaoCao[8], LoadLocationHandle(YDHT, id * cx, 392811314))
		if udg_lddsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] then
			createitemloc(YaoCao[8], LoadLocationHandle(YDHT, id * cx, 392811314))
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB6杀东方不败
function BJ()
	return GetUnitTypeId(GetTriggerUnit()) == 1969976430
end
function bJ()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 125) <= 25 then
			createitemloc(1227894852, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			if GetRandomInt(1, 100) <= 25 then
				createitemloc(1227894850, LoadLocationHandle(YDHT, id * cx, 392811314))
			else
				if GetRandomInt(1, 75) <= 25 then
					createitemloc(1227894854, LoadLocationHandle(YDHT, id * cx, 392811314))
				else
					if GetRandomInt(1, 50) <= 25 then
						createitemloc(1227894860, LoadLocationHandle(YDHT, id * cx, 392811314))
					else
						createitemloc(1227894856, LoadLocationHandle(YDHT, id * cx, 392811314))
					end
				end
			end
		end
		SaveInteger(YDHT, id * cx, -1587459251, GetRandomInt(1, 4))
		SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
		SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 8))
		SaveInteger(YDHT, id * cx, -2002008616, GetRandomInt(1, 5))
		SaveInteger(YDHT, id * cx, -758038261, GetRandomInt(1, 8))
		SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 3))
		SaveInteger(YDHT, id * cx, -1313985866, 0)
		SaveInteger(YDHT, id * cx, 1141342265, 0)
		SaveInteger(YDHT, id * cx, -1872571105, 0)
		SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--杀矮人得决战魁、杀矮子王得江湖忠
function IsAiRen()
	return GetUnitTypeId(GetTriggerUnit()) == 1752328550 or GetUnitTypeId(GetTriggerUnit()) == 1215130471
end
function KillAiRen()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	if GetUnitTypeId(u) == 1752328550 then
		if GetRandomReal(0, 30) <= 2 then
			createitemloc(1227896921, loc)
		end
	else
		createitemloc(1227896918, loc)
	end
	RemoveLocation(loc)
	loc = nil
	u = nil
end
--杀牛妖得残章第一式
function cJ()
	return GetUnitTypeId(GetTriggerUnit()) == 1852467042
end
function DJ()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local i = 0
	i = GetRandomInt(1, 10)
	if GetRandomReal(0, 27) <= 3 then
		createitemloc(udg_canzhang[i], loc)
	end
	RemoveLocation(loc)
	loc = nil
	u = nil
end
--杀渣小庸只掉落江湖套
function FJ()
	return GetUnitTypeId(GetTriggerUnit()) == 1852207203
end
function GJ()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		--渣小庸只掉落江湖套
		if GetRandomInt(1, 75) <= 25 then
			createitemloc(1227896920, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			if GetRandomInt(1, 50) <= 30 then
				createitemloc(1227896922, LoadLocationHandle(YDHT, id * cx, 392811314))
			else
				createitemloc(1227897136, LoadLocationHandle(YDHT, id * cx, 392811314))
			end
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB3
--杀熊、桃花岛哑仆、灭火（救火）
function JK()
	return GetUnitTypeId(GetTriggerUnit()) == 1852207724 or GetUnitTypeId(GetTriggerUnit()) == 1853253996 or GetUnitTypeId(GetTriggerUnit()) == 1852601907
end
function KK()
	local u = GetKillingUnit()
	local uc = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(uc)
	if GetUnitTypeId(uc) == 1852207724 then
		if GetRandomInt(1, 50) <= 3 then
			createitemloc(1227895363, loc)
		end
		if GetRandomInt(1, 50) <= 3 then
			createitemloc(1227895375, loc)
		end
		if rd[i] == 1 then
			ud[i] = ud[i] + 1
			if ud[i] >= 30 then
				rd[i] = 2
				unitadditembyidswapped(1227895372, u)
				PlaySoundOnUnitBJ(Hh, 100, u)
				DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务获得江湖声望+150和" .. (GetItemName(bj_lastCreatedItem) or ""))
				shengwang[i] = shengwang[i] + 150
			else
				DisplayTextToPlayer(p, 0, 0, "熊：" .. (I2S(ud[i]) or "") .. " / 30")
			end
		end
	elseif GetUnitTypeId(uc) == 1853253996 then
		if LoadInteger(YDHT, StringHash("哑仆任务"), i) == 1 then
			SaveInteger(YDHT, StringHash("哑仆"), i, LoadInteger(YDHT, StringHash("哑仆"), i) + 1)
			if LoadInteger(YDHT, StringHash("哑仆"), i) >= 10 then
				SaveInteger(YDHT, StringHash("哑仆任务"), i, 0)
				SaveInteger(YDHT, StringHash("哑仆"), i, 0)
				unitadditembyidswapped(1227897174, u)
				PlaySoundOnUnitBJ(Hh, 100, u)
				DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务获得" .. (GetItemName(bj_lastCreatedItem) or ""))
			else
				DisplayTextToPlayer(p, 0, 0, "哑仆：" .. (I2S(LoadInteger(YDHT, StringHash("哑仆"), i)) or "") .. " / 10")
			end
		end
		if GetRandomReal(1, 100) <= 5 then
			unitadditembyidswapped(1227897163, u)
		end
	elseif GetUnitTypeId(uc) == 1852601907 then
		if GetRandomInt(0, 100) <= 100 - GetNumPlayer() * 10 then
			AdjustPlayerStateBJ(2, Player(0), PLAYER_STATE_RESOURCE_LUMBER)
			AdjustPlayerStateBJ(2, Player(1), PLAYER_STATE_RESOURCE_LUMBER)
			AdjustPlayerStateBJ(2, Player(2), PLAYER_STATE_RESOURCE_LUMBER)
			AdjustPlayerStateBJ(2, Player(3), PLAYER_STATE_RESOURCE_LUMBER)
			AdjustPlayerStateBJ(2, Player(4), PLAYER_STATE_RESOURCE_LUMBER)
		end
		if GetRandomReal(1, 100) <= 2.5 then
			unitadditembyidswapped(1227897161, u)
		end
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	p = nil
	loc = nil
end
---------副本系统开始-------//
function IsFuBen(it)
	if GetItemTypeId(it) == 1227895366 or GetItemTypeId(it) == 1227895638 or GetItemTypeId(it) == 1227895875 or GetItemTypeId(it) == 1227895881 or GetItemTypeId(it) == 1227895894 or GetItemTypeId(it) == 1227896140 then
		return true
	end
	return false
end
function ShenMiGuaiWu(u, loc, FBNum, gw1, gw2, gw3)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	if GetRandomInt(1, 100) <= 20 and udg_jddsbool[i] == false then
		DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33载入神秘怪物：|cFF33FFFF无")
	else
		if GetRandomInt(1, 60) <= 20 then
			CreateNUnitsAtLoc(1, gw1, Player(12), loc, bj_UNIT_FACING)
		elseif GetRandomInt(1, 40) <= 20 then
			CreateNUnitsAtLoc(1, gw2, Player(12), loc, bj_UNIT_FACING)
		else
			CreateNUnitsAtLoc(1, gw3, Player(12), loc, bj_UNIT_FACING)
		end
		DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33载入神秘怪物：|cFF33FFFF" .. (GetUnitName(bj_lastCreatedUnit) or ""))
		p8[FBNum] = bj_lastCreatedUnit
	end
end
function XiYouDiaoLuo(u, FBNum, dl1, dl2, dl3, dl4)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	if GetRandomInt(1, 100) <= 20 and udg_jddsbool[i] == false then
		DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33载入稀有掉落：|cFF33FFFF无")
		q8[FBNum] = 1668446579
	else
		if GetRandomInt(1, 60) <= 15 then
			q8[FBNum] = dl1
		elseif GetRandomInt(1, 45) <= 15 then
			q8[FBNum] = dl2
		elseif GetRandomInt(1, 30) <= 25 then
			q8[FBNum] = dl3
		else
			q8[FBNum] = dl4
		end
		createitemloc(q8[FBNum], v7[11])
		DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33载入稀有掉落：|cFF33FFFF" .. (GetItemName(bj_lastCreatedItem) or ""))
		RemoveItem(bj_lastCreatedItem)
	end
end
function QiYuanNPC(u, FBNum, id, id2, rt1, rt2, rt3, rt4, rt5, rt6)
	local loc3 = nil
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	if GetRandomInt(1, 100) <= 50 and udg_jddsbool[i] == false then
		DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33载入奇缘NPC：|cFF33FFFF无")
	else
		if id ~= 1668446579 then
			if GetRandomInt(1, 120) <= 20 then
				loc3 = GetRectCenter(rt1)
			elseif GetRandomInt(1, 100) <= 20 then
				loc3 = GetRectCenter(rt2)
			elseif GetRandomInt(1, 80) <= 20 then
				loc3 = GetRectCenter(rt3)
			elseif GetRandomInt(1, 60) <= 20 then
				loc3 = GetRectCenter(rt4)
			elseif GetRandomInt(1, 40) <= 20 then
				loc3 = GetRectCenter(rt5)
			else
				loc3 = GetRectCenter(rt6)
			end
			if GetRandomInt(1, 2) == 1 then
				CreateNUnitsAtLoc(1, id, Player(15), loc3, bj_UNIT_FACING)
			else
				CreateNUnitsAtLoc(1, id2, Player(15), loc3, bj_UNIT_FACING)
			end
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33载入奇缘NPC：|cFF33FFFF" .. (GetUnitName(bj_lastCreatedUnit) or ""))
			r8[FBNum] = bj_lastCreatedUnit
			RemoveLocation(loc3)
		end
	end
	loc3 = nil
end
function EnterFB(u, goldnum, rt0, rt1, rt2, FBNum, FBName)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	local loc2 = nil
	local gws = _array_(0)
	local dls = _array_(0)
	local qys = _array_(0)
	local qylocs = _array_()
	--神秘怪物
	gws[1] = 1869898101
	gws[2] = 1868852084
	gws[3] = 1969316719
	gws[4] = 1702258030
	gws[5] = 1700884333
	gws[6] = 1852007777
	gws[7] = 1701672039
	gws[8] = 1702061422
	gws[9] = 1970169187
	gws[10] = 1852140642
	gws[11] = 1852335728
	gws[12] = 1852663666
	gws[13] = 1853058166
	gws[14] = 1853055597
	gws[15] = 1853055597
	gws[16] = 1852142199
	gws[17] = 1851942252
	gws[18] = 1751672179
	--稀有掉落
	dls[1] = 1227895345
	dls[2] = 1227895116
	dls[3] = 1227895117
	dls[4] = 1227895110
	dls[5] = 1227895109
	dls[6] = 1227895379
	dls[7] = 1227895111
	dls[8] = 1227895371
	dls[9] = 1227895379
	dls[10] = 1227895379
	dls[11] = 1227895380
	dls[12] = 1227895857
	dls[13] = 1227895859
	dls[14] = 1227895858
	dls[15] = 1227895092
	dls[16] = 1227895092
	dls[17] = 1227894865
	dls[18] = 1227894867
	dls[19] = 1227894866
	dls[20] = 1227894866
	dls[21] = 1227894859
	dls[22] = 1227894861
	dls[23] = 1227894861
	dls[24] = 1227894859
	dls[25] = 1668446579
	dls[26] = 1668446579
	dls[27] = 1668446579
	dls[28] = 1668446579
	--奇缘NPC
	qys[1] = 1865429068
	qys[2] = 1865429068
	qys[3] = 1865429071
	qys[4] = 1865429059
	qys[5] = 1865429073
	qys[6] = 1865429073
	qys[7] = 1865429076
	qys[8] = 1865429558
	qys[9] = 1865429080
	qys[10] = 1865429080
	qys[11] = 1668446579
	qys[12] = 1668446579
	qylocs[1] = gf
	qylocs[2] = hf
	qylocs[3] = jf
	qylocs[4] = kf
	qylocs[5] = mf
	qylocs[6] = nf
	qylocs[7] = Af
	qylocs[8] = af
	qylocs[9] = Bf
	qylocs[10] = bf
	qylocs[11] = Cf
	qylocs[12] = cf
	qylocs[13] = Zf
	qylocs[14] = Zf
	qylocs[15] = Zf
	qylocs[16] = Zf
	qylocs[17] = Zf
	qylocs[18] = Zf
	qylocs[19] = Fg
	qylocs[20] = Fg
	qylocs[21] = Fg
	qylocs[22] = Fg
	qylocs[23] = Fg
	qylocs[24] = Fg
	qylocs[25] = Pg
	qylocs[26] = Pg
	qylocs[27] = Pg
	qylocs[28] = Pg
	qylocs[29] = Pg
	qylocs[30] = Pg
	qylocs[31] = Pg
	qylocs[32] = Pg
	qylocs[33] = Pg
	qylocs[34] = Pg
	qylocs[35] = Pg
	qylocs[36] = Pg
	if xiuxing[i] <= FBNum - 2 then
		AdjustPlayerStateBJ(goldnum, p, PLAYER_STATE_RESOURCE_GOLD)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00修行达到" .. (I2S(FBNum - 1) or "") .. "才可以进入,你的修行不足，请前往地图指示点修行去吧")
		loc = GetRectCenter(rt0)
		PingMinimapLocForForce(ov(p), loc, 5.0)
		RemoveLocation(loc)
	else
		if IsUnitType(u, UNIT_TYPE_HERO) ~= nil then -- INLINED!!
			loc = GetRectCenter(rt1)
			loc2 = GetRectCenter(rt2)
			SetUnitPositionLoc(u, loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			if m8[FBNum] == false then
				RemoveUnit(r8[FBNum])
				q8[FBNum] = 1668446579
				RemoveUnit(p8[FBNum])
				DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC00开始载入动态副本：|r |cFF99FFCC" .. (FBName or "") .. "|r")
				DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFcc99ff――――――――――")
				ShenMiGuaiWu(u, loc2, FBNum, gws[FBNum * 3 - 2], gws[FBNum * 3 - 1], gws[FBNum * 3])
				XiYouDiaoLuo(u, FBNum, dls[FBNum * 4 - 3], dls[FBNum * 4 - 2], dls[FBNum * 4 - 1], dls[FBNum * 4])
				QiYuanNPC(u, FBNum, qys[FBNum * 2 - 1], qys[FBNum * 2], qylocs[FBNum * 6 - 5], qylocs[FBNum * 6 - 4], qylocs[FBNum * 6 - 3], qylocs[FBNum * 6 - 2], qylocs[FBNum * 6 - 1], qylocs[FBNum * 6])
				DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFFCC33小怪武功：|cFF33FFFF暂未制作此玩法")
				DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFFCC33BOSS武功：|cFF33FFFF暂未制作此玩法")
				StartTimerBJ(Hd[FBNum], false, 150.0)
				DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFF0033副本重置倒计时：|cFF33FFFF" .. (I2S(R2I(TimerGetRemaining(Hd[FBNum]))) or "") .. "秒")
				m8[FBNum] = true
				YDWEPolledWaitNull(150.0)
				m8[FBNum] = false
			else
				DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC00进入动态副本：|r |cFF99FFCC" .. (FBName or "") .. "|r")
				DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFcc99ff――――――――――")
				DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33神秘怪物：|cFF33FFFF" .. (GetUnitName(p8[FBNum]) or ""))
				createitemloc(q8[FBNum], v7[11])
				DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33稀有掉落：|cFF33FFFF" .. (GetItemName(bj_lastCreatedItem) or ""))
				RemoveItem(bj_lastCreatedItem)
				DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cFFFFCC33载入奇缘NPC：|cFF33FFFF" .. (GetUnitName(r8[FBNum]) or ""))
				DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFFCC33小怪武功：|cFF33FFFF暂未制作此玩法")
				DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFFCC33BOSS武功：|cFF33FFFF暂未制作此玩法")
				DisplayTimedTextToPlayer(p, 0, 0, 30, "|cFFFF0033副本重置倒计时：|cFF33FFFF" .. (I2S(R2I(TimerGetRemaining(Hd[FBNum]))) or "") .. "秒")
			end
			RemoveLocation(loc)
			RemoveLocation(loc2)
		else
			AdjustPlayerStateBJ(100, p, PLAYER_STATE_RESOURCE_GOLD)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00只能由主角亲自购买前往")
		end
	end
	p = nil
	u = nil
	loc = nil
	loc2 = nil
end
--进入FB
function IL()
	return IsFuBen(GetManipulatedItem())
end
function lL()
	local u = GetTriggerUnit()
	local it = GetManipulatedItem()
	if GetItemTypeId(it) == 1227895366 then
		EnterFB(u, 100, Te, Ze, ef, 1, "马贼洞")
	elseif GetItemTypeId(it) == 1227895638 then
		EnterFB(u, 300, Te, yf, zf, 2, "崆峒山")
	elseif GetItemTypeId(it) == 1227895875 then
		EnterFB(u, 1000, ag, Xf, Yf, 3, "塞北")
	elseif GetItemTypeId(it) == 1227895881 then
		EnterFB(u, 3000, Bg, Eg, Dg, 4, "绝情谷")
	elseif GetItemTypeId(it) == 1227895894 then
		EnterFB(u, 6000, Lg, Ng, Og, 5, "逍遥宫")
	elseif GetItemTypeId(it) == 1227896140 then
		EnterFB(u, 10000, Rg, Wg, Xg, 6, "黑木崖")
	end
	u = nil
	it = nil
end
function KL()
	return RectContainsUnit(of, GetTriggerUnit())
end
function LL()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(u)
	if GetRandomInt(1, 1000) <= fuyuan[i] or GetRandomInt(1, 100) <= 30 and Ce[i] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 100) >= 98 and q8[1] ~= 1668446579 then
			createitemloc(q8[1], loc)
		end
		N7 = N7 + 1
	end
	RemoveLocation(loc)
	p = nil
	u = nil
	loc = nil
end
---------副本系统结束-------//
---------各种副本开始-------//
--韦小宝赌博
function NL()
	return GetUnitTypeId(GetTriggerUnit()) == 1865429068 and DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()), GetUnitLoc(udg_hero[1 + GetPlayerId(GetTriggerPlayer())])) <= 250.0
end
function OL()
	s8 = GetTriggerPlayer()
	t8 = true
	RemoveUnit(GetTriggerUnit())
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 30, "|cFFFFCC33韦小宝想邀请你同他赌一局，你是否愿意呢？|cFF33FFFF15秒钟内操作键盘选择  \n↑：同意并将身上的钱全部下注\n←：同意并将身上50%的钱下注\n→：同意并将身上25%的钱下注\n↓：拒绝")
	YDWEPolledWaitNull(15.0)
	t8 = false
end
function QL()
	return GetTriggerPlayer() == s8 and t8
end
function RL()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	if GetRandomInt(1, 10) <= 5 then
		SetPlayerStateBJ(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(s8, PLAYER_STATE_RESOURCE_GOLD) * 2)
		DisplayTextToPlayer(p, 0, 0, "赌赢了~")
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家和韦小宝赌博赢得了大量的金钱，停怪就靠他了")
	--if Ce[i]==4 then
	--	if udg_jdds[i]<1 then
	--		set udg_jdds[i] = udg_jdds[i]+1
	--		call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您和韦小宝赌赢了"+I2S(udg_jdds[i])+"次，赌赢2次可获得鉴定大师哦")
	--	else
	--		if udg_jddsbool[i] == false then
	--			set udg_jddsbool[i] = true
	--			if udg_zhangmen[i]==true then
	--			else
	--				call SaveStr(YDHT, GetHandleId(p), GetHandleId(p),"〓鉴定大师〓"+LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	--			endif
	--			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜"+GetPlayerName(p)+"获得鉴定大师")
	--			call SetPlayerName(p, "〓鉴定大师〓"+GetPlayerName(p))
	--		endif
	--	endif
	--endif
	else
		SetPlayerStateBJ(p, PLAYER_STATE_RESOURCE_GOLD, 0)
		DisplayTextToPlayer(p, 0, 0, "赌输了！！")
		if GetRandomInt(1, 100) <= 50 or Ce[i] == 8 then
			createitemloc(1227899698, GetUnitLoc(udg_hero[i]))
		end
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家和韦小宝输得一踏糊涂，大家祈祷吧")
	end
	s8 = Player(15)
	p = nil
end
function TL()
	return GetTriggerPlayer() == s8 and t8
end
function UL()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	if GetRandomInt(1, 10) <= 7 then
		SetPlayerStateBJ(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) * 5 // 4)
		DisplayTextToPlayer(p, 0, 0, "赌赢了~")
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家和韦小宝赌博赢得了大量的金钱，停怪就靠他了")
	--if Ce[i]==4 then
	--	if udg_jdds[i]<6 then
	--		set udg_jdds[i] = udg_jdds[i]+1
	--	else
	--		if udg_jddsbool[i] == false then
	--			set udg_jddsbool[i] = true
	--			if udg_zhangmen[i]==true then
	--			else
	--				call SaveStr(YDHT, GetHandleId(p), GetHandleId(p),"〓鉴定大师〓"+LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	--			endif
	--			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜"+GetPlayerName(p)+"获得鉴定大师")
	--			call SetPlayerName(p, "〓鉴定大师〓"+GetPlayerName(p))
	--		endif
	--	endif
	--endif
	else
		SetPlayerStateBJ(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) * 3 // 4)
		DisplayTextToPlayer(p, 0, 0, "赌输了！！")
		if GetRandomInt(1, 100) <= 50 or Ce[i] == 8 then
			createitemloc(1227899698, GetUnitLoc(udg_hero[i]))
		end
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家和韦小宝输得一踏糊涂，大家祈祷吧")
	end
	s8 = Player(15)
	p = nil
end
function WL()
	return GetTriggerPlayer() == s8 and t8
end
function XL()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	if GetRandomInt(1, 10) <= 6 then
		SetPlayerStateBJ(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) * 3 // 2)
		DisplayTextToPlayer(p, 0, 0, "赌赢了~")
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家和韦小宝赌博赢得了大量的金钱，停怪就靠他了")
	--if Ce[i]==4 then
	--	if udg_jdds[i]<6 then
	--		set udg_jdds[i] = udg_jdds[i]+1
	--	else
	--		if udg_jddsbool[i] == false then
	--			set udg_jddsbool[i] = true
	--			if udg_zhangmen[i]==true then
	--			else
	--				call SaveStr(YDHT, GetHandleId(p), GetHandleId(p),"〓鉴定大师〓"+LoadStr(YDHT, GetHandleId(p), GetHandleId(p)))
	--			endif
	--			call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜"+GetPlayerName(p)+"获得鉴定大师")
	--			call SetPlayerName(p, "〓鉴定大师〓"+GetPlayerName(p))
	--		endif
	--	endif
	--endif
	else
		SetPlayerStateBJ(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) // 2)
		DisplayTextToPlayer(p, 0, 0, "赌输了！！")
		if GetRandomInt(1, 100) <= 50 or Ce[i] == 8 then
			createitemloc(1227899698, GetUnitLoc(udg_hero[i]))
		end
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家和韦小宝输得一踏糊涂，大家祈祷吧")
	end
	s8 = Player(15)
	p = nil
end
function ZL()
	return GetTriggerPlayer() == s8 and t8
end
function dM()
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFF66FF00有玩家放弃和韦小宝赌博")
	s8 = Player(15)
end
--FB2稀有掉落
function iM()
	return RectContainsUnit(xf, GetTriggerUnit())
end
function jM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 100) >= 98 and q8[2] ~= 1668446579 then
			createitemloc(q8[2], LoadLocationHandle(YDHT, id * cx, 392811314))
			if q8[2] == 1227895379 then
				SaveInteger(YDHT, id * cx, -1587459251, 0)
				SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
				SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 6))
				SaveInteger(YDHT, id * cx, -2002008616, 0)
				SaveInteger(YDHT, id * cx, -758038261, 0)
				SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 1))
				SaveInteger(YDHT, id * cx, -1313985866, 0)
				SaveInteger(YDHT, id * cx, 1141342265, 0)
				SaveInteger(YDHT, id * cx, -1872571105, 0)
				SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
			end
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--FB2奇缘NPC
function mM()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895639 -- INLINED!!
end
function nM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	RemoveUnit(r8[2])
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, -860413970, GetUnitLoc(GetTriggerUnit()))
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093677875)
	IssueImmediateOrderById(bj_lastCreatedUnit, 852164)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 3.0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
	FlushChildHashtable(YDHT, id * cx)
end
function pM()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895640 -- INLINED!!
end
function qM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	RemoveUnit(r8[2])
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, -860413970, GetUnitLoc(GetTriggerUnit()))
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093678673)
	IssueTargetOrderById(bj_lastCreatedUnit, 852066, GetTriggerUnit())
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 3.0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
	FlushChildHashtable(YDHT, id * cx)
end
--进入古墓
function sM()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function tM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if shengwang[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] >= 800 and fuyuan[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] >= 15 then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Gf))
		SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	else
		DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffff0000进入古墓条件：\n福缘15，江湖声望800")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function vM()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function wM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(If))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function yM()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function zM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Lf))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function aM()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function BM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Jf))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function CM()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function cM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Sf))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function EM()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function FM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Pf))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function HM()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function IM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Wf))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function JM()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function KM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Uf))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
--FB3稀有掉落
function PM()
	return RectContainsUnit(Nf, GetTriggerUnit())
end
function QM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 100) <= 5 and q8[3] ~= 1668446579 then
			createitemloc(q8[3], LoadLocationHandle(YDHT, id * cx, 392811314))
			if q8[3] == 1227895379 then
				SaveInteger(YDHT, id * cx, -1587459251, 0)
				SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
				SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 6))
				SaveInteger(YDHT, id * cx, -2002008616, 0)
				SaveInteger(YDHT, id * cx, -758038261, 0)
				SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 1))
				SaveInteger(YDHT, id * cx, -1313985866, 0)
				SaveInteger(YDHT, id * cx, 1141342265, 0)
				SaveInteger(YDHT, id * cx, -1872571105, 0)
				SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
			end
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--高昌迷宫
function SM()
	return GetItemTypeId(GetManipulatedItem()) == 1227895876
end
function TM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil then -- INLINED!!
		if shengwang[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] >= 2000 and fuyuan[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] >= 18 then
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(zg))
			SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
			PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffff0000进入高昌迷宫条件：\n福缘18，江湖声望2000")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00只能由主角亲自前往")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function VM()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function WM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(dg))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function YM()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function ZM()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(fg))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function eN()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function fN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(hg))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function hN()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function iN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(kg))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function kN()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function mN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(mg))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function oN()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function pN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(og))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function rN()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function sN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(rg))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function uN()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function vN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(tg))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function xN()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function yN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(vg))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function AN()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function aN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(tg))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function bN()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function CN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(vg))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
function DN()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function EN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(og))
	SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
	PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
end
--藏经阁
function GN()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895880
end
function HN()
	return GetUnitTypeId(GetFilterUnit()) == 1853059688
end
function IN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil == false then -- INLINED!!
		AdjustPlayerStateBJ(20000, Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), PLAYER_STATE_RESOURCE_GOLD)
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00只能由主角亲自前往")
	else
		if CountUnitsInGroup(wv(cg, Condition(HN))) == 0 then
			AdjustPlayerStateBJ(20000, Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), PLAYER_STATE_RESOURCE_GOLD)
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00扫地神僧目前不在藏经阁，你稍作等待再来吧")
		else
			if xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] < 3 then
				AdjustPlayerStateBJ(20000, Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), PLAYER_STATE_RESOURCE_GOLD)
				SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Bg))
				PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000你尚未完成历练3之勇闯十恶不赦岛任务")
			else
				SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Cg))
				SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
				PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFADFF2F进入藏经阁")
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
--FB4稀有掉落
function MN()
	return RectContainsUnit(Gg, GetTriggerUnit())
end
function NN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 100) >= 98 and q8[4] ~= 1668446579 then
			createitemloc(q8[4], LoadLocationHandle(YDHT, id * cx, 392811314))
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--绝情谷底买丹
function PN()
	return GetItemTypeId(GetManipulatedItem()) == 1227895885
end
function QN()
	if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil then -- INLINED!!
		unitadditembyidswapped(1227895371, GetTriggerUnit())
	else
		AdjustPlayerStateBJ(20, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
		DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10.0, "|CFFFF0000该道具只能由主角亲自购买")
	end
end
function SN()
	return GetItemTypeId(GetManipulatedItem()) == 1227895884
end
function TN()
	if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil then -- INLINED!!
		unitadditembyidswapped(1227895372, GetTriggerUnit())
	else
		AdjustPlayerStateBJ(20, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
		DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10.0, "|CFFFF0000该道具只能由主角亲自购买")
	end
end
function VN()
	return GetItemTypeId(GetManipulatedItem()) == 1227895883
end
function WN()
	if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil then -- INLINED!!
		unitadditembyidswapped(1227895374, GetTriggerUnit())
	else
		AdjustPlayerStateBJ(20, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
		DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10.0, "|CFFFF0000该道具只能由主角亲自购买")
	end
end
--绝情谷底异种
function YN()
	return GetUnitTypeId(GetTriggerUnit()) == 1852665959
end
function ZN()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetKillingUnit()))
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	u9 = u9 + 1
	if u9 >= 7 then
		u9 = 0
		if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
			MM7 = 2
		else
			MM7 = 1
		end
		N7 = 1
		for _ in _loop_() do
			if N7 > MM7 then break end
			if GetRandomInt(1, 100) <= 25 then
				createitemloc(1227895889, LoadLocationHandle(YDHT, id * cx, 392811314))
			else
				if GetRandomInt(1, 60) <= 20 then
					createitemloc(1227895887, LoadLocationHandle(YDHT, id * cx, 392811314))
				else
					if GetRandomInt(1, 50) <= 25 then
						createitemloc(1227895886, LoadLocationHandle(YDHT, id * cx, 392811314))
					else
						createitemloc(1227895888, LoadLocationHandle(YDHT, id * cx, 392811314))
					end
				end
			end
			N7 = N7 + 1
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "下次出现灵丹：" .. (I2S(u9) or "") .. " / 7")
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--进入绝情谷底
function eO()
	return GetItemTypeId(GetManipulatedItem()) == 1227895882
end
function fO()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil then -- INLINED!!
		if shengwang[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] >= 3000 and danpo[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] >= 20 then
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Ig))
			SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
			PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffff0000进入绝情谷底条件：\n胆魄20，江湖声望3000")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00只能由主角亲自前往")
	end
	FlushChildHashtable(YDHT, id * cx)
end
--FB5稀有掉落
function kO()
	return RectContainsUnit(Mg, GetTriggerUnit())
end
function mO()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 100) >= 98 and q8[5] ~= 1668446579 then
			createitemloc(q8[5], LoadLocationHandle(YDHT, id * cx, 392811314))
			SaveInteger(YDHT, id * cx, -1587459251, 0)
			SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 7))
			SaveInteger(YDHT, id * cx, -2002008616, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -758038261, GetRandomInt(1, 7))
			SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 2))
			SaveInteger(YDHT, id * cx, -1313985866, 0)
			SaveInteger(YDHT, id * cx, 1141342265, 0)
			SaveInteger(YDHT, id * cx, -1872571105, 0)
			SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--探索琅环玉洞
function oO()
	return GetItemTypeId(GetManipulatedItem()) == 1227895895
end
function pO()
	if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil then -- INLINED!!
		if GetRandomInt(1, 60) <= 35 then
			DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10.0, "|CFFFF0000经过一番探索，竟然什么都没有得到，看来你的诚意还不够哦~")
		else
			if GetRandomInt(1, 40) <= 10 then
				unitadditembyidswapped(1227895865, GetTriggerUnit())
			else
				if GetRandomInt(1, 30) <= 10 then
					unitadditembyidswapped(1227895864, GetTriggerUnit())
				else
					if GetRandomInt(1, 20) <= 10 then
						unitadditembyidswapped(1227895863, GetTriggerUnit())
					else
						unitadditembyidswapped(1227895862, GetTriggerUnit())
					end
				end
			end
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (GetPlayerName(GetOwningPlayer(GetTriggerUnit())) or "") .. "在探索琅环玉洞时，无意中竟然得到了" .. (GetItemName(bj_lastCreatedItem) or ""))
		end
	else
		AdjustPlayerStateBJ(30000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
		DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10.0, "|CFFFF0000只能有主角亲自探索")
	end
end
--梦回前朝
function rO()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896133
end
function sO()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil == false then -- INLINED!!
		AdjustPlayerStateBJ(40000, Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), PLAYER_STATE_RESOURCE_GOLD)
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00只能由主角亲自前往")
	else
		if xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] < 5 or shengwang[LoadInteger(YDHT, id * cx, -1587459251)] < 5500 then
			AdjustPlayerStateBJ(40000, Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), PLAYER_STATE_RESOURCE_GOLD)
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00条件不足")
		else
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Vg))
			SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
			PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFADFF2F回到了前朝")
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
--FB6稀有掉落
function xO()
	return RectContainsUnit(Yg, GetTriggerUnit())
end
function yO()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
	if GetRandomInt(1, 1000) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] or GetRandomInt(1, 100) <= 30 and Ce[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 6 then
		MM7 = 2
	else
		MM7 = 1
	end
	N7 = 1
	for _ in _loop_() do
		if N7 > MM7 then break end
		if GetRandomInt(1, 100) >= 98 and q8[6] ~= 1668446579 then
			createitemloc(q8[6], LoadLocationHandle(YDHT, id * cx, 392811314))
			SaveInteger(YDHT, id * cx, -1587459251, GetRandomInt(1, 4))
			SaveInteger(YDHT, id * cx, 1686469032, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -403594577, GetRandomInt(1, 8))
			SaveInteger(YDHT, id * cx, -2002008616, GetRandomInt(1, 5))
			SaveInteger(YDHT, id * cx, -758038261, GetRandomInt(1, 8))
			SaveInteger(YDHT, id * cx, 1732931645, GetRandomInt(0, 3))
			SaveInteger(YDHT, id * cx, -1313985866, 0)
			SaveInteger(YDHT, id * cx, 1141342265, 0)
			SaveInteger(YDHT, id * cx, -1872571105, 0)
			SetItemUserData(bj_lastCreatedItem, LoadInteger(YDHT, id * cx, -1587459251) * 100000000 + LoadInteger(YDHT, id * cx, 1686469032) * 10000000 + LoadInteger(YDHT, id * cx, -403594577) * 1000000 + LoadInteger(YDHT, id * cx, -2002008616) * 100000 + LoadInteger(YDHT, id * cx, -758038261) * 10000 + LoadInteger(YDHT, id * cx, 1732931645) * 1000 + LoadInteger(YDHT, id * cx, -1313985866) * 100 + LoadInteger(YDHT, id * cx, 1141342265) * 10 + LoadInteger(YDHT, id * cx, -1872571105))
		end
		N7 = N7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
	FlushChildHashtable(YDHT, id * cx)
end
--大辽国
function AO()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function aO()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	SetUnitPosition(udg_hero[i], -13000, -15500)
	PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), -13000, -15500, 0)
	DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFF00ff33传送至大辽国")
end
--聚贤山庄
function bO()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function CO()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	SetUnitPosition(udg_hero[i], -9000, -14000)
	PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), -9000, -14000, 0)
	DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|CFF00ff33传送至聚贤庄")
--call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000聚贤山庄（当前版本暂未开放此地图）")
end
--大清藏宝洞
function DO()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function EO()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	--call SetUnitPosition(udg_hero[i],2091,-13158)
	--call PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()),2091,-13158,0)
	--call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000你已进入到大清藏宝洞，看看有什么发现吧")
	DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffff0000大清藏宝洞（当前版本暂未开放此地图）")
end
--琉球岛
function GO()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function HO()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if xiuxing[i] <= 5 then
		DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00修行达到6才可以进入,你的修行不足，请前往地图指示点修行去吧")
	else
		SetUnitPosition(udg_hero[i], 10943, 6760)
		PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 10943, 6760, 0)
		DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffff0000你已深入到海外琉球岛，看看有什么发现吧")
	--call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000琉球岛（当前版本暂未开放此地图）")
	end
end
--一品居
function lO()
	return GetItemTypeId(GetManipulatedItem()) == 1227897137
end
function JO()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if xiuxing[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] <= 5 then
		AdjustPlayerStateBJ(50000, Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), PLAYER_STATE_RESOURCE_GOLD)
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00修行达到6才可以进入,你的修行不足，请前往地图指示点修行去吧")
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Zg))
		PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	else
		if UnitHaveItem(GetTriggerUnit(), 1227897138) == false then
			AdjustPlayerStateBJ(50000, Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), PLAYER_STATE_RESOURCE_GOLD)
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00需要一品居请帖才可以进入")
		else
			if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil then -- INLINED!!
				SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(vh))
				SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
				PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
				RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetTriggerUnit(), 1227897138))
			else
				AdjustPlayerStateBJ(50000, Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), PLAYER_STATE_RESOURCE_GOLD)
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00只能由主角亲自购买前往")
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
--------------------九阳真经系统----------------------------
--特殊事件：九阳真经系统
--事件1：1~30分钟内的随机时间少林藏经阁出现尹克西和潇湘子（夜间隐身）   击杀尹克西和潇湘子: 两本奇武——潇湘子的《寿木长生功》或尹克西的《黄沙万里鞭法》 全击杀事件结束
--事件2：事件1后10~25分钟内的随机时间，若尹克西和潇湘子未全死，九阳真经被二人偷走，觉远大师和张君宝去追  击杀觉远大师和张君宝：几率获得奇武《九阳真经散篇》 不击杀事件结束，少林高价卖《九阳真经残卷》
--事件3：事件2后10~25分钟内的随机时间，如果觉远大师和张君宝都被击杀，则尹克西和潇湘子逃走并将经书藏入白猿腹中，二人斗殴而死   击杀白猿——得到伴侣白猿 事件结束
--事件4：事件3后20~50分钟内的随机时， 若白猿存活，发生曾阿牛剖腹取书事件，白猿死亡，FB BOSS 替换为曾阿牛——此后可以重复刷新，击杀后获得《九阳真经残卷》
--尹克西和潇湘子在藏经阁偷取九阳神功
--尹克西坐标：6100,-1900
--潇湘子坐标：6100,-2500
--偷书成功
function stealSuccess()
	local ykx = LoadUnitHandle(YDHT, GetHandleId(jiuyangTimer1), 0)
	local xxz = LoadUnitHandle(YDHT, GetHandleId(jiuyangTimer1), 1)
	if IsUnitAliveBJ(ykx) or IsUnitAliveBJ(xxz) then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：潇湘子和尹克西将九阳真经从少林寺藏经阁中窃出，震惊武林！！少林寺已派出觉远和张君宝缉拿潇湘子和尹克西！")
		ExecuteFunc("seekStealers")
	else
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：由于潇湘子和尹克西被江湖英雄击杀，九阳真经未从少林寺藏经阁中窃出！")
	end
	RemoveUnit(ykx)
	RemoveUnit(xxz)
	DestroyQuest(defeatStealer)
	PauseTimer(jiuyangTimer1)
	DestroyTimer(jiuyangTimer1)
	DestroyTimerDialog(jiuyangTimerDialog1)
end
function stealJiuYang()
	local ykx = nil
	local xxz = nil
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：小道消息称潇湘子和尹克西潜入少林寺藏经阁窃取九阳神功秘籍，目前还无法证实消息的真实性")
	defeatStealer = CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "击杀潇湘子和尹克西", "传闻潇湘子和尹克西正在少林寺藏经阁窃取九阳真经，目前尚不知真实性如何。少侠们可以前往藏经阁一探究竟。（提示：不一定要击杀潇湘子和尹克西）", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	--尹克西
	CreateNUnitsAtLoc(1, 1852993383, Player(12), Location(6100, -1900), bj_UNIT_FACING)
	ykx = bj_lastCreatedUnit
	--潇湘子
	CreateNUnitsAtLoc(1, 1851941230, Player(12), Location(6100, -2500), bj_UNIT_FACING)
	xxz = bj_lastCreatedUnit
	jiuyangTimer1 = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(jiuyangTimer1), 0, ykx)
	SaveUnitHandle(YDHT, GetHandleId(jiuyangTimer1), 1, xxz)
	TimerStart(jiuyangTimer1, GetRandomInt(600, 1500), false, stealSuccess)
	--call TimerStart(jiuyangTimer1, 60,false, function stealSuccess)
	jiuyangTimerDialog1 = createTimerDialog(jiuyangTimer1, "二杰盗经书")
end
--击杀尹克西和潇湘子后几率获得奇武：潇湘子的《寿木长生功》或尹克西的《黄沙万里鞭法》，江湖声望+1000
function isKillStealer()
	return GetUnitTypeId(GetTriggerUnit()) == 1852993383 or GetUnitTypeId(GetTriggerUnit()) == 1851941230
end
function killStealer()
	dropItem(GetKillingUnit(), 1227899732, 1227899733, 50)
end
--随后张无忌将经书从白猿腹中取出，白猿死亡，副本7BOSS变为张无忌，击杀后得到《九阳真经残卷》
function baiYuanDeath()
	if IsUnitAliveBJ(gg_unit_n00M_0131) then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：传闻有一名叫曾阿牛的武林新秀从百年古猿腹中得到了《九阳神功残卷》！")
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：百年古猿死去，曾阿牛出现在地图上！")
		RemoveUnit(gg_unit_n00M_0131)
		ShowUnit(gg_unit_n00N_0132, true)
	end
	PauseTimer(jiuyangTimer3)
	DestroyTimer(jiuyangTimer3)
	DestroyTimerDialog(jiuyangTimerDialog3)
end
--不击杀尹克西和潇湘子的话二人将经书偷走，觉远大师和张君宝去追经书，若不打败觉远大师和张君宝，经书将被二人追回，经书重回少林寺藏经阁中
function seekSuccess()
	local jyds = LoadUnitHandle(YDHT, GetHandleId(jiuyangTimer1), 0)
	local zjb = LoadUnitHandle(YDHT, GetHandleId(jiuyangTimer1), 1)
	local i = GetRandomInt(1200, 3000)
	if IsUnitAliveBJ(jyds) or IsUnitAliveBJ(zjb) then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：觉远和张君宝已成功缉拿潇湘子和尹克西并夺回九阳真经，九阳真经现已归还藏经阁！")
	else
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：觉远和张君宝被不知名江湖人士打败，潇湘子和尹克西逃跑！")
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：潇湘子和尹克西互殴而死，九阳真经不知所终！传闻潇湘子和尹克西将窃走的九阳真经藏入白猿腹中！")
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00江湖小报：白猿在地图上出现！！！")
		ShowUnit(gg_unit_n00M_0131, true)
		jiuyangTimer3 = CreateTimer()
		TimerStart(jiuyangTimer3, i, false, baiYuanDeath)
		jiuyangTimerDialog3 = createTimerDialog(jiuyangTimer3, "曾阿牛取腹中书")
	end
	PauseTimer(jiuyangTimer2)
	DestroyTimer(jiuyangTimer2)
	DestroyTimerDialog(jiuyangTimerDialog2)
	RemoveUnit(jyds)
	RemoveUnit(zjb)
	DestroyQuest(defeatSeeker)
end
--觉远大师坐标：-1000 -14300
--张君宝坐标：-1000 -13300
--尹克西坐标：-2000 -14300 中立无敌NPC
--潇湘子坐标：-2000 -13300 中立无敌NPC
function seekStealers()
	local ykx = nil
	local xxz = nil
	local jyds = nil
	local zjb = nil
	local i = GetRandomInt(600, 1500)
	CreateNUnitsAtLoc(1, 1852993383, Player(12), Location(-2000, -14300), bj_UNIT_FACING)
	ykx = bj_lastCreatedUnit
	CreateNUnitsAtLoc(1, 1851941230, Player(12), Location(-2000, -13300), bj_UNIT_FACING)
	xxz = bj_lastCreatedUnit
	CreateNUnitsAtLoc(1, 1848651851, Player(12), Location(-1000, -14300), bj_UNIT_FACING)
	jyds = bj_lastCreatedUnit
	CreateNUnitsAtLoc(1, 1848651852, Player(12), Location(-1000, -13300), bj_UNIT_FACING)
	zjb = bj_lastCreatedUnit
	UnitAddAbility(ykx, 1098282348)
	UnitAddAbility(xxz, 1098282348)
	defeatSeeker = CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "打败觉远大师和张君宝", "传闻潇湘子和尹克西已将九阳真经从少林寺藏经阁窃出，觉远大师和张君宝正在追赶。少侠们对九阳真经感兴趣吗？（提示：可以打败觉远大师和张君宝帮助潇湘子和尹克西逃跑，否则九阳真经将被追回藏经阁）", "ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
	jiuyangTimer2 = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(jiuyangTimer2), 0, jyds)
	SaveUnitHandle(YDHT, GetHandleId(jiuyangTimer2), 1, zjb)
	TimerStart(jiuyangTimer2, GetRandomInt(600, 1500), false, seekSuccess)
	--call TimerStart(jiuyangTimer2, 60,false, function seekSuccess)
	jiuyangTimerDialog2 = createTimerDialog(jiuyangTimer2, "追回经书")
end
--若打败觉远大师和张君宝，可几率获得奇武《九阳真经散篇》，江湖声望-1000
function isKillSeeker()
	return GetUnitTypeId(GetTriggerUnit()) == 1848651851 or GetUnitTypeId(GetTriggerUnit()) == 1848651852
end
function killSeeker()
	--击杀者声望-500
	shengwang[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] = IMaxBJ(0, shengwang[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] - 500)
	dropItem(GetKillingUnit(), 1227899734, 0, 50)
end
--并且在地图上出现副本7——白猿，击杀后得到伴侣——白猿
function isKillBaiYuan()
	return GetUnitTypeId(GetTriggerUnit()) == 1848651853
end
function killBaiYuan()
	dropItem(GetKillingUnit(), 1227899731, 0, 100)
end
--击杀曾阿牛后得到九阳残卷
function isKillANiu()
	return GetUnitTypeId(GetTriggerUnit()) == 1848651854
end
function killANiu()
	dropItem(GetKillingUnit(), 1227899735, 1227896918, 50)
end
--------------------九阳真经系统结束----------------------------
---------各种副本结束-------//
function Instances_Trigger()
	local t = CreateTrigger()
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(WI))
	TriggerAddAction(t, XI)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(ZI))
	TriggerAddAction(t, dl)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(fl))
	TriggerAddAction(t, gl)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(il))
	TriggerAddAction(t, jl)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(al))
	TriggerAddAction(t, Bl)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(cl))
	TriggerAddAction(t, KillTangWenLiang)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(Fl))
	TriggerAddAction(t, Gl)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(Il))
	TriggerAddAction(t, ll)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(Kl))
	TriggerAddAction(t, Ll)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(Nl))
	TriggerAddAction(t, Ol)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(Ql))
	TriggerAddAction(t, Rl)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(Tl))
	TriggerAddAction(t, Ul)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(Wl))
	TriggerAddAction(t, Xl)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(Zl))
	TriggerAddAction(t, dd1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(f1))
	TriggerAddAction(t, g1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(i1))
	TriggerAddAction(t, j1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(m1))
	TriggerAddAction(t, nn1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(p1))
	TriggerAddAction(t, q1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(t1))
	TriggerAddAction(t, u1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(ww1))
	TriggerAddAction(t, z1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(a1))
	TriggerAddAction(t, B1)
	t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 500.0)
	TriggerAddAction(t, C1)
	t = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(t, Player(12), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(D1))
	TriggerAddAction(t, E1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(G1))
	TriggerAddAction(t, H1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(l1))
	TriggerAddAction(t, J1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(L1))
	TriggerAddAction(t, MM1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(O1))
	TriggerAddAction(t, P1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(R1))
	TriggerAddAction(t, S1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(U1))
	TriggerAddAction(t, V1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(X1))
	TriggerAddAction(t, Y1)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(dJ))
	TriggerAddAction(t, eJ)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(gJ))
	TriggerAddAction(t, hJ)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(jJ))
	TriggerAddAction(t, kJ)
	Ao = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Ao, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Ao, Condition(nJ))
	TriggerAddAction(Ao, oJ)
	ao = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(ao, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(ao, Condition(qJ))
	TriggerAddAction(ao, rJ)
	Bo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Bo, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Bo, Condition(tJ))
	TriggerAddAction(Bo, uJ)
	bo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(bo, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(bo, Condition(wJ))
	TriggerAddAction(bo, xJ)
	Co = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Co, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Co, Condition(zJ))
	TriggerAddAction(Co, AJ)
	co = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(co, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(co, Condition(BJ))
	TriggerAddAction(co, bJ)
	Do = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Do, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Do, Condition(cJ))
	TriggerAddAction(Do, DJ)
	Do = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Do, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Do, Condition(IsAiRen))
	TriggerAddAction(Do, KillAiRen)
	Eo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Eo, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Eo, Condition(FJ))
	TriggerAddAction(Eo, GJ)
	Wo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Wo, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Wo, Condition(JK))
	TriggerAddAction(Wo, KK)
	sp = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(sp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(sp, Condition(IL))
	TriggerAddAction(sp, lL)
	tp = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(tp, Player(12), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(tp, Condition(KL))
	TriggerAddAction(tp, LL)
	vp = CreateTrigger()
	TriggerRegisterPlayerSelectionEventBJ(vp, Player(0), true)
	TriggerRegisterPlayerSelectionEventBJ(vp, Player(1), true)
	TriggerRegisterPlayerSelectionEventBJ(vp, Player(2), true)
	TriggerRegisterPlayerSelectionEventBJ(vp, Player(3), true)
	TriggerRegisterPlayerSelectionEventBJ(vp, Player(4), true)
	TriggerRegisterPlayerSelectionEventBJ(vp, Player(5), true)
	TriggerAddCondition(vp, Condition(NL))
	TriggerAddAction(vp, OL)
	wp = CreateTrigger()
	TriggerRegisterPlayerKeyEventBJ(wp, Player(0), 0, 3)
	TriggerRegisterPlayerKeyEventBJ(wp, Player(1), 0, 3)
	TriggerRegisterPlayerKeyEventBJ(wp, Player(2), 0, 3)
	TriggerRegisterPlayerKeyEventBJ(wp, Player(3), 0, 3)
	TriggerRegisterPlayerKeyEventBJ(wp, Player(4), 0, 3)
	TriggerRegisterPlayerKeyEventBJ(wp, Player(5), 0, 3)
	TriggerAddCondition(wp, Condition(QL))
	TriggerAddAction(wp, RL)
	xp = CreateTrigger()
	TriggerRegisterPlayerKeyEventBJ(xp, Player(0), 0, 0)
	TriggerRegisterPlayerKeyEventBJ(xp, Player(1), 0, 0)
	TriggerRegisterPlayerKeyEventBJ(xp, Player(2), 0, 0)
	TriggerRegisterPlayerKeyEventBJ(xp, Player(3), 0, 0)
	TriggerRegisterPlayerKeyEventBJ(xp, Player(4), 0, 0)
	TriggerRegisterPlayerKeyEventBJ(xp, Player(5), 0, 0)
	TriggerAddCondition(xp, Condition(TL))
	TriggerAddAction(xp, UL)
	yp = CreateTrigger()
	TriggerRegisterPlayerKeyEventBJ(yp, Player(0), 0, 1)
	TriggerRegisterPlayerKeyEventBJ(yp, Player(1), 0, 1)
	TriggerRegisterPlayerKeyEventBJ(yp, Player(2), 0, 1)
	TriggerRegisterPlayerKeyEventBJ(yp, Player(3), 0, 1)
	TriggerRegisterPlayerKeyEventBJ(yp, Player(4), 0, 1)
	TriggerRegisterPlayerKeyEventBJ(yp, Player(5), 0, 1)
	TriggerAddCondition(yp, Condition(WL))
	TriggerAddAction(yp, XL)
	zp = CreateTrigger()
	TriggerRegisterPlayerKeyEventBJ(zp, Player(0), 0, 2)
	TriggerRegisterPlayerKeyEventBJ(zp, Player(1), 0, 2)
	TriggerRegisterPlayerKeyEventBJ(zp, Player(2), 0, 2)
	TriggerRegisterPlayerKeyEventBJ(zp, Player(3), 0, 2)
	TriggerRegisterPlayerKeyEventBJ(zp, Player(4), 0, 2)
	TriggerRegisterPlayerKeyEventBJ(zp, Player(5), 0, 2)
	TriggerAddCondition(zp, Condition(ZL))
	TriggerAddAction(zp, dM)
	ap = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(ap, Player(12), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(ap, Condition(iM))
	TriggerAddAction(ap, jM)
	Bp = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Bp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Bp, Condition(mM))
	TriggerAddAction(Bp, nM)
	bp = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(bp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(bp, Condition(pM))
	TriggerAddAction(bp, qM)
	Cp = CreateTrigger()
	TriggerAddRect(Cp, Ff)
	TriggerAddCondition(Cp, Condition(sM))
	TriggerAddAction(Cp, tM)
	cp = CreateTrigger()
	TriggerAddRect(cp, Hf)
	TriggerAddCondition(cp, Condition(vM))
	TriggerAddAction(cp, wM)
	Dp = CreateTrigger()
	TriggerAddRect(Dp, lf)
	TriggerAddCondition(Dp, Condition(yM))
	TriggerAddAction(Dp, zM)
	Ep = CreateTrigger()
	TriggerAddRect(Ep, Kf)
	TriggerAddCondition(Ep, Condition(aM))
	TriggerAddAction(Ep, BM)
	Fp = CreateTrigger()
	TriggerAddRect(Fp, Of)
	TriggerAddCondition(Fp, Condition(CM))
	TriggerAddAction(Fp, cM)
	Gp = CreateTrigger()
	TriggerAddRect(Gp, Qf)
	TriggerAddCondition(Gp, Condition(EM))
	TriggerAddAction(Gp, FM)
	Hp = CreateTrigger()
	TriggerAddRect(Hp, Tf)
	TriggerAddCondition(Hp, Condition(HM))
	TriggerAddAction(Hp, IM)
	Ip = CreateTrigger()
	TriggerAddRect(Ip, Vf)
	TriggerAddCondition(Ip, Condition(JM))
	TriggerAddAction(Ip, KM)
	Jp = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(Jp, Player(12), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Jp, Condition(PM))
	TriggerAddAction(Jp, QM)
	Kp = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Kp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Kp, Condition(SM))
	TriggerAddAction(Kp, TM)
	Lp = CreateTrigger()
	TriggerAddRect(Lp, eg)
	TriggerAddCondition(Lp, Condition(VM))
	TriggerAddAction(Lp, WM)
	Mp = CreateTrigger()
	TriggerAddRect(Mp, gg)
	TriggerAddCondition(Mp, Condition(YM))
	TriggerAddAction(Mp, ZM)
	Np = CreateTrigger()
	TriggerAddRect(Np, ig)
	TriggerAddCondition(Np, Condition(eN))
	TriggerAddAction(Np, fN)
	Op = CreateTrigger()
	TriggerAddRect(Op, jg)
	TriggerAddCondition(Op, Condition(hN))
	TriggerAddAction(Op, iN)
	Pp = CreateTrigger()
	TriggerAddRect(Pp, ng)
	TriggerAddCondition(Pp, Condition(kN))
	TriggerAddAction(Pp, mN)
	Qp = CreateTrigger()
	TriggerAddRect(Qp, pg)
	TriggerAddCondition(Qp, Condition(oN))
	TriggerAddAction(Qp, pN)
	Rp = CreateTrigger()
	TriggerAddRect(Rp, qg)
	TriggerAddCondition(Rp, Condition(rN))
	TriggerAddAction(Rp, sN)
	Sp = CreateTrigger()
	TriggerAddRect(Sp, sg)
	TriggerAddCondition(Sp, Condition(uN))
	TriggerAddAction(Sp, vN)
	Tp = CreateTrigger()
	TriggerAddRect(Tp, ug)
	TriggerAddCondition(Tp, Condition(xN))
	TriggerAddAction(Tp, yN)
	Up = CreateTrigger()
	TriggerAddRect(Up, wg)
	TriggerAddCondition(Up, Condition(AN))
	TriggerAddAction(Up, aN)
	Vp = CreateTrigger()
	TriggerAddRect(Vp, xg)
	TriggerAddCondition(Vp, Condition(bN))
	TriggerAddAction(Vp, CN)
	Wp = CreateTrigger()
	TriggerAddRect(Wp, yg)
	TriggerAddCondition(Wp, Condition(DN))
	TriggerAddAction(Wp, EN)
	Xp = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Xp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Xp, Condition(GN))
	TriggerAddAction(Xp, IN)
	Zp = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(Zp, Player(12), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Zp, Condition(MN))
	TriggerAddAction(Zp, NN)
	dq = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(dq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(dq, Condition(PN))
	TriggerAddAction(dq, QN)
	eq = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(eq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(eq, Condition(SN))
	TriggerAddAction(eq, TN)
	fq = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(fq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(fq, Condition(VN))
	TriggerAddAction(fq, WN)
	gq = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(gq, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(gq, Condition(YN))
	TriggerAddAction(gq, ZN)
	hq = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(hq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(hq, Condition(eO))
	TriggerAddAction(hq, fO)
	jq = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(jq, Player(12), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(jq, Condition(kO))
	TriggerAddAction(jq, mO)
	kq = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(kq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(kq, Condition(oO))
	TriggerAddAction(kq, pO)
	mq = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(mq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(mq, Condition(rO))
	TriggerAddAction(mq, sO)
	oq = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(oq, Player(12), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(oq, Condition(xO))
	TriggerAddAction(oq, yO)
	pq = CreateTrigger()
	TriggerAddRect(pq, gh)
	TriggerAddCondition(pq, Condition(AO))
	TriggerAddAction(pq, aO)
	qq = CreateTrigger()
	TriggerAddRect(qq, fh)
	TriggerAddCondition(qq, Condition(bO))
	TriggerAddAction(qq, CO)
	rq = CreateTrigger()
	TriggerAddRect(rq, jh)
	TriggerAddCondition(rq, Condition(DO))
	TriggerAddAction(rq, EO)
	sq = CreateTrigger()
	TriggerAddRect(sq, udg_liuqiu)
	TriggerAddCondition(sq, Condition(GO))
	TriggerAddAction(sq, HO)
	tq = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(tq, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(tq, Condition(lO))
	TriggerAddAction(tq, JO)
	-- //特殊事件：潇湘子和尹克西到藏经阁盗取九阳神功经书
	-- set t = CreateTrigger()
	-- call TriggerRegisterTimerEventSingle(t, GetRandomInt(60, 1800))
	-- //call TriggerRegisterTimerEventSingle(t, 10)
	-- call TriggerAddAction(t, function stealJiuYang)
	-- //击杀潇湘子和尹克西，获得奇武，事件结束
	-- set t=CreateTrigger()
	-- call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)
	-- call TriggerAddCondition(t,Condition(function isKillStealer))
	-- call TriggerAddAction(t,function killStealer)
	-- //击杀觉远大师和张君宝，获得奇武，事件结束
	-- set t=CreateTrigger()
	-- call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)
	-- call TriggerAddCondition(t,Condition(function isKillSeeker))
	-- call TriggerAddAction(t,function killSeeker)
	-- //击杀白猿，获得伴侣白猿
	-- set t=CreateTrigger()
	-- call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)
	-- call TriggerAddCondition(t,Condition(function isKillBaiYuan))
	-- call TriggerAddAction(t,function killBaiYuan)
	-- //击杀曾阿牛，获得九阳残卷
	-- set t=CreateTrigger()
	-- call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)
	-- call TriggerAddCondition(t,Condition(function isKillANiu))
	-- call TriggerAddAction(t,function killANiu)
	t = nil
end
--大战江南七怪
function XQ()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895630 -- INLINED!!
end
function YQ()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = GetRectCenter(tf)
	if GetUnitLevel(u) < 10 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足10级无法接取该任务")
	else
		if shengwang[i] < 500 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足500无法接取该任务")
		else
			if xiuxing[i] >= 1 then
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000你已经完成这个任务了")
			else
				if J8[i] == 0 then
					J8[i] = 1
					PlaySoundOnUnitBJ(bh, 100, u)
					DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00丘处机：|r |cFF99FFCC请前往挑战|r|cFFADFF2F江南七怪|r\n")
					PingMinimapLocForForce(ov(p), loc, 5.0)
					RemoveLocation(loc)
				else
					DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00丘处机：|r |cFF99FFCC请前往挑战|r|cFFADFF2F江南七怪|r\n")
				end
			end
		end
	end
	u = nil
	p = nil
	loc = nil
end
function dR()
	return J8[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 1 and (GetUnitTypeId(GetTriggerUnit()) == 1870094706 or GetUnitTypeId(GetTriggerUnit()) == 1853305463 or GetUnitTypeId(GetTriggerUnit()) == 1869116782 or GetUnitTypeId(GetTriggerUnit()) == 1869636975 or GetUnitTypeId(GetTriggerUnit()) == 1852794733 or GetUnitTypeId(GetTriggerUnit()) == 1752395634 or GetUnitTypeId(GetTriggerUnit()) == 1853123444)
end
function eR()
	local u = GetKillingUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetUnitTypeId(GetTriggerUnit()) == 1870094706 then
		LLguaiA[i] = 1
	end
	if GetUnitTypeId(GetTriggerUnit()) == 1853305463 then
		LLguaiG[i] = 1
		if Ce[i] == 8 then
			if GetRandomReal(1, 100) <= 40.0 then
				createitemloc(1227899702, GetUnitLoc(u))
			end
		else
			if GetRandomReal(1, 100) <= 20.0 then
				createitemloc(1227899702, GetUnitLoc(u))
			end
		end
	end
	if GetUnitTypeId(GetTriggerUnit()) == 1869116782 then
		LLguaiB[i] = 1
	end
	if GetUnitTypeId(GetTriggerUnit()) == 1869636975 then
		LLguaiC[i] = 1
	end
	if GetUnitTypeId(GetTriggerUnit()) == 1852794733 then
		LLguaiD[i] = 1
	end
	if GetUnitTypeId(GetTriggerUnit()) == 1752395634 then
		LLguaiE[i] = 1
	end
	if GetUnitTypeId(GetTriggerUnit()) == 1853123444 then
		LLguaiF[i] = 1
	end
	if LLguaiA[i] == 1 and LLguaiB[i] == 1 and LLguaiC[i] == 1 and LLguaiD[i] == 1 and LLguaiE[i] == 1 and LLguaiF[i] == 1 and LLguaiG[i] == 1 then
		--set shengwang[i]=shengwang[i]+350
		xiuxing[i] = 1
		if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
			SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 2)
			SetUnitAcquireRange(GetKillingUnit(), 700)
		end
		udg_lilianxishu[i] = 1.7
		danpo[i] = danpo[i] + 1
		gengu[i] = gengu[i] + 1
		fuyuan[i] = fuyuan[i] + 1
		jingmai[i] = jingmai[i] + 1
		wuxing[i] = wuxing[i] + 1
		yishu[i] = yishu[i] + 1
		J8[i] = 2
		PlaySoundOnUnitBJ(Hh, 100, u)
		unitadditembyidswapped(1227895371, u)
		DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务大战江南七怪，修行+1，全性格属性+1，奖励乾坤丹一个")
		if GetRandomInt(1, 30) <= fuyuan[i] - 5 then
			unitadditembyidswapped(gudong[GetRandomInt(1, 3)], u)
			DisplayTextToPlayer(p, 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
		end
	else
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00韩小莹：" .. (I2S(LLguaiE[i]) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00全金发：" .. (I2S(LLguaiC[i]) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00张阿生：" .. (I2S(LLguaiF[i]) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00南希仁：" .. (I2S(LLguaiB[i]) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00韩宝驹：" .. (I2S(LLguaiD[i]) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00朱聪：" .. (I2S(LLguaiG[i]) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00柯镇恶：" .. (I2S(LLguaiA[i]) or "") .. " / 1")
	end
	u = nil
	p = nil
end
--十八罗汉阵
function gR()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895641 -- INLINED!!
end
function hR()
	return GetUnitTypeId(GetFilterUnit()) == 1852862003
end
function iR()
	RemoveUnit(GetEnumUnit())
end
function jR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if GetUnitLevel(LoadUnitHandle(YDHT, id * cx, -784714656)) < 25 then
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000等级不足25级无法接取该任务")
	else
		if shengwang[LoadInteger(YDHT, id * cx, -1587459251)] < 1800 then
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000江湖声望不足1800无法接取该任务")
		else
			if xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] < 1 then
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000你必须先完成历练1任务")
				SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Te))
				PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
			else
				if xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] >= 2 then
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000你已经完成这个任务了")
				else
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Mf))
					ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(1200.0, LoadLocationHandle(YDHT, id * cx, 1585647951), Condition(hR)), iR)
					SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
					PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00戒律主持：|r |cFF99FFCC想证明自己的能力就要通关少林|r|cFFADFF2F十八罗汉阵")
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					TriggerSleepAction(2)
					SaveInteger(YDHT, id, -320330265, cx)
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					TriggerSleepAction(4.0)
					SaveInteger(YDHT, id, -320330265, cx)
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					TriggerSleepAction(6.0)
					SaveInteger(YDHT, id, -320330265, cx)
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRandomLocInRect(Mf))
					CreateNUnitsAtLoc(1, 1852862003, Player(12), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
				end
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
function mR()
	return GetUnitTypeId(GetTriggerUnit()) == 1852862003 and xiuxing[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 1
end
function nR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	N8[LoadInteger(YDHT, id * cx, -1587459251)] = N8[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	if N8[LoadInteger(YDHT, id * cx, -1587459251)] >= 18 then
		xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] = 2
		if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
			SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 3)
			SetUnitAcquireRange(GetKillingUnit(), 800)
		end
		udg_lilianxishu[LoadInteger(YDHT, id * cx, -1587459251)] = 2.6
		danpo[LoadInteger(YDHT, id * cx, -1587459251)] = danpo[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		gengu[LoadInteger(YDHT, id * cx, -1587459251)] = gengu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] = fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		jingmai[LoadInteger(YDHT, id * cx, -1587459251)] = jingmai[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		wuxing[LoadInteger(YDHT, id * cx, -1587459251)] = wuxing[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		yishu[LoadInteger(YDHT, id * cx, -1587459251)] = yishu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
		if udg_runamen[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] ~= 11 then
			unitadditembyidswapped(1227895642, GetKillingUnit())
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务十八罗汉阵，获得修行+1，全性格属性+1，门派毕业卷")
		else
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务十八罗汉阵，获得修行+1，全性格属性+1")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "十八罗汉：" .. (I2S(N8[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 18")
	end
	FlushChildHashtable(YDHT, id * cx)
end
--十恶不赦
function sR()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895879 -- INLINED!!
end
function tR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if GetUnitLevel(LoadUnitHandle(YDHT, id * cx, -784714656)) < 40 then
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000等级不足40级无法接取该任务")
	else
		if shengwang[LoadInteger(YDHT, id * cx, -1587459251)] < 3200 then
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000江湖声望不足3200无法接取该任务")
		else
			if xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] < 2 then
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000你必须先完成历练2任务")
				SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(ag))
				PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
			else
				if xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] >= 3 then
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000你已经完成这个任务了")
				else
					if h9[LoadInteger(YDHT, id * cx, -1587459251)] then
						SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Ag))
						SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
						PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00黄蓉：|r|cFFADFF2F十恶不赦 |r|cFF99FFCC危害武林江湖多年，你须在|r|cFFADFF2F2分钟内|r|cFF99FFCC击杀超过100只，才能完成任务")
						RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					else
						SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Ag))
						SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
						PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00黄蓉：|r|cFFADFF2F十恶不赦 |r|cFF99FFCC危害武林江湖多年，你须在|r|cFFADFF2F150秒内|r|cFF99FFCC击杀超过100只，才能完成任务")
						RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
						StartTimerBJ(f9[LoadInteger(YDHT, id * cx, -1587459251)], false, 150.0)
						CreateTimerDialogBJ(bj_lastStartedTimer, "闯关倒计时:")
						TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, GetOwningPlayer(GetTriggerUnit()))
						g9[LoadInteger(YDHT, id * cx, -1587459251)] = bj_lastCreatedTimerDialog
						h9[LoadInteger(YDHT, id * cx, -1587459251)] = true
						i9[LoadInteger(YDHT, id * cx, -1587459251)] = 0
					end
				end
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
function vR()
	return GetUnitTypeId(GetTriggerUnit()) == 1852077154 and h9[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function wR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	i9[LoadInteger(YDHT, id * cx, -1587459251)] = i9[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	if i9[LoadInteger(YDHT, id * cx, -1587459251)] >= 100 then
		PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
		xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] = 3
		if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
			SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 4)
			SetUnitAcquireRange(GetKillingUnit(), 900)
		end
		udg_lilianxishu[LoadInteger(YDHT, id * cx, -1587459251)] = 4.2
		danpo[LoadInteger(YDHT, id * cx, -1587459251)] = danpo[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		gengu[LoadInteger(YDHT, id * cx, -1587459251)] = gengu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] = fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		jingmai[LoadInteger(YDHT, id * cx, -1587459251)] = jingmai[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		wuxing[LoadInteger(YDHT, id * cx, -1587459251)] = wuxing[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		yishu[LoadInteger(YDHT, id * cx, -1587459251)] = yishu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		h9[LoadInteger(YDHT, id * cx, -1587459251)] = false
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务勇闯十恶不赦岛，获得修行+1，全性格属性+1，脱胎换骨丹1个，你可以前往藏经阁了")
		DestroyTimerDialog(g9[LoadInteger(YDHT, id * cx, -1587459251)])
		DestroyTimer(f9[LoadInteger(YDHT, id * cx, -1587459251)])
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Bg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1587459251)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		unitadditembyidswapped(1227895374, GetKillingUnit())
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "十恶不赦：" .. (I2S(i9[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 100")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function yR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 1)
	DestroyTimerDialog(g9[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(bg, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Bg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	h9[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
function AR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 2)
	DestroyTimerDialog(g9[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(bg, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Bg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	h9[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
function BR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 3)
	DestroyTimerDialog(g9[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(bg, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Bg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	h9[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
function CR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 4)
	DestroyTimerDialog(g9[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(bg, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Bg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	h9[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
function DR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 5)
	DestroyTimerDialog(g9[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(bg, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Bg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	h9[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
--挑战光明顶
function FR()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895893 -- INLINED!!
end
function GR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if GetUnitLevel(LoadUnitHandle(YDHT, id * cx, -784714656)) < 55 then
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000等级不足55级无法接取该任务")
	else
		if shengwang[LoadInteger(YDHT, id * cx, -1587459251)] < 5500 then
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000江湖声望不足5500无法接取该任务")
		else
			if xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] < 3 then
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000你必须先完成历练3任务")
				SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Bg))
				PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
			else
				if xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] >= 4 then
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000你已经完成这个任务了")
				else
					if T9[LoadInteger(YDHT, id * cx, -1587459251)] then
						SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Jg))
						SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
						PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00紫杉龙王：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00青翼蝠王：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00金毛狮王：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00白眉鹰王：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00阳顶天：" .. (I2S(LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
						RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					else
						SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Jg))
						SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
						PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
						RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
						LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] = 0
						LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] = 0
						LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] = 0
						LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] = 0
						LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)] = 0
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00紫杉龙王：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00青翼蝠王：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00金毛狮王：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00白眉鹰王：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00阳顶天：" .. (I2S(LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
						StartTimerBJ(Z9[LoadInteger(YDHT, id * cx, -1587459251)], false, 240.0)
						CreateTimerDialogBJ(bj_lastStartedTimer, "攻打光明顶倒计时:")
						TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, GetOwningPlayer(GetTriggerUnit()))
						dd[LoadInteger(YDHT, id * cx, -1587459251)] = bj_lastCreatedTimerDialog
						T9[LoadInteger(YDHT, id * cx, -1587459251)] = true
					end
				end
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
function IR()
	return GetUnitTypeId(GetTriggerUnit()) == 1853056884 and T9[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function lR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	if LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] == 0 then
		LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] = 1
		if LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] = 4
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 5)
				SetUnitAcquireRange(GetKillingUnit(), 1000)
			end
			udg_lilianxishu[LoadInteger(YDHT, id * cx, -1587459251)] = 7.0
			T9[LoadInteger(YDHT, id * cx, -1587459251)] = false
			danpo[LoadInteger(YDHT, id * cx, -1587459251)] = danpo[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			gengu[LoadInteger(YDHT, id * cx, -1587459251)] = gengu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] = fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			jingmai[LoadInteger(YDHT, id * cx, -1587459251)] = jingmai[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			wuxing[LoadInteger(YDHT, id * cx, -1587459251)] = wuxing[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			yishu[LoadInteger(YDHT, id * cx, -1587459251)] = yishu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务勇闯光明顶，获得修行+1，全性格属性+1，你可以前往逍遥宫了")
			DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, -1587459251)])
			DestroyTimer(Z9[LoadInteger(YDHT, id * cx, -1587459251)])
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Lg))
			SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1587459251)], LoadLocationHandle(YDHT, id * cx, 1585647951))
			PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00紫杉龙王：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00青翼蝠王：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00金毛狮王：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00白眉鹰王：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00阳顶天：" .. (I2S(LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00紫杉龙王：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00青翼蝠王：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00金毛狮王：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00白眉鹰王：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00阳顶天：" .. (I2S(LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function KR()
	return GetUnitTypeId(GetTriggerUnit()) == 1853056866 and T9[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function LR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	if LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] == 0 then
		LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] = 1
		if LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] = 4
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 5)
				SetUnitAcquireRange(GetKillingUnit(), 1000)
			end
			udg_lilianxishu[LoadInteger(YDHT, id * cx, -1587459251)] = 7.0
			T9[LoadInteger(YDHT, id * cx, -1587459251)] = false
			danpo[LoadInteger(YDHT, id * cx, -1587459251)] = danpo[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			gengu[LoadInteger(YDHT, id * cx, -1587459251)] = gengu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] = fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			jingmai[LoadInteger(YDHT, id * cx, -1587459251)] = jingmai[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			wuxing[LoadInteger(YDHT, id * cx, -1587459251)] = wuxing[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			yishu[LoadInteger(YDHT, id * cx, -1587459251)] = yishu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务勇闯光明顶，获得修行+1，全性格属性+1，你可以前往逍遥宫了")
			DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, -1587459251)])
			DestroyTimer(Z9[LoadInteger(YDHT, id * cx, -1587459251)])
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Lg))
			SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1587459251)], LoadLocationHandle(YDHT, id * cx, 1585647951))
			PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00紫杉龙王：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00青翼蝠王：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00金毛狮王：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00白眉鹰王：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00阳顶天：" .. (I2S(LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00紫杉龙王：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00青翼蝠王：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00金毛狮王：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00白眉鹰王：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00阳顶天：" .. (I2S(LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function NR()
	return GetUnitTypeId(GetTriggerUnit()) == 1853056878 and T9[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function OR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	if LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] == 0 then
		LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] = 1
		if LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] = 4
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 5)
				SetUnitAcquireRange(GetKillingUnit(), 1000)
			end
			udg_lilianxishu[LoadInteger(YDHT, id * cx, -1587459251)] = 7.0
			T9[LoadInteger(YDHT, id * cx, -1587459251)] = false
			danpo[LoadInteger(YDHT, id * cx, -1587459251)] = danpo[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			gengu[LoadInteger(YDHT, id * cx, -1587459251)] = gengu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] = fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			jingmai[LoadInteger(YDHT, id * cx, -1587459251)] = jingmai[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			wuxing[LoadInteger(YDHT, id * cx, -1587459251)] = wuxing[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			yishu[LoadInteger(YDHT, id * cx, -1587459251)] = yishu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务勇闯光明顶，获得修行+1，全性格属性+1，你可以前往逍遥宫了")
			DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, -1587459251)])
			DestroyTimer(Z9[LoadInteger(YDHT, id * cx, -1587459251)])
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Lg))
			SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1587459251)], LoadLocationHandle(YDHT, id * cx, 1585647951))
			PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00紫杉龙王：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00青翼蝠王：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00金毛狮王：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00白眉鹰王：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00阳顶天：" .. (I2S(LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00紫杉龙王：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00青翼蝠王：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00金毛狮王：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00白眉鹰王：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00阳顶天：" .. (I2S(LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function QR()
	return GetUnitTypeId(GetTriggerUnit()) == 1853123427 and T9[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function RR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	if LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] == 0 then
		LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] = 1
		if LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] = 4
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 5)
				SetUnitAcquireRange(GetKillingUnit(), 1000)
			end
			udg_lilianxishu[LoadInteger(YDHT, id * cx, -1587459251)] = 7.0
			T9[LoadInteger(YDHT, id * cx, -1587459251)] = false
			danpo[LoadInteger(YDHT, id * cx, -1587459251)] = danpo[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			gengu[LoadInteger(YDHT, id * cx, -1587459251)] = gengu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] = fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			jingmai[LoadInteger(YDHT, id * cx, -1587459251)] = jingmai[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			wuxing[LoadInteger(YDHT, id * cx, -1587459251)] = wuxing[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			yishu[LoadInteger(YDHT, id * cx, -1587459251)] = yishu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务勇闯光明顶，获得修行+1，全性格属性+1，你可以前往逍遥宫了")
			DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, -1587459251)])
			DestroyTimer(Z9[LoadInteger(YDHT, id * cx, -1587459251)])
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Lg))
			SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1587459251)], LoadLocationHandle(YDHT, id * cx, 1585647951))
			PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00紫杉龙王：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00青翼蝠王：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00金毛狮王：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00白眉鹰王：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00阳顶天：" .. (I2S(LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00紫杉龙王：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00青翼蝠王：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00金毛狮王：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00白眉鹰王：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00阳顶天：" .. (I2S(LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function TR()
	return GetUnitTypeId(GetTriggerUnit()) == 1853323890 and T9[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function UR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	if LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)] == 0 then
		LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)] = 1
		if LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] == 1 and LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] = 4
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 5)
				SetUnitAcquireRange(GetKillingUnit(), 1000)
			end
			udg_lilianxishu[LoadInteger(YDHT, id * cx, -1587459251)] = 7.0
			T9[LoadInteger(YDHT, id * cx, -1587459251)] = false
			danpo[LoadInteger(YDHT, id * cx, -1587459251)] = danpo[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			gengu[LoadInteger(YDHT, id * cx, -1587459251)] = gengu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] = fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			jingmai[LoadInteger(YDHT, id * cx, -1587459251)] = jingmai[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			wuxing[LoadInteger(YDHT, id * cx, -1587459251)] = wuxing[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			yishu[LoadInteger(YDHT, id * cx, -1587459251)] = yishu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务勇闯光明顶，获得修行+1，全性格属性+1，你可以前往逍遥宫了")
			DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, -1587459251)])
			DestroyTimer(Z9[LoadInteger(YDHT, id * cx, -1587459251)])
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Lg))
			SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1587459251)], LoadLocationHandle(YDHT, id * cx, 1585647951))
			PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00紫杉龙王：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00青翼蝠王：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00金毛狮王：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00白眉鹰王：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00阳顶天：" .. (I2S(LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00紫杉龙王：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00青翼蝠王：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00金毛狮王：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00白眉鹰王：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00阳顶天：" .. (I2S(LLguaiE[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 1")
	end
	FlushChildHashtable(YDHT, id * cx)
end
--任务失败
function WR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 1)
	DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(Kg, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Lg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	T9[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
function YR()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 2)
	DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(Kg, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Lg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	T9[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
function dS()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 3)
	DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(Kg, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Lg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	T9[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
function fS()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 4)
	DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(Kg, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Lg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	T9[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
function hS()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 5)
	DestroyTimerDialog(dd[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(Kg, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Lg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	T9[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
--华山论剑
function jS()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895896 -- INLINED!!
end
function kS()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if GetUnitLevel(LoadUnitHandle(YDHT, id * cx, -784714656)) < 70 then
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000等级不足70级无法接取该任务")
	else
		if shengwang[LoadInteger(YDHT, id * cx, -1587459251)] < 7500 then
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000江湖声望不足7500无法接取该任务")
		else
			if xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] < 4 then
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000你必须先完成历练4任务")
				SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Lg))
				PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
			else
				if xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] >= 5 then
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000你已经完成这个任务了")
				else
					if ed[LoadInteger(YDHT, id * cx, -1587459251)] then
						SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Qg))
						SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
						PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00黄药师：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] - 1) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00欧阳锋：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] - 1) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00一灯大师：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] - 1) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00洪七公：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] - 1) or "") .. " / 1")
						RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					else
						SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Qg))
						SetUnitPositionLoc(LoadUnitHandle(YDHT, id * cx, -784714656), LoadLocationHandle(YDHT, id * cx, 1585647951))
						PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
						RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
						LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] = 1
						LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] = 1
						LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] = 1
						LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] = 1
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00黄药师：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] - 1) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00欧阳锋：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] - 1) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00一灯大师：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] - 1) or "") .. " / 1")
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00洪七公：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] - 1) or "") .. " / 1")
						StartTimerBJ(fd[LoadInteger(YDHT, id * cx, -1587459251)], false, 280.0)
						CreateTimerDialogBJ(bj_lastStartedTimer, "华山论剑倒计时")
						TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, GetOwningPlayer(GetTriggerUnit()))
						gd[LoadInteger(YDHT, id * cx, -1587459251)] = bj_lastCreatedTimerDialog
						ed[LoadInteger(YDHT, id * cx, -1587459251)] = true
					end
				end
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
function nS()
	return GetUnitTypeId(GetTriggerUnit()) == 1869050475 and ed[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function oS()
	local u = GetKillingUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if LLguaiA[i] == 1 then
		LLguaiA[i] = 2
		if LLguaiA[i] == 2 and LLguaiB[i] == 2 and LLguaiC[i] == 2 and LLguaiD[i] == 2 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[i] = 5
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 6)
				SetUnitAcquireRange(GetKillingUnit(), 1100)
			end
			udg_lilianxishu[i] = 12.0
			ed[i] = false
			danpo[i] = danpo[i] + 1
			gengu[i] = gengu[i] + 1
			fuyuan[i] = fuyuan[i] + 1
			jingmai[i] = jingmai[i] + 1
			wuxing[i] = wuxing[i] + 1
			yishu[i] = yishu[i] + 1
			DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务华山论剑，获得修行+1全性格属性+1，你可以前往黑木崖了")
			DestroyTimerDialog(gd[i])
			loc = GetRectCenter(Rg)
			SetUnitPositionLoc(udg_hero[i], loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00黄药师：" .. (I2S(LLguaiA[i] - 1) or "") .. " / 1")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00欧阳锋：" .. (I2S(LLguaiB[i] - 1) or "") .. " / 1")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00一灯大师：" .. (I2S(LLguaiC[i] - 1) or "") .. " / 1")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：" .. (I2S(LLguaiD[i] - 1) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00黄药师：" .. (I2S(LLguaiA[i] - 1) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00欧阳锋：" .. (I2S(LLguaiB[i] - 1) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00一灯大师：" .. (I2S(LLguaiC[i] - 1) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：" .. (I2S(LLguaiD[i] - 1) or "") .. " / 1")
	end
	u = nil
	p = nil
	loc = nil
end
function qS()
	return GetUnitTypeId(GetTriggerUnit()) == 1853058150 and ed[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function rS()
	local u = GetKillingUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if LLguaiB[i] == 1 then
		LLguaiB[i] = 2
		if LLguaiA[i] == 2 and LLguaiB[i] == 2 and LLguaiC[i] == 2 and LLguaiD[i] == 2 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[i] = 5
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 6)
				SetUnitAcquireRange(GetKillingUnit(), 1100)
			end
			udg_lilianxishu[i] = 12.0
			ed[i] = false
			danpo[i] = danpo[i] + 1
			gengu[i] = gengu[i] + 1
			fuyuan[i] = fuyuan[i] + 1
			jingmai[i] = jingmai[i] + 1
			wuxing[i] = wuxing[i] + 1
			yishu[i] = yishu[i] + 1
			DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务华山论剑，获得修行+1全性格属性+1，你可以前往黑木崖了")
			DestroyTimerDialog(gd[i])
			loc = GetRectCenter(Rg)
			SetUnitPositionLoc(udg_hero[i], loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00黄药师：" .. (I2S(LLguaiA[i] - 1) or "") .. " / 1")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00欧阳锋：" .. (I2S(LLguaiB[i] - 1) or "") .. " / 1")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00一灯大师：" .. (I2S(LLguaiC[i] - 1) or "") .. " / 1")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：" .. (I2S(LLguaiD[i] - 1) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00黄药师：" .. (I2S(LLguaiA[i] - 1) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00欧阳锋：" .. (I2S(LLguaiB[i] - 1) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00一灯大师：" .. (I2S(LLguaiC[i] - 1) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：" .. (I2S(LLguaiD[i] - 1) or "") .. " / 1")
	end
	u = nil
	p = nil
	loc = nil
end
function tS()
	return GetUnitTypeId(GetTriggerUnit()) == 1853323879 and ed[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function uS()
	local u = GetKillingUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if LLguaiC[i] == 1 then
		LLguaiC[i] = 2
		if LLguaiA[i] == 2 and LLguaiB[i] == 2 and LLguaiC[i] == 2 and LLguaiD[i] == 2 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[i] = 5
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 6)
				SetUnitAcquireRange(GetKillingUnit(), 1100)
			end
			udg_lilianxishu[i] = 12.0
			ed[i] = false
			danpo[i] = danpo[i] + 1
			gengu[i] = gengu[i] + 1
			fuyuan[i] = fuyuan[i] + 1
			jingmai[i] = jingmai[i] + 1
			wuxing[i] = wuxing[i] + 1
			yishu[i] = yishu[i] + 1
			DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务华山论剑，获得修行+1全性格属性+1，你可以前往黑木崖了")
			DestroyTimerDialog(gd[i])
			loc = GetRectCenter(Rg)
			SetUnitPositionLoc(udg_hero[i], loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00黄药师：" .. (I2S(LLguaiA[i] - 1) or "") .. " / 1")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00欧阳锋：" .. (I2S(LLguaiB[i] - 1) or "") .. " / 1")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00一灯大师：" .. (I2S(LLguaiC[i] - 1) or "") .. " / 1")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：" .. (I2S(LLguaiD[i] - 1) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00黄药师：" .. (I2S(LLguaiA[i] - 1) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00欧阳锋：" .. (I2S(LLguaiB[i] - 1) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00一灯大师：" .. (I2S(LLguaiC[i] - 1) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：" .. (I2S(LLguaiD[i] - 1) or "") .. " / 1")
	end
	u = nil
	p = nil
	loc = nil
end
function wS()
	return GetUnitTypeId(GetTriggerUnit()) == 1853320818 and ed[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function xS()
	local u = GetKillingUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if LLguaiD[i] == 1 then
		LLguaiD[i] = 2
		if LLguaiA[i] == 2 and LLguaiB[i] == 2 and LLguaiC[i] == 2 and LLguaiD[i] == 2 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[i] = 5
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 6)
				SetUnitAcquireRange(GetKillingUnit(), 1100)
			end
			udg_lilianxishu[i] = 12.0
			ed[i] = false
			danpo[i] = danpo[i] + 1
			gengu[i] = gengu[i] + 1
			fuyuan[i] = fuyuan[i] + 1
			jingmai[i] = jingmai[i] + 1
			wuxing[i] = wuxing[i] + 1
			yishu[i] = yishu[i] + 1
			DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务华山论剑，获得修行+1全性格属性+1，你可以前往黑木崖了")
			DestroyTimerDialog(gd[i])
			loc = GetRectCenter(Rg)
			SetUnitPositionLoc(udg_hero[i], loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00黄药师：" .. (I2S(LLguaiA[i] - 1) or "") .. " / 1")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00欧阳锋：" .. (I2S(LLguaiB[i] - 1) or "") .. " / 1")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00一灯大师：" .. (I2S(LLguaiC[i] - 1) or "") .. " / 1")
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：" .. (I2S(LLguaiD[i] - 1) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00黄药师：" .. (I2S(LLguaiA[i] - 1) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00欧阳锋：" .. (I2S(LLguaiB[i] - 1) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00一灯大师：" .. (I2S(LLguaiC[i] - 1) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：" .. (I2S(LLguaiD[i] - 1) or "") .. " / 1")
	end
	u = nil
	p = nil
	loc = nil
end
--任务失败
function zS()
	return ed[1]
end
function AS()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 1)
	DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(Rf, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Rg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	ed[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
function BS()
	return ed[2]
end
function bS()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 2)
	DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(Rf, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Rg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	ed[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
function cS()
	return ed[3]
end
function DS()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 3)
	DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(Rf, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Rg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	ed[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
function FS()
	return ed[4]
end
function GS()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 4)
	DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(Rf, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Rg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	ed[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
function IS()
	return ed[5]
end
function lS()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1676716706, 5)
	DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, -1676716706)])
	if RectContainsUnit(Rf, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)]) then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Rg))
		SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1676716706)], LoadLocationHandle(YDHT, id * cx, 1585647951))
		PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1676716706)), 0, 0, "|cFFFF0000时间到，任务失败了")
	ed[LoadInteger(YDHT, id * cx, -1676716706)] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1676716706)])
	FlushChildHashtable(YDHT, id * cx)
end
--古龙传奇
function KS()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896386 -- INLINED!!
end
function LS()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if GetUnitLevel(u) < 100 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000等级不足100级无法接取该任务")
	elseif shengwang[i] < 11000 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000江湖声望不足11000无法接取该任务")
	elseif xiuxing[i] < 5 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000你必须先完成历练5任务")
		loc = GetRectCenter(Rg)
		PingMinimapLocForForce(ov(p), loc, 5.0)
		RemoveLocation(loc)
	elseif xiuxing[i] >= 6 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000你已经完成这个任务了")
	elseif Rd[i] then
		loc = GetRectCenter(dh)
		SetUnitPositionLoc(u, loc)
		PanCameraToTimedLocForPlayer(p, loc, 0)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00楚留香：" .. (I2S(LLguaiA[i] - 2) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00叶孤城：" .. (I2S(LLguaiB[i] - 2) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00西门吹雪：" .. (I2S(LLguaiC[i] - 2) or "") .. " / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00陆小凤：" .. (I2S(LLguaiD[i] - 2) or "") .. " / 1")
		RemoveLocation(loc)
	else
		loc = GetRectCenter(dh)
		SetUnitPositionLoc(u, loc)
		PanCameraToTimedLocForPlayer(p, loc, 0)
		RemoveLocation(loc)
		LLguaiA[i] = 2
		LLguaiB[i] = 2
		LLguaiC[i] = 2
		LLguaiD[i] = 2
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00楚留香：0 / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00叶孤城：0 / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00西门吹雪： 0 / 1")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00陆小凤： 0 / 1")
		StartTimerBJ(fd[i], false, 120.0)
		CreateTimerDialogBJ(bj_lastStartedTimer, "紫禁决战倒计时")
		TimerDialogDisplayForPlayerBJ(true, bj_lastCreatedTimerDialog, GetOwningPlayer(GetTriggerUnit()))
		gd[i] = bj_lastCreatedTimerDialog
		Rd[i] = true
	end
	u = nil
	p = nil
	loc = nil
end
function NS()
	return GetUnitTypeId(GetTriggerUnit()) == 1852794732 and Rd[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function OS()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	if LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] == 2 then
		LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] = 3
		if LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] == 3 and LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] == 3 and LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] == 3 and LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] == 3 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] = 6
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 7)
				SetUnitAcquireRange(GetKillingUnit(), 1200)
			end
			udg_lilianxishu[LoadInteger(YDHT, id * cx, -1587459251)] = 20.0
			Rd[LoadInteger(YDHT, id * cx, -1587459251)] = false
			danpo[LoadInteger(YDHT, id * cx, -1587459251)] = danpo[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			gengu[LoadInteger(YDHT, id * cx, -1587459251)] = gengu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] = fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			jingmai[LoadInteger(YDHT, id * cx, -1587459251)] = jingmai[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			wuxing[LoadInteger(YDHT, id * cx, -1587459251)] = wuxing[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			yishu[LoadInteger(YDHT, id * cx, -1587459251)] = yishu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务决战紫禁之巅，获得修行+1全性格属性+1，你可以前往一品居了")
			DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, -1587459251)])
			DestroyTimer(fd[LoadInteger(YDHT, id * cx, -1587459251)])
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Zg))
			SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1587459251)], LoadLocationHandle(YDHT, id * cx, 1585647951))
			PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00楚留香：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00叶孤城：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00西门吹雪：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00陆小凤：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00楚留香：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00叶孤城：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00西门吹雪：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00陆小凤：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function QS()
	return GetUnitTypeId(GetTriggerUnit()) == 1853252716 and Rd[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function RS()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	if LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] == 2 then
		LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] = 3
		if LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] == 3 and LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] == 3 and LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] == 3 and LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] == 3 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] = 6
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 7)
				SetUnitAcquireRange(GetKillingUnit(), 1200)
			end
			udg_lilianxishu[LoadInteger(YDHT, id * cx, -1587459251)] = 20.0
			Rd[LoadInteger(YDHT, id * cx, -1587459251)] = false
			danpo[LoadInteger(YDHT, id * cx, -1587459251)] = danpo[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			gengu[LoadInteger(YDHT, id * cx, -1587459251)] = gengu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] = fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			jingmai[LoadInteger(YDHT, id * cx, -1587459251)] = jingmai[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			wuxing[LoadInteger(YDHT, id * cx, -1587459251)] = wuxing[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			yishu[LoadInteger(YDHT, id * cx, -1587459251)] = yishu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务决战紫禁之巅，获得修行+1全性格属性+1，你可以前往一品居了")
			DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, -1587459251)])
			DestroyTimer(fd[LoadInteger(YDHT, id * cx, -1587459251)])
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Zg))
			SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1587459251)], LoadLocationHandle(YDHT, id * cx, 1585647951))
			PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00楚留香：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00叶孤城：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00西门吹雪：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00陆小凤：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00楚留香：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00叶孤城：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00西门吹雪：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00陆小凤：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function TS()
	return GetUnitTypeId(GetTriggerUnit()) == 1852995177 and Rd[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function US()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	if LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] == 2 then
		LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] = 3
		if LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] == 3 and LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] == 3 and LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] == 3 and LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] == 3 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] = 6
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 7)
				SetUnitAcquireRange(GetKillingUnit(), 1200)
			end
			udg_lilianxishu[LoadInteger(YDHT, id * cx, -1587459251)] = 20.0
			Rd[LoadInteger(YDHT, id * cx, -1587459251)] = false
			danpo[LoadInteger(YDHT, id * cx, -1587459251)] = danpo[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			gengu[LoadInteger(YDHT, id * cx, -1587459251)] = gengu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] = fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			jingmai[LoadInteger(YDHT, id * cx, -1587459251)] = jingmai[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			wuxing[LoadInteger(YDHT, id * cx, -1587459251)] = wuxing[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			yishu[LoadInteger(YDHT, id * cx, -1587459251)] = yishu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务决战紫禁之巅，获得修行+1全性格属性+1，你可以前往一品居了")
			DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, -1587459251)])
			DestroyTimer(fd[LoadInteger(YDHT, id * cx, -1587459251)])
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Zg))
			SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1587459251)], LoadLocationHandle(YDHT, id * cx, 1585647951))
			PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00楚留香：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00叶孤城：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00西门吹雪：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00陆小凤：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00楚留香：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00叶孤城：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00西门吹雪：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00陆小凤：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function WS()
	return GetUnitTypeId(GetTriggerUnit()) == 1851944036 and Rd[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
end
function XS()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	if LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] == 2 then
		LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] = 3
		if LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] == 3 and LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] == 3 and LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] == 3 and LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] == 3 then
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			xiuxing[LoadInteger(YDHT, id * cx, -1587459251)] = 6
			if GetUnitAbilityLevel(GetKillingUnit(), 1093677905) ~= 0 then
				SetPlayerTechResearched(GetOwningPlayer(GetKillingUnit()), 1382576745, 7)
				SetUnitAcquireRange(GetKillingUnit(), 1200)
			end
			udg_lilianxishu[LoadInteger(YDHT, id * cx, -1587459251)] = 20.0
			Rd[LoadInteger(YDHT, id * cx, -1587459251)] = false
			danpo[LoadInteger(YDHT, id * cx, -1587459251)] = danpo[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			gengu[LoadInteger(YDHT, id * cx, -1587459251)] = gengu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] = fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			jingmai[LoadInteger(YDHT, id * cx, -1587459251)] = jingmai[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			wuxing[LoadInteger(YDHT, id * cx, -1587459251)] = wuxing[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			yishu[LoadInteger(YDHT, id * cx, -1587459251)] = yishu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务决战紫禁之巅，获得修行+1全性格属性+1，你可以前往一品居了")
			DestroyTimerDialog(gd[LoadInteger(YDHT, id * cx, -1587459251)])
			DestroyTimer(fd[LoadInteger(YDHT, id * cx, -1587459251)])
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Zg))
			SetUnitPositionLoc(udg_hero[LoadInteger(YDHT, id * cx, -1587459251)], LoadLocationHandle(YDHT, id * cx, 1585647951))
			PanCameraToTimedLocForPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), LoadLocationHandle(YDHT, id * cx, 1585647951), 0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00楚留香：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00叶孤城：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00西门吹雪：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00陆小凤：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00当前进度：")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00楚留香：" .. (I2S(LLguaiA[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00叶孤城：" .. (I2S(LLguaiB[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00西门吹雪：" .. (I2S(LLguaiC[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00陆小凤：" .. (I2S(LLguaiD[LoadInteger(YDHT, id * cx, -1587459251)] - 2) or "") .. " / 1")
	end
	FlushChildHashtable(YDHT, id * cx)
end
--任务失败
function RenWuFail(i)
	DestroyTimerDialog(gd[i])
	if RectContainsUnit(eh, udg_hero[i]) then
		SetUnitPosition(udg_hero[i], -9984, 700)
		PanCameraToTimedForPlayer(Player(i - 1), -9984, 700, 0)
	end
	DisplayTextToPlayer(Player(i - 1), 0, 0, "|cFFFF0000时间到，任务失败了")
	Rd[i] = false
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[i])
end
function ZS()
	return Rd[1]
end
function d5()
	RenWuFail(1)
end
function f5()
	return Rd[2]
end
function g5()
	RenWuFail(2)
end
function i5()
	return Rd[3]
end
function j5()
	RenWuFail(3)
end
function m5()
	return Rd[4]
end
function nn5()
	RenWuFail(4)
end
function p5()
	return Rd[5]
end
function q5()
	RenWuFail(5)
end
function Experiences_Trigger()
	local t = CreateTrigger()

	zr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(zr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(zr, Condition(XQ))
	TriggerAddAction(zr, YQ)
	Ar = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(Ar, Player(12), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Ar, Condition(dR))
	TriggerAddAction(Ar, eR)
	ar = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(ar, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(ar, Condition(gR))
	TriggerAddAction(ar, jR)
	Br = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Br, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Br, Condition(mR))
	TriggerAddAction(Br, nR)

	Cr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Cr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Cr, Condition(sR))
	TriggerAddAction(Cr, tR)
	cr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(cr, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(cr, Condition(vR))
	TriggerAddAction(cr, wR)
	Dr = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Dr, f9[1])
	TriggerAddAction(Dr, yR)
	Er = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Er, f9[2])
	TriggerAddAction(Er, AR)
	Fr = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Fr, f9[3])
	TriggerAddAction(Fr, BR)
	Gr = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Gr, f9[4])
	TriggerAddAction(Gr, CR)
	Hr = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Hr, f9[5])
	TriggerAddAction(Hr, DR)
	Ir = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Ir, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Ir, Condition(FR))
	TriggerAddAction(Ir, GR)
	lr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(lr, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(lr, Condition(IR))
	TriggerAddAction(lr, lR)
	Jr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Jr, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Jr, Condition(KR))
	TriggerAddAction(Jr, LR)
	Kr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Kr, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Kr, Condition(NR))
	TriggerAddAction(Kr, OR)
	Lr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Lr, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Lr, Condition(QR))
	TriggerAddAction(Lr, RR)
	Mr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Mr, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Mr, Condition(TR))
	TriggerAddAction(Mr, UR)
	Nr = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Nr, Z9[1])
	TriggerAddAction(Nr, WR)
	Pr = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Pr, Z9[2])
	TriggerAddAction(Pr, YR)
	Qr = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Qr, Z9[3])
	TriggerAddAction(Qr, dS)
	Rr = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Rr, Z9[4])
	TriggerAddAction(Rr, fS)
	Sr = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Sr, Z9[5])
	TriggerAddAction(Sr, hS)
	Tr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Tr, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Tr, Condition(jS))
	TriggerAddAction(Tr, kS)
	Ur = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Ur, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Ur, Condition(nS))
	TriggerAddAction(Ur, oS)
	Vr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Vr, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Vr, Condition(qS))
	TriggerAddAction(Vr, rS)
	Wr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Wr, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Wr, Condition(tS))
	TriggerAddAction(Wr, uS)
	Xr = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Xr, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Xr, Condition(wS))
	TriggerAddAction(Xr, xS)
	Yr = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Yr, fd[1])
	TriggerAddCondition(Yr, Condition(zS))
	TriggerAddAction(Yr, AS)
	Zr = CreateTrigger()
	TriggerRegisterTimerExpireEvent(Zr, fd[2])
	TriggerAddCondition(Zr, Condition(BS))
	TriggerAddAction(Zr, bS)
	ds = CreateTrigger()
	TriggerRegisterTimerExpireEvent(ds, fd[3])
	TriggerAddCondition(ds, Condition(cS))
	TriggerAddAction(ds, DS)
	es = CreateTrigger()
	TriggerRegisterTimerExpireEvent(es, fd[4])
	TriggerAddCondition(es, Condition(FS))
	TriggerAddAction(es, GS)
	fs = CreateTrigger()
	TriggerRegisterTimerExpireEvent(fs, fd[5])
	TriggerAddCondition(fs, Condition(IS))
	TriggerAddAction(fs, lS)
	gs = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(gs, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(gs, Condition(KS))
	TriggerAddAction(gs, LS)
	hs = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(hs, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(hs, Condition(NS))
	TriggerAddAction(hs, OS)
	is = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(is, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(is, Condition(QS))
	TriggerAddAction(is, RS)
	js = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(js, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(js, Condition(TS))
	TriggerAddAction(js, US)
	ks = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(ks, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(ks, Condition(WS))
	TriggerAddAction(ks, XS)
	ms = CreateTrigger()
	TriggerRegisterTimerExpireEvent(ms, fd[1])
	TriggerAddCondition(ms, Condition(ZS))
	TriggerAddAction(ms, d5)
	ns = CreateTrigger()
	TriggerRegisterTimerExpireEvent(ns, fd[2])
	TriggerAddCondition(ns, Condition(f5))
	TriggerAddAction(ns, g5)
	oss = CreateTrigger()
	TriggerRegisterTimerExpireEvent(oss, fd[3])
	TriggerAddCondition(oss, Condition(i5))
	TriggerAddAction(oss, j5)
	ps = CreateTrigger()
	TriggerRegisterTimerExpireEvent(ps, fd[4])
	TriggerAddCondition(ps, Condition(m5))
	TriggerAddAction(ps, nn5)
	qs = CreateTrigger()
	TriggerRegisterTimerExpireEvent(qs, fd[5])
	TriggerAddCondition(qs, Condition(p5))
	TriggerAddAction(qs, q5)
	t = nil
end
----------------------------
--游戏中的任务
-- 1. 店小二新手任务
-- 2. 游骐寻找物品任务
-- 3. 阳寿已尽任务
-- 4. 帮郭靖求婚任务、偷玉箫任务、寻找杨过
-- 5. 鲁有脚送信任务
-- 6. 杀野猪首领
-- 7. 林远图押镖任务
-- 8. 杀熊、桃花岛哑仆的任务
-- 9. 升到10级自动奖励丹药
-- 10. 采集断肠草任务
-- 11. 护送耶律楚材
-- 12. 高昌迷宫任务
-- 13. 辽国军心任务 + 拯救阿紫任务
----------------------------

function IsNewBeeTask()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895349 -- INLINED!!
end
function AcceptNewBeeTask()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if newbeeTaskId[i] == 0 then
		if GetRandomInt(1, 100) <= 35 then
			loc = GetRectCenter(Pe)
			newbeeTaskId[i] = 1
			PlaySoundOnUnitBJ(bh, 100, u)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC我这有一壶上等女儿红专程送给襄阳城郭靖的，你能帮我跑一趟吗|r\n|cFFFFCC00提示：|r |cFF99FFCC前往正派武林主城的|cFFADFF2F郭靖|r\n")
			PingMinimapLocForForce(ov(p), loc, 5.0)
			RemoveLocation(loc)
		elseif GetRandomInt(1, 70) <= 35 then
			loc = GetRectCenter(Qe)
			newbeeTaskId[i] = 2
			PlaySoundOnUnitBJ(bh, 100, u)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC旁边树林里的野狼经常来袭击村民，你能帮助我们吗|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F6只野狼|r\n")
			PingMinimapLocForForce(ov(p), loc, 5.0)
			RemoveLocation(loc)
		else
			newbeeTaskId[i] = 3
			loc = GetRectCenter(Re)
			PlaySoundOnUnitBJ(bh, 100, u)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC听说少林寺的练功房升级特别快，为何不去看看呢|r\n|cFFFFCC00提示：|r |cFF99FFCC前往少林寺的|cFFADFF2F练功房|r，可以通过主城传送\n")
			PingMinimapLocForForce(ov(p), loc, 5.0)
			RemoveLocation(loc)
		end
	elseif newbeeTaskId[i] == 1 then
		loc = GetRectCenter(Pe)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC你怎么还不出发啊？|r\n|cFFFFCC00提示：|r |cFF99FFCC前往正派武林主城的|cFFADFF2F郭靖|r\n")
		PingMinimapLocForForce(ov(p), loc, 5.0)
		RemoveLocation(loc)
	elseif newbeeTaskId[i] == 2 then
		loc = GetRectCenter(Qe)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC请帮助我们杀死野狼吧|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F6只野狼|r\n")
		PingMinimapLocForForce(ov(p), loc, 5.0)
		RemoveLocation(loc)
	elseif newbeeTaskId[i] == 3 then
		loc = GetRectCenter(Re)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC听说少林寺的练功房升级特别快，为何不去看看呢|r\n|cFFFFCC00提示：|r |cFF99FFCC前往少林寺的|cFFADFF2F练功房|r，可以通过主城传送")
		PingMinimapLocForForce(ov(p), loc, 5.0)
		RemoveLocation(loc)
	elseif newbeeTaskId[i] == 4 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00店小二：|r |cFF99FFCC你已经完成新手任务了")
	end
	u = nil
	p = nil
	loc = nil
end
--郭靖——环戒
function IsNewBeeTaskVisitGuoJing()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and newbeeTaskId[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 1 -- INLINED!!
end
function CompleteVisitGuoJing()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetRandomInt(1, 100) <= 85 then
		unitadditembyidswapped(1227895348, GetTriggerUnit())
	else
		unitadditembyidswapped(1227899720, GetTriggerUnit())
	end
	AddHeroXP(u, 100, true)
	shengwang[i] = shengwang[i] + 10
	PlaySoundOnUnitBJ(Hh, 100, u)
	DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务获得经验+100、江湖声望+10和" .. (GetItemName(bj_lastCreatedItem) or ""))
	newbeeTaskId[i] = 4
	u = nil
	p = nil
end
--杀狼任务——青铜刀
function IsKillingWolves()
	return GetUnitTypeId(GetTriggerUnit()) == 1853320308
end
function CompleteKillingWolves()
	local u = GetKillingUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if newbeeTaskId[i] == 2 then
		P7[i] = P7[i] + 1
		if P7[i] >= 6 then
			P7[i] = 0
			newbeeTaskId[i] = 4
			if GetRandomInt(1, 100) <= 85 then
				unitadditembyidswapped(1227895344, GetTriggerUnit())
			else
				unitadditembyidswapped(1227899721, GetTriggerUnit())
			end
			AddHeroXP(GetKillingUnit(), 100, true)
			shengwang[i] = shengwang[i] + 50
			PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
			DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务获得经验+100、江湖声望+50和" .. (GetItemName(bj_lastCreatedItem) or ""))
		else
			DisplayTextToPlayer(p, 0, 0, "野狼：" .. (I2S(P7[i]) or "") .. " / 6")
		end
	end
	u = nil
	p = nil
end
--少林练功房——养精蓄锐令
function IsVisitShaoLin()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and newbeeTaskId[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 3 -- INLINED!!
end
function CompleteVisitShaoLin()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	unitadditembyidswapped(1227896392, GetTriggerUnit())
	AddHeroXP(u, 100, true)
	shengwang[i] = shengwang[i] + 10
	PlaySoundOnUnitBJ(Hh, 100, u)
	DisplayTextToPlayer(p, 0, 0, "|CFF34FF00完成任务获得经验+100、江湖声望+10和" .. (GetItemName(bj_lastCreatedItem) or ""))
	newbeeTaskId[i] = 4
	u = nil
	p = nil
end

function IsLookingForGoods()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227899458 -- INLINED!!
end
function LookingForGoods()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local id = LoadInteger(YDHT, GetHandleId(p), StringHash("item"))
	local s
	if xunwu[i] == 0 then
		if xiuxing[i] <= 2 then
			if GetRandomInt(1, 2) == 1 then
				id = ZhuangBei[GetRandomInt(1, 6)]
			else
				id = ShiPin[GetRandomInt(1, 18)]
			end
		elseif xiuxing[i] <= 4 then
			if GetRandomInt(1, 2) == 1 then
				id = ZhuangBei[GetRandomInt(7, 9)]
			else
				id = ShiPin[GetRandomInt(9, 33)]
			end
		else
			if GetRandomInt(1, 3) == 1 then
				id = ZhuangBei[GetRandomInt(10, 14)]
			else
				id = ShiPin[GetRandomInt(34, 44)]
			end
		end
		xunwu[i] = 1
		SaveInteger(YDHT, GetHandleId(p), StringHash("item"), id)
		createitemloc(id, v7[11])
		s = GetItemName(bj_lastCreatedItem)
		RemoveItem(bj_lastCreatedItem)
		PlaySoundOnUnitBJ(bh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC我需要" .. (s or "") .. "，你能帮我找来么|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助游骐寻找|cFFADFF2F" .. (s or "") .. "|r\n")
	else
		createitemloc(id, v7[11])
		s = GetItemName(bj_lastCreatedItem)
		RemoveItem(bj_lastCreatedItem)
		PlaySoundOnUnitBJ(bh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC帮我找到" .. (s or "") .. "了吗|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助游骐寻找|cFFADFF2F" .. (s or "") .. "|r\n")
	end
	u = nil
	p = nil
end
function IsGiveUpCurrentGoods()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227899459 -- INLINED!!
end
function GiveUpCurrentGoods()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if xunwu[i] == 0 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC当前没有接任务哦|r\n")
	else
		shengwang[i] = shengwang[i] - 100
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC堂堂大侠，居然找不到小女子需要的东西吗|r\n")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00放弃任务，声望减少100|r\n")
		xunwu[i] = 0
	end
	u = nil
	p = nil
end
function IsCompleteLookingForGoods()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227899460 -- INLINED!!
end
function CompleteLookingForGoods()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local id = LoadInteger(YDHT, GetHandleId(p), StringHash("item"))
	if xunwu[i] == 1 and UnitHaveItem(u, id) and id ~= 0 then
		RemoveItem(FetchUnitItem(u, id))
		shengwang[i] = shengwang[i] + 40 * (xiuxing[i] + 1)
		AddHeroXP(udg_hero[i], 15 * GetHeroLevel(udg_hero[i]) * GetHeroLevel(udg_hero[i]) * (xiuxing[i] + 1), true)
		xunwu[i] = 0
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC谢谢你的帮助|r\n")
		if GetRandomInt(1, 10) <= xiuxing[i] + 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00完成任务，奖励声望" .. (I2S(40 * (xiuxing[i] + 1)) or "") .. "点，经验" .. (I2S(15 * GetHeroLevel(udg_hero[i]) * GetHeroLevel(udg_hero[i]) * (xiuxing[i] + 1)) or "") .. "点|r\n")
		else
			unitadditembyidswapped(1227895892, udg_hero[i])
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00完成任务，奖励声望" .. (I2S(40 * (xiuxing[i] + 1)) or "") .. "点，经验" .. (I2S(15 * GetHeroLevel(udg_hero[i]) * GetHeroLevel(udg_hero[i]) * (xiuxing[i] + 1)) or "") .. "点，九阳丹一颗|r\n")
		end
		if Ce[i] == 6 then
			if udg_xbds[i] < 9 then
				udg_xbds[i] = udg_xbds[i] + 1
				DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您完成了" .. (I2S(udg_xbds[i]) or "") .. "次寻宝任务，完成10次可获得寻宝大师哦")
			else
				if udg_xbdsbool[i] == false then
					udg_xbdsbool[i] = true
					if udg_zhangmen[i] == true then
					else
						SaveStr(YDHT, GetHandleId(p), GetHandleId(p), "〓寻宝大师〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
					end
					DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" .. (GetPlayerName(p) or "") .. "获得寻宝大师")
					SetPlayerName(p, "〓寻宝大师〓" .. (GetPlayerName(p) or ""))
				end
			end
		end
	elseif xunwu[i] == 1 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC还没有找到小女子需要的东西吗|r\n")
	else
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骐：|r |cFF99FFCC当前没有接任务哦|r\n")
	end
	u = nil
	p = nil
end

function IsYangShou()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227899462 -- INLINED!!
end
function KillYangShou()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local id = LoadInteger(YDHT, GetHandleId(p), StringHash("life"))
	local j = GetRandomInt(1, xiuxing[i] * 3 + 3)
	local s
	if yangshou[i] == 0 then
		id = udg_yangshou[j]
		yangshou[i] = 1
		SaveInteger(YDHT, GetHandleId(p), StringHash("life"), id)
		SaveInteger(YDHT, GetHandleId(p), StringHash("life") * 2, (j - 1) // 3)
		CreateNUnitsAtLoc(1, id, Player(15), v7[11], 270.0)
		s = GetUnitName(bj_lastCreatedUnit)
		RemoveUnit(bj_lastCreatedUnit)
		PlaySoundOnUnitBJ(bh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骏：|r |cFF99FFCC老夫夜观天象，" .. (s or "") .. "阳寿已尽，速去与老夫解决他|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助游骏解决|cFFADFF2F" .. (s or "") .. "|r\n")
	else
		CreateNUnitsAtLoc(1, id, Player(15), v7[11], 270.0)
		s = GetUnitName(bj_lastCreatedUnit)
		RemoveUnit(bj_lastCreatedUnit)
		PlaySoundOnUnitBJ(bh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骏：|r |cFF99FFCC解决" .. (s or "") .. "了吗|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助游骏解决|cFFADFF2F" .. (s or "") .. "|r\n")
	end
	u = nil
	p = nil
end
function IsFangQiYangShou()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227899461 -- INLINED!!
end
function FangQiYangShou()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if yangshou[i] == 0 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骏：|r |cFF99FFCC当前没有接任务|r\n")
	else
		shengwang[i] = shengwang[i] - 100
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游骏：|r |cFF99FFCC堂堂大侠，竟解决不了一个小喽啰|r\n")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00放弃任务，声望减少100|r\n")
		yangshou[i] = 0
	end
	u = nil
	p = nil
end
function IsWanChengYangShou()
	return GetUnitTypeId(GetTriggerUnit()) == LoadInteger(YDHT, GetHandleId(GetOwningPlayer(GetKillingUnit())), StringHash("life")) and yangshou[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 1
end
function WanChengYangShou()
	local u = GetKillingUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local id = LoadInteger(YDHT, GetHandleId(p), StringHash("life"))
	local j = GetRandomInt(25, 45)
	local l__l = LoadInteger(YDHT, GetHandleId(p), StringHash("life") * 2)
	shengwang[i] = shengwang[i] + j * (l__l + 1)
	AdjustPlayerStateBJ(5000 * (l__l + 1), p, PLAYER_STATE_RESOURCE_GOLD)
	AdjustPlayerStateBJ(10 * (l__l + 1), p, PLAYER_STATE_RESOURCE_LUMBER)
	--call AddHeroXP(udg_hero[i],200*GetHeroLevel(udg_hero[i])*GetHeroLevel(udg_hero[i])*(xiuxing[i]+1),true)
	yangshou[i] = 0
	if GetRandomInt(1, 10) <= l__l + 1 then
		unitadditembyidswapped(1227895892, udg_hero[i])
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00完成任务，奖励声望" .. (I2S(j * (l__l + 1)) or "") .. "点，金钱" .. (I2S(5000 * (l__l + 1)) or "") .. "，珍稀币" .. (I2S(10 * (l__l + 1)) or "") .. "，九阳丹一颗|r\n")
	else
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00完成任务，奖励声望" .. (I2S(j * (l__l + 1)) or "") .. "点，金钱" .. (I2S(5000 * (l__l + 1)) or "") .. "，珍稀币" .. (I2S(10 * (l__l + 1)) or ""))
	end
	u = nil
	p = nil
end

function IsQiuHun()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and (GetItemTypeId(GetManipulatedItem()) == 1227897172 or GetItemTypeId(GetManipulatedItem()) == 1227897173 or GetItemTypeId(GetManipulatedItem()) == 1227897164 or GetItemTypeId(GetManipulatedItem()) == 1227897165 or GetItemTypeId(GetManipulatedItem()) == 1227899223 or GetItemTypeId(GetManipulatedItem()) == 1227899220 or GetItemTypeId(GetManipulatedItem()) == 1227899222) -- INLINED!!
end
function QiuHun_Action()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetItemTypeId(GetManipulatedItem()) == 1227897172 then
		if qiuhun[i] == 0 then
			qiuhun[i] = 1
			PlaySoundOnUnitBJ(bh, 100, u)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC我要教郭靖兄弟九阴真经帮助他向蓉儿求婚，可是九阴真经突然找不到了|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助周伯通寻找|cFFADFF2F九阴真经上下卷（九阴真经和九阴白骨爪）|r\n")
		else
			PlaySoundOnUnitBJ(bh, 100, u)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC帮我找到经书了吗|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助周伯通寻找|cFFADFF2F九阴真经上下卷（九阴真经和九阴白骨爪）|r\n")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227899220 and udg_runamen[i] == 2 then
		if zhaoyangguo[i] == 0 then
			zhaoyangguo[i] = 1
			PlaySoundOnUnitBJ(bh, 100, u)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00小龙女：|r |cFF99FFCC少侠如果见到过儿，把玉蜂交给他，他就知道我没有死了|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助小龙女找到|cFFADFF2F杨过|r\n")
			unitadditembyidswapped(1227899221, u)
		elseif zhaoyangguo[i] == 1 then
			PlaySoundOnUnitBJ(bh, 100, u)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00小龙女：|r |cFF99FFCC见到过儿了吗|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助小龙女找到|cFFADFF2F杨过|r\n")
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00小龙女：|r |cFF99FFCC感谢少侠相助，帮我找到了过儿|r\n")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227899222 and udg_runamen[i] == 2 then
		if zhaoyangguo[i] == 0 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你还没有到小龙女处接任务|r\n")
		elseif zhaoyangguo[i] == 1 then
			if UnitHaveItem(u, 1227899221) then
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00杨过：|r |cFF99FFCC太好了，姑姑没有死！谢谢少侠，这本残章送给你了|r\n")
				RemoveItem(FetchUnitItem(u, 1227899221))
				unitadditembyidswapped(1227896373, u)
				zhaoyangguo[i] = 2
			else
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00杨过：|r |cFF99FFCC姑姑已经死去多年，哪里来的狂小子在胡言乱语|r\n")
			end
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00杨过：|r |cFF99FFCC感谢少侠相助，帮我找到了姑姑|r\n")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227897173 then
		if touxiao[i] == 0 then
			touxiao[i] = 1
			PlaySoundOnUnitBJ(bh, 100, u)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC黄老邪把我关在这好久，天天吹箫烦死了，你能帮我把他的玉箫偷来吗？|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助周伯通偷到|cFFADFF2F玉箫|r\n")
		else
			PlaySoundOnUnitBJ(bh, 100, u)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC帮我偷到玉箫了吗|r\n|cFFFFCC00提示：|r |cFF99FFCC帮助周伯通偷到|cFFADFF2F玉箫|r\n")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227897164 then
		if GetUnitAbilityLevel(u, 1093682225) >= 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC小子，你已经掌握此武功了")
		else
			if UnitHaveItem(u, 1227895625) and GetUnitAbilityLevel(u, 1093678931) >= 1 and wuxing[i] >= 35 then
				RemoveItem(FetchUnitItem(u, 1227895625))
				unitadditembyidswapped(1227897162, u)
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC看你资质不错，书的这几页就是摧坚神抓的修习法门|r\n")
			else
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC小子，你的条件不足|r\n")
			end
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227899223 and linganran[i] == 0 then
		if GetUnitAbilityLevel(u, 1093678919) >= 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00杨过：|r |cFF99FFCC少侠，你已经掌握此武功了")
		else
			if fuyuan[i] >= 25 and wuxing[i] >= 25 then
				unitadditembyidswapped(1227895609, u)
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00杨过：|r |cFF99FFCC看你资质不错，这本黯然销魂掌的秘籍就给你了|r\n")
				linganran[i] = 1
			else
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00杨过：|r |cFF99FFCC少侠，你的条件不足|r\n")
			end
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227897165 then
		if GetUnitAbilityLevel(u, 1093682228) >= 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：|r |cFF99FFCC年轻人，你已经掌握此武功了")
		else
			if UnitHaveItem(u, 1227895384) and yishu[i] >= 35 then
				RemoveItem(FetchUnitItem(u, 1227895384))
				unitadditembyidswapped(1227897160, u)
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：|r |cFF99FFCC看你资质不错，书的这几页就是医疗篇的修习法门|r\n")
			else
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00洪七公：|r |cFF99FFCC年轻人，你的条件不足|r\n")
			end
		end
		ShowUnitHide(gg_unit_n00E_0066)
	end
	u = nil
	p = nil
end
function IsQiuHunWan()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and (qiuhun[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 1 and UnitHaveItem(GetTriggerUnit(), 1227895384) and UnitHaveItem(GetTriggerUnit(), 1227895625) or touxiao[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 1 and UnitHaveItem(GetTriggerUnit(), 1227899185)) -- INLINED!!
end
function QiuHunWanCheng()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	--call BJDebugMsg("有没有？")
	if qiuhun[i] == 1 and UnitHaveItem(u, 1227895384) and UnitHaveItem(u, 1227895625) then
		L7[i] = 1
		for _ in _loop_() do
			if L7[i] > wugongshu[i] then break end
			if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
				if L7[i] == wugongshu[i] then
					RemoveItem(FetchUnitItem(u, 1227895384))
					RemoveItem(FetchUnitItem(u, 1227895625))
					DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC不错小子，居然被你找到了，不能让你白跑，我把这遗忘技能的法门传给你，今后你遗忘技能就不需要遗忘之石了|r\n")
					udg_yiwang[i] = true
					qiuhun[i] = 0
					if true then break end
				end
			else
				UnitAddAbility(u, 1093677367)
				I7[(i - 1) * 20 + L7[i]] = 1093677367
				RemoveItem(FetchUnitItem(u, 1227895384))
				RemoveItem(FetchUnitItem(u, 1227895625))
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC不错小子，居然被你找到了，不能让你白跑，我这七十二路空明拳传给你了|r\n")
				DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" .. (GetPlayerName(p) or "") .. "习得空明拳")
				qiuhun[i] = 0
				if true then break end
			end
			L7[i] = L7[i] + 1
		end
	elseif touxiao[i] == 1 and UnitHaveItem(u, 1227899185) then
		L7[i] = 1
		for _ in _loop_() do
			if L7[i] > wugongshu[i] then break end
			if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
				if L7[i] == wugongshu[i] then
					DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC小子，你学的武功太多了，遗忘一些再过来找我吧|r\n")
					if true then break end
				end
			else
				UnitAddAbility(u, 1093677368)
				I7[(i - 1) * 20 + L7[i]] = 1093677368
				RemoveItem(FetchUnitItem(u, 1227899185))
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC不错小子，居然被你偷到了，不能让你白跑，我把从黄老邪那偷学的碧海潮生曲传给你|r\n")
				DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" .. (GetPlayerName(p) or "") .. "习得碧海潮生曲")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC这把玉箫其实是一把难得的神器，就送给你了吧|r\n")
				unitadditembyidswapped(1227897156, u)
				touxiao[i] = 0
				if true then break end
			end
			L7[i] = L7[i] + 1
		end
	end
	u = nil
	p = nil
end
-----------帮郭靖求婚结束
---------任务系统-------

function QJ()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895898 -- INLINED!!
end
function RJ()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if kd[LoadInteger(YDHT, id * cx, -1587459251)] >= 3 then
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000你无法再接取此任务了")
	else
		if jd[LoadInteger(YDHT, id * cx, -1587459251)] == 0 then
			if GetRandomInt(1, 100) <= 35 then
				SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Bg))
				jd[LoadInteger(YDHT, id * cx, -1587459251)] = 1
				PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00鲁有脚：|r |cFF99FFCC丐帮乃江湖第一大帮派，负责传送各种情报|r\n|cFFFFCC00提示：|r |cFF99FFCC送信给|cFFADFF2F黄蓉|r\n")
				PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
			else
				if GetRandomInt(1, 70) <= 35 then
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Xe))
					jd[LoadInteger(YDHT, id * cx, -1587459251)] = 2
					PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00鲁有脚：|r |cFF99FFCC丐帮乃江湖第一大帮派，负责传送各种情报|r\n|cFFFFCC00提示：|r |cFF99FFCC送信给|cFFADFF2F达摩祖师|r\n")
					PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
				else
					jd[LoadInteger(YDHT, id * cx, -1587459251)] = 3
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Pe))
					PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00鲁有脚：|r |cFF99FFCC丐帮乃江湖第一大帮派，负责传送各种情报|r\n|cFFFFCC00提示：|r |cFF99FFCC送信给|cFFADFF2F郭靖\n")
					PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
				end
			end
		else
			if jd[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
				SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Bg))
				PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00鲁有脚：|r |cFF99FFCC丐帮乃江湖第一大帮派，负责传送各种情报|r\n|cFFFFCC00提示：|r |cFF99FFCC送信给|cFFADFF2F黄蓉|r\n")
				PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
			else
				if jd[LoadInteger(YDHT, id * cx, -1587459251)] == 2 then
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Xe))
					PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00鲁有脚：|r |cFF99FFCC丐帮乃江湖第一大帮派，负责传送各种情报|r\n|cFFFFCC00提示：|r |cFF99FFCC送信给|cFFADFF2F达摩祖师|r\n")
					PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
				else
					if jd[LoadInteger(YDHT, id * cx, -1587459251)] == 3 then
						SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Pe))
						PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00鲁有脚：|r |cFF99FFCC丐帮乃江湖第一大帮派，负责传送各种情报|r\n|cFFFFCC00提示：|r |cFF99FFCC送信给|cFFADFF2F郭靖\n")
						PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
						RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					end
				end
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
function TJ()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and jd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 1 -- INLINED!!
end
function UJ()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if GetRandomInt(1, 50) <= 25 then
		YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 0, 0, 500)
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得经验+100、江湖声望+15、生命+500\n")
	else
		if GetRandomInt(1, 50) <= 25 then
			YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 3, 0, 200)
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得经验+100、江湖声望+15、攻击+200")
		else
			YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 2, 0, 30)
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得经验+100、江湖声望+15、防御+30\n")
		end
	end
	if GetRandomInt(1, 50) <= 40 then
		unitadditembyidswapped(YaoCao[5], GetTriggerUnit())
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00意外获得了一个锦灯笼")
	end
	AddHeroXP(LoadUnitHandle(YDHT, id * cx, -784714656), 100, true)
	PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
	jd[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	kd[LoadInteger(YDHT, id * cx, -1587459251)] = kd[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 15
	FlushChildHashtable(YDHT, id * cx)
end
function WJ()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and jd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 2 -- INLINED!!
end
function XJ()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if GetRandomInt(1, 50) <= 25 then
		YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 0, 0, 500)
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得经验+100、江湖声望+15、生命+500\n")
	else
		if GetRandomInt(1, 50) <= 25 then
			YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 3, 0, 200)
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得经验+100、江湖声望+15、攻击+200")
		else
			YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 2, 0, 30)
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得经验+100、江湖声望+15、防御+30\n")
		end
	end
	if GetRandomInt(1, 50) <= 40 then
		unitadditembyidswapped(YaoCao[5], GetTriggerUnit())
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00意外获得了一个锦灯笼")
	end
	AddHeroXP(LoadUnitHandle(YDHT, id * cx, -784714656), 100, true)
	PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
	jd[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	kd[LoadInteger(YDHT, id * cx, -1587459251)] = kd[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 15
	FlushChildHashtable(YDHT, id * cx)
end
function ZJ()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and jd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 3 -- INLINED!!
end
function dK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if GetRandomInt(1, 50) <= 25 then
		YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 0, 0, 500)
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得经验+100、江湖声望+15、生命+500\n")
	else
		if GetRandomInt(1, 50) <= 25 then
			YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 3, 0, 200)
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得经验+100、江湖声望+15、攻击+200")
		else
			YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 2, 0, 30)
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得经验+100、江湖声望+15、防御+30\n")
		end
	end
	if GetRandomInt(1, 50) <= 40 then
		unitadditembyidswapped(YaoCao[5], GetTriggerUnit())
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00意外获得了一个锦灯笼")
	end
	AddHeroXP(LoadUnitHandle(YDHT, id * cx, -784714656), 100, true)
	PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
	jd[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	kd[LoadInteger(YDHT, id * cx, -1587459251)] = kd[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 15
	FlushChildHashtable(YDHT, id * cx)
end
function fK()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895352 -- INLINED!!
end

function gK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if e8[LoadInteger(YDHT, id * cx, -1587459251)] == 0 then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Se))
		e8[LoadInteger(YDHT, id * cx, -1587459251)] = 1
		PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00耶律齐：|r |cFF99FFCC我一生酷爱打猎，平时有时间就会出来试试身手，你愿意一同前往吗|r\n|cFFFFCC00提示：|r |cFF99FFCC击杀山林中的|cFFADFF2F野猪首领|r\n")
		PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	else
		if e8[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Se))
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00你已经接下任务了\n|cFFFFCC00提示：|r |cFF99FFCC击杀山林中的|cFFADFF2F野猪首领|r\n")
			PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
function iK()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895353 -- INLINED!!
end

function jK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if g8[LoadInteger(YDHT, id * cx, -1587459251)] == 0 then
		if GetRandomInt(1, 70) <= 10 then
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Te))
			g8[LoadInteger(YDHT, id * cx, -1587459251)] = 1
			PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给全真教的丘掌门吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往全真教的|cFFADFF2F丘处机|r\n")
			PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			if GetRandomInt(1, 60) <= 10 then
				SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Ue))
				g8[LoadInteger(YDHT, id * cx, -1587459251)] = 2
				PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC全真教山下附近的豺狼经常出没攻击镖车，你能前往消灭他们吗|r\n|cFFFFCC00提示：|r |cFF99FFCC前往全真教山下的杀死10只|cFFADFF2F豺狼|r\n")
				PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
			else
				if GetRandomInt(1, 50) <= 10 then
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Ve))
					g8[LoadInteger(YDHT, id * cx, -1587459251)] = 3
					PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给燕子坞的慕容复吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往燕子坞的|cFFADFF2F慕容复|r\n")
					PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
				else
					if GetRandomInt(1, 40) <= 10 then
						SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(We))
						g8[LoadInteger(YDHT, id * cx, -1587459251)] = 4
						PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC燕子坞的蝎子王经常出没攻击镖车，你能前往消灭他们吗|r\n|cFFFFCC00提示：|r |cFF99FFCC前往燕子坞的杀死3只|cFFADFF2F蝎子王|r\n")
						PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
						RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					else
						if GetRandomInt(1, 30) <= 10 then
							SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Xe))
							g8[LoadInteger(YDHT, id * cx, -1587459251)] = 5
							PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
							DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给少林寺的达摩祖师吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往少林寺的|cFFADFF2F达摩祖师|r\n")
							PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
							RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
						else
							if GetRandomInt(1, 20) <= 10 then
								SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Ye))
								g8[LoadInteger(YDHT, id * cx, -1587459251)] = 6
								PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
								DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给雁门关的乔峰吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往雁门关的|cFFADFF2F乔峰|r\n")
								PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
								RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
							else
								g8[LoadInteger(YDHT, id * cx, -1587459251)] = 7
								SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Je))
								PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
								DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC西域邪教持续骚扰我中原武林，是时候给他们一点颜色了|r\n|cFFFFCC00提示：|r |cFF99FFCC守住武林正派，杀死10只|cFFADFF2F进攻的西域教徒|r\n")
								PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
								RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
							end
						end
					end
				end
			end
		end
	else
		if g8[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Te))
			PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给全真教的邱掌门吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往全真教的|cFFADFF2F丘处机|r\n")
			PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			if g8[LoadInteger(YDHT, id * cx, -1587459251)] == 2 then
				SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Ue))
				PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC全真教山下附近的豺狼经常出没攻击镖车，你能前往消灭他们吗|r\n|cFFFFCC00提示：|r |cFF99FFCC前往全真教山下的杀死10只|cFFADFF2F豺狼|r\n")
				PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
			else
				if g8[LoadInteger(YDHT, id * cx, -1587459251)] == 3 then
					SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Ve))
					PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给燕子坞的慕容复吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往燕子坞的|cFFADFF2F慕容复|r\n")
					PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
					RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
				else
					if g8[LoadInteger(YDHT, id * cx, -1587459251)] == 4 then
						SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(We))
						PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC燕子坞的蝎子王经常出没攻击镖车，你能前往消灭他们吗|r\n|cFFFFCC00提示：|r |cFF99FFCC前往燕子坞的杀死5只|cFFADFF2F蝎子王|r\n")
						PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
						RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
					else
						if g8[LoadInteger(YDHT, id * cx, -1587459251)] == 5 then
							SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Xe))
							PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
							DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给少林寺的达摩祖师吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往少林寺的|cFFADFF2F达摩祖师|r\n")
							PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
							RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
						else
							if g8[LoadInteger(YDHT, id * cx, -1587459251)] == 6 then
								SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Ye))
								PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
								DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC我这有一封信，你帮我送给雁门关的乔峰吧|r\n|cFFFFCC00提示：|r |cFF99FFCC前往雁门关的|cFFADFF2F乔峰|r\n")
								PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
								RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
							else
								if g8[LoadInteger(YDHT, id * cx, -1587459251)] == 7 then
									SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Je))
									PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
									DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC西域邪教持续骚扰我中原武林，是时候给他们一点颜色了|r\n|cFFFFCC00提示：|r |cFF99FFCC守住武林正派，杀死10只|cFFADFF2F进攻的西域教徒|r\n")
									PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
									RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
								end
							end
						end
					end
				end
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
function mK()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and g8[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 1 -- INLINED!!
end
function nK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得江湖声望+20，经验值+300")
	g8[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	qd[LoadInteger(YDHT, id * cx, -1587459251)] = qd[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 20
	AddHeroXP(LoadUnitHandle(YDHT, id * cx, -784714656), 300, true)
	if GetRandomInt(1, 35) <= fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] - 5 then
		unitadditembyidswapped(gudong[GetRandomInt(1, 3)], LoadUnitHandle(YDHT, id * cx, -784714656))
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function pK()
	return GetUnitTypeId(GetTriggerUnit()) == 1852272243 and g8[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 2
end
function qK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetKillingUnit())
	h8[LoadInteger(YDHT, id * cx, -1587459251)] = h8[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	if h8[LoadInteger(YDHT, id * cx, -1587459251)] >= 10 then
		h8[LoadInteger(YDHT, id * cx, -1587459251)] = 0
		PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得江湖声望+25，经验值+300")
		g8[LoadInteger(YDHT, id * cx, -1587459251)] = 0
		shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 25
		AddHeroXP(GetKillingUnit(), 300, true)
		qd[LoadInteger(YDHT, id * cx, -1587459251)] = qd[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		if GetRandomInt(1, 35) <= fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] - 5 then
			unitadditembyidswapped(gudong[GetRandomInt(1, 3)], LoadUnitHandle(YDHT, id * cx, -784714656))
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "豺狼：" .. (I2S(h8[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 10")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function sK()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and g8[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 3 -- INLINED!!
end
function tK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得江湖声望+20，经验值+300")
	g8[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 20
	AddHeroXP(LoadUnitHandle(YDHT, id * cx, -784714656), 300, true)
	qd[LoadInteger(YDHT, id * cx, -1587459251)] = qd[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	if GetRandomInt(1, 35) <= fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] - 5 then
		unitadditembyidswapped(gudong[GetRandomInt(1, 3)], LoadUnitHandle(YDHT, id * cx, -784714656))
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function vK()
	return GetUnitTypeId(GetTriggerUnit()) == 1851879010 and g8[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 4
end
function wK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	i8[LoadInteger(YDHT, id * cx, -1587459251)] = i8[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if i8[LoadInteger(YDHT, id * cx, -1587459251)] >= 3 then
		i8[LoadInteger(YDHT, id * cx, -1587459251)] = 0
		PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得江湖声望+30，经验值+300")
		qd[LoadInteger(YDHT, id * cx, -1587459251)] = qd[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		g8[LoadInteger(YDHT, id * cx, -1587459251)] = 0
		shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 30
		AddHeroXP(GetKillingUnit(), 300, true)
		if GetRandomInt(1, 35) <= fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] - 5 then
			unitadditembyidswapped(gudong[GetRandomInt(1, 3)], LoadUnitHandle(YDHT, id * cx, -784714656))
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "蝎子王：" .. (I2S(i8[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 3")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function yK()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and g8[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 5 -- INLINED!!
end
function zK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得江湖声望+20，经验值+300")
	g8[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 20
	AddHeroXP(LoadUnitHandle(YDHT, id * cx, -784714656), 300, true)
	qd[LoadInteger(YDHT, id * cx, -1587459251)] = qd[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	if GetRandomInt(1, 35) <= fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] - 5 then
		unitadditembyidswapped(gudong[GetRandomInt(1, 3)], LoadUnitHandle(YDHT, id * cx, -784714656))
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function aK()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and g8[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 6 -- INLINED!!
end
function BK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得江湖声望+20，经验值+300")
	g8[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 20
	AddHeroXP(LoadUnitHandle(YDHT, id * cx, -784714656), 300, true)
	qd[LoadInteger(YDHT, id * cx, -1587459251)] = qd[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	if GetRandomInt(1, 35) <= fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] - 5 then
		unitadditembyidswapped(gudong[GetRandomInt(1, 3)], LoadUnitHandle(YDHT, id * cx, -784714656))
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function CK()
	return GetKillingUnit() ~= nil and g8[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == 7
end
function cK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	j8[LoadInteger(YDHT, id * cx, -1587459251)] = j8[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if j8[LoadInteger(YDHT, id * cx, -1587459251)] >= 10 then
		j8[LoadInteger(YDHT, id * cx, -1587459251)] = 0
		PlaySoundOnUnitBJ(Hh, 100, GetKillingUnit())
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得江湖声望+30，经验值+300")
		g8[LoadInteger(YDHT, id * cx, -1587459251)] = 0
		shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 30
		AddHeroXP(GetKillingUnit(), 300, true)
		qd[LoadInteger(YDHT, id * cx, -1587459251)] = qd[LoadInteger(YDHT, id * cx, -1587459251)] + 1
		if GetRandomInt(1, 35) <= fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] - 5 then
			unitadditembyidswapped(gudong[GetRandomInt(1, 3)], LoadUnitHandle(YDHT, id * cx, -784714656))
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00你的运气（与福缘有关）太好了，竟然意外获得了一个古董")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "西域邪教：" .. (I2S(j8[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 10")
	end
	FlushChildHashtable(YDHT, id * cx)
end
function EK()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895364 -- INLINED!!
end
function FK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if qd[LoadInteger(YDHT, id * cx, -1587459251)] >= 3 then
		if o8[LoadInteger(YDHT, id * cx, -1587459251)] == false then
			if GetRandomInt(1, 100) <= 25 then
				unitadditembyidswapped(1227895125, GetTriggerUnit())
				o8[LoadInteger(YDHT, id * cx, -1587459251)] = true
				PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00获得" .. (GetItemName(bj_lastCreatedItem) or ""))
			else
				if GetRandomInt(1, 60) <= 20 then
					unitadditembyidswapped(1227895130, GetTriggerUnit())
					o8[LoadInteger(YDHT, id * cx, -1587459251)] = true
					PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00获得" .. (GetItemName(bj_lastCreatedItem) or ""))
				else
					if GetRandomInt(1, 60) <= 30 then
						unitadditembyidswapped(1227895124, GetTriggerUnit())
						o8[LoadInteger(YDHT, id * cx, -1587459251)] = true
						PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00获得" .. (GetItemName(bj_lastCreatedItem) or ""))
					else
						unitadditembyidswapped(1227895109, GetTriggerUnit())
						o8[LoadInteger(YDHT, id * cx, -1587459251)] = true
						PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
						DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00获得" .. (GetItemName(bj_lastCreatedItem) or ""))
					end
				end
			end
			SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
			if GetRandomInt(1, 180) <= 10 then
				createitemloc(1227895627, LoadLocationHandle(YDHT, id * cx, 392811314))
			else
				if GetRandomInt(1, 170) <= 10 then
					createitemloc(1227895385, LoadLocationHandle(YDHT, id * cx, 392811314))
				else
					if GetRandomInt(1, 160) <= 10 then
						createitemloc(1227895620, LoadLocationHandle(YDHT, id * cx, 392811314))
					else
						if GetRandomInt(1, 150) <= 10 then
							createitemloc(1227895382, LoadLocationHandle(YDHT, id * cx, 392811314))
						else
							if GetRandomInt(1, 140) <= 10 then
								createitemloc(1227895624, LoadLocationHandle(YDHT, id * cx, 392811314))
							else
								if GetRandomInt(1, 130) <= 10 then
									createitemloc(1227895621, LoadLocationHandle(YDHT, id * cx, 392811314))
								else
									if GetRandomInt(1, 120) <= 10 then
										createitemloc(1227895603, LoadLocationHandle(YDHT, id * cx, 392811314))
									else
										if GetRandomInt(1, 110) <= 10 then
											createitemloc(1227895383, LoadLocationHandle(YDHT, id * cx, 392811314))
										else
											if GetRandomInt(1, 100) <= 10 then
												createitemloc(1227895601, LoadLocationHandle(YDHT, id * cx, 392811314))
											else
												if GetRandomInt(1, 90) <= 10 then
													createitemloc(1227895623, LoadLocationHandle(YDHT, id * cx, 392811314))
												else
													if GetRandomInt(1, 80) <= 10 then
														createitemloc(1227895381, LoadLocationHandle(YDHT, id * cx, 392811314))
													else
														if GetRandomInt(1, 70) <= 10 then
															createitemloc(1227895626, LoadLocationHandle(YDHT, id * cx, 392811314))
														else
															if GetRandomInt(1, 60) <= 10 then
																createitemloc(1227895600, LoadLocationHandle(YDHT, id * cx, 392811314))
															else
																if GetRandomInt(1, 50) <= 10 then
																	createitemloc(1227895384, LoadLocationHandle(YDHT, id * cx, 392811314))
																else
																	if GetRandomInt(1, 40) <= 10 then
																		createitemloc(1227895625, LoadLocationHandle(YDHT, id * cx, 392811314))
																	else
																		if GetRandomInt(1, 30) <= 10 then
																			createitemloc(1227895386, LoadLocationHandle(YDHT, id * cx, 392811314))
																		else
																			if GetRandomInt(1, 20) <= 10 then
																				createitemloc(1227895628, LoadLocationHandle(YDHT, id * cx, 392811314))
																			else
																				createitemloc(1227895622, LoadLocationHandle(YDHT, id * cx, 392811314))
																			end
																		end
																	end
																end
															end
														end
													end
												end
											end
										end
									end
								end
							end
						end
					end
				end
			end
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00获得" .. (GetItemName(bj_lastCreatedItem) or ""))
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC你已经领过奖励了\n")
		end
	else
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00林远图：|r |cFF99FFCC需要完成至少3次押镖任务才可以领取奖励哦")
	end
	FlushChildHashtable(YDHT, id * cx)
end

function HK()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and (GetItemTypeId(GetManipulatedItem()) == 1227896132 or GetItemTypeId(GetManipulatedItem()) == 1227897175) -- INLINED!!
end
function IK()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = nil
	if GetItemTypeId(GetManipulatedItem()) == 1227896132 then
		if rd[i] == 0 then
			loc = GetRectCenter(Nf)
			rd[i] = 1
			PlaySoundOnUnitBJ(bh, 100, u)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00胡斐：|r |cFF99FFCC这一代时常有熊出没，能搞点熊皮来的话应该可以卖个好价钱|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F30只熊|r\n")
			PingMinimapLocForForce(ov(p), loc, 5.0)
			RemoveLocation(loc)
		elseif rd[i] == 1 then
			loc = GetRectCenter(Nf)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00胡斐：|r |cFF99FFCC这一代时常有熊出没，能搞点熊皮来的话应该可以卖个好价钱|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F30只熊|r\n")
			PingMinimapLocForForce(ov(p), loc, 5.0)
			RemoveLocation(loc)
		elseif rd[i] == 2 then
			DisplayTextToPlayer(p, 0, 0, "|cFfff0000这个任务你已经完成过了")
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227897175 then
		if LoadInteger(YDHT, StringHash("哑仆任务"), i) == 0 then
			SaveInteger(YDHT, StringHash("哑仆任务"), i, 1)
			PlaySoundOnUnitBJ(bh, 100, u)
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC黄老邪把我腿打断的时候，桃花岛上的哑仆一直欺负我，你能帮我杀掉十个哑仆吗|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F十个哑仆|r\n")
		elseif LoadInteger(YDHT, StringHash("哑仆任务"), i) == 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00周伯通：|r |cFF99FFCC杀掉十个哑仆了吗|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F十个哑仆|r\n")
		end
	end
end

function PK()
	return (GetTriggerUnit() == udg_hero[1] or GetTriggerUnit() == udg_hero[2] or GetTriggerUnit() == udg_hero[3] or GetTriggerUnit() == udg_hero[4] or GetTriggerUnit() == udg_hero[5]) and GetUnitLevel(GetTriggerUnit()) == 10 and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER
end
function QK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
	if GetRandomInt(1, 60) <= 10 then
		unitadditembyidswapped(1227895375, GetTriggerUnit())
	else
		if GetRandomInt(1, 50) <= 10 then
			unitadditembyidswapped(1227895370, GetTriggerUnit())
		else
			if GetRandomInt(1, 40) <= 10 then
				unitadditembyidswapped(1227895363, GetTriggerUnit())
			else
				if GetRandomInt(1, 30) <= 10 then
					unitadditembyidswapped(1227895368, GetTriggerUnit())
				else
					if GetRandomInt(1, 60) <= 30 then
						unitadditembyidswapped(1227895369, GetTriggerUnit())
					else
						unitadditembyidswapped(1227895365, GetTriggerUnit())
					end
				end
			end
		end
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00恭喜升到10级，获得" .. (GetItemName(bj_lastCreatedItem) or ""))
	FlushChildHashtable(YDHT, id * cx)
end

function SK()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895890 -- INLINED!!
end
function TK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if z9[LoadInteger(YDHT, id * cx, -1587459251)] == 0 then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Gg))
		z9[LoadInteger(YDHT, id * cx, -1587459251)] = 1
		PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00公孙绿萼：|r |cFF99FFCC杨过中了情花剧毒，你能替我想想办法救救他吗|r\n|cFFFFCC00提示：|r |cFF99FFCC采集绝情谷副本中的|cFFADFF2F断肠草|r\n")
		PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	else
		if z9[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(Gg))
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00你已经接下任务了\n|cFFFFCC00提示：|r |cFF99FFCC采集绝情谷副本的|cFFADFF2F断肠草|r\n")
			PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
--采集到断肠草
function VK()
	local id = GetHandleId(GetTriggeringTrigger())
	if GetItemTypeId(GetEnumItem()) == 1227895891 then
		SaveInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -1587459251, LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -1587459251) + 1)
		a9[LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -1587459251)] = GetEnumItem()
		B9[LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -1587459251)] = GetItemLoc(GetEnumItem())
	end
end
function WK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 0)
	EnumItemsInRectBJ(Gg, VK)
	FlushChildHashtable(YDHT, id * cx)
end
--断肠草
function YK()
	return GetItemTypeId(GetManipulatedItem()) == 1227895891
end
function ZK()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveItemHandle(YDHT, id * cx, 392811314, GetManipulatedItem())
	if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil == false then -- INLINED!!
		bj_forLoopAIndex = 1
		bj_forLoopAIndexEnd = 12
		for _ in _loop_() do
			if bj_forLoopAIndex > bj_forLoopAIndexEnd then break end
			if GetManipulatedItem() == a9[bj_forLoopAIndex] then
				createitemloc(1227895891, B9[bj_forLoopAIndex])
				a9[bj_forLoopAIndex] = bj_lastCreatedItem
				DisplayTimedTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, 15.0, "|CFFFF0000只能由主角来采集")
			end
			bj_forLoopAIndex = bj_forLoopAIndex + 1
		end
	else
		if z9[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
			A9[LoadInteger(YDHT, id * cx, -1587459251)] = A9[LoadInteger(YDHT, id * cx, -1587459251)] + 1
			if A9[LoadInteger(YDHT, id * cx, -1587459251)] >= 10 then
				z9[LoadInteger(YDHT, id * cx, -1587459251)] = 2
				A9[LoadInteger(YDHT, id * cx, -1587459251)] = 0
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务请前往公孙绿萼换取奖励")
			else
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "断肠草：" .. (I2S(A9[LoadInteger(YDHT, id * cx, -1587459251)]) or "") .. " / 10")
			end
			CreateNUnitsAtLoc(1, 1752196449, Player(15), v7[1], bj_UNIT_FACING)
			ShowUnitHide(bj_lastCreatedUnit)
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, GetRandomReal(20.0, 25.0))
			bj_forLoopAIndex = 1
			bj_forLoopAIndexEnd = 12
			for _ in _loop_() do
				if bj_forLoopAIndex > bj_forLoopAIndexEnd then break end
				if LoadItemHandle(YDHT, id * cx, 392811314) == a9[bj_forLoopAIndex] then
					b9[bj_forLoopAIndex] = bj_lastCreatedUnit
				end
				bj_forLoopAIndex = bj_forLoopAIndex + 1
			end
		else
			bj_forLoopAIndex = 1
			bj_forLoopAIndexEnd = 12
			for _ in _loop_() do
				if bj_forLoopAIndex > bj_forLoopAIndexEnd then break end
				if LoadItemHandle(YDHT, id * cx, 392811314) == a9[bj_forLoopAIndex] then
					createitemloc(1227895891, B9[bj_forLoopAIndex])
					a9[bj_forLoopAIndex] = bj_lastCreatedItem
					DisplayTimedTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, 15.0, "|CFFFF0000身上没有该任务或已经完成了")
				end
				bj_forLoopAIndex = bj_forLoopAIndex + 1
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
--完成断肠草任务
function eL()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and z9[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 2 -- INLINED!!
end
function fL()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	PlaySoundOnUnitBJ(Hh, 100, GetTriggerUnit())
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	z9[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 100
	if GetRandomInt(1, 40) <= 20 then
		unitadditembyidswapped(1227894872, GetTriggerUnit())
	else
		unitadditembyidswapped(1227894873, GetTriggerUnit())
	end
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务江湖声望+100，并获得" .. (GetItemName(bj_lastCreatedItem) or ""))
	FlushChildHashtable(YDHT, id * cx)
end
function hL()
	return GetUnitTypeId(GetTriggerUnit()) == 1752196449
end
function iL()
	bj_forLoopAIndex = 1
	bj_forLoopAIndexEnd = 12
	for _ in _loop_() do
		if bj_forLoopAIndex > bj_forLoopAIndexEnd then break end
		if GetTriggerUnit() == b9[bj_forLoopAIndex] then
			createitemloc(1227895891, B9[bj_forLoopAIndex])
			a9[bj_forLoopAIndex] = bj_lastCreatedItem
		end
		bj_forLoopAIndex = bj_forLoopAIndex + 1
	end
end

function kL()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896387 -- INLINED!!
end
function mL()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if Sd[LoadInteger(YDHT, id * cx, -1587459251)] == 0 then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(gh))
		Sd[LoadInteger(YDHT, id * cx, -1587459251)] = 1
		PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00完颜萍：|r |cFF99FFCC耶律楚材受伤了，你能帮个忙啊|r\n|cFFFFCC00提示：|r |cFF99FFCC护送耶律楚材回|cFFADFF2F大辽国|r\n")
		PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
		SaveLocationHandle(YDHT, id * cx, 1231311908, GetRectCenter(hh))
		CreateNUnitsAtLoc(1, 1853254706, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1231311908), bj_UNIT_FACING)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851986, LoadLocationHandle(YDHT, id * cx, 1585647951))
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1231311908))
	else
		if Sd[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(gh))
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00你已经接下任务了\n|cFFFFCC00提示：|r |cFF99FFCC护送耶律楚材回|cFFADFF2F大辽国|r\n")
			PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00你已经完成了这个任务了（不可重复接取）")
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
function oL()
	return GetUnitTypeId(GetTriggerUnit()) == 1853254706
end
function pL()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetTriggerPlayer()))
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFF0000任务失败了")
	Sd[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	PlaySoundOnUnitBJ(Gh, 100, udg_hero[LoadInteger(YDHT, id * cx, -1587459251)])
	FlushChildHashtable(YDHT, id * cx)
end
function rL()
	return GetUnitTypeId(GetTriggerUnit()) == 1853254706
end
function sL()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	PlaySoundOnUnitBJ(Hh, 100, udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	Sd[LoadInteger(YDHT, id * cx, -1587459251)] = 2
	shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 150
	juexuelingwu[LoadInteger(YDHT, id * cx, -1587459251)] = juexuelingwu[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	RemoveUnit(GetTriggerUnit())
	AdjustPlayerStateBJ(30000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
	AdjustPlayerStateBJ(20, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务江湖声望+150，并获得金钱+30000、稀有币+20、绝学领悟力+1")
	ShowUnitShow(gg_unit_nvl2_0005)
	FlushChildHashtable(YDHT, id * cx)
end

function uL()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896388 -- INLINED!!
end
function vL()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	if Td[LoadInteger(YDHT, id * cx, -1587459251)] == 0 then
		SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(xg))
		Td[LoadInteger(YDHT, id * cx, -1587459251)] = 1
		PlaySoundOnUnitBJ(bh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00苗人凤：|r |cFF99FFCC很多武林恶势力犯事之后都躲到了高昌迷宫里|r\n|cFFFFCC00提示：|r |cFF99FFCC分别杀死|cFFADFF2F10个门派叛徒和武林恶徒|r\n")
		PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	else
		if Td[LoadInteger(YDHT, id * cx, -1587459251)] == 1 then
			SaveLocationHandle(YDHT, id * cx, 1585647951, GetRectCenter(xg))
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFFFFCC00苗人凤：|r |cFF99FFCC很多武林恶势力犯事之后都躲到了高昌迷宫里|r\n|cFFFFCC00提示：|r |cFF99FFCC分别杀死|cFFADFF2F10个门派叛徒和武林恶徒|r\n")
			PingMinimapLocForForce(ov(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251))), LoadLocationHandle(YDHT, id * cx, 1585647951), 5.0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
		else
			if Td[LoadInteger(YDHT, id * cx, -1587459251)] == 2 then
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|cFfff0000这个任务你无法再接取了")
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
-- 完成高昌迷宫任务
function xL()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and Td[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 1 and Vd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 10 and Ud[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 10 -- INLINED!!
end
function yL()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
	if GetRandomInt(1, 50) <= fuyuan[LoadInteger(YDHT, id * cx, -1587459251)] then
		SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
		if GetRandomInt(1, 100) <= 10 then
			createitemloc(1227896370, LoadLocationHandle(YDHT, id * cx, 392811314))
		else
			if GetRandomInt(1, 90) <= 10 then
				createitemloc(1227896371, LoadLocationHandle(YDHT, id * cx, 392811314))
			else
				if GetRandomInt(1, 80) <= 10 then
					createitemloc(1227896369, LoadLocationHandle(YDHT, id * cx, 392811314))
				else
					if GetRandomInt(1, 70) <= 10 then
						createitemloc(1227896374, LoadLocationHandle(YDHT, id * cx, 392811314))
					else
						if GetRandomInt(1, 60) <= 10 then
							createitemloc(1227896372, LoadLocationHandle(YDHT, id * cx, 392811314))
						else
							if GetRandomInt(1, 50) <= 10 then
								createitemloc(1227896368, LoadLocationHandle(YDHT, id * cx, 392811314))
							else
								if GetRandomInt(1, 40) <= 10 then
									createitemloc(1227896377, LoadLocationHandle(YDHT, id * cx, 392811314))
								else
									if GetRandomInt(1, 30) <= 10 then
										createitemloc(1227896376, LoadLocationHandle(YDHT, id * cx, 392811314))
									else
										if GetRandomInt(1, 20) <= 10 then
											createitemloc(1227896375, LoadLocationHandle(YDHT, id * cx, 392811314))
										else
											createitemloc(1227896373, LoadLocationHandle(YDHT, id * cx, 392811314))
										end
									end
								end
							end
						end
					end
				end
			end
		end
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得江湖声望+200和绝学隐藏招式残章一本\n")
		Td[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	else
		if GetRandomInt(1, 50) <= 15 then
			unitadditembyidswapped(1227896390, GetTriggerUnit())
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得江湖声望+200和号令天下令\n")
			Td[LoadInteger(YDHT, id * cx, -1587459251)] = 0
		else
			SaveLocationHandle(YDHT, id * cx, 392811314, GetUnitLoc(GetTriggerUnit()))
			createitemloc(gudong[GetRandomInt(4, 9)], LoadLocationHandle(YDHT, id * cx, 392811314))
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 392811314))
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得江湖声望+200和古董一个")
			Td[LoadInteger(YDHT, id * cx, -1587459251)] = 0
		end
	end
	shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 200
	Vd[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	Ud[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	FlushChildHashtable(YDHT, id * cx)
end

function AL()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and (GetItemTypeId(GetManipulatedItem()) == 1227896389 or GetItemTypeId(GetManipulatedItem()) == 1227899214) -- INLINED!!
end
function aL()
	local u = GetTriggerUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local loc = GetRectCenter(mh)
	if GetItemTypeId(GetManipulatedItem()) == 1227896389 then
		if Wd[i] == 0 then
			Wd[i] = 1
			PlaySoundOnUnitBJ(bh, 100, u)
			DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00乔峰：|r |cFF99FFCC最近辽国养兵蓄锐，似乎对大宋有所企图，若能擒住辽国第一先锋，百姓才能避免战祸|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F辽国第一先锋|r\n")
			PingMinimapLocForForce(bj_FORCE_ALL_PLAYERS, loc, 5.0)
			RemoveLocation(loc)
		else
			DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00乔峰：|r |cFF99FFCC最近辽国养兵蓄锐，似乎对大宋有所企图，若能擒住辽国第一先锋，百姓才能避免战祸|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F辽国第一先锋|r\n")
			PingMinimapLocForForce(bj_FORCE_ALL_PLAYERS, loc, 5.0)
			RemoveLocation(loc)
		end
	else
		if jiuazi[i] == 0 then
			if udg_runamen[i] == 10 then
				jiuazi[i] = 1
				DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00乔峰：|r |cFF99FFCC阿紫被丁老头抓走了，请英雄帮我击败丁春秋，救出阿紫|r\n|cFFFFCC00提示：|r |cFF99FFCC杀死|cFFADFF2F丁春秋|r\n")
			else
				DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00乔峰：|r |cFF99FFCC你不是星宿派中人，无法接此任务|r\n")
			end
		else
			DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00乔峰：|r |cFF99FFCC你已完成任务|r\n")
		end
	end
end
function bL()
	return GetUnitTypeId(GetTriggerUnit()) == 1751543663 or GetUnitTypeId(GetTriggerUnit()) == 1868852084 or GetUnitTypeId(GetTriggerUnit()) == 1747988554
end
function CL()
	local p = GetOwningPlayer(GetKillingUnit())
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(GetTriggerUnit())
	if GetUnitTypeId(GetTriggerUnit()) == 1751543663 and GetOwningPlayer(GetTriggerUnit()) == Player(12) then
		if Wd[i] == 1 then
			Wd[i] = 2
			DisplayTextToPlayer(p, 0, 0, "|CFF34FF00恭喜击破辽国第一先锋，你可以回去领奖励了")
		elseif Wd[i] == 2 then
			DisplayTextToPlayer(p, 0, 0, "|CFF34FF00你已经杀过这个怪了，还是先回去交任务把")
		end
	elseif GetUnitTypeId(GetTriggerUnit()) == 1868852084 then
		if jiuazi[i] == 1 then
			jiuazi[i] = 2
			DisplayTextToPlayer(p, 0, 0, "|CFF34FF00击败丁春秋，阿紫现身")
			CreateNUnitsAtLoc(1, 1747988554, Player(12), loc, bj_UNIT_FACING)
		end
	elseif GetUnitTypeId(GetTriggerUnit()) == 1747988554 then
		createitemloc(1227899213, loc)
		SetItemUserData(bj_lastCreatedItem, GetRandomInt(1, 5) * 10000000 + GetRandomInt(1, 5) * 1000000 + GetRandomInt(1, 5) * 100000 + GetRandomInt(1, 5) * 10000)
		DisplayTextToPlayer(p, 0, 0, "|CFF34FF00击败阿紫，获得神木王鼎")
	end
	RemoveLocation(loc)
	p = nil
	loc = nil
end
function DL()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and Wd[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == 2 -- INLINED!!
end
function EL()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	PlaySoundOnUnitBJ(Hh, 100, LoadUnitHandle(YDHT, id * cx, -784714656))
	unitadditembyidswapped(YaoCao[4], GetTriggerUnit())
	if GetRandomInt(1, 75) <= 25 then
		--遗忘石
		unitadditembyidswapped(1227896395, GetTriggerUnit())
	else
		if GetRandomInt(1, 50) <= 25 then
			--打孔符
			unitadditembyidswapped(1227896398, GetTriggerUnit())
		else
			--神偷令
			unitadditembyidswapped(1227896393, GetTriggerUnit())
		end
	end
	--三分之一概率双倍掉落
	if GetRandomInt(1, 3) == 1 then
		if GetRandomInt(1, 75) <= 25 then
			--遗忘石
			unitadditembyidswapped(1227896395, GetTriggerUnit())
		else
			if GetRandomInt(1, 50) <= 25 then
				--打孔符
				unitadditembyidswapped(1227896398, GetTriggerUnit())
			else
				--神偷令
				unitadditembyidswapped(1227896393, GetTriggerUnit())
			end
		end
	end
	shengwang[LoadInteger(YDHT, id * cx, -1587459251)] = shengwang[LoadInteger(YDHT, id * cx, -1587459251)] + 250
	Wd[LoadInteger(YDHT, id * cx, -1587459251)] = 0
	DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "|CFF34FF00完成任务获得江湖声望+250，金银花一个和" .. (GetItemName(bj_lastCreatedItem) or ""))
	FlushChildHashtable(YDHT, id * cx)
end
function Tasks_Trigger()
	local t = CreateTrigger()
	Fo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Fo, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Fo, Condition(IsNewBeeTask))
	TriggerAddAction(Fo, AcceptNewBeeTask)
	Go = CreateTrigger()
	TriggerAddRect(Go, Pe)
	TriggerAddCondition(Go, Condition(IsNewBeeTaskVisitGuoJing))
	TriggerAddAction(Go, CompleteVisitGuoJing)
	Jn = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Jn, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Jn, Condition(IsKillingWolves))
	TriggerAddAction(Jn, CompleteKillingWolves)
	Ho = CreateTrigger()
	TriggerAddRect(Ho, Re)
	TriggerAddRect(Ho, Ie)
	TriggerAddRect(Ho, le)
	TriggerAddCondition(Ho, Condition(IsVisitShaoLin))
	TriggerAddAction(Ho, CompleteVisitShaoLin)
	-- 杀人系统
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsLookingForGoods))
	TriggerAddAction(t, LookingForGoods)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsGiveUpCurrentGoods))
	TriggerAddAction(t, GiveUpCurrentGoods)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsCompleteLookingForGoods))
	TriggerAddAction(t, CompleteLookingForGoods)
	-- 寻宝系统
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsYangShou))
	TriggerAddAction(t, KillYangShou)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsFangQiYangShou))
	TriggerAddAction(t, FangQiYangShou)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(IsWanChengYangShou))
	TriggerAddAction(t, WanChengYangShou)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsQiuHun))
	TriggerAddAction(t, QiuHun_Action)
	t = CreateTrigger()
	TriggerAddRect(t, botong)
	TriggerAddCondition(t, Condition(IsQiuHunWan))
	TriggerAddAction(t, QiuHunWanCheng)
	Io = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Io, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Io, Condition(QJ))
	TriggerAddAction(Io, RJ)
	lo = CreateTrigger()
	TriggerAddRect(lo, Bg)
	TriggerAddCondition(lo, Condition(TJ))
	TriggerAddAction(lo, UJ)
	Jo = CreateTrigger()
	TriggerAddRect(Jo, Xe)
	TriggerAddCondition(Jo, Condition(WJ))
	TriggerAddAction(Jo, XJ)
	Ko = CreateTrigger()
	TriggerAddRect(Ko, Pe)
	TriggerAddCondition(Ko, Condition(ZJ))
	TriggerAddAction(Ko, dK)
	Lo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Lo, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Lo, Condition(fK))
	TriggerAddAction(Lo, gK)
	Mo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Mo, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Mo, Condition(iK))
	TriggerAddAction(Mo, jK)
	No = CreateTrigger()
	TriggerAddRect(No, Te)
	TriggerAddCondition(No, Condition(mK))
	TriggerAddAction(No, nK)
	Oo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Oo, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Oo, Condition(pK))
	TriggerAddAction(Oo, qK)
	Po = CreateTrigger()
	TriggerAddRect(Po, Ve)
	TriggerAddCondition(Po, Condition(sK))
	TriggerAddAction(Po, tK)
	Qo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Qo, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Qo, Condition(vK))
	TriggerAddAction(Qo, wK)
	Ro = CreateTrigger()
	TriggerAddRect(Ro, Xe)
	TriggerAddCondition(Ro, Condition(yK))
	TriggerAddAction(Ro, zK)
	So = CreateTrigger()
	TriggerAddRect(So, Ye)
	TriggerAddCondition(So, Condition(aK))
	TriggerAddAction(So, BK)
	-- 杀10个西域邪教单位
	To = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(To, Player(6), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(To, Condition(CK))
	TriggerAddAction(To, cK)
	-- 押镖三次奖励
	Uo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Uo, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Uo, Condition(EK))
	TriggerAddAction(Uo, FK)
	--接杀熊、桃花岛哑仆的任务
	Vo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Vo, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Vo, Condition(HK))
	TriggerAddAction(Vo, IK)

	--升10级自动奖励丹药
	Yo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Yo, EVENT_PLAYER_HERO_LEVEL)
	TriggerAddCondition(Yo, Condition(PK))
	TriggerAddAction(Yo, QK)
	-- 接断肠草任务
	Zo = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Zo, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(Zo, Condition(SK))
	TriggerAddAction(Zo, TK)
	-- 生成断肠草
	dp = CreateTrigger()
	TriggerRegisterTimerEventSingle(dp, 1.0)
	TriggerAddAction(dp, WK)
	-- 采集到断肠草
	ep = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(ep, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(ep, Condition(YK))
	TriggerAddAction(ep, ZK)
	-- 完成断肠草任务
	fp = CreateTrigger()
	TriggerAddRect(fp, lg)
	TriggerAddCondition(fp, Condition(eL))
	TriggerAddAction(fp, fL)
	-- TODO
	gp = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(gp, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(gp, Condition(hL))
	TriggerAddAction(gp, iL)
	-- 护送耶律楚材任务
	hp = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(hp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(hp, Condition(kL))
	TriggerAddAction(hp, mL)
	-- 护送耶律楚材任务失败
	jp = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(jp, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(jp, Condition(oL))
	TriggerAddAction(jp, pL)
	-- 完成护送耶律楚材任务
	kp = CreateTrigger()
	TriggerAddRect(kp, gh)
	TriggerAddCondition(kp, Condition(rL))
	TriggerAddAction(kp, sL)
	-- 高昌迷宫任务
	mp = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(mp, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(mp, Condition(uL))
	TriggerAddAction(mp, vL)
	-- 完成高昌迷宫任务
	np = CreateTrigger()
	TriggerAddRect(np, kh)
	TriggerAddCondition(np, Condition(xL))
	TriggerAddAction(np, yL)
	--辽国第一先锋任务+拯救阿紫任务
	op = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(op, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(op, Condition(AL))
	TriggerAddAction(op, aL)
	-- 击败辽国第一先锋、丁春秋、阿紫
	pp = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(pp, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(pp, Condition(bL))
	TriggerAddAction(pp, CL)
	-- 完成辽国军心任务
	qp = CreateTrigger()
	TriggerAddRect(qp, Ye)
	TriggerAddCondition(qp, Condition(DL))
	TriggerAddAction(qp, EL)

	t = nil
end
--神器系统
--=====================================
--
--         神   器   系   统
--
--=====================================

function isKillArtifactCreature()
	return GetUnitTypeId(GetTriggerUnit()) == 1747988558 or GetUnitTypeId(GetTriggerUnit()) == 1848651859 or GetUnitTypeId(GetTriggerUnit()) == 1848651860 or GetUnitTypeId(GetTriggerUnit()) == 1848651861
end

function killArtifactCreature()
	local u = GetTriggerUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))
	local l__ut = udg_hero[i]
	if GetUnitTypeId(u) == 1747988558 then --七绝圣手
		shengwang[1] = shengwang[1] + 100
		shengwang[2] = shengwang[2] + 100
		shengwang[3] = shengwang[3] + 100
		shengwang[4] = shengwang[4] + 100
		shengwang[5] = shengwang[5] + 100
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00ff00击杀七绝圣手，全员获得江湖声望+100")
		dropItem(l__ut, 1227895114, 1227899955, 50) --七绝护符或武学精要
	elseif GetUnitTypeId(u) == 1848651859 then --璇玑道长
		shengwang[1] = shengwang[1] + 200
		shengwang[2] = shengwang[2] + 200
		shengwang[3] = shengwang[3] + 200
		shengwang[4] = shengwang[4] + 200
		shengwang[5] = shengwang[5] + 200
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00ff00击杀璇玑道长，全员获得江湖声望+200")
		dropItem(l__ut, 1227895108, 1227899955, 50) --天璇护腕或武学精要
	elseif GetUnitTypeId(u) == 1848651860 then --木桑道人
		shengwang[1] = shengwang[1] + 300
		shengwang[2] = shengwang[2] + 300
		shengwang[3] = shengwang[3] + 300
		shengwang[4] = shengwang[4] + 300
		shengwang[5] = shengwang[5] + 300
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00ff00击杀七绝圣手，全员获得江湖声望+300")
		dropItem(l__ut, 1227894868, 1227899955, 50) --神行鞋或武学精要
	elseif GetUnitTypeId(u) == 1848651861 then --天王老子
		shengwang[1] = shengwang[1] + 400
		shengwang[2] = shengwang[2] + 400
		shengwang[3] = shengwang[3] + 400
		shengwang[4] = shengwang[4] + 400
		shengwang[5] = shengwang[5] + 400
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff00ff00击杀七绝圣手，全员获得江湖声望+400")
		dropItem(l__ut, 1227894858, 1227899955, 50) --神迹戒或武学精要
	end
	u = nil
	l__ut = nil
end
--是否传送到爆神器怪所在区域
function isTransportToFindArtifact()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and (GetItemTypeId(GetManipulatedItem()) == 1227899738 or GetItemTypeId(GetManipulatedItem()) == 1227899952 or GetItemTypeId(GetManipulatedItem()) == 1227899953 or GetItemTypeId(GetManipulatedItem()) == 1227899954) -- INLINED!!
end
--传送到爆神器怪所在区域
function transportToFindArtifact()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetItemTypeId(GetManipulatedItem()) == 1227899738 then
		if xiuxing[i] < 2 then
			SetUnitPosition(udg_hero[i], -4864, -11137)
			PanCameraToTimedForPlayer(GetTriggerPlayer(), -4864, -11137, 0)
			DisplayTextToPlayer(p, 0, 0, "|CFF00ff33前往挑战七绝圣手")
		else
			DisplayTextToPlayer(p, 0, 0, "|CFF00ff33历练2后不能进行挑战")
		end
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227899952 then
		if xiuxing[i] < 3 then
			SetUnitPosition(udg_hero[i], -4106, -12123)
			PanCameraToTimedForPlayer(GetTriggerPlayer(), -4106, -12123, 0)
			DisplayTextToPlayer(p, 0, 0, "|CFF00ff33前往挑战璇玑道长")
		else
			DisplayTextToPlayer(p, 0, 0, "|CFF00ff33历练3后不能进行挑战")
		end
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227899953 then
		if xiuxing[i] < 5 then
			SetUnitPosition(udg_hero[i], -3267, -11156)
			PanCameraToTimedForPlayer(GetTriggerPlayer(), -3267, -11156, 0)
			DisplayTextToPlayer(p, 0, 0, "|CFF00ff33前往挑战木桑道人")
		else
			DisplayTextToPlayer(p, 0, 0, "|CFF00ff33历练5后不能进行挑战")
		end
	end
	if GetItemTypeId(GetManipulatedItem()) == 1227899954 then
		if xiuxing[i] < 6 then
			SetUnitPosition(udg_hero[i], -2319, -12132)
			PanCameraToTimedForPlayer(GetTriggerPlayer(), -2319, -12132, 0)
			DisplayTextToPlayer(p, 0, 0, "|CFF00ff33前往挑战天王老子")
		else
			DisplayTextToPlayer(p, 0, 0, "|CFF00ff33历练6后不能进行挑战")
		end
	end
	p = nil
	u = nil
end
-- 是否使用武学精要
function isUseWuXueJingYao()
	return GetItemTypeId(GetManipulatedItem()) == 1227899955
end
function useWuXueJingYao()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local j = 1
	if not (IsUnitType(u, UNIT_TYPE_HERO) ~= nil) then -- INLINED!!
		DisplayTextToPlayer(p, 0, 0, "|CFF00ff33只能由英雄使用！")
		UnitAddItemById(u, 1227899955)
		return
	end

	if jingyao_dialog[i] == nil then
		jingyao_dialog[i] = DialogCreate() -- 初始化对话框
	end
	DialogSetMessage(jingyao_dialog[i], "请选择要精修的武学！")
	if I7[(i - 1) * 20 + 1] ~= 1095067243 then
		DialogAddButtonBJ(jingyao_dialog[i], GetObjectName(I7[(i - 1) * 20 + 1]))
		jingyao_button1[i] = bj_lastCreatedButton
	end
	if I7[(i - 1) * 20 + 2] ~= 1095067243 then
		DialogAddButtonBJ(jingyao_dialog[i], GetObjectName(I7[(i - 1) * 20 + 2]))
		jingyao_button2[i] = bj_lastCreatedButton
	end
	if I7[(i - 1) * 20 + 3] ~= 1095067243 then
		DialogAddButtonBJ(jingyao_dialog[i], GetObjectName(I7[(i - 1) * 20 + 3]))
		jingyao_button3[i] = bj_lastCreatedButton
	end
	if I7[(i - 1) * 20 + 4] ~= 1095067243 then
		DialogAddButtonBJ(jingyao_dialog[i], GetObjectName(I7[(i - 1) * 20 + 4]))
		jingyao_button4[i] = bj_lastCreatedButton
	end
	if I7[(i - 1) * 20 + 5] ~= 1095067243 then
		DialogAddButtonBJ(jingyao_dialog[i], GetObjectName(I7[(i - 1) * 20 + 5]))
		jingyao_button5[i] = bj_lastCreatedButton
	end
	if I7[(i - 1) * 20 + 6] ~= 1095067243 then
		DialogAddButtonBJ(jingyao_dialog[i], GetObjectName(I7[(i - 1) * 20 + 6]))
		jingyao_button6[i] = bj_lastCreatedButton
	end
	if I7[(i - 1) * 20 + 7] ~= 1095067243 then
		DialogAddButtonBJ(jingyao_dialog[i], GetObjectName(I7[(i - 1) * 20 + 7]))
		jingyao_button7[i] = bj_lastCreatedButton
	end
	if I7[(i - 1) * 20 + 8] ~= 1095067243 then
		DialogAddButtonBJ(jingyao_dialog[i], GetObjectName(I7[(i - 1) * 20 + 8]))
		jingyao_button8[i] = bj_lastCreatedButton
	end
	if I7[(i - 1) * 20 + 9] ~= 1095067243 then
		DialogAddButtonBJ(jingyao_dialog[i], GetObjectName(I7[(i - 1) * 20 + 9]))
		jingyao_button9[i] = bj_lastCreatedButton
	end
	if I7[(i - 1) * 20 + 10] ~= 1095067243 then
		DialogAddButtonBJ(jingyao_dialog[i], GetObjectName(I7[(i - 1) * 20 + 10]))
		jingyao_button10[i] = bj_lastCreatedButton
	end
	if I7[(i - 1) * 20 + 11] ~= 1095067243 then
		DialogAddButtonBJ(jingyao_dialog[i], GetObjectName(I7[(i - 1) * 20 + 11]))
		jingyao_button11[i] = bj_lastCreatedButton
	end
	DialogAddButtonBJ(jingyao_dialog[i], "取消")
	jingyao_button_cancel[i] = bj_lastCreatedButton
	DialogDisplay(p, jingyao_dialog[i], true)
	u = nil
	p = nil
end
-- 精修武学
function deepLearnSkill(p, num)
	local i = 1 + GetPlayerId(p)
	SaveReal(YDHT, GetHandleId(p), I7[(i - 1) * 20 + num] * 12, LoadReal(YDHT, GetHandleId(p), I7[(i - 1) * 20 + num] * 12) + 0.5)
	DisplayTimedTextToPlayer(p, 0, 0, 10.0, "|CFFFF9933成功精修武学：" .. (GetObjectName(I7[(i - 1) * 20 + num]) or ""))
end
-- 选择要精修的武学
function chooseDeepLearnSkill()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	if GetClickedButton() == jingyao_button1[i] then
		deepLearnSkill(p, 1)
	elseif GetClickedButton() == jingyao_button2[i] then
		deepLearnSkill(p, 2)
	elseif GetClickedButton() == jingyao_button3[i] then
		deepLearnSkill(p, 3)
	elseif GetClickedButton() == jingyao_button4[i] then
		deepLearnSkill(p, 4)
	elseif GetClickedButton() == jingyao_button5[i] then
		deepLearnSkill(p, 5)
	elseif GetClickedButton() == jingyao_button6[i] then
		deepLearnSkill(p, 6)
	elseif GetClickedButton() == jingyao_button7[i] then
		deepLearnSkill(p, 7)
	elseif GetClickedButton() == jingyao_button8[i] then
		deepLearnSkill(p, 8)
	elseif GetClickedButton() == jingyao_button9[i] then
		deepLearnSkill(p, 9)
	elseif GetClickedButton() == jingyao_button10[i] then
		deepLearnSkill(p, 10)
	elseif GetClickedButton() == jingyao_button11[i] then
		deepLearnSkill(p, 11)
	elseif GetClickedButton() == jingyao_button_cancel[i] then
		UnitAddItemById(udg_hero[i], 1227899955)
	end
	DialogClear(jingyao_dialog[i])
	p = nil
end

function ArtifactTrigger()
	-- 击杀爆神器的怪
	local t = CreateTrigger()
	jingyao_dialog[1] = DialogCreate()
	jingyao_dialog[2] = DialogCreate()
	jingyao_dialog[3] = DialogCreate()
	jingyao_dialog[4] = DialogCreate()
	jingyao_dialog[5] = DialogCreate()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(isKillArtifactCreature))
	TriggerAddAction(t, killArtifactCreature)

	-- 传送到爆神器怪所在区域
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(isTransportToFindArtifact))
	TriggerAddAction(t, transportToFindArtifact)

	-- 使用武学精要
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(isUseWuXueJingYao))
	TriggerAddAction(t, useWuXueJingYao)

	-- 选择要精修的武学
	t = CreateTrigger()
	TriggerRegisterDialogEvent(t, jingyao_dialog[1])
	TriggerRegisterDialogEvent(t, jingyao_dialog[2])
	TriggerRegisterDialogEvent(t, jingyao_dialog[3])
	TriggerRegisterDialogEvent(t, jingyao_dialog[4])
	TriggerRegisterDialogEvent(t, jingyao_dialog[5])
	TriggerAddAction(t, chooseDeepLearnSkill)
	t = nil
end
---------各种丹药开始-------//
--医术丹
function VO()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895375
end
function WO()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if yongdanshu[i] < 10 or yongdanshu[i] < 15 and Ce[i] == 1 then
		yongdanshu[i] = yongdanshu[i] + 1
		yishu[i] = yishu[i] + 1
		PlaySoundOnUnitBJ(Eh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC医术+1|r")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前医术为：|r|cFF99FFCC" .. (I2S(yishu[i]) or ""))
		if Ce[i] ~= 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 10")
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 15")
		end
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你在本次游戏里已经达到了使用属性丹上限，无法再使用本类道具")
	end
	u = nil
	p = nil
end
--悟性丹
function YO()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895370
end
function ZO()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if yongdanshu[i] < 10 or yongdanshu[i] < 15 and Ce[i] == 1 then
		yongdanshu[i] = yongdanshu[i] + 1
		wuxing[i] = wuxing[i] + 1
		PlaySoundOnUnitBJ(Eh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC悟性+1|r")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前悟性为：|r|cFF99FFCC" .. (I2S(wuxing[i]) or ""))
		if Ce[i] ~= 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 10")
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 15")
		end
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你在本次游戏里已经达到了使用属性丹上限，无法再使用本类道具")
	end
	u = nil
	p = nil
end
--根骨丹
function e0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895363
end
function f0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if yongdanshu[i] < 10 or yongdanshu[i] < 15 and Ce[i] == 1 then
		yongdanshu[i] = yongdanshu[i] + 1
		gengu[i] = gengu[i] + 1
		PlaySoundOnUnitBJ(Eh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC根骨+1|r")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前根骨为：|r|cFF99FFCC" .. (I2S(gengu[i]) or ""))
		if Ce[i] ~= 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 10")
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 15")
		end
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你在本次游戏里已经达到了使用属性丹上限，无法再使用本类道具")
	end
	u = nil
	p = nil
end
--福缘丹
function h0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895368
end
function i0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if yongdanshu[i] < 10 or yongdanshu[i] < 15 and Ce[i] == 1 then
		yongdanshu[i] = yongdanshu[i] + 1
		fuyuan[i] = fuyuan[i] + 1
		PlaySoundOnUnitBJ(Eh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC福缘+1|r")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前福缘为：|r|cFF99FFCC" .. (I2S(fuyuan[i]) or ""))
		if Ce[i] ~= 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 10")
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 15")
		end
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你在本次游戏里已经达到了使用属性丹上限，无法再使用本类道具")
	end
	u = nil
	p = nil
end
--经脉丹
function k0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895369
end
function m0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if yongdanshu[i] < 10 or yongdanshu[i] < 15 and Ce[i] == 1 then
		yongdanshu[i] = yongdanshu[i] + 1
		jingmai[i] = jingmai[i] + 1
		PlaySoundOnUnitBJ(Eh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC经脉+1|r")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前经脉为：|r|cFF99FFCC" .. (I2S(jingmai[i]) or ""))
		if Ce[i] ~= 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 10")
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 15")
		end
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你在本次游戏里已经达到了使用属性丹上限，无法再使用本类道具")
	end
	u = nil
	p = nil
end
--胆魄丹
function o0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895365
end
function p0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if yongdanshu[i] < 10 or yongdanshu[i] < 15 and Ce[i] == 1 then
		yongdanshu[i] = yongdanshu[i] + 1
		danpo[i] = danpo[i] + 1
		PlaySoundOnUnitBJ(Eh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC胆魄+1|r")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前胆魄为：|r|cFF99FFCC" .. (I2S(danpo[i]) or ""))
		if Ce[i] ~= 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 10")
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 15")
		end
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你在本次游戏里已经达到了使用属性丹上限，无法再使用本类道具")
	end
	u = nil
	p = nil
end
--乾坤丹
function r0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895371
end
function s0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if yongdanshu[i] < 10 or yongdanshu[i] < 15 and Ce[i] == 1 then
		DialogSetMessage(v8[i], "请选择要减1的属性")
		DialogAddButtonBJ(v8[i], "根骨")
		w8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(v8[i], "悟性")
		y8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(v8[i], "福缘")
		z8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(v8[i], "胆魄")
		A8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(v8[i], "医术")
		a8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(v8[i], "经脉")
		x8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(v8[i], "取消")
		B8[i] = bj_lastCreatedButton
		DialogDisplay(p, v8[i], true)
		b8[i] = true
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你在本次游戏里已经达到了使用属性丹上限，无法再使用本类道具")
	end
	u = nil
	p = nil
end
function u0()
	return b8[1 + GetPlayerId(GetTriggerPlayer())]
end
function v0()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	b8[i] = false
	if GetClickedButton() == B8[i] then
		unitadditembyidswapped(1227895371, P4[i])
		DialogClear(v8[i])
	else
		if GetClickedButton() == w8[i] then
			gengu[i] = gengu[i] - 1
			DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC根骨-1|r")
		elseif GetClickedButton() == y8[i] then
			wuxing[i] = wuxing[i] - 1
			DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC悟性-1|r")
		elseif GetClickedButton() == z8[i] then
			fuyuan[i] = fuyuan[i] - 1
			DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC福缘-1|r")
		elseif GetClickedButton() == A8[i] then
			danpo[i] = danpo[i] - 1
			DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC胆魄-1|r")
		elseif GetClickedButton() == a8[i] then
			yishu[i] = yishu[i] - 1
			DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC医术-1|r")
		elseif GetClickedButton() == x8[i] then
			jingmai[i] = jingmai[i] - 1
			DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC经脉-1|r")
		end
		DialogClear(v8[i])
		DialogSetMessage(D8[i], "请选择要加3的属性")
		DialogAddButtonBJ(D8[i], "根骨")
		w8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(D8[i], "悟性")
		y8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(D8[i], "福缘")
		z8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(D8[i], "胆魄")
		A8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(D8[i], "医术")
		a8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(D8[i], "经脉")
		x8[i] = bj_lastCreatedButton
		DialogDisplay(p, D8[i], true)
		C8[i] = true
	end
	p = nil
end
function x0()
	return C8[1 + GetPlayerId(GetTriggerPlayer())]
end
function y0()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	C8[i] = false
	if GetClickedButton() == w8[i] then
		gengu[i] = gengu[i] + 3
		DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC根骨+3|r")
	elseif GetClickedButton() == y8[i] then
		wuxing[i] = wuxing[i] + 3
		DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC悟性+3|r")
	elseif GetClickedButton() == z8[i] then
		fuyuan[i] = fuyuan[i] + 3
		DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC福缘+3|r")
	elseif GetClickedButton() == A8[i] then
		danpo[i] = danpo[i] + 3
		DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC胆魄+3|r")
	elseif GetClickedButton() == a8[i] then
		yishu[i] = yishu[i] + 3
		DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC医术+3|r")
	elseif GetClickedButton() == x8[i] then
		jingmai[i] = jingmai[i] + 3
		DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC经脉+3|r")
	end
	DialogClear(D8[i])
	yongdanshu[i] = yongdanshu[i] + 1
	PlaySoundOnUnitBJ(Eh, 100, udg_hero[i])
	if Ce[i] ~= 1 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 10")
	else
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 15")
	end
	p = nil
end
function A0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895372
end
function a0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if yongdanshu[i] < 10 or yongdanshu[i] < 15 and Ce[i] == 1 then
		if GetRandomInt(1, 5) == 3 then
			if GetRandomInt(1, 6) == 1 then
				yishu[i] = yishu[i] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC医术+1|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前医术为：|r|cFF99FFCC" .. (I2S(yishu[i]) or ""))
			elseif GetRandomInt(1, 5) == 2 then
				wuxing[i] = wuxing[i] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC悟性+1|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前悟性为：|r|cFF99FFCC" .. (I2S(wuxing[i]) or ""))
			elseif GetRandomInt(1, 4) == 3 then
				gengu[i] = gengu[i] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC根骨+1|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前根骨为：|r|cFF99FFCC" .. (I2S(gengu[i]) or ""))
			elseif GetRandomInt(1, 3) == 2 then
				fuyuan[i] = fuyuan[i] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC福缘+1|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前福缘为：|r|cFF99FFCC" .. (I2S(fuyuan[i]) or ""))
			elseif GetRandomInt(1, 2) == 2 then
				jingmai[i] = jingmai[i] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC经脉+1|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前经脉为：|r|cFF99FFCC" .. (I2S(jingmai[i]) or ""))
			else
				danpo[i] = danpo[i] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC胆魄+1|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前胆魄为：|r|cFF99FFCC" .. (I2S(danpo[i]) or ""))
			end
		elseif GetRandomInt(1, 4) == 3 then
			if GetRandomInt(1, 6) == 1 then
				yishu[i] = yishu[i] + 3
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC医术+3|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前医术为：|r|cFF99FFCC" .. (I2S(yishu[i]) or ""))
			elseif GetRandomInt(1, 5) == 2 then
				wuxing[i] = wuxing[i] + 3
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC悟性+3|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前悟性为：|r|cFF99FFCC" .. (I2S(wuxing[i]) or ""))
			elseif GetRandomInt(1, 4) == 3 then
				gengu[i] = gengu[i] + 3
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC根骨+3|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前根骨为：|r|cFF99FFCC" .. (I2S(gengu[i]) or ""))
			elseif GetRandomInt(1, 3) == 2 then
				fuyuan[i] = fuyuan[i] + 3
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC福缘+3|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前福缘为：|r|cFF99FFCC" .. (I2S(fuyuan[i]) or ""))
			elseif GetRandomInt(1, 2) == 2 then
				jingmai[i] = jingmai[i] + 3
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC经脉+3|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前经脉为：|r|cFF99FFCC" .. (I2S(jingmai[i]) or ""))
			else
				danpo[i] = danpo[i] + 3
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC胆魄+3|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前胆魄为：|r|cFF99FFCC" .. (I2S(danpo[i]) or ""))
			end
		else
			if GetRandomInt(1, 6) == 1 then
				yishu[i] = yishu[i] + 2
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC医术+2|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前医术为：|r|cFF99FFCC" .. (I2S(yishu[i]) or ""))
			elseif GetRandomInt(1, 5) == 2 then
				wuxing[i] = wuxing[i] + 2
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC悟性+2|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前悟性为：|r|cFF99FFCC" .. (I2S(wuxing[i]) or ""))
			elseif GetRandomInt(1, 4) == 3 then
				gengu[i] = gengu[i] + 2
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC根骨+2|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前根骨为：|r|cFF99FFCC" .. (I2S(gengu[i]) or ""))
			elseif GetRandomInt(1, 3) == 2 then
				fuyuan[i] = fuyuan[i] + 2
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC福缘+2|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前福缘为：|r|cFF99FFCC" .. (I2S(fuyuan[i]) or ""))
			elseif GetRandomInt(1, 2) == 2 then
				jingmai[i] = jingmai[i] + 2
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC经脉+2|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前经脉为：|r|cFF99FFCC" .. (I2S(jingmai[i]) or ""))
			else
				danpo[i] = danpo[i] + 2
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC胆魄+2|r")
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前胆魄为：|r|cFF99FFCC" .. (I2S(danpo[i]) or ""))
			end
		end
		PlaySoundOnUnitBJ(Eh, 100, u)
		yongdanshu[i] = yongdanshu[i] + 1
		if Ce[i] ~= 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 10")
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 15")
		end
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你在本次游戏里已经达到了使用属性丹上限，无法再使用本类道具")
	end
	u = nil
	p = nil
end
--脱胎换骨丹
function b0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895374
end
function C0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if yongdanshu[i] < 10 or yongdanshu[i] < 15 and Ce[i] == 1 then
		DialogSetMessage(v8[i], "请选择要+6的属性")
		DialogAddButtonBJ(v8[i], "根骨")
		w8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(v8[i], "悟性")
		y8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(v8[i], "福缘")
		z8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(v8[i], "胆魄")
		A8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(v8[i], "医术")
		a8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(v8[i], "经脉")
		x8[i] = bj_lastCreatedButton
		DialogAddButtonBJ(v8[i], "取消")
		B8[i] = bj_lastCreatedButton
		DialogDisplay(p, v8[i], true)
		c8[i] = true
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你在本次游戏里已经达到了使用属性丹上限，无法再使用本类道具")
	end
	u = nil
	p = nil
end
function D0()
	return c8[1 + GetPlayerId(GetTriggerPlayer())]
end
function E0()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	c8[i] = false
	if GetClickedButton() == B8[i] then
		unitadditembyidswapped(1227895374, udg_hero[i])
		DialogClear(v8[i])
	else
		if GetClickedButton() == w8[i] then
			gengu[i] = gengu[i] + 6
			wuxing[i] = wuxing[i] - 1
			fuyuan[i] = fuyuan[i] - 1
			yishu[i] = yishu[i] - 1
			jingmai[i] = jingmai[i] - 1
			danpo[i] = danpo[i] - 1
			DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC根骨+6|r")
		elseif GetClickedButton() == y8[i] then
			wuxing[i] = wuxing[i] + 6
			gengu[i] = gengu[i] - 1
			fuyuan[i] = fuyuan[i] - 1
			yishu[i] = yishu[i] - 1
			jingmai[i] = jingmai[i] - 1
			danpo[i] = danpo[i] - 1
			DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC悟性+6|r")
		elseif GetClickedButton() == z8[i] then
			fuyuan[i] = fuyuan[i] + 6
			gengu[i] = gengu[i] - 1
			wuxing[i] = wuxing[i] - 1
			yishu[i] = yishu[i] - 1
			jingmai[i] = jingmai[i] - 1
			danpo[i] = danpo[i] - 1
			DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC福缘+6|r")
		elseif GetClickedButton() == A8[i] then
			danpo[i] = danpo[i] + 6
			gengu[i] = gengu[i] - 1
			wuxing[i] = wuxing[i] - 1
			fuyuan[i] = fuyuan[i] - 1
			yishu[i] = yishu[i] - 1
			jingmai[i] = jingmai[i] - 1
			DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC胆魄+6|r")
		elseif GetClickedButton() == a8[i] then
			yishu[i] = yishu[i] + 6
			gengu[i] = gengu[i] - 1
			wuxing[i] = wuxing[i] - 1
			fuyuan[i] = fuyuan[i] - 1
			jingmai[i] = jingmai[i] - 1
			danpo[i] = danpo[i] - 1
			DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC医术+6|r")
		elseif GetClickedButton() == x8[i] then
			gengu[i] = gengu[i] - 1
			wuxing[i] = wuxing[i] - 1
			fuyuan[i] = fuyuan[i] - 1
			yishu[i] = yishu[i] - 1
			jingmai[i] = jingmai[i] + 6
			danpo[i] = danpo[i] - 1
			DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC经脉+6|r")
		end
		DialogClear(v8[i])
		DisplayTextToPlayer(p, 0, 0, "|cFF99FFCC其它属性-1|r")
		yongdanshu[i] = yongdanshu[i] + 1
		PlaySoundOnUnitBJ(Eh, 100, udg_hero[i])
		if Ce[i] ~= 1 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 10")
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前已经服用属性丹数量：|r|cFF99FFCC" .. (I2S(yongdanshu[i]) or "") .. " / 15")
		end
	end
	p = nil
end
--黑玉断续膏
function G0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895888
end
function H0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if v9[i] == false or udg_junzhu[i] == true then
		v9[i] = true
		PlaySoundOnUnitBJ(Eh, 100, u)
		ModifyHeroStat(2, udg_hero[i], 0, 50)
		DisplayTextToPlayer(Player(-1 + i), 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC真实伤害提升50|r")
		if Ce[i] == 7 and udg_junzhu[i] == false then
			udg_junzhu[i] = true
			if udg_zhangmen[i] == true then
			else
				SaveStr(YDHT, GetHandleId(p), GetHandleId(p), "〓郡主〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			end
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" .. (GetPlayerName(p) or "") .. "获得郡主")
			SetPlayerName(p, "〓郡主〓" .. (GetPlayerName(p) or ""))
		end
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你已经使用过本道具了，每个角色只能使用最多1个")
	end
	u = nil
	p = nil
end
--天王保命丹
function l0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895887
end
function J0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if w9[i] == false then
		w9[i] = true
		PlaySoundOnUnitBJ(Eh, 100, u)
		UnitAddAbility(udg_hero[i], 1093678923)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC气血提升20000|r")
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你已经使用过本道具了，每个角色只能使用最多1个")
	end
	u = nil
	p = nil
end
--生生造化丹
function L0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895886
end
function M0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if y9[i] == false or udg_junzhu[i] == true then
		y9[i] = true
		PlaySoundOnUnitBJ(Eh, 100, u)
		ModifyHeroStat(1, udg_hero[i], 0, 40)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC内力提升40|r")
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你已经使用过本道具了，每个角色只能使用最多1个")
	end
	u = nil
	p = nil
end
--九花玉露丸
function O0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227895889
end
function P0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if x9[i] == false then
		x9[i] = true
		PlaySoundOnUnitBJ(Eh, 100, u)
		juexuelingwu[i] = juexuelingwu[i] + 1
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC绝学领悟力+1|r")
	else
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
		PlaySoundOnUnitBJ(Gh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00你已经使用过本道具了，每个角色只能使用最多1个")
	end
	u = nil
	p = nil
end
--绝元丹
function R0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896406
end
function S0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	PlaySoundOnUnitBJ(Eh, 100, u)
	juexuelingwu[i] = juexuelingwu[i] + 2
	DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC绝学领悟力+2|r")
	u = nil
	p = nil
end
--大还丹
function U0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896407
end
function V0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	PlaySoundOnUnitBJ(Eh, 100, u)
	ModifyHeroStat(1, udg_hero[i], 0, 100)
	DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC内力提升100|r")
	u = nil
	p = nil
end
--无极丹
function X0()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896408
end
function Y0()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	PlaySoundOnUnitBJ(Eh, 100, u)
	DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC所有武功CD时间清除|r")
	UnitResetCooldown(udg_hero[i])
	u = nil
	p = nil
end
--续命八丸
function dP()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896410
end
function eP()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if ge[i] then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000已经使用过本道具了，重复使用无效果")
		unitadditembyidswapped(GetItemTypeId(GetManipulatedItem()), u)
	else
		PlaySoundOnUnitBJ(Eh, 100, u)
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC复活时间减半|r")
		ge[i] = true
	end
	u = nil
	p = nil
end
--通犀地龙丸
function gP()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896624
end
function hP()
	ie = ie + 60
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 10.0, "|cFFFFCC00使用通犀地龙丸成功|r|cFF99FFCC延迟下波进攻怪物60秒|r")
end
--白云熊胆丸
function jP()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896409
end
function kP()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetRandomInt(1, 6) == 1 then
		yishu[i] = yishu[i] + 3
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC医术+3|r")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前医术为：|r|cFF99FFCC" .. (I2S(yishu[i]) or ""))
	elseif GetRandomInt(1, 5) == 2 then
		wuxing[i] = wuxing[i] + 3
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC悟性+3|r")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前悟性为：|r|cFF99FFCC" .. (I2S(wuxing[i]) or ""))
	elseif GetRandomInt(1, 4) == 3 then
		gengu[i] = gengu[i] + 3
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC根骨+3|r")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前根骨为：|r|cFF99FFCC" .. (I2S(gengu[i]) or ""))
	elseif GetRandomInt(1, 3) == 2 then
		fuyuan[i] = fuyuan[i] + 3
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC福缘+3|r")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前福缘为：|r|cFF99FFCC" .. (I2S(fuyuan[i]) or ""))
	elseif GetRandomInt(1, 2) == 2 then
		jingmai[i] = jingmai[i] + 3
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC经脉+3|r")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前经脉为：|r|cFF99FFCC" .. (I2S(jingmai[i]) or ""))
	else
		danpo[i] = danpo[i] + 3
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00使用成功|r|cFF99FFCC胆魄+3|r")
		DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00当前胆魄为：|r|cFF99FFCC" .. (I2S(danpo[i]) or ""))
	end
	u = nil
	p = nil
end
--传功丹
function nP()
	return GetSpellAbilityId() == 1093679447
end
function oP()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local l__ut = GetSpellTargetUnit()
	local j = GetPlayerId(GetOwningPlayer(l__ut))
	DialogSetMessage(je[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], "请选择想被传授的武功")
	te[i] = j
	if I7[j * 20 + 1] ~= 1095067243 then
		DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 1]))
		ke[i] = bj_lastCreatedButton
	end
	if I7[j * 20 + 2] ~= 1095067243 then
		DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 2]))
		ne[i] = bj_lastCreatedButton
	end
	if I7[j * 20 + 3] ~= 1095067243 then
		DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 3]))
		oe[i] = bj_lastCreatedButton
	end
	if I7[j * 20 + 4] ~= 1095067243 then
		DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 4]))
		pe[i] = bj_lastCreatedButton
	end
	if I7[j * 20 + 5] ~= 1095067243 then
		DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 5]))
		qe[i] = bj_lastCreatedButton
	end
	if I7[j * 20 + 6] ~= 1095067243 then
		DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 6]))
		me[i] = bj_lastCreatedButton
	end
	if I7[j * 20 + 7] ~= 1095067243 then
		DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 7]))
		re[i] = bj_lastCreatedButton
	end
	if I7[j * 20 + 8] ~= 1095067243 then
		DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 8]))
		rre[i] = bj_lastCreatedButton
	end
	if I7[j * 20 + 9] ~= 1095067243 then
		DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 9]))
		re9[i] = bj_lastCreatedButton
	end
	if I7[j * 20 + 10] ~= 1095067243 then
		DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 10]))
		re10[i] = bj_lastCreatedButton
	end
	if I7[j * 20 + 11] ~= 1095067243 then
		DialogAddButtonBJ(je[i], GetObjectName(I7[j * 20 + 11]))
		re11[i] = bj_lastCreatedButton
	end
	DialogAddButtonBJ(je[i], "取消")
	se[i] = bj_lastCreatedButton
	DialogDisplay(p, je[i], true)
	u = nil
	p = nil
	l__ut = nil
end
function QiuJiao(p, num)
	local i = 1 + GetPlayerId(p)
	L7[i] = 1
	for _ in _loop_() do
		if L7[i] > wugongshu[i] then break end
		if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
			if L7[i] == wugongshu[i] then
				unitadditembyidswapped(1227896625, P4[i])
				DisplayTextToPlayer(p, 0, 0, "|CFFFF0033学习技能已达上限，请先遗忘部分技能")
				if true then break end
			end
		else
			if I7[(i - 1) * 20 + 1] ~= I7[te[i] * 20 + num] and I7[(i - 1) * 20 + 2] ~= I7[te[i] * 20 + num] and I7[(i - 1) * 20 + 3] ~= I7[te[i] * 20 + num] and I7[(i - 1) * 20 + 4] ~= I7[te[i] * 20 + num] and I7[(i - 1) * 20 + 5] ~= I7[te[i] * 20 + num] and I7[(i - 1) * 20 + 6] ~= I7[te[i] * 20 + num] and I7[(i - 1) * 20 + 7] ~= I7[te[i] * 20 + num] and I7[(i - 1) * 20 + 8] ~= I7[te[i] * 20 + num] and I7[(i - 1) * 20 + 9] ~= I7[te[i] * 20 + num] and I7[(i - 1) * 20 + 10] ~= I7[te[i] * 20 + num] and I7[(i - 1) * 20 + 11] ~= I7[te[i] * 20 + num] then
				UnitAddAbility(udg_hero[i], I7[te[i] * 20 + num])
				UnitMakeAbilityPermanent(udg_hero[i], true, I7[te[i] * 20 + num])
				I7[(i - 1) * 20 + L7[i]] = I7[te[i] * 20 + num]
				DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033传闻" .. (GetPlayerName(p) or "") .. "向" .. (GetPlayerName(Player(-1 + (te[i] + 1))) or "") .. "虚心求教，成功的学会了" .. (GetObjectName(I7[te[i] * 20 + num]) or ""))
				S9 = 1
				for _ in _loop_() do
					if S9 > 20 then break end
					if I7[te[i] * 20 + num] == MM9[S9] then
						udg_shanghaijiacheng[i] = udg_shanghaijiacheng[i] + udg_jueneishjc[S9]
						ModifyHeroStat(1, udg_hero[i], 0, udg_jueneiminjie[S9])
						udg_baojilv[i] = udg_baojilv[i] + udg_jueneibaojilv[S9]
						juexuelingwu[i] = juexuelingwu[i] + udg_jueneijxlw[S9]
						udg_shanghaixishou[i] = udg_shanghaixishou[i] + udg_jueneishxs[S9]
					end
					S9 = S9 + 1
				end
				if true then break end
			else
				DisplayTextToPlayer(p, 0, 0, "|CFFFF0033你已经学会这种武功了")
				unitadditembyidswapped(1227896625, P4[i])
				if true then break end
			end
		end
		L7[i] = L7[i] + 1
	end
end
function qP()
	local u = udg_hero[1 + GetPlayerId(GetTriggerPlayer())]
	local i = 1 + GetPlayerId(GetTriggerPlayer())
	local p = GetTriggerPlayer()
	if GetClickedButton() == ke[i] then
		QiuJiao(p, 1)
	elseif GetClickedButton() == ne[i] then
		QiuJiao(p, 2)
	elseif GetClickedButton() == oe[i] then
		QiuJiao(p, 3)
	elseif GetClickedButton() == pe[i] then
		QiuJiao(p, 4)
	elseif GetClickedButton() == qe[i] then
		QiuJiao(p, 5)
	elseif GetClickedButton() == me[i] then
		QiuJiao(p, 6)
	elseif GetClickedButton() == re[i] then
		QiuJiao(p, 7)
	elseif GetClickedButton() == rre[i] then
		QiuJiao(p, 8)
	elseif GetClickedButton() == re9[i] then
		QiuJiao(p, 9)
	elseif GetClickedButton() == re10[i] then
		QiuJiao(p, 10)
	elseif GetClickedButton() == re11[i] then
		QiuJiao(p, 11)
	elseif GetClickedButton() == se[i] then
		unitadditembyidswapped(1227896625, P4[i])
	end
	DialogClear(je[i])
end
--十香软筋散
function sP()
	return GetSpellAbilityId() == 1093679448
end
function tP()
	local id = GetHandleId(GetTriggeringTrigger())
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function uP()
	local id = GetHandleId(GetTriggeringTrigger())
	SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -655065443, GetEnumUnit())
	SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 612156901, GetUnitLoc(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -655065443)))
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)), LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 612156901), bj_UNIT_FACING)
	UnitAddAbility(bj_lastCreatedUnit, 1093679450)
	IssueTargetOrderById(bj_lastCreatedUnit, 852075, LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -655065443))
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	ShowUnitHide(bj_lastCreatedUnit)
	RemoveLocation(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 612156901))
end
function vP()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetSpellTargetLoc())
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(800.0, LoadLocationHandle(YDHT, id * cx, 1585647951), Condition(tP)), uP)
	FlushChildHashtable(YDHT, id * cx)
end
--三尸脑神丹
function xP()
	return GetSpellAbilityId() == 1093681456
end
function yP()
	local id = GetHandleId(GetTriggeringTrigger())
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function zP()
	local id = GetHandleId(GetTriggeringTrigger())
	SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -655065443, GetEnumUnit())
	SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 612156901, GetUnitLoc(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -655065443)))
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)), LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 612156901), bj_UNIT_FACING)
	UnitAddAbility(bj_lastCreatedUnit, 1093681457)
	IssueTargetOrderById(bj_lastCreatedUnit, 852189, LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -655065443))
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	ShowUnitHide(bj_lastCreatedUnit)
	RemoveLocation(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 612156901))
end
function AP()
	local loc = GetSpellTargetLoc()
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600.0, loc, Condition(yP)), zP)
	RemoveLocation(loc)
	loc = nil
end
--七星海棠
function BP()
	return GetSpellAbilityId() == 1093681459
end
function bP()
	local u = GetSpellTargetUnit()
	YDWEPolledWaitNull(0.3)
	SetWidgetLife(u, 0.7 * GetUnitState(u, UNIT_STATE_LIFE))
	u = nil
end
---------各种丹药结束-------//
------------炼丹系统开始----------//
function isLianDanItem(it)
	if GetItemTypeId(it) == 1227896652 or GetItemTypeId(it) == 1227896653 or GetItemTypeId(it) == 1227896654 or GetItemTypeId(it) == 1227896655 or GetItemTypeId(it) == 1227896656 or GetItemTypeId(it) == 1227896657 or GetItemTypeId(it) == 1227896658 or GetItemTypeId(it) == 1227896650 or GetItemTypeId(it) == 1227896649 or GetItemTypeId(it) == 1227896651 or GetItemTypeId(it) == 1227896139 then
		return true
	end
	return false
end
function CorresDan(dan)
	if dan == 1227896652 then
		return 1227896409
	elseif dan == 1227896654 then
		return 1227896625
	elseif dan == 1227896649 then
		return 1227896407
	elseif dan == 1227896656 then
		return 1227896628
	elseif dan == 1227896657 then
		return 1227896406
	elseif dan == 1227896658 then
		return 1227896629
	elseif dan == 1227896651 then
		return 1227896627
	elseif dan == 1227896139 then
		return 1227896626
	elseif dan == 1227896650 then
		return 1227896624
	elseif dan == 1227896653 then
		return 1227896408
	elseif dan == 1227896655 then
		return 1227896410
	end
	return 0
end
function EP()
	if GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and isLianDanItem(GetManipulatedItem()) then
		if Ce[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] ~= 1 and UnitHaveItem(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], 1227899213) == false then
			DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00你不是炼丹师，并且未携带神木王鼎，不可以炼制丹药")
			AdjustPlayerStateBJ(2000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
			return false
		else
			return true
		end
	end
	return false
end
function LianSomeDan(u, it, dan, ys, y1, y2, yy)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local j = 0
	local yin = 0
	local yang = 0
	local que = 0
	if GetItemTypeId(it) == dan then
		if yishu[i] < ys then
			AdjustPlayerStateBJ(2000, p, PLAYER_STATE_RESOURCE_GOLD)
			DisplayTimedTextToPlayer(p, 0, 0, 5.0, "|cffff0000医术不足！")
		elseif UnitHaveItem(u, yy) == false then
			AdjustPlayerStateBJ(2000, p, PLAYER_STATE_RESOURCE_GOLD)
			DisplayTimedTextToPlayer(p, 0, 0, 5.0, "|cffff0000缺少炼制丹药的药引！")
		else
			DisplayTimedTextToPlayer(p, 0, 0, 5.0, "|cff00ff00炼制丹药中.......")
			j = 1
			for _ in _loop_() do
				if j > 6 then break end
				if GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[11] then
					yin = yin + 5
					yang = yang + 1
					RemoveItem(UnitItemInSlotBJ(u, j))
				elseif GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[9] then
					yang = yang + 4
					RemoveItem(UnitItemInSlotBJ(u, j))
				elseif GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[10] then
					yin = yin + 3
					yang = yang + 4
					RemoveItem(UnitItemInSlotBJ(u, j))
				elseif GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[8] then
					yin = yin + 4
					yang = yang + 3
					RemoveItem(UnitItemInSlotBJ(u, j))
				elseif GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[7] then
					yin = yin + 4
					RemoveItem(UnitItemInSlotBJ(u, j))
				elseif GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[12] then
					yin = yin + 1
					yang = yang + 5
					RemoveItem(UnitItemInSlotBJ(u, j))
				elseif GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[6] then
					yin = yin + 2
					yang = yang + 3
					RemoveItem(UnitItemInSlotBJ(u, j))
				elseif GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[1] then
					yin = yin + 2
					yang = yang + 1
					RemoveItem(UnitItemInSlotBJ(u, j))
				elseif GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[2] then
					yin = yin + 1
					yang = yang + 2
					RemoveItem(UnitItemInSlotBJ(u, j))
				elseif GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[3] then
					yin = yin + 3
					yang = yang - 1
					RemoveItem(UnitItemInSlotBJ(u, j))
				elseif GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[4] then
					yin = yin - 1
					yang = yang + 3
					RemoveItem(UnitItemInSlotBJ(u, j))
				elseif GetItemTypeId(UnitItemInSlotBJ(u, j)) == YaoCao[5] then
					yin = yin + 3
					yang = yang + 2
					RemoveItem(UnitItemInSlotBJ(u, j))
				end
				j = j + 1
			end
			if yin >= y1 then
			else
				que = y1 - yin
				DisplayTimedTextToPlayer(p, 0, 0, 5.0, "|cff00ff33阴性缺" .. (I2S(y1 - yin) or "") .. "，炼制成功率降低了" .. (I2S((y1 - yin) * 5) or "") .. "%")
			end
			if yang >= y2 then
			else
				que = que + y2 - yang
				DisplayTimedTextToPlayer(p, 0, 0, 5.0, "|cff00ff33阳性缺" .. (I2S(y2 - yang) or "") .. "，炼制成功率降低了" .. (I2S((y2 - yang) * 5) or "") .. "%")
			end
			if udg_lddsbool[i] then
				que = que - 4
				DisplayTimedTextToPlayer(p, 0, 0, 5.0, "|cff00ff33由于你是炼丹大师，炼制成功率提高20%")
			end
			if GetRandomInt(1, 20) <= 20 - que then
				unitadditembyidswapped(CorresDan(dan), u)
				DisplayTimedTextToPlayer(p, 0, 0, 5.0, "|cff00ffff恭喜炼制成功！")
				udg_ldds[i] = udg_ldds[i] + 1
				if udg_ldds[i] <= 5 and udg_lddsbool[i] == false then
					DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您炼成第" .. (I2S(udg_ldds[i]) or "") .. "颗丹药，炼成5颗可获得大师哦")
				end
				if udg_ldds[i] == 5 and udg_lddsbool[i] == false then
					udg_lddsbool[i] = true
					if udg_zhangmen[i] == true then
					else
						SaveStr(YDHT, GetHandleId(p), GetHandleId(p), "〓炼丹大师〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
					end
					DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" .. (GetPlayerName(p) or "") .. "获得炼丹大师")
					SetPlayerName(p, "〓炼丹大师〓" .. (GetPlayerName(p) or ""))
				end
			else
				DisplayTimedTextToPlayer(p, 0, 0, 5.0, "|cffff0000炼制失败！")
			end
		end
	end
	u = nil
	p = nil
end
function FP()
	local u = GetTriggerUnit()
	LianSomeDan(u, GetManipulatedItem(), 1227896652, 26, 18, 18, YaoCao[8])
	LianSomeDan(u, GetManipulatedItem(), 1227896654, 15, 10, 10, YaoCao[5])
	LianSomeDan(u, GetManipulatedItem(), 1227896649, 24, 15, 20, YaoCao[9])
	LianSomeDan(u, GetManipulatedItem(), 1227896656, 15, 18, 19, YaoCao[3])
	LianSomeDan(u, GetManipulatedItem(), 1227896657, 30, 10, 24, YaoCao[12])
	LianSomeDan(u, GetManipulatedItem(), 1227896658, 26, 24, 8, YaoCao[11])
	LianSomeDan(u, GetManipulatedItem(), 1227896651, 22, 20, 12, YaoCao[7])
	LianSomeDan(u, GetManipulatedItem(), 1227896139, 15, 15, 5, YaoCao[2])
	LianSomeDan(u, GetManipulatedItem(), 1227896650, 15, 12, 12, YaoCao[10])
	LianSomeDan(u, GetManipulatedItem(), 1227896653, 16, 5, 16, YaoCao[4])
	LianSomeDan(u, GetManipulatedItem(), 1227896655, 22, 15, 15, YaoCao[6])
	u = nil
end
------------炼丹系统结束----------//
function ElixirSystem_Trigger()
	local t = CreateTrigger()
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(VO))
	TriggerAddAction(t, WO)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(YO))
	TriggerAddAction(t, ZO)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(e0))
	TriggerAddAction(t, f0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(h0))
	TriggerAddAction(t, i0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(k0))
	TriggerAddAction(t, m0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(o0))
	TriggerAddAction(t, p0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(r0))
	TriggerAddAction(t, s0)
	t = CreateTrigger()
	TriggerRegisterDialogEvent(t, v8[1])
	TriggerRegisterDialogEvent(t, v8[2])
	TriggerRegisterDialogEvent(t, v8[3])
	TriggerRegisterDialogEvent(t, v8[4])
	TriggerRegisterDialogEvent(t, v8[5])
	TriggerAddCondition(t, Condition(u0))
	TriggerAddAction(t, v0)
	t = CreateTrigger()
	TriggerRegisterDialogEvent(t, D8[1])
	TriggerRegisterDialogEvent(t, D8[2])
	TriggerRegisterDialogEvent(t, D8[3])
	TriggerRegisterDialogEvent(t, D8[4])
	TriggerRegisterDialogEvent(t, D8[5])
	TriggerAddCondition(t, Condition(x0))
	TriggerAddAction(t, y0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(A0))
	TriggerAddAction(t, a0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(b0))
	TriggerAddAction(t, C0)
	t = CreateTrigger()
	TriggerRegisterDialogEvent(t, v8[1])
	TriggerRegisterDialogEvent(t, v8[2])
	TriggerRegisterDialogEvent(t, v8[3])
	TriggerRegisterDialogEvent(t, v8[4])
	TriggerRegisterDialogEvent(t, v8[5])
	TriggerAddCondition(t, Condition(D0))
	TriggerAddAction(t, E0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(G0))
	TriggerAddAction(t, H0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(l0))
	TriggerAddAction(t, J0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(L0))
	TriggerAddAction(t, M0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(O0))
	TriggerAddAction(t, P0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(R0))
	TriggerAddAction(t, S0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(U0))
	TriggerAddAction(t, V0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(X0))
	TriggerAddAction(t, Y0)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(dP))
	TriggerAddAction(t, eP)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(gP))
	TriggerAddAction(t, hP)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_USE_ITEM)
	TriggerAddCondition(t, Condition(jP))
	TriggerAddAction(t, kP)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(nP))
	TriggerAddAction(t, oP)
	t = CreateTrigger()
	TriggerRegisterDialogEvent(t, je[1])
	TriggerRegisterDialogEvent(t, je[2])
	TriggerRegisterDialogEvent(t, je[3])
	TriggerRegisterDialogEvent(t, je[4])
	TriggerRegisterDialogEvent(t, je[5])
	TriggerAddAction(t, qP)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(sP))
	TriggerAddAction(t, vP)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(xP))
	TriggerAddAction(t, AP)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(BP))
	TriggerAddAction(t, bP)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(EP))
	TriggerAddAction(t, FP)
	t = nil
end
--------桃花岛系统------//
function IsTaoHua()
	return GetItemTypeId(GetManipulatedItem()) == 1227897171 or GetItemTypeId(GetManipulatedItem()) == 1227899187
end
function TaoHuaDao()
	if GetItemTypeId(GetManipulatedItem()) == 1227897171 then
		if taohuakai == true or udg_xbdsbool[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == true then
			if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil then -- INLINED!!
				SetUnitPosition(GetTriggerUnit(), 9631, 1139)
				PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 9631, 1139, 0)
				DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00有玩家进入桃花岛")
				DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00”源思英年,巴巴西洛普,雪陆文出；源思英年,巴巴西洛普,雪陆文出！“")
			else
				AdjustPlayerStateBJ(500, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
			end
		else
			DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00桃花岛尚未开放")
			AdjustPlayerStateBJ(500, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
		end
	elseif GetItemTypeId(GetManipulatedItem()) == 1227899187 then
		if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil then -- INLINED!!
			SetUnitPosition(GetTriggerUnit(), 12800, -14800)
			PanCameraToTimedForPlayer(GetOwningPlayer(GetTriggerUnit()), 12800, -14800, 0)
			DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cFFFFCC00有玩家去救火")
		else
			AdjustPlayerStateBJ(200000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
		end
	end
end
function TaoKaiFang()
	local t = GetExpiredTimer()
	local r = Rect(8800, -4500, 14300, 4500)
	local l__rg = CreateRegion()
	local i = 0
	local td = LoadTimerDialogHandle(YDHT, GetHandleId(t), 0)
	taohuakai = false
	RegionAddRect(l__rg, r)
	i = 1
	for _ in _loop_() do
		if i >= 6 then break end
		if IsUnitInRegion(l__rg, udg_hero[i]) then
			SetUnitPosition(udg_hero[i], -1174, -678)
			PanCameraToTimedForPlayer(GetOwningPlayer(udg_hero[i]), -1174, -678, 0)
			DisplayTextToPlayer(GetOwningPlayer(udg_hero[i]), 0, 0, "|cFFFFCC00时间到，离开桃花岛")
		end
		i = i + 1
	end
	DestroyTimerDialog(td)
	PauseTimer(t)
	DestroyTimer(t)
	RemoveRegion(l__rg)
	RemoveRect(r)
	r = nil
	l__rg = nil
	t = nil
	td = nil
end
function TaoHuaKaiFang()
	local t = GetExpiredTimer()
	local tm = CreateTimer()
	local td = LoadTimerDialogHandle(YDHT, GetHandleId(t), 0)
	taohuakai = true
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00桃花岛已开放，你可以由正派武林右侧NPC我是随风处进入")
	PingMinimapForForce(GetPlayersAll(), 9631, 1139, 5)
	TimerStart(tm, 600, false, TaoKaiFang)
	--call TimerStart(tm,60,false,function TaoKaiFang)
	CreateTimerDialogBJ(tm, "桃花岛关闭倒计时：")
	TimerDialogDisplay(bj_lastCreatedTimerDialog, true)
	SaveTimerDialogHandle(YDHT, GetHandleId(tm), 0, bj_lastCreatedTimerDialog)
	DestroyTimerDialog(td)
	PauseTimer(t)
	DestroyTimer(t)
	t = nil
	tm = nil
	td = nil
end
function TaoHuaDaoKaiFang()
	local t = CreateTimer()
	TimerStart(t, 1800, false, TaoHuaKaiFang)
	--call TimerStart(t,20,false,function TaoHuaKaiFang)
	CreateTimerDialogBJ(t, "桃花岛开放倒计时：")
	TimerDialogDisplay(bj_lastCreatedTimerDialog, true)
	SaveTimerDialogHandle(YDHT, GetHandleId(t), 0, bj_lastCreatedTimerDialog)
	t = nil
end
function TaoHuaGun()
	local u = GetKillingUnit()
	--call BJDebugMsg("出现了么A")
	--set lh_r=Rect(8800,-4500,14300,4500)
	if RectContainsUnit(lh_r, u) then
		--call BJDebugMsg("出现了么B")
		if GetUnitTypeId(GetTriggerUnit()) == 1865429553 or GetUnitTypeId(GetTriggerUnit()) == 1865429554 or GetUnitTypeId(GetTriggerUnit()) == 1853320818 or GetUnitTypeId(GetTriggerUnit()) == 1869050475 or GetUnitTypeId(GetTriggerUnit()) == 1853058150 or GetUnitTypeId(GetTriggerUnit()) == 1848651841 or GetUnitTypeId(GetTriggerUnit()) == 1848651844 then
			SetUnitPosition(u, -1174, -678)
			PanCameraToTimedForPlayer(GetOwningPlayer(u), -1174, -678, 0)
			DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFCC00有玩家杀死了" .. (GetUnitName(GetTriggerUnit()) or "") .. "，离开桃花岛")
			if GetUnitTypeId(GetTriggerUnit()) == 1869050475 and (GetRandomInt(1, 100) <= 30 or GetRandomInt(1, 100) <= 50 and udg_xbdsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == true) then
				unitadditembyidswapped(1227899185, u)
			end
			if GetUnitTypeId(GetTriggerUnit()) == 1853058150 and (GetRandomInt(1, 100) <= 30 or GetRandomInt(1, 100) <= 50 and udg_xbdsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == true) then
				unitadditembyidswapped(1227897154, u)
			end
			if GetUnitTypeId(GetTriggerUnit()) == 1853320818 and (GetRandomInt(1, 100) <= 30 or GetRandomInt(1, 100) <= 50 and udg_xbdsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == true) then
				unitadditembyidswapped(1227897143, u)
			end
			if GetUnitTypeId(GetTriggerUnit()) == 1865429553 and (GetRandomInt(1, 100) <= 30 or GetRandomInt(1, 100) <= 50 and udg_xbdsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == true) then
				unitadditembyidswapped(1227896375, u)
			end
			if GetUnitTypeId(GetTriggerUnit()) == 1865429554 and (GetRandomInt(1, 100) <= 30 or GetRandomInt(1, 100) <= 50 and udg_xbdsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == true) then
				unitadditembyidswapped(1227896369, u)
			end
			if GetUnitTypeId(GetTriggerUnit()) == 1848651841 and (GetRandomInt(1, 100) <= 30 or GetRandomInt(1, 100) <= 50 and udg_xbdsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == true) then
				unitadditembyidswapped(1227896368, u)
			end
			if GetUnitTypeId(GetTriggerUnit()) == 1848651844 and (GetRandomInt(1, 100) <= 60 or GetRandomInt(1, 100) <= 100 and udg_xbdsbool[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] == true) then
				unitadditembyidswapped(1227897159, u)
			end
		end
	end
	u = nil
end
function TaoHua_Condition()
	return GetOwningPlayer(GetTriggerUnit()) == Player(15) and (GetUnitTypeId(GetTriggerUnit()) == 1865429554 or GetUnitTypeId(GetTriggerUnit()) == 1865429553 or GetUnitTypeId(GetTriggerUnit()) == 1853320818 or GetUnitTypeId(GetTriggerUnit()) == 1869050475 or GetUnitTypeId(GetTriggerUnit()) == 1853058150 or GetUnitTypeId(GetTriggerUnit()) == 1848651841)
end
function TaoHua_Action()
	SetUnitOwner(GetTriggerUnit(), Player(12), true)
	UnitAddAbility(GetTriggerUnit(), 1093678934)
	UnitAddAbility(GetTriggerUnit(), 1093678153)
	UnitAddAbility(GetTriggerUnit(), 1093678155)
end
function OuYangFeng_Condition()
	return RectContainsUnit(lh_r, GetTriggerUnit()) and GetUnitTypeId(GetTriggerUnit()) == 1853058150 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) and (UnitHasBuffBJ(GetTriggerUnit(), 1113813609) or UnitHasBuffBJ(GetTriggerUnit(), 1113813619) or UnitHasBuffBJ(GetTriggerUnit(), 1112437615))
end
function OuYangFeng_Action()
	local loc = GetUnitLoc(GetTriggerUnit())
	KillUnit(GetTriggerUnit())
	CreateNUnitsAtLoc(1, 1848651844, GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
	RemoveLocation(loc)
	loc = nil
end
function HongQiGong_Condition()
	return RectContainsUnit(lh_r, GetTriggerUnit()) and GetUnitTypeId(GetTriggerUnit()) == 1853320818 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) and (UnitHasBuffBJ(GetTriggerUnit(), 1111847784) or UnitHasBuffBJ(GetTriggerUnit(), 1112109154) or UnitHasBuffBJ(GetTriggerUnit(), 1112109156))
end
function HongQiGong_Action()
	KillUnit(GetTriggerUnit())
	ShowUnitShow(gg_unit_n00E_0066)
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFCC00洪七公已中毒，现正在某处疗伤")
end
--------桃花岛系统结束------//
function TaoHuaDao_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsTaoHua))
	TriggerAddAction(t, TaoHuaDao)
	t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 2400.0)
	TriggerAddAction(t, TaoHuaDaoKaiFang)
	t = CreateTrigger()
	TriggerRegisterPlayerUnitEventSimple(t, Player(12), EVENT_PLAYER_UNIT_DEATH)
	TriggerAddAction(t, TaoHuaGun)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(TaoHua_Condition))
	TriggerAddAction(t, TaoHua_Action)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(OuYangFeng_Condition))
	TriggerAddAction(t, OuYangFeng_Action)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(HongQiGong_Condition))
	TriggerAddAction(t, HongQiGong_Action)
	t = nil
end
--===============najitest===============
--=====================================@共用函数开始=====================================
function ID2S_naji(i_naji)
	local z_naji
	local n_naji = 0
	Sdummy_naji[100] = ""
	if Bid_naji == false then
		return Sdummy_naji[100]
	end
	if i_naji ~= 0 then
		for _ in _loop_() do
			z_naji = i_naji - i_naji // 256 * 256
			i_naji = i_naji // 256
			Sdummy_naji[100] = (SubString(StringList_naji, z_naji, z_naji + 1) or "") .. (Sdummy_naji[100] or "")
			n_naji = n_naji + 1
			if n_naji == 4 then break end
		end
		Sdummy_naji[100] = "'" .. (Sdummy_naji[100] or "") .. "'"
	else
		Sdummy_naji[100] = "null"
	end
	return Sdummy_naji[100]
end
function S2ID_naji(s_naji)
	local l_naji = StringLength(s_naji)
	local i_naji = 0
	local z_naji = 0
	local n_naji = 1
	local result_naji = 0
	for _ in _loop_() do
		if z_naji > l_naji - 1 then break end
		n_naji = R2I(Pow(256, l_naji - 1 - z_naji))
		i_naji = 1
		for _ in _loop_() do
			if i_naji > 255 then break end
			if SubString(s_naji, z_naji, z_naji + 1) == SubString(StringList_naji, i_naji, i_naji + 1) then
				result_naji = result_naji + i_naji * n_naji
				i_naji = 256
			end
			i_naji = i_naji + 1
		end
		z_naji = z_naji + 1
	end
	return result_naji
end
function IDidentify_naji(i_naji)
	local l_naji
	local a_naji = 0
	local z_naji
	local n_naji = 0
	local result = 0
	Sdummy_naji[100] = ""
	if i_naji ~= 0 then
		for _ in _loop_() do
			z_naji = i_naji - i_naji // 256 * 256
			i_naji = i_naji // 256
			Sdummy_naji[100] = (SubString(StringList_naji, z_naji, z_naji + 1) or "") .. (Sdummy_naji[100] or "")
			n_naji = n_naji + 1
			if n_naji == 4 then break end
		end
	else
		Sdummy_naji[100] = "null"
		return Sdummy_naji[100]
	end
	l_naji = StringLength(Sdummy_naji[100])
	n_naji = 1
	z_naji = 0
	for _ in _loop_() do
		if z_naji > l_naji - 1 then break end
		n_naji = R2I(Pow(256, l_naji - 1 - z_naji))
		a_naji = 1
		for _ in _loop_() do
			if a_naji > 255 then break end
			if SubString(Sdummy_naji[100], z_naji, z_naji + 1) == SubString(StringList_naji, a_naji, a_naji + 1) then
				result = result + a_naji * n_naji
				a_naji = 256
			end
			a_naji = a_naji + 1
		end
		z_naji = z_naji + 1
	end
	return GetObjectName(result)
end
function Distance_naji(x1_naji, y1_naji, x2_naji, y2_naji)
	return SquareRoot((y2_naji - y1_naji) * (y2_naji - y1_naji) + (x2_naji - x1_naji) * (x2_naji - x1_naji))
end
function Angle_naji(x1_naji, y1_naji, x2_naji, y2_naji)
	local r_naji
	r_naji = 57.29582 * Atan2(y2_naji - y1_naji, x2_naji - x1_naji)
	if r_naji < 0 then
		return 360 + r_naji
	end
	return r_naji
end
function DialogResetA3_naji()
	DialogClear(Dnaji_naji[2])
	if IsMapFlagSet(MAP_OBSERVERS_ON_DEATH) then
		Button_naji[1] = DialogAddButton(Dnaji_naji[2], "|cff00FFFF失败时作为观看者|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F1）|r", 768)
	else
		Button_naji[1] = DialogAddButton(Dnaji_naji[2], "|cff00FFFF失败时作为观看者|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F1）|r", 768)
	end
	if IsMapFlagSet(MAP_LOCK_RESOURCE_TRADING) then
		Button_naji[2] = DialogAddButton(Dnaji_naji[2], "|cff00FFFF锁定资源交易|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F2）|r", 769)
	else
		Button_naji[2] = DialogAddButton(Dnaji_naji[2], "|cff00FFFF锁定资源交易|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F2）|r", 769)
	end
	if IsMapFlagSet(MAP_RESOURCE_TRADING_ALLIES_ONLY) then
		Button_naji[3] = DialogAddButton(Dnaji_naji[2], "|cff00FFFF限定盟友资源交易|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F3）|r", 770)
	else
		Button_naji[3] = DialogAddButton(Dnaji_naji[2], "|cff00FFFF限定盟友资源交易|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F3）|r", 770)
	end
	if IsMapFlagSet(MAP_LOCK_ALLIANCE_CHANGES) then
		Button_naji[4] = DialogAddButton(Dnaji_naji[2], "|cff00FFFF锁定联盟设置|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F4）|r", 771)
	else
		Button_naji[4] = DialogAddButton(Dnaji_naji[2], "|cff00FFFF锁定联盟设置|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F4）|r", 771)
	end
	if IsMapFlagSet(MAP_ALLIANCE_CHANGES_HIDDEN) then
		Button_naji[5] = DialogAddButton(Dnaji_naji[2], "|cff00FFFF隐藏联盟设置|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F5）|r", 772)
	else
		Button_naji[5] = DialogAddButton(Dnaji_naji[2], "|cff00FFFF隐藏联盟设置|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F5）|r", 772)
	end
	Button_naji[100] = DialogAddButton(Dnaji_naji[2], "|cff00FFFF取消|cff00FF00（Esc）|r", 512)
end
function DialogResetA2_naji()
	DialogClear(Dnaji_naji[1])
	if Bxy_naji then
		Button_naji[1] = DialogAddButton(Dnaji_naji[1], "|cff00FFFF坐标参数|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F1）|r", 768)
	else
		Button_naji[1] = DialogAddButton(Dnaji_naji[1], "|cff00FFFF坐标参数|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F1）|r", 768)
	end
	if Bid_naji then
		Button_naji[2] = DialogAddButton(Dnaji_naji[1], "|cff00FFFFID参数|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F2）|r", 769)
	else
		Button_naji[2] = DialogAddButton(Dnaji_naji[1], "|cff00FFFFID参数|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F2）|r", 769)
	end
	if Bpn_naji then
		Button_naji[3] = DialogAddButton(Dnaji_naji[1], "|cff00FFFF玩家名参数|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F3）|r", 770)
	else
		Button_naji[3] = DialogAddButton(Dnaji_naji[1], "|cff00FFFF玩家名参数|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F3）|r", 770)
	end
	if Bir_naji then
		Button_naji[4] = DialogAddButton(Dnaji_naji[1], "|cff00FFFF数值显示|cffFFFF00（当前状态：|cffFF0000整数|cffFFFF00）|cff00FF00（F4）|r", 771)
	else
		Button_naji[4] = DialogAddButton(Dnaji_naji[1], "|cff00FFFF数值显示|cffFFFF00（当前状态：|cffFF0000实数|cffFFFF00）|cff00FF00（F4）|r", 771)
	end
	if Bddm_naji then
		Button_naji[5] = DialogAddButton(Dnaji_naji[1], "|cff00FFFF伤害显示类型|cffFFFF00（当前状态：|cffFF0000游戏文本|cffFFFF00）|cff00FF00（F5）|r", 772)
	else
		Button_naji[5] = DialogAddButton(Dnaji_naji[1], "|cff00FFFF伤害显示类型|cffFFFF00（当前状态：|cffFF0000飘浮文字|cffFFFF00）|cff00FF00（F5）|r", 772)
	end
	Button_naji[0] = DialogAddButton(Dnaji_naji[1], "|cff00FFFF返回上一层|cff00FF00（space）|r", 32)
	Button_naji[100] = DialogAddButton(Dnaji_naji[1], "|cff00FFFF取消|cff00FF00（Esc）|r", 512)
end
function DialogResetA_naji()
	DialogClear(Dnaji_naji[0])
	if IsTriggerEnabled(Ttest_naji[2]) then
		Button_naji[1] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF技能信息|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F1）|r", 768)
	else
		Button_naji[1] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF技能信息|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F1）|r", 768)
	end
	if IsTriggerEnabled(Ttest_naji[15]) then
		Button_naji[2] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF命令信息|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F2）|r", 769)
	else
		Button_naji[2] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF命令信息|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F2）|r", 769)
	end
	if IsTriggerEnabled(Ttest_naji[17]) then
		Button_naji[3] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF寿命信息|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F3）|r", 770)
	else
		Button_naji[3] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF寿命信息|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F3）|r", 770)
	end
	if IsTriggerEnabled(Ttest_naji[26]) then
		Button_naji[4] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF伤害信息|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F4）|r", 771)
	else
		Button_naji[4] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF伤害信息|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F4）|r", 771)
	end
	if IsTriggerEnabled(Ttest_naji[4]) then
		Button_naji[5] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF技能无冷却不耗魔|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F5）|r", 772)
	else
		Button_naji[5] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF技能无冷却不耗魔|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F5）|r", 772)
	end
	if IsTriggerEnabled(Ttest_naji[71]) then
		Button_naji[8] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF群体施法|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F6）|r", 773)
	else
		Button_naji[8] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF群体施法|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F6）|r", 773)
	end
	--=========================以下部分1.24以下的版本需删除==============================
	if IsTriggerEnabled(Ttest_naji[7]) then
		Button_naji[6] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF句柄信息|cffFFFF00（当前状态：|cffFF0000显示|cffFFFF00）|cff00FF00（F7）|r", 774)
	else
		Button_naji[6] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF句柄信息|cffFFFF00（当前状态：|cffFF0000隐藏|cffFFFF00）|cff00FF00（F7）|r", 774)
	end
	--=========================以上部分1.24以下的版本需删除==============================
	if IsTriggerEnabled(Ttest_naji[61]) then
		Button_naji[7] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF公共聊天系统|cffFFFF00（当前状态：|cffFF0000开启|cffFFFF00）|cff00FF00（F8）|r", 775)
	else
		Button_naji[7] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF公共聊天系统|cffFFFF00（当前状态：|cffFF0000关闭|cffFFFF00）|cff00FF00（F8）|r", 775)
	end
	Button_naji[0] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF系统信息调整|cff00FF00（space）|r", 32)
	Button_naji[100] = DialogAddButton(Dnaji_naji[0], "|cff00FFFF取消|cff00FF00（Esc）|r", 512)
end
--=====================================@共用函数结束=====================================
--=====================================#功能函数开始=====================================
function TestA82_naji()
	ExecuteFunc(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
end
function TestA81_naji()
	local i_naji
	if StringLength(GetEventPlayerChatString()) <= 6 then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000参数输入错误！位数不足无法判断进制类型|r")
	elseif StringLength(GetEventPlayerChatString()) == 7 then
		i_naji = S2ID_naji(SubString(GetEventPlayerChatString(), 3, 7))
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0" .. (SubString(GetEventPlayerChatString(), 3, 7) or "") .. "|r→|cffFFFF00" .. (I2S(i_naji) or "") .. "|r")
	else
		i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0" .. (SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())) or "") .. "|r→|cffFFFF00" .. (ID2S_naji(i_naji) or "") .. "|r")
	end
end
function TestA80_naji()
	local g_naji
	local u_naji
	local x_naji
	local y_naji
	local z_naji = StringLength(GetEventPlayerChatString()) - 1
	g_naji = CreateGroup()
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		for _ in _loop_() do
			u_naji = FirstOfGroup(g_naji)
			if u_naji == nil then break end
			GroupRemoveUnit(g_naji, u_naji)
			for _ in _loop_() do
				Sdummy_naji[1] = SubString(GetEventPlayerChatString(), z_naji, z_naji + 1)
				if Sdummy_naji[1] == "," then
					if z_naji == 4 then
						x_naji = GetUnitX(u_naji)
					else
						x_naji = S2R(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
					end
					if z_naji == StringLength(GetEventPlayerChatString()) - 1 then
						y_naji = GetUnitY(u_naji)
					else
						y_naji = S2R(SubString(GetEventPlayerChatString(), z_naji + 1, StringLength(GetEventPlayerChatString())))
					end
					if true then break end
				end
				z_naji = z_naji - 1
				if z_naji <= 0 then
					DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000参数不足！请输入|cffFFFF002|cffFF0000位参数|r")
					DestroyGroup(g_naji)
					g_naji = nil
					u_naji = nil
					return
				end
			end
			SetUnitX(u_naji, x_naji)
			SetUnitY(u_naji, y_naji)
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00玩家选择单位的所有单位的坐标更改为|cffFF0000(" .. (R2S(x_naji) or "") .. "," .. (R2S(y_naji) or "") .. ")|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA79_naji()
	local g_naji
	local u_naji
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
	local it_naji
	if i_naji < 0 or i_naji >= 7 then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000参数输入错误！请输入|cffFFFF001~6|cffFF0000间的整数|r")
		return
	elseif i_naji == 0 then
		i_naji = 1
	end
	g_naji = CreateGroup()
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	u_naji = FirstOfGroup(g_naji)
	if u_naji ~= nil then
		if UnitItemInSlot(u_naji, i_naji - 1) ~= nil then
			it_naji = UnitItemInSlot(u_naji, i_naji - 1)
			if GetItemType(it_naji) == ITEM_TYPE_PERMANENT then
				Sdummy_naji[0] = "永久"
			end
			if GetItemType(it_naji) == ITEM_TYPE_CHARGED then
				Sdummy_naji[0] = "可允"
			end
			if GetItemType(it_naji) == ITEM_TYPE_POWERUP then
				Sdummy_naji[0] = "能量提升"
			end
			if GetItemType(it_naji) == ITEM_TYPE_ARTIFACT then
				Sdummy_naji[0] = "人造"
			end
			if GetItemType(it_naji) == ITEM_TYPE_PURCHASABLE then
				Sdummy_naji[0] = "可购买"
			end
			if GetItemType(it_naji) == ITEM_TYPE_CAMPAIGN then
				Sdummy_naji[0] = "战役"
			end
			if GetItemType(it_naji) == ITEM_TYPE_MISCELLANEOUS then
				Sdummy_naji[0] = "混杂"
			end
			if GetItemType(it_naji) == ITEM_TYPE_UNKNOWN then
				Sdummy_naji[0] = "未知"
			end
			DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "===============*****===============")
			DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0物品名称：|cffFFFF00" .. (GetItemName(it_naji) or "") .. "|r")
			DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0ID256进制/10进制：|cffFFFF00" .. (ID2S_naji(GetItemTypeId(it_naji)) or "") .. "/" .. (I2S(GetItemTypeId(it_naji)) or "") .. "|r")
			--=========================以下部分1.24以下的版本需删除==============================
			DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0存储地址：|cffFFFF00" .. (I2S(GetHandleId(it_naji)) or "") .. "|r")
			--=========================以上部分1.24以下的版本需删除==============================
			DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0所属玩家/cj索引：|cffFFFF00" .. (GetPlayerName(GetItemPlayer(it_naji)) or "") .. "/" .. (I2S(GetPlayerId(GetItemPlayer(it_naji))) or "") .. "|r")
			DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0坐标：|cffFFFF00(" .. (R2S(GetItemX(it_naji)) or "") .. "," .. (R2S(GetItemY(it_naji)) or "") .. ")|r")
			DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0物品分类：|cffFFFF00" .. (Sdummy_naji[0] or "") .. "|r")
			DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0物品等级：|cffFFFF00" .. (I2S(GetItemLevel(it_naji)) or "") .. "|r")
			DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0自定义值：|cffFFFF00" .. (I2S(GetItemUserData(it_naji)) or "") .. "|r")
			Sdummy_naji[0] = " "
			if IsItemPowerup(it_naji) then
				Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "拾取自动使用，"
			end
			if IsItemSellable(it_naji) then
				Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "可出售，"
			end
			if IsItemPawnable(it_naji) then
				Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "可抵押，"
			end
			if IsItemVisible(it_naji) then
				Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "可见，"
			end
			if IsItemInvulnerable(it_naji) then
				Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "无敌的，"
			end
			Sdummy_naji[0] = SubString(Sdummy_naji[0], 1, StringLength(Sdummy_naji[0]) - 2)
			DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0可识别状态：|cffFFFF00" .. (Sdummy_naji[0] or "") .. "||r")
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000该单位|cffFFFF00第" .. (I2S(i_naji) or "") .. "格物品栏|cffFF0000不存在物品|r")
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
	u_naji = nil
end
function TestA78_naji()
	local g_naji = CreateGroup()
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		if IsUnitInGroup(FirstOfGroup(g_naji), Gcd_naji[1]) then
			GroupRemoveUnit(Gcd_naji[1], FirstOfGroup(g_naji))
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已取消玩家选择单位的|cffFF0000技能无冷却不耗蓝判定|r")
		else
			SetUnitState(FirstOfGroup(g_naji), UNIT_STATE_MANA, GetUnitState(FirstOfGroup(g_naji), UNIT_STATE_MAX_MANA))
			UnitResetCooldown(FirstOfGroup(g_naji))
			GroupAddUnit(Gcd_naji[1], FirstOfGroup(g_naji))
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已启动玩家选择单位的|cffFF0000技能无冷却不耗蓝判定|r")
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA77_naji()
	local g_naji = CreateGroup()
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		if IsUnitInGroup(FirstOfGroup(g_naji), Gms_naji) then
			GroupRemoveUnit(Gms_naji, FirstOfGroup(g_naji))
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已取消玩家选择单位的|cffFF0000群体施法判定|r")
		else
			GroupAddUnit(Gms_naji, FirstOfGroup(g_naji))
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已启动玩家选择单位的|cffFF0000群体施法判定|r")
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA76_naji()
	local u_naji
	local g_naji
	local i_naji
	local z_naji
	local n_naji
	local r_naji
	local b_naji
	local p_naji = GetSpellTargetLoc()
	if IsUnitInGroup(GetTriggerUnit(), Gms_naji) and (GetSpellTargetUnit() ~= nil or p_naji ~= nil) then
		i_naji = GetUnitCurrentOrder(GetTriggerUnit())
		z_naji = GetSpellAbilityId()
		n_naji = GetUnitAbilityLevel(GetTriggerUnit(), z_naji)
		if GetSpellTargetUnit() ~= nil then
			g_naji = CreateGroup()
			b_naji = IsUnitEnemy(GetSpellTargetUnit(), GetTriggerPlayer())
			GroupEnumUnitsInRange(g_naji, GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), Distance_naji(GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), GetUnitX(GetSpellTargetUnit()), GetUnitY(GetSpellTargetUnit())), nil)
			for _ in _loop_() do
				if FirstOfGroup(g_naji) == nil then break end
				if IsUnitType(FirstOfGroup(g_naji), UNIT_TYPE_DEAD) == false and FirstOfGroup(g_naji) ~= GetSpellTargetUnit() and b_naji == IsUnitEnemy(FirstOfGroup(g_naji), GetTriggerPlayer()) then
					u_naji = CreateUnit(GetTriggerPlayer(), 1853257068, GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), Angle_naji(GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), GetUnitX(FirstOfGroup(g_naji)), GetUnitY(FirstOfGroup(g_naji))))
					UnitAddAbility(u_naji, 1097625443)
					UnitAddAbility(u_naji, 1096971630)
					UnitAddAbility(u_naji, 1095328365)
					UnitAddAbility(u_naji, 1095316077)
					UnitAddAbility(u_naji, 1095331170)
					UnitAddAbility(u_naji, 1095331194)
					UnitAddAbility(u_naji, 1095331190)
					UnitRemoveAbility(u_naji, 1098342766)
					if UnitAddAbility(u_naji, 1098015094) then
						UnitRemoveAbility(u_naji, 1098015094)
					end
					SetUnitState(u_naji, UNIT_STATE_MANA, GetUnitState(u_naji, UNIT_STATE_MAX_MANA))
					ShowUnit(u_naji, false)
					UnitApplyTimedLife(u_naji, 1112820806, 10)
					SetUnitUseFood(u_naji, false)
					SetUnitPathing(u_naji, false)
					h__SetUnitMoveSpeed(u_naji, 522)
					SetUnitTurnSpeed(u_naji, 1)
					SetUnitFlyHeight(u_naji, GetUnitFlyHeight(GetTriggerUnit()), 0)
					UnitAddType(u_naji, UNIT_TYPE_ANCIENT)
					UnitAddType(u_naji, UNIT_TYPE_PEON)
					UnitAddAbility(u_naji, z_naji)
					SetUnitAbilityLevel(u_naji, z_naji, n_naji)
					IssueTargetOrderById(u_naji, i_naji, FirstOfGroup(g_naji))
				end
				GroupRemoveUnit(g_naji, FirstOfGroup(g_naji))
			end
			DestroyGroup(g_naji)
			g_naji = nil
		else
			r_naji = 0
			for _ in _loop_() do
				if r_naji >= 2 then break end
				u_naji = CreateUnit(GetTriggerPlayer(), 1853257068, GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), Angle_naji(GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), GetLocationX(p_naji), GetLocationY(p_naji)) - 30 + 60 * r_naji)
				UnitAddAbility(u_naji, 1097625443)
				UnitAddAbility(u_naji, 1096971630)
				UnitAddAbility(u_naji, 1095328365)
				UnitAddAbility(u_naji, 1095316077)
				UnitAddAbility(u_naji, 1095331170)
				UnitAddAbility(u_naji, 1095331194)
				UnitAddAbility(u_naji, 1095331190)
				UnitRemoveAbility(u_naji, 1098342766)
				if UnitAddAbility(u_naji, 1098015094) then
					UnitRemoveAbility(u_naji, 1098015094)
				end
				SetUnitState(u_naji, UNIT_STATE_MANA, GetUnitState(u_naji, UNIT_STATE_MAX_MANA))
				ShowUnit(u_naji, false)
				UnitApplyTimedLife(u_naji, 1112820806, 10)
				SetUnitUseFood(u_naji, false)
				SetUnitPathing(u_naji, false)
				h__SetUnitMoveSpeed(u_naji, 522)
				SetUnitTurnSpeed(u_naji, 1)
				SetUnitFlyHeight(u_naji, GetUnitFlyHeight(GetTriggerUnit()), 0)
				UnitAddType(u_naji, UNIT_TYPE_ANCIENT)
				UnitAddType(u_naji, UNIT_TYPE_PEON)
				UnitAddAbility(u_naji, z_naji)
				SetUnitAbilityLevel(u_naji, z_naji, n_naji)
				IssuePointOrderById(u_naji, i_naji, GetUnitX(GetTriggerUnit()) + Cos(0.01745 * (Angle_naji(GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), GetLocationX(p_naji), GetLocationY(p_naji)) - 30 + 60 * r_naji)) * Distance_naji(GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), GetLocationX(p_naji), GetLocationY(p_naji)), GetUnitY(GetTriggerUnit()) + Sin(0.01745 * (Angle_naji(GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), GetLocationX(p_naji), GetLocationY(p_naji)) - 30 + 60 * r_naji)) * Distance_naji(GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), GetLocationX(p_naji), GetLocationY(p_naji)))
				r_naji = r_naji + 1
			end
		end
	end
	RemoveLocation(p_naji)
	p_naji = nil
end
function TestA75_naji()
	RestartGame(true)
end
function TestA74_naji()
	local i_naji = _array_(0)
	local a_naji = 2
	local b_naji = 8
	local c_naji = 8
	i_naji[1] = S2ID_naji(SubString(GetEventPlayerChatString(), 3, 7))
	i_naji[2] = 0
	i_naji[3] = GetPlayerId(GetTriggerPlayer()) + 1
	for _ in _loop_() do
		Sdummy_naji[1] = SubString(GetEventPlayerChatString(), b_naji, b_naji + 1)
		if Sdummy_naji[1] == "," then
			i_naji[a_naji] = S2I(SubString(GetEventPlayerChatString(), c_naji, b_naji))
			a_naji = a_naji + 1
			c_naji = b_naji + 1
			if a_naji >= 3 then
				i_naji[3] = S2I(SubString(GetEventPlayerChatString(), c_naji, StringLength(GetEventPlayerChatString())))
				if true then break end
			end
		end
		b_naji = b_naji + 1
		if b_naji >= StringLength(GetEventPlayerChatString()) then
			i_naji[a_naji] = S2I(SubString(GetEventPlayerChatString(), c_naji, StringLength(GetEventPlayerChatString())))
			if true then break end
		end
	end
	if i_naji[3] >= 1 and i_naji[3] <= 16 then
		SetPlayerTechResearched(Player(i_naji[3] - 1), i_naji[1], i_naji[2])
		SetPlayerTechMaxAllowed(Player(i_naji[3] - 1), i_naji[1], i_naji[2])
		SetPlayerTechMaxAllowed(Player(i_naji[3] - 1), i_naji[1], i_naji[2])
		if i_naji[2] == 0 then
			SetPlayerAbilityAvailable(Player(i_naji[3] - 1), i_naji[1], false)
		else
			SetPlayerAbilityAvailable(Player(i_naji[3] - 1), i_naji[1], true)
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000已对|cff00FFFF" .. (GetPlayerName(Player(i_naji[3] - 1)) or "") .. "|cffFF0000执行对应行为，若没有效果，请确认你是否输入了|cffFFFF00正确的物编ID|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000玩家参数输入数值错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
	end
end
function TestA73_naji()
	local i_naji = S2ID_naji(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	if StringLength(GetEventPlayerChatString()) <= 6 then
		if Iweather_naji >= 1 then
			for _ in _loop_() do
				RemoveWeatherEffect(Weather_naji[Iweather_naji])
				Iweather_naji = Iweather_naji - 1
				if Iweather_naji <= 0 then break end
			end
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000删除|cffFFFF00所有已创建的全图天气|r")
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00请输入|cffFF0000合法的天气ID|cffFFFF00，可点击|cffFF0000F9|cffFFFF00查看所有天气ID|r")
		end
	else
		Iweather_naji = Iweather_naji + 1
		Weather_naji[Iweather_naji] = AddWeatherEffect(GetWorldBounds(), i_naji)
		EnableWeatherEffect(Weather_naji[Iweather_naji], true)
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已创建对应的天气。目前已有|cffFF0000" .. (I2S(Iweather_naji) or "") .. "|cffFFFF00个全图天气|r")
	end
end
function TestA72_naji()
	EnableUserControl(true)
	ShowInterface(true, 0.01)
	EnableOcclusion(true)
end
function TestA71_naji()
	if GetClickedButton() ~= Button_naji[100] then
		if GetClickedButton() == Button_naji[1] then
			if IsMapFlagSet(MAP_OBSERVERS_ON_DEATH) then
				SetMapFlag(MAP_OBSERVERS_ON_DEATH, false)
			else
				SetMapFlag(MAP_OBSERVERS_ON_DEATH, true)
			end
		elseif GetClickedButton() == Button_naji[2] then
			if IsMapFlagSet(MAP_LOCK_RESOURCE_TRADING) then
				SetMapFlag(MAP_LOCK_RESOURCE_TRADING, false)
			else
				SetMapFlag(MAP_LOCK_RESOURCE_TRADING, true)
			end
		elseif GetClickedButton() == Button_naji[3] then
			if IsMapFlagSet(MAP_RESOURCE_TRADING_ALLIES_ONLY) then
				SetMapFlag(MAP_RESOURCE_TRADING_ALLIES_ONLY, false)
			else
				SetMapFlag(MAP_RESOURCE_TRADING_ALLIES_ONLY, true)
			end
		elseif GetClickedButton() == Button_naji[4] then
			if IsMapFlagSet(MAP_LOCK_ALLIANCE_CHANGES) then
				SetMapFlag(MAP_LOCK_ALLIANCE_CHANGES, false)
			else
				SetMapFlag(MAP_LOCK_ALLIANCE_CHANGES, true)
			end
		elseif GetClickedButton() == Button_naji[5] then
			if IsMapFlagSet(MAP_ALLIANCE_CHANGES_HIDDEN) then
				SetMapFlag(MAP_ALLIANCE_CHANGES_HIDDEN, false)
			else
				SetMapFlag(MAP_ALLIANCE_CHANGES_HIDDEN, true)
			end
		end
		DialogResetA3_naji()
		DialogDisplay(GetTriggerPlayer(), Dnaji_naji[2], true)
	end
end
function TestA70_naji()
	DialogResetA3_naji()
	DialogDisplay(GetTriggerPlayer(), Dnaji_naji[2], true)
end
function TestA69_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	if i_naji >= 1 and i_naji <= 5 then
		SetMapFlag(MAP_LOCK_SPEED, false)
		if i_naji == 1 then
			SetGameSpeed(MAP_SPEED_SLOWEST)
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00当前的游戏速度为|cffFF0000极慢|r")
		elseif i_naji == 2 then
			SetGameSpeed(MAP_SPEED_SLOW)
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00当前的游戏速度为|cffFF0000慢|r")
		elseif i_naji == 3 then
			SetGameSpeed(MAP_SPEED_NORMAL)
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00当前的游戏速度为|cffFF0000普通|r")
		elseif i_naji == 4 then
			SetGameSpeed(MAP_SPEED_FAST)
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00当前的游戏速度为|cffFF0000快|r")
		elseif i_naji == 5 then
			SetGameSpeed(MAP_SPEED_FASTEST)
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00当前的游戏速度为|cffFF0000极快|r")
		end
	else
		DisplayTextToPlayer(Ptest_naji, 0, 0, "|cffFF0000输入错误！请输入|cffFFFF001~5|cffFF0000之间的整数|r")
	end
end
function TestA68_naji()
	EndGame(true)
end
function TestA67_naji()
	local g_naji = CreateGroup()
	local u_naji
	local r_naji = S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		for _ in _loop_() do
			u_naji = FirstOfGroup(g_naji)
			if u_naji == nil then break end
			GroupRemoveUnit(g_naji, u_naji)
			SetUnitScale(u_naji, r_naji, r_naji, r_naji)
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00玩家选择的所有单位的缩放更改为原模型默认的|cffFF0000" .. (R2S(r_naji) or "") .. "|cffFFFF00倍|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA66_naji()
	local i_naji
	i_naji = 0
	for _ in _loop_() do
		DisplayTimedTextToPlayer(Player(i_naji), 0, 0, 15, "                              |cff00FFFF" .. (GetPlayerName(GetTriggerPlayer()) or "") .. "：|r" .. (GetEventPlayerChatString() or ""))
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
end
function TestA65_naji()
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "===============*****===============")
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0目标坐标：|cffFFFF00(" .. (R2S(GetCameraTargetPositionX()) or "") .. "," .. (R2S(GetCameraTargetPositionY()) or "") .. "," .. (R2S(GetCameraTargetPositionZ()) or "") .. ")|r")
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0源坐标：|cffFFFF00(" .. (R2S(GetCameraEyePositionX()) or "") .. "," .. (R2S(GetCameraEyePositionY()) or "") .. "," .. (R2S(GetCameraEyePositionZ()) or "") .. ")|r")
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0X轴旋转角度/弧度：|cffFFFF00" .. (R2S(57.295 * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK)) or "") .. "/" .. (R2S(GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK)) or "") .. "|r")
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0Y轴旋转角度/弧度：|cffFFFF00" .. (R2S(57.295 * GetCameraField(CAMERA_FIELD_ROLL)) or "") .. "/" .. (R2S(GetCameraField(CAMERA_FIELD_ROLL)) or "") .. "|r")
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0Z轴旋转角度/弧度：|cffFFFF00" .. (R2S(57.295 * GetCameraField(CAMERA_FIELD_ROTATION)) or "") .. "/" .. (R2S(GetCameraField(CAMERA_FIELD_ROTATION)) or "") .. "|r")
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0Z轴偏移：|cffFFFF00" .. (R2S(GetCameraField(CAMERA_FIELD_ZOFFSET)) or "") .. "|r")
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0镜头距离：|cffFFFF00" .. (R2S(GetCameraField(CAMERA_FIELD_TARGET_DISTANCE)) or "") .. "|r")
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0远景截断距离：|cffFFFF00" .. (R2S(GetCameraField(CAMERA_FIELD_FARZ)) or "") .. "|r")
	DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0镜头区域：|cffFFFF00" .. (R2S(GetCameraField(CAMERA_FIELD_FIELD_OF_VIEW)) or "") .. "|r")
end
function TestA64_naji()
	if GetLocalPlayer() == Ptest_naji then
		Rcamera_naji[2] = 57.29582 * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK)
		Rcamera_naji[3] = 57.29582 * GetCameraField(CAMERA_FIELD_ROTATION)
		if Bcamera_naji[1] then
			Rcamera_naji[2] = Rcamera_naji[2] - 1
		end
		if Bcamera_naji[2] then
			Rcamera_naji[2] = Rcamera_naji[2] + 1
		end
		if Bcamera_naji[3] then
			Rcamera_naji[3] = Rcamera_naji[3] - 1
		end
		if Bcamera_naji[4] then
			Rcamera_naji[3] = Rcamera_naji[3] + 1
		end
		SetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK, Rcamera_naji[2], 0.01)
		SetCameraField(CAMERA_FIELD_ROTATION, Rcamera_naji[3], 0.01)
		PanCameraToTimed(Rcamera_naji[0], Rcamera_naji[1], 0)
	end
end
function TestA63_naji()
	local i_naji = 0
	if GetTriggerEventId() == EVENT_PLAYER_ARROW_UP_UP then
		Bcamera_naji[1] = false
	elseif GetTriggerEventId() == EVENT_PLAYER_ARROW_DOWN_UP then
		Bcamera_naji[2] = false
	elseif GetTriggerEventId() == EVENT_PLAYER_ARROW_LEFT_UP then
		Bcamera_naji[3] = false
	elseif GetTriggerEventId() == EVENT_PLAYER_ARROW_RIGHT_UP then
		Bcamera_naji[4] = false
	end
	for _ in _loop_() do
		i_naji = i_naji + 1
		if i_naji >= 5 then
			DestroyTimer(Tcamera_naji)
			Tcamera_naji = nil
			if true then break end
		end
		if Bcamera_naji[i_naji] then
			if true then break end
		end
	end
end
function TestA62_naji()
	if Tcamera_naji == nil then
		Tcamera_naji = CreateTimer()
		TimerStart(Tcamera_naji, 0.01, true, TestA64_naji)
	end
	Rcamera_naji[0] = GetCameraTargetPositionX()
	Rcamera_naji[1] = GetCameraTargetPositionY()
	if GetTriggerEventId() == EVENT_PLAYER_ARROW_UP_DOWN then
		Bcamera_naji[1] = true
	elseif GetTriggerEventId() == EVENT_PLAYER_ARROW_DOWN_DOWN then
		Bcamera_naji[2] = true
	elseif GetTriggerEventId() == EVENT_PLAYER_ARROW_LEFT_DOWN then
		Bcamera_naji[3] = true
	elseif GetTriggerEventId() == EVENT_PLAYER_ARROW_RIGHT_DOWN then
		Bcamera_naji[4] = true
	end
end
function TestA61_naji()
	if Bcamera_naji[0] then
		Bcamera_naji[0] = false
		DestroyTimer(Tcamera_naji)
		DisableTrigger(Ttest_naji[58])
		DisableTrigger(Ttest_naji[59])
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000关闭|cffFFFF00镜头模式|r")
	else
		Bcamera_naji[0] = true
		EnableTrigger(Ttest_naji[58])
		EnableTrigger(Ttest_naji[59])
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 10, "|cffFF0000开启|cffFFFF00镜头模式|r")
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 10, "|cffFF0000用上下左右对镜头进行调整，镜头距离请用|cffFFFF00'cd|cffFF0000代码，重置镜头请用|cffFFFF00'cr|cffFF0000代码|r")
	end
end
function TestA60_naji()
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		if GetLocalPlayer() == GetTriggerPlayer() then
			SetCameraTargetController(FirstOfGroup(g_naji), 0, 0, false)
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已锁定|cffFF0000玩家选择的第一个单位|cffFFFF00的镜头，按下|cffFF0000Ctrl+C|cffFFFF00可解锁|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA59_naji()
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		for _ in _loop_() do
			u_naji = FirstOfGroup(g_naji)
			if u_naji == nil then break end
			GroupRemoveUnit(g_naji, u_naji)
			UnitRemoveBuffs(u_naji, true, true)
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已清除玩家选择的所有单位的|cffFF0000魔法效果|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA58_naji()
	local i_naji = 0
	ClearTextMessages()
	for _ in _loop_() do
		DisplayTextToPlayer(Player(i_naji), 0, 0, "|cffFFFF00你已经被|cffFF0000踢出游戏|r")
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
end
function TestA57_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString()))) - 1
	if i_naji >= 0 and i_naji <= 15 then
		if GetPlayerSlotState(Player(i_naji)) == PLAYER_SLOT_STATE_PLAYING then
			if GetLocalPlayer() == Player(i_naji) then
				TimerStart(CreateTimer(), 0, true, TestA58_naji)
			end
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已将|cffFF0000" .. (GetPlayerName(Player(i_naji)) or "") .. "|cffFFFF00踢出游戏！|r")
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00这个玩家位|cffFF0000并不存在玩家|r")
		end
	else
		DisplayTextToPlayer(Ptest_naji, 0, 0, "|cffFF0000输入序号错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
	end
end
function TestA56_naji()
	local i_naji = S2ID_naji(SubString(GetEventPlayerChatString(), 3, 7))
	local g_naji
	local tt
	local z_naji = 1
	if StringLength(GetEventPlayerChatString()) >= 8 then
		z_naji = S2I(SubString(GetEventPlayerChatString(), 8, StringLength(GetEventPlayerChatString())))
		if z_naji <= 0 then
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000数值部分请输入|cffFFFF00大于0|cffFF0000的整数|r")
			return
		end
	end
	g_naji = CreateGroup()
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00已执行对应行为，若没有效果，请确定你输入了正确的|cffFF0000物体编辑器ID|r")
		if UnitAddAbility(FirstOfGroup(g_naji), i_naji) == false then
			if StringLength(GetEventPlayerChatString()) >= 8 then
				SetUnitAbilityLevel(FirstOfGroup(g_naji), i_naji, z_naji)
			else
				UnitRemoveAbility(FirstOfGroup(g_naji), i_naji)
				UnitMakeAbilityPermanent(FirstOfGroup(g_naji), false, i_naji)
			end
		else
			UnitMakeAbilityPermanent(FirstOfGroup(g_naji), true, i_naji)
			SetUnitAbilityLevel(FirstOfGroup(g_naji), i_naji, z_naji)
		end
		for _ in _loop_() do
			CreateUnit(GetTriggerPlayer(), i_naji, GetUnitX(FirstOfGroup(g_naji)), GetUnitY(FirstOfGroup(g_naji)), 0)
			tt = CreateItem(i_naji, GetUnitX(FirstOfGroup(g_naji)), GetUnitY(FirstOfGroup(g_naji)))
			if tt ~= nil then
				SetItemPlayer(tt, GetTriggerPlayer(), false)
				tt = nil
			end
			CreateDestructable(i_naji, GetUnitX(FirstOfGroup(g_naji)), GetUnitY(FirstOfGroup(g_naji)), 0, 1, 0)
			z_naji = z_naji - 1
			if z_naji <= 0 then break end
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA55_naji()
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		for _ in _loop_() do
			u_naji = FirstOfGroup(g_naji)
			if u_naji == nil then break end
			GroupRemoveUnit(g_naji, u_naji)
			if IsUnitInGroup(u_naji, Guw_naji) then
				SetUnitPathing(u_naji, true)
				GroupRemoveUnit(Guw_naji, u_naji)
			else
				SetUnitPathing(u_naji, false)
				GroupAddUnit(Guw_naji, u_naji)
			end
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000已切换玩家选择的所有单位的|cffFFFF00触碰|cffFF0000状态|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA54_naji()
	local r_naji = S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	if GetLocalPlayer() == GetTriggerPlayer() then
		if r_naji > 0 then
			SetCameraField(CAMERA_FIELD_FARZ, r_naji, 0)
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000玩家当前镜头的远景截断距离为|cffFFFF00" .. (R2S(r_naji) or "") .. "|r")
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000数值错误！|cffFFFF00请输入|cffFF0000大于0|cffFFFF00的实数|r")
		end
	end
end
function TestA53_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString()))) - 1
	local g_naji = CreateGroup()
	local u_naji
	if i_naji >= 0 and i_naji <= 15 then
		GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
		if FirstOfGroup(g_naji) ~= nil then
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				SetUnitOwner(u_naji, Player(i_naji), true)
			end
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000玩家选择的所有单位|cffFFFF00的所有者已改变为|cffFF0000" .. (GetPlayerName(Player(i_naji)) or "") .. "|r")
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
		end
	else
		DisplayTextToPlayer(Ptest_naji, 0, 0, "|cffFF0000输入序号错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA52_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString()))) - 1
	local z_naji = StringLength(GetEventPlayerChatString()) - 1
	for _ in _loop_() do
		Sdummy_naji[1] = SubString(GetEventPlayerChatString(), z_naji, z_naji + 1)
		if Sdummy_naji[1] == "," then
			z_naji = S2I(SubString(GetEventPlayerChatString(), z_naji + 1, StringLength(GetEventPlayerChatString())))
			if true then break end
		end
		z_naji = z_naji - 1
		if z_naji <= 0 then
			z_naji = GetPlayerId(GetTriggerPlayer()) + 1
			if true then break end
		end
	end
	if z_naji <= 0 or z_naji >= 17 then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入序号错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
		return
	end
	if i_naji >= 0 and i_naji <= 15 then
		if IsPlayerAlly(Player(i_naji), GetTriggerPlayer()) then
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_PASSIVE, false)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_XP, false)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_VISION, false)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_SPELLS, false)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_HELP_REQUEST, false)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_HELP_RESPONSE, false)
			SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_PASSIVE, false)
			SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_SHARED_XP, false)
			SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_SHARED_VISION, false)
			SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_SHARED_SPELLS, false)
			SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_HELP_REQUEST, false)
			SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_HELP_RESPONSE, false)
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000" .. (GetPlayerName(Player(z_naji - 1)) or "") .. "|cffFFFF00和|cffFF0000" .. (GetPlayerName(Player(i_naji)) or "") .. "|cffFFFF00成为|cffFF0000敌人|r")
		else
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_PASSIVE, true)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_XP, true)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_VISION, true)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_SPELLS, true)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_HELP_REQUEST, true)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_HELP_RESPONSE, true)
			SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_PASSIVE, true)
			SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_SHARED_XP, true)
			SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_SHARED_VISION, true)
			SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_SHARED_SPELLS, true)
			SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_HELP_REQUEST, true)
			SetPlayerAlliance(Player(z_naji - 1), Player(i_naji), ALLIANCE_HELP_RESPONSE, true)
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000" .. (GetPlayerName(Player(z_naji - 1)) or "") .. "|cffFFFF00和|cffFF0000" .. (GetPlayerName(Player(i_naji)) or "") .. "|cffFFFF00成为|cffFF0000同盟|r")
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入序号错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
	end
end
function TestA51_naji()
	if GetLocalPlayer() == Ptest_naji then
		ClearTextMessages()
		ResetToGameCamera(0)
		for _ in _loop_() do
			DestroyQuest(Q_naji[Iquest_naji])
			Iquest_naji = Iquest_naji - 1
			if Iquest_naji == 0 then break end
		end
	end
	for _ in _loop_() do
		DestroyTrigger(Ttest_naji[Itrigger_naji])
		Itrigger_naji = Itrigger_naji - 1
		if Itrigger_naji == 0 then break end
	end
	if Ttest_naji[0] ~= nil then
		DestroyTrigger(Ttest_naji[0])
	end
	if Ibm_naji >= 1 then
		for _ in _loop_() do
			Ibm_naji = Ibm_naji - 1
			DestroyTextTag(Tbm_naji[Ibm_naji])
			Tbm_naji[Ibm_naji] = nil
			if Ibm_naji <= 0 then break end
		end
	end
	for _ in _loop_() do
		RemoveWeatherEffect(Weather_naji[Iweather_naji])
		Iweather_naji = Iweather_naji - 1
		if Iweather_naji <= 0 then break end
	end
	DialogDestroy(Dnaji_naji[0])
	DialogDestroy(Dnaji_naji[1])
	DialogDestroy(Dnaji_naji[2])
	DestroyGroup(Gcd_naji[0])
	DestroyGroup(Gcd_naji[1])
	DestroyGroup(Gms_naji)
	DestroyGroup(Guw_naji)
	RemoveRegion(Rworld_naji)
	DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cffFF0000已移除|cffFFFF00najitest|cffFF0000测试系统")
end
function TestA50_naji()
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		for _ in _loop_() do
			u_naji = FirstOfGroup(g_naji)
			if u_naji == nil then break end
			GroupRemoveUnit(g_naji, u_naji)
			KillUnit(u_naji)
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00杀死|cffFF0000玩家选择的所有单位|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA49_naji()
	local r_naji = _array_(0.0)
	local a_naji = 1
	local b_naji = 3
	local c_naji = 3
	r_naji[1] = 1
	r_naji[2] = GetPlayerId(GetTriggerPlayer()) + 1
	for _ in _loop_() do
		Sdummy_naji[1] = SubString(GetEventPlayerChatString(), b_naji, b_naji + 1)
		if Sdummy_naji[1] == "," then
			r_naji[a_naji] = S2R(SubString(GetEventPlayerChatString(), c_naji, b_naji))
			a_naji = a_naji + 1
			c_naji = b_naji + 1
			if a_naji >= 2 and c_naji < StringLength(GetEventPlayerChatString()) then
				r_naji[2] = S2R(SubString(GetEventPlayerChatString(), c_naji, StringLength(GetEventPlayerChatString())))
				if true then break end
			end
		end
		b_naji = b_naji + 1
		if b_naji >= StringLength(GetEventPlayerChatString()) then
			r_naji[a_naji] = S2I(SubString(GetEventPlayerChatString(), c_naji, StringLength(GetEventPlayerChatString())))
			if true then break end
		end
	end
	if R2I(r_naji[2]) >= 1 and R2I(r_naji[2]) <= 16 then
		SetMapFlag(MAP_USE_HANDICAPS, true)
		SetPlayerHandicap(Player(R2I(r_naji[2]) - 1), r_naji[1])
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000已设置|cff00FFFF" .. (GetPlayerName(Player(R2I(r_naji[2]) - 1)) or "") .. "|cffFF0000的生命障碍为|cffFFFF00" .. (R2S(r_naji[1]) or "") .. "|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000玩家参数输入数值错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
	end
end
function TestA48_naji()
	local r_naji = S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	SetTimeOfDayScale(r_naji / 100)
	DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置时间流逝速度为|cffFFFF00" .. (R2S(r_naji) or "") .. "%|r")
end
function TestA47_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		for _ in _loop_() do
			u_naji = FirstOfGroup(g_naji)
			if u_naji == nil then break end
			GroupRemoveUnit(g_naji, u_naji)
			SetUnitUserData(u_naji, i_naji)
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的自定义值为|cffFFFF00" .. (I2S(i_naji) or "") .. "|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA46_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		if i_naji >= 1 then
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				if IsUnitType(u_naji, UNIT_TYPE_HERO) then
					SetHeroInt(u_naji, i_naji, true)
					DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有英雄的智力为|cffFFFF00" .. (I2S(i_naji) or "") .. "|r")
				end
			end
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入错误！请输入|cffFFFF00大于等于1|cffFF0000的整数|r")
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA45_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		if i_naji >= 1 then
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				if IsUnitType(u_naji, UNIT_TYPE_HERO) then
					SetHeroAgi(u_naji, i_naji, true)
					DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有英雄的敏捷为|cffFFFF00" .. (I2S(i_naji) or "") .. "|r")
				end
			end
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入错误！请输入|cffFFFF00大于等于1|cffFF0000的整数|r")
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA44_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		if i_naji >= 1 then
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				if IsUnitType(u_naji, UNIT_TYPE_HERO) then
					SetHeroStr(u_naji, i_naji, true)
					DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有英雄的力量为|cffFFFF00" .. (I2S(i_naji) or "") .. "|r")
				end
			end
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入错误！请输入|cffFFFF00大于等于1|cffFF0000的整数|r")
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA43_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		for _ in _loop_() do
			u_naji = FirstOfGroup(g_naji)
			if u_naji == nil then break end
			GroupRemoveUnit(g_naji, u_naji)
			if IsUnitType(u_naji, UNIT_TYPE_HERO) then
				if GetHeroSkillPoints(u_naji) + i_naji >= 0 then
					UnitModifySkillPoints(u_naji, i_naji)
				else
					DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF80C0" .. (GetUnitName(u_naji) or "") .. "|cffFF0000的剩余技能点不能|cffFFFF00低于0|cffFF0000！|r")
				end
			end
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000增加玩家选择的所有英雄的技能点数：|cffFFFF00" .. (I2S(i_naji) or "") .. "|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA42_naji()
	local r_naji = S2R(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		for _ in _loop_() do
			u_naji = FirstOfGroup(g_naji)
			if u_naji == nil then break end
			GroupRemoveUnit(g_naji, u_naji)
			if UnitAddAbility(u_naji, 1098015094) then
				UnitRemoveAbility(u_naji, 1098015094)
			end
			SetUnitFlyHeight(u_naji, r_naji, 0)
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的飞行高度为|cffFFFF00" .. (R2S(r_naji) or "") .. "|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA41_naji()
	local r_naji = S2R(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		if r_naji > 0 then
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				SetUnitAcquireRange(u_naji, r_naji)
			end
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的主动攻击范围为|cffFFFF00" .. (R2S(r_naji) or "") .. "|r")
		else
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				SetUnitAcquireRange(u_naji, GetUnitDefaultAcquireRange(u_naji))
			end
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入数值错误！已还原玩家选择的所有单位的|cffFFFF00默认主动攻击范围|cffFF0000。请输入|cffFFFF00大于0|cffFF0000的实数|r")
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA40_naji()
	local r_naji = S2R(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		if r_naji >= 0 and r_naji <= 1 then
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				SetUnitTurnSpeed(u_naji, r_naji)
			end
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的转身速率为|cffFFFF00" .. (R2S(r_naji) or "") .. "|r")
		else
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				SetUnitTurnSpeed(u_naji, GetUnitDefaultTurnSpeed(u_naji))
			end
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入数值错误！已还原玩家选择的所有单位的|cffFFFF00默认转身速率|cffFF0000。请输入|cffFFFF000~1|cffFF0000之间的实数|r")
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA39_naji()
	local r_naji = S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		if r_naji >= 0 and r_naji <= 522 then
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				h__SetUnitMoveSpeed(u_naji, r_naji)
			end
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的移动速度为|cffFFFF00" .. (R2S(r_naji) or "") .. "|r")
		else
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				h__SetUnitMoveSpeed(u_naji, GetUnitDefaultMoveSpeed(u_naji))
			end
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入数值错误！已还原玩家选择的所有单位的|cffFFFF00默认移动速度|cffFF0000。请输入|cffFFFF000~522|cffFF0000之间的实数|r")
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA38_naji()
	local r_naji = S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	if r_naji >= 0 and r_naji <= 24 then
		SetFloatGameState(GAME_STATE_TIME_OF_DAY, r_naji)
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000当前时间设置为|cffFFFF00" .. (R2S(r_naji) or "") .. "|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000请输入|cffFFFF000~24|cffFF0000之间的实数|r")
	end
end
function TestA37_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	SetRandomSeed(i_naji)
	DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000随机种子设置为|cffFFFF00" .. (I2S(i_naji) or "") .. "|r")
end
function TestA36_naji()
	local g_naji
	local u_naji
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
	local z_naji = StringLength(GetEventPlayerChatString()) - 1
	for _ in _loop_() do
		Sdummy_naji[1] = SubString(GetEventPlayerChatString(), z_naji, z_naji + 1)
		if Sdummy_naji[1] == "," then
			z_naji = S2I(SubString(GetEventPlayerChatString(), z_naji + 1, StringLength(GetEventPlayerChatString())))
			if true then break end
		end
		z_naji = z_naji - 1
		if z_naji <= 0 then
			z_naji = 1
			if true then break end
		end
	end
	if z_naji <= 0 or z_naji >= 7 then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000第二参数输入错误！请输入|cffFFFF001~6|cffFF0000间的整数|r")
		return
	end
	g_naji = CreateGroup()
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	u_naji = FirstOfGroup(g_naji)
	if u_naji ~= nil then
		if UnitItemInSlot(u_naji, z_naji - 1) ~= nil then
			if i_naji <= 0 then
				i_naji = 0
			end
			SetItemCharges(UnitItemInSlot(u_naji, z_naji - 1), i_naji)
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000该单位|cffFFFF00第" .. (I2S(z_naji) or "") .. "格物品栏|cffFF0000的可允次数设置为|cffFFFF00" .. (I2S(i_naji) or "") .. "|r")
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000该单位|cffFFFF00第" .. (I2S(z_naji) or "") .. "格物品栏|cffFF0000不存在物品|r")
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA35_naji()
	for _ in _loop_() do
		Ibm_naji = Ibm_naji - 1
		DestroyTextTag(Tbm_naji[Ibm_naji])
		Tbm_naji[Ibm_naji] = nil
		if Ibm_naji <= 0 then break end
	end
	DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cffFF0000已清除所有|cffFFFF00备忘文字|r")
end
function TestA34_naji()
	Tbm_naji[Ibm_naji] = CreateTextTag()
	SetTextTagText(Tbm_naji[Ibm_naji], SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())), 20 * 0.023 / 10)
	SetTextTagPos(Tbm_naji[Ibm_naji], GetCameraTargetPositionX(), GetCameraTargetPositionY(), 0)
	SetTextTagColor(Tbm_naji[Ibm_naji], 0, 255, 0, 255)
	Ibm_naji = Ibm_naji + 1
end
function TestA33_naji()
	local r_naji = S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	if r_naji > 100 then
		r_naji = 1
	end
	if r_naji < 0 then
		r_naji = 0
	end
	r_naji = r_naji / 100
	if GetLocalPlayer() == GetTriggerPlayer() then
		VolumeGroupSetVolume(SOUND_VOLUMEGROUP_AMBIENTSOUNDS, r_naji)
		VolumeGroupSetVolume(SOUND_VOLUMEGROUP_SPELLS, r_naji)
		VolumeGroupSetVolume(SOUND_VOLUMEGROUP_COMBAT, r_naji)
		VolumeGroupSetVolume(SOUND_VOLUMEGROUP_FIRE, r_naji)
		VolumeGroupSetVolume(SOUND_VOLUMEGROUP_UNITMOVEMENT, r_naji)
		VolumeGroupSetVolume(SOUND_VOLUMEGROUP_UNITSOUNDS, r_naji)
		VolumeGroupSetVolume(SOUND_VOLUMEGROUP_UI, r_naji)
	end
	DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000你当前的音效音量为：|cffFFFF00" .. (I2S(R2I(r_naji * 100)) or "") .. "%|r")
end
function TestA32_naji()
	DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000骰得点数：|cffFFFF00" .. (I2S(GetRandomInt(1, 100)) or "") .. "|r")
end
function TestA31_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	if i_naji > 100 then
		i_naji = 100
	end
	if i_naji < 0 then
		i_naji = 0
	end
	if GetLocalPlayer() == GetTriggerPlayer() then
		SetMusicVolume(R2I(I2R(i_naji) * 1.27))
	end
	DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000你当前的音乐音量为：|cffFFFF00" .. (I2S(i_naji) or "") .. "%|r")
end
function TestA30_naji()
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		for _ in _loop_() do
			u_naji = FirstOfGroup(g_naji)
			if u_naji == nil then break end
			GroupRemoveUnit(g_naji, u_naji)
			if IsUnitPaused(u_naji) then
				PauseUnit(u_naji, false)
			else
				PauseUnit(u_naji, true)
			end
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000已切换玩家选择的所有单位的|cffFFFF00暂停状态|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA29_naji()
	local tt
	if Bir_naji then
		Sdummy_naji[0] = I2S(R2I(GetEventDamage()))
	else
		Sdummy_naji[0] = R2S(GetEventDamage())
	end
	if Bddm_naji then
		if Bpn_naji then
			Sdummy_naji[3] = (GetPlayerName(GetTriggerPlayer()) or "") .. "（玩家" .. (I2S(GetPlayerId(GetTriggerPlayer()) + 1) or "") .. "）"
			Sdummy_naji[4] = (GetPlayerName(GetOwningPlayer(GetEventDamageSource())) or "") .. "（玩家" .. (I2S(GetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1) or "") .. "）"
		else
			Sdummy_naji[3] = ""
			Sdummy_naji[4] = ""
		end
		if Bxy_naji then
			Sdummy_naji[1] = "（" .. (R2S(GetUnitX(GetTriggerUnit())) or "") .. "," .. (R2S(GetUnitY(GetTriggerUnit())) or "") .. "）"
			Sdummy_naji[2] = "（" .. (R2S(GetWidgetX(GetEventDamageSource())) or "") .. "," .. (R2S(GetWidgetY(GetEventDamageSource())) or "") .. "）"
		else
			Sdummy_naji[1] = ""
			Sdummy_naji[2] = ""
		end
		DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF8000受到了|cffFFFF00" .. (Sdummy_naji[0] or "") .. "|cffFF8000点伤害！|cff00FFFF伤害来源为|r" .. (Sdummy_naji[4] or "") .. "|cffFFFF00" .. (GetUnitName(GetEventDamageSource()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetEventDamageSource())) or "") .. "|cffFFFF00" .. (Sdummy_naji[2] or "") .. "|r")
	else
		if GetLocalPlayer() == Ptest_naji then
			tt = CreateTextTag()
			SetTextTagText(tt, Sdummy_naji[0], 13 * 0.023 / 10)
			SetTextTagPosUnit(tt, GetTriggerUnit(), 0)
			SetTextTagColor(tt, 255, 0, 0, 255)
			SetTextTagVelocity(tt, 150 * 0.071 / 128 * Cos(Rdummy_naji * 0.01745), 150 * 0.071 / 128 * Sin(Rdummy_naji * 0.01745))
			SetTextTagPermanent(tt, false)
			SetTextTagLifespan(tt, 1)
			SetTextTagFadepoint(tt, 0.8)
			tt = nil
			Rdummy_naji = Rdummy_naji + 30
			if Rdummy_naji >= 360 then
				Rdummy_naji = Rdummy_naji - 360
			end
		end
	end
end
function TestA28_naji()
	if GetUnitAbilityLevel(GetTriggerUnit(), 1097625443) == 0 then
		TriggerRegisterUnitEvent(Ttest_naji[0], GetTriggerUnit(), EVENT_UNIT_DAMAGED)
	end
end
function TestA27_naji()
	local g_naji = CreateGroup()
	local i_naji = 0
	local z_naji
	for _ in _loop_() do
		GroupEnumUnitsOfPlayer(g_naji, Player(i_naji), nil)
		z_naji = 0
		for _ in _loop_() do
			if FirstOfGroup(g_naji) == nil then break end
			GroupRemoveUnit(g_naji, FirstOfGroup(g_naji))
			z_naji = z_naji + 1
		end
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 15, "|cff00FFFF(" .. (I2S(i_naji + 1) or "") .. ")|cffFF0000" .. (GetPlayerName(Player(i_naji)) or "") .. "|r：|cffFF80C0总单位数|cffFFFF00" .. (I2S(z_naji) or "") .. "|r：|cffFF80C0金钱|cffFFFF00" .. (I2S(GetPlayerState(Player(i_naji), PLAYER_STATE_RESOURCE_GOLD)) or "") .. "|r：|cffFF80C0木头|cffFFFF00" .. (I2S(GetPlayerState(Player(i_naji), PLAYER_STATE_RESOURCE_LUMBER)) or "") .. "|r：|cffFF80C0已用/可用人口|cffFFFF00" .. (I2S(GetPlayerState(Player(i_naji), PLAYER_STATE_RESOURCE_FOOD_USED)) or "") .. "|r/|cffFFFF00" .. (I2S(GetPlayerState(Player(i_naji), PLAYER_STATE_RESOURCE_FOOD_CAP)) or ""))
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA26_naji()
	if Bpause_naji then
		PauseGame(false)
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000继续游戏|r")
		Bpause_naji = false
	else
		PauseGame(true)
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000暂停游戏|r")
		Bpause_naji = true
	end
end
function TestA25_naji()
	local r_naji = S2R(SubString(GetEventPlayerChatString(), 4, StringLength(GetEventPlayerChatString())))
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		for _ in _loop_() do
			u_naji = FirstOfGroup(g_naji)
			if u_naji == nil then break end
			GroupRemoveUnit(g_naji, u_naji)
			SetUnitTimeScale(u_naji, r_naji)
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的动画播放速率为|cffFFFF00" .. (R2S(r_naji) or "") .. "|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA24_naji()
	local i_naji = _array_(0)
	local a_naji = 1
	local b_naji = 4
	local c_naji = 4
	local g_naji
	local u_naji
	i_naji[1] = 0
	i_naji[2] = 0
	i_naji[3] = 0
	i_naji[4] = 0
	for _ in _loop_() do
		Sdummy_naji[1] = SubString(GetEventPlayerChatString(), b_naji, b_naji + 1)
		if Sdummy_naji[1] == "," then
			i_naji[a_naji] = S2I(SubString(GetEventPlayerChatString(), c_naji, b_naji))
			a_naji = a_naji + 1
			c_naji = b_naji + 1
			if a_naji >= 4 then
				i_naji[4] = S2I(SubString(GetEventPlayerChatString(), c_naji, StringLength(GetEventPlayerChatString())))
				if true then break end
			end
		end
		b_naji = b_naji + 1
		if b_naji >= StringLength(GetEventPlayerChatString()) then
			i_naji[a_naji] = S2I(SubString(GetEventPlayerChatString(), c_naji, StringLength(GetEventPlayerChatString())))
			if true then break end
		end
	end
	if i_naji[1] >= 0 and i_naji[1] <= 255 and i_naji[2] >= 0 and i_naji[2] <= 255 and i_naji[3] >= 0 and i_naji[3] <= 255 and i_naji[4] >= 0 and i_naji[4] <= 255 then
		g_naji = CreateGroup()
		GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
		if FirstOfGroup(g_naji) ~= nil then
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				SetUnitVertexColor(u_naji, i_naji[1], i_naji[2], i_naji[3], i_naji[4])
			end
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000设置玩家选择的所有单位的染色为|cffFFFF00" .. (I2S(i_naji[1]) or "") .. "|cffFF0000,|cffFFFF00" .. (I2S(i_naji[2]) or "") .. "|cffFF0000,|cffFFFF00" .. (I2S(i_naji[3]) or "") .. "|cffFF0000,|cffFFFF00" .. (I2S(i_naji[4]) or "") .. "|r")
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
		end
		DestroyGroup(g_naji)
		g_naji = nil
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入数值错误！请输入|cffFFFF000~255|cffFF0000之间的整数|r")
	end
end
function TestA23_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString()))) - 1
	local z_naji = StringLength(GetEventPlayerChatString()) - 1
	for _ in _loop_() do
		Sdummy_naji[1] = SubString(GetEventPlayerChatString(), z_naji, z_naji + 1)
		if Sdummy_naji[1] == "," then
			z_naji = S2I(SubString(GetEventPlayerChatString(), z_naji + 1, StringLength(GetEventPlayerChatString())))
			if true then break end
		end
		z_naji = z_naji - 1
		if z_naji <= 0 then
			z_naji = GetPlayerId(GetTriggerPlayer()) + 1
			if true then break end
		end
	end
	if z_naji <= 0 or z_naji >= 17 then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入序号错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
		return
	end
	if i_naji >= 0 and i_naji <= 15 then
		if GetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_ADVANCED_CONTROL) then
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_VISION, false)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_CONTROL, false)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_ADVANCED_CONTROL, false)
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000" .. (GetPlayerName(Player(z_naji - 1)) or "") .. "|cffFFFF00失去了|cffFF0000" .. (GetPlayerName(Player(i_naji)) or "") .. "|cffFFFF00的|cffFF0000控制权|r")
		else
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_VISION, true)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_CONTROL, true)
			SetPlayerAlliance(Player(i_naji), Player(z_naji - 1), ALLIANCE_SHARED_ADVANCED_CONTROL, true)
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000" .. (GetPlayerName(Player(z_naji - 1)) or "") .. "|cffFFFF00获得了|cffFF0000" .. (GetPlayerName(Player(i_naji)) or "") .. "|cffFFFF00的|cffFF0000控制权|r")
		end
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入序号错误！请输入|cffFFFF001~16|cffFF0000之间的整数|r")
	end
end
function TestA22_naji()
	local g_naji = CreateGroup()
	local u_naji
	local i_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	u_naji = FirstOfGroup(g_naji)
	if u_naji ~= nil then
		i_naji = GetUnitTypeId(u_naji)
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "===============*****===============")
		if IsUnitType(u_naji, UNIT_TYPE_HERO) then
			Sdummy_naji[0] = GetHeroProperName(u_naji)
		else
			Sdummy_naji[0] = "无"
		end
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0单位名称/称谓：|cffFFFF00" .. (GetUnitName(u_naji) or "") .. "/" .. (Sdummy_naji[0] or "") .. "|r")
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0ID256进制/10进制：|cffFFFF00" .. (ID2S_naji(GetUnitTypeId(u_naji)) or "") .. "/" .. (I2S(GetUnitTypeId(u_naji)) or "") .. "|r")
		--=========================以下部分1.24以下的版本需删除==============================
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0存储地址：|cffFFFF00" .. (I2S(GetHandleId(u_naji)) or "") .. "|r")
		--=========================以上部分1.24以下的版本需删除==============================
		if IsUnitRace(u_naji, RACE_HUMAN) then
			Sdummy_naji[0] = "人族"
		end
		if IsUnitRace(u_naji, RACE_ORC) then
			Sdummy_naji[0] = "兽族"
		end
		if IsUnitRace(u_naji, RACE_UNDEAD) then
			Sdummy_naji[0] = "不死族"
		end
		if IsUnitRace(u_naji, RACE_NIGHTELF) then
			Sdummy_naji[0] = "暗夜精灵族"
		end
		if IsUnitRace(u_naji, RACE_DEMON) then
			Sdummy_naji[0] = "恶魔"
		end
		if IsUnitRace(u_naji, ConvertRace(0)) then
			Sdummy_naji[0] = "没有"
		end
		if IsUnitRace(u_naji, ConvertRace(7)) then
			Sdummy_naji[0] = "其它"
		end
		if IsUnitRace(u_naji, ConvertRace(8)) then
			Sdummy_naji[0] = "野外生物"
		end
		if IsUnitRace(u_naji, ConvertRace(9)) then
			Sdummy_naji[0] = "平民"
		end
		if IsUnitRace(u_naji, RACE_HUMAN) then
			Sdummy_naji[0] = "人族"
		end
		if IsUnitRace(u_naji, ConvertRace(10)) then
			Sdummy_naji[0] = "动物"
		end
		if IsUnitRace(u_naji, ConvertRace(11)) then
			Sdummy_naji[0] = "娜迦族"
		end
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0种族/等级：|cffFFFF00" .. (Sdummy_naji[0] or "") .. "/" .. (I2S(GetUnitLevel(u_naji)) or "") .. "|r")
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0所属玩家/cj索引：|cffFFFF00" .. (GetPlayerName(GetOwningPlayer(u_naji)) or "") .. "/" .. (I2S(GetPlayerId(GetOwningPlayer(u_naji))) or "") .. "|r")
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0坐标：|cffFFFF00(" .. (R2S(GetUnitX(u_naji)) or "") .. "," .. (R2S(GetUnitY(u_naji)) or "") .. ")|r")
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0面向角度/弧度：|cffFFFF00" .. (R2S(GetUnitFacing(u_naji)) or "") .. "/" .. (R2S(0.017 * GetUnitFacing(u_naji)) or "") .. "|r")
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0自定义值：|cffFFFF00" .. (I2S(GetUnitUserData(u_naji)) or "") .. "|r")
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0附加值：|cffFFFF00" .. (I2S(GetUnitPointValue(u_naji)) or "") .. "|r")
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0主动攻击范围当前/默认：|cffFFFF00" .. (R2S(GetUnitAcquireRange(u_naji)) or "") .. "/" .. (R2S(GetUnitDefaultAcquireRange(u_naji)) or "") .. "|r")
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0移动速度当前/默认：|cffFFFF00" .. (R2S(GetUnitMoveSpeed(u_naji)) or "") .. "/" .. (R2S(GetUnitDefaultMoveSpeed(u_naji)) or "") .. "|r")
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0转身速率当前/默认：|cffFFFF00" .. (R2S(GetUnitTurnSpeed(u_naji)) or "") .. "/" .. (R2S(GetUnitDefaultTurnSpeed(u_naji)) or "") .. "|r")
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0飞行高度当前/默认：|cffFFFF00" .. (R2S(GetUnitFlyHeight(u_naji)) or "") .. "/" .. (R2S(GetUnitDefaultFlyHeight(u_naji)) or "") .. "|r")
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0拥有buff数量全部/正面/负面：|cffFFFF00" .. (I2S(UnitCountBuffsEx(u_naji, true, true, false, false, true, true, false)) or "") .. "/" .. (I2S(UnitCountBuffsEx(u_naji, true, false, false, false, true, true, false)) or "") .. "/" .. (I2S(UnitCountBuffsEx(u_naji, false, true, false, false, true, true, false)) or "") .. "|r")
		Sdummy_naji[0] = " "
		if IsUnitIdType(i_naji, UNIT_TYPE_MELEE_ATTACKER) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "近战，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_RANGED_ATTACKER) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "远程，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_STRUCTURE) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "建筑，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_HERO) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "英雄，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_GROUND) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "地面，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_FLYING) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "飞行，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_SUMMONED) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "召唤单位，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_PLAGUED) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "附带瘟疫，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_SNARED) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "被束缚的，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_STUNNED) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "被眩晕的，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_GIANT) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "泰坦，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_TAUREN) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "牛头人，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_UNDEAD) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "不死族，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_MECHANICAL) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "机械，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_ANCIENT) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "古树，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_PEON) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "工人，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_TOWNHALL) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "城镇大厅，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_SAPPER) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "地精工兵，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_POISONED) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "中毒的，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_POLYMORPHED) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "被变形的，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_SLEEPING) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "被催眠的，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_RESISTANT) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "有抗性皮肤的，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_ETHEREAL) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "处于虚无状态，"
		end
		if IsUnitIdType(i_naji, UNIT_TYPE_MAGIC_IMMUNE) then
			Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "魔法免疫，"
		end
		Sdummy_naji[0] = SubString(Sdummy_naji[0], 1, StringLength(Sdummy_naji[0]) - 2)
		DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "|cffFF80C0可识别类型：|cffFFFF00" .. (Sdummy_naji[0] or "") .. "||r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
	u_naji = nil
end
function TestA21_naji()
	if GetLocalPlayer() == GetTriggerPlayer() then
		ResetToGameCamera(0)
	end
	DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000重置镜头|r")
end
function TestA20_naji()
	if GetLocalPlayer() == GetTriggerPlayer() then
		ClearTextMessages()
	end
end
function TestA19_naji()
	if Bpn_naji then
		Sdummy_naji[3] = (GetPlayerName(GetOwningPlayer(GetTriggerUnit())) or "") .. "（玩家" .. (I2S(GetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1) or "") .. "）"
	else
		Sdummy_naji[3] = ""
	end
	if Bxy_naji then
		Sdummy_naji[1] = "（" .. (R2S(GetUnitX(GetTriggerUnit())) or "") .. "," .. (R2S(GetUnitY(GetTriggerUnit())) or "") .. "）"
		Sdummy_naji[2] = "（" .. (R2S(GetWidgetX(GetKillingUnit())) or "") .. "," .. (R2S(GetWidgetY(GetKillingUnit())) or "") .. "）"
	else
		Sdummy_naji[1] = ""
		Sdummy_naji[2] = ""
	end
	if GetTriggerPlayer() == nil then
		unitnumber_lh = unitnumber_lh + 1
		createdunitnumber_lh = createdunitnumber_lh + 1
		DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF80C0第一次进入地图,当前单位数：" .. (I2S(unitnumber_lh) or "") .. ",创建单位总数：" .. (I2S(createdunitnumber_lh) or "") .. "|r")
	else
		if Bpn_naji then
			Sdummy_naji[4] = (GetPlayerName(GetOwningPlayer(GetKillingUnit())) or "") .. "（玩家" .. (I2S(GetPlayerId(GetOwningPlayer(GetKillingUnit())) + 1) or "") .. "）"
		else
			Sdummy_naji[4] = ""
		end
		unitnumber_lh = unitnumber_lh - 1
		DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF80C0死亡！凶手是：|r" .. (Sdummy_naji[4] or "") .. "|cffFFFF00" .. (GetUnitName(GetKillingUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetKillingUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[2] or "") .. ",当前单位数：" .. (I2S(unitnumber_lh) or "") .. ",创建单位总数：" .. (I2S(createdunitnumber_lh) or "") .. "|r")
	end
end
function TestA18_naji()
	SetPlayerName(GetTriggerPlayer(), SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000你当前的名称为：|cffFFFF00" .. (GetPlayerName(GetTriggerPlayer()) or "") .. "|r")
end
function TestA17_naji()
	local p_naji
	if Bpn_naji then
		Sdummy_naji[3] = (GetPlayerName(GetTriggerPlayer()) or "") .. "（玩家" .. (I2S(GetPlayerId(GetTriggerPlayer()) + 1) or "") .. "）"
	else
		Sdummy_naji[3] = ""
	end
	if Bxy_naji then
		Sdummy_naji[1] = "（" .. (R2S(GetUnitX(GetTriggerUnit())) or "") .. "," .. (R2S(GetUnitY(GetTriggerUnit())) or "") .. "）"
		Sdummy_naji[2] = "（" .. (R2S(GetWidgetX(GetOrderTarget())) or "") .. "," .. (R2S(GetWidgetY(GetOrderTarget())) or "") .. "）"
	else
		Sdummy_naji[1] = ""
		Sdummy_naji[2] = ""
	end
	Sdummy_naji[0] = OrderId2String(GetIssuedOrderId())
	if Sdummy_naji[0] == nil then
		Sdummy_naji[0] = UnitId2String(GetIssuedOrderId())
		if Sdummy_naji[0] == nil then
			Sdummy_naji[0] = IDidentify_naji(GetIssuedOrderId())
			if Sdummy_naji[0] == nil or Sdummy_naji[0] == "Default string" then
				Sdummy_naji[0] = "null"
			else
				Sdummy_naji[0] = (Sdummy_naji[0] or "") .. "|cff00FF00" .. (ID2S_naji(GetIssuedOrderId()) or "")
			end
		end
	end
	if GetOrderTargetUnit() == nil then
		if GetOrderTargetDestructable() == nil then
			if GetOrderTargetItem() == nil then
				p_naji = GetOrderPointLoc()
				if p_naji == nil then
					DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF80C0发布了|cffFFFF00" .. (Sdummy_naji[0] or "") .. "|cffFF0000（" .. (I2S(GetIssuedOrderId()) or "") .. "）|r")
				else
					DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF80C0发布了|cffFFFF00" .. (Sdummy_naji[0] or "") .. "|cffFF0000（" .. (I2S(GetIssuedOrderId()) or "") .. "）|cff00FFFF目标点为|cffFFFF00（" .. (R2S(GetOrderPointX()) or "") .. "," .. (R2S(GetOrderPointY()) or "") .. "）|r")
				end
				RemoveLocation(p_naji)
				p_naji = nil
			else
				DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF80C0发布了|cffFFFF00" .. (Sdummy_naji[0] or "") .. "|cffFF0000（" .. (I2S(GetIssuedOrderId()) or "") .. "）|cff00FFFF目标为|cffFFFF00" .. (GetItemName(GetOrderTargetItem()) or "") .. "|cffFF0000" .. (ID2S_naji(GetItemTypeId(GetOrderTargetItem())) or "") .. "|cffFFFF00" .. (Sdummy_naji[2] or "") .. "|r")
			end
		else
			DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF80C0发布了|cffFFFF00" .. (Sdummy_naji[0] or "") .. "|cffFF0000（" .. (I2S(GetIssuedOrderId()) or "") .. "）|cff00FFFF目标为|cffFFFF00" .. (GetDestructableName(GetOrderTargetDestructable()) or "") .. "|cffFF0000" .. (ID2S_naji(GetDestructableTypeId(GetOrderTargetDestructable())) or "") .. "|cffFFFF00" .. (Sdummy_naji[2] or "") .. "|r")
		end
	else
		if Bpn_naji then
			Sdummy_naji[4] = (GetPlayerName(GetOwningPlayer(GetOrderTargetUnit())) or "") .. "（玩家" .. (I2S(GetPlayerId(GetOwningPlayer(GetOrderTargetUnit())) + 1) or "") .. "）"
		else
			Sdummy_naji[4] = ""
		end
		DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF80C0发布了|cffFFFF00" .. (Sdummy_naji[0] or "") .. "|cffFF0000（" .. (I2S(GetIssuedOrderId()) or "") .. "）|cff00FFFF目标为|r" .. (Sdummy_naji[4] or "") .. "|cffFFFF00" .. (GetUnitName(GetOrderTargetUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetOrderTargetUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[2] or "") .. "|r")
	end
end
function TestA16_naji()
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		for _ in _loop_() do
			u_naji = FirstOfGroup(g_naji)
			if u_naji == nil then break end
			GroupRemoveUnit(g_naji, u_naji)
			RemoveUnit(u_naji)
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFFFF00删除|cffFF0000玩家选择的所有单位|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA15_naji()
	local r_naji = S2R(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	if GetLocalPlayer() == GetTriggerPlayer() then
		if r_naji > 0 then
			SetCameraField(CAMERA_FIELD_TARGET_DISTANCE, r_naji, 0)
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000玩家当前镜头的镜头距离为|cffFFFF00" .. (R2S(r_naji) or "") .. "|r")
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000数值错误！|cffFFFF00请输入|cffFF0000大于0|cffFFFF00的实数|r")
		end
	end
end
function TestA14_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	local g_naji
	local u_naji
	if i_naji >= 0 then
		g_naji = CreateGroup()
		GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
		if FirstOfGroup(g_naji) ~= nil then
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				SetUnitAnimationByIndex(u_naji, i_naji)
			end
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000播放玩家选择的所有单位的第|cffFFFF00" .. (I2S(i_naji) or "") .. "|cffFF0000号动作|r")
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
		end
		DestroyGroup(g_naji)
		g_naji = nil
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入数值错误！请输入|cffFFFF00大于0|cffFF0000的数值|r")
	end
end
function TestA13_naji()
	if Bfog_naji then
		FogEnable(false)
		FogMaskEnable(false)
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000关闭|cffFFFF00阴影及战争迷雾|r")
		Bfog_naji = false
	else
		FogEnable(true)
		FogMaskEnable(true)
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000开启|cffFFFF00阴影及战争迷雾|r")
		Bfog_naji = true
	end
end
function TestA12_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	local g_naji
	local u_naji
	if i_naji >= 1 then
		g_naji = CreateGroup()
		GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
		if FirstOfGroup(g_naji) ~= nil then
			for _ in _loop_() do
				u_naji = FirstOfGroup(g_naji)
				if u_naji == nil then break end
				GroupRemoveUnit(g_naji, u_naji)
				if IsUnitType(u_naji, UNIT_TYPE_HERO) then
					if GetUnitLevel(u_naji) <= i_naji then
						SetHeroLevel(u_naji, i_naji, true)
					else
						UnitStripHeroLevel(u_naji, GetUnitLevel(u_naji) - i_naji)
					end
				end
			end
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000将玩家选择的所有英雄等级设置为|cffFFFF00" .. (I2S(i_naji) or "") .. "|r")
		else
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
		end
		DestroyGroup(g_naji)
		g_naji = nil
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000输入数值错误！请输入|cffFFFF00大于1|cffFF0000的数值|r")
	end
end
function TestA11_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	local z_naji = StringLength(GetEventPlayerChatString()) - 1
	for _ in _loop_() do
		Sdummy_naji[1] = SubString(GetEventPlayerChatString(), z_naji, z_naji + 1)
		if Sdummy_naji[1] == "," then
			z_naji = S2I(SubString(GetEventPlayerChatString(), z_naji + 1, StringLength(GetEventPlayerChatString())))
			if true then break end
		end
		z_naji = z_naji - 1
		if z_naji <= 0 then
			z_naji = GetPlayerId(GetTriggerPlayer()) + 1
			if true then break end
		end
	end
	if z_naji <= 0 or z_naji >= 17 then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000第二参数输入错误！请输入|cffFFFF001~16|cffFF0000间的整数|r")
		return
	end
	SetPlayerState(Player(z_naji - 1), PLAYER_STATE_RESOURCE_LUMBER, GetPlayerState(Player(z_naji - 1), PLAYER_STATE_RESOURCE_LUMBER) + i_naji)
	if i_naji > 0 then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000为|cff00FFFF" .. (GetPlayerName(Player(z_naji - 1)) or "") .. "|cffFF0000增加了|cffFFFF00" .. (I2S(i_naji) or "") .. "|cffFF0000木头|r")
	elseif i_naji < 0 then
		i_naji = i_naji * -1
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000为|cff00FFFF" .. (GetPlayerName(Player(z_naji - 1)) or "") .. "|cffFF0000减少了|cffFFFF00" .. (I2S(i_naji) or "") .. "|cffFF0000木头|r")
	end
end
function TestA10_naji()
	local i_naji = S2I(SubString(GetEventPlayerChatString(), 3, StringLength(GetEventPlayerChatString())))
	local z_naji = StringLength(GetEventPlayerChatString()) - 1
	for _ in _loop_() do
		Sdummy_naji[1] = SubString(GetEventPlayerChatString(), z_naji, z_naji + 1)
		if Sdummy_naji[1] == "," then
			z_naji = S2I(SubString(GetEventPlayerChatString(), z_naji + 1, StringLength(GetEventPlayerChatString())))
			if true then break end
		end
		z_naji = z_naji - 1
		if z_naji <= 0 then
			z_naji = GetPlayerId(GetTriggerPlayer()) + 1
			if true then break end
		end
	end
	if z_naji <= 0 or z_naji >= 17 then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000第二参数输入错误！请输入|cffFFFF001~16|cffFF0000间的整数|r")
		return
	end
	SetPlayerState(Player(z_naji - 1), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(Player(z_naji - 1), PLAYER_STATE_RESOURCE_GOLD) + i_naji)
	if i_naji > 0 then
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000为|cff00FFFF" .. (GetPlayerName(Player(z_naji - 1)) or "") .. "|cffFF0000增加了|cffFFFF00" .. (I2S(i_naji) or "") .. "|cffFF0000黄金|r")
	elseif i_naji < 0 then
		i_naji = i_naji * -1
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000为|cff00FFFF" .. (GetPlayerName(Player(z_naji - 1)) or "") .. "|cffFF0000减少了|cffFFFF00" .. (I2S(i_naji) or "") .. "|cffFF0000黄金|r")
	end
end
--=========================以下部分1.24以下的版本需删除==============================
function TestA9_naji()
	local p_naji = Location(0, 0)
	Rhandle_naji = Rhandle_naji + 0.1
	if Rhandle_naji >= 60 then
		Sdummy_naji[2] = R2S(Rhandle_naji - I2R(R2I(Rhandle_naji / 60)) * 60)
		if S2R(Sdummy_naji[2]) == 60 then
			Sdummy_naji[2] = "0.0"
		else
			Sdummy_naji[2] = SubString(" " .. (Sdummy_naji[2] or ""), 1, StringLength(Sdummy_naji[2]) - 1)
		end
		Sdummy_naji[1] = " " .. (R2S(Rhandle_naji / 60) or "")
		Sdummy_naji[1] = (SubString(Sdummy_naji[1], 1, StringLength(Sdummy_naji[1]) - 4) or "") .. "分" .. (Sdummy_naji[2] or "") .. "秒"
	else
		Sdummy_naji[1] = " " .. (R2S(Rhandle_naji) or "")
		Sdummy_naji[1] = (SubString(Sdummy_naji[1], 1, StringLength(Sdummy_naji[1]) - 2) or "") .. "秒"
	end
	DisplayTextToPlayer(Ptest_naji, 0, 0, "|cffFFFF00基准值：|r" .. (I2S(Ihandle_naji) or "") .. "|cffFFFF00——当前值：|r" .. (I2S(GetHandleId(p_naji)) or "") .. "|cffFFFF00——差值：|r" .. (I2S(GetHandleId(p_naji) - Ihandle_naji) or "") .. "|cffFFFF00——开启时间：|r" .. (Sdummy_naji[1] or ""))
	RemoveLocation(p_naji)
	p_naji = nil
end
--=========================以上部分1.24以下的版本需删除==============================
function TestA7_naji()
	local g_naji = CreateGroup()
	local u_naji
	GroupEnumUnitsSelected(g_naji, GetTriggerPlayer(), nil)
	if FirstOfGroup(g_naji) ~= nil then
		for _ in _loop_() do
			u_naji = FirstOfGroup(g_naji)
			if u_naji == nil then break end
			GroupRemoveUnit(g_naji, u_naji)
			SetUnitState(u_naji, UNIT_STATE_LIFE, GetUnitState(u_naji, UNIT_STATE_MAX_LIFE))
			SetUnitState(u_naji, UNIT_STATE_MANA, GetUnitState(u_naji, UNIT_STATE_MAX_MANA))
			UnitResetCooldown(u_naji)
		end
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000恢复了所有玩家选择单位的|cffFFFF00生命/魔法/冷却|r")
	else
		DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|cffFF0000没有|cffFFFF00选中|cffFF0000任何单位|r")
	end
	DestroyGroup(g_naji)
	g_naji = nil
end
function TestA6_naji()
	local t_naji = GetExpiredTimer()
	local u_naji
	for _ in _loop_() do
		u_naji = FirstOfGroup(Gcd_naji[0])
		if u_naji == nil then break end
		GroupRemoveUnit(Gcd_naji[0], u_naji)
		SetUnitState(u_naji, UNIT_STATE_MANA, GetUnitState(u_naji, UNIT_STATE_MAX_MANA))
		UnitResetCooldown(u_naji)
	end
	DestroyTimer(t_naji)
	t_naji = nil
	u_naji = nil
end
function TestA5_naji()
	local t_naji
	if IsUnitInGroup(GetTriggerUnit(), Gcd_naji[1]) then
		t_naji = CreateTimer()
		GroupAddUnit(Gcd_naji[0], GetTriggerUnit())
		TimerStart(t_naji, 0, false, TestA6_naji)
		t_naji = nil
	end
end
function TestA3_naji()
	local p_naji
	if Bpn_naji then
		Sdummy_naji[3] = (GetPlayerName(GetTriggerPlayer()) or "") .. "（玩家" .. (I2S(GetPlayerId(GetTriggerPlayer()) + 1) or "") .. "）"
	else
		Sdummy_naji[3] = ""
	end
	if GetSpellTargetUnit() == nil then
		if GetSpellTargetDestructable() == nil then
			if GetSpellTargetItem() == nil then
				p_naji = GetSpellTargetLoc()
				if p_naji == nil then
					DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF8000施放了|cffFFFF00" .. (GetObjectName(GetSpellAbilityId()) or "") .. "|cffFF0000" .. (ID2S_naji(GetSpellAbilityId()) or "") .. "|r")
				else
					DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF8000施放了|cffFFFF00" .. (GetObjectName(GetSpellAbilityId()) or "") .. "|cffFF0000" .. (ID2S_naji(GetSpellAbilityId()) or "") .. "|cff00FFFF目标点为|cffFFFF00（" .. (R2S(GetLocationX(p_naji)) or "") .. "," .. (R2S(GetLocationY(p_naji)) or "") .. "）|r")
				end
				RemoveLocation(p_naji)
				p_naji = nil
			else
				if Bxy_naji then
					Sdummy_naji[1] = "（" .. (R2S(GetUnitX(GetTriggerUnit())) or "") .. "," .. (R2S(GetUnitY(GetTriggerUnit())) or "") .. "）"
					Sdummy_naji[2] = "（" .. (R2S(GetWidgetX(GetSpellTargetItem())) or "") .. "," .. (R2S(GetWidgetY(GetSpellTargetItem())) or "") .. "）"
				else
					Sdummy_naji[1] = ""
					Sdummy_naji[2] = ""
				end
				DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF8000施放了|cffFFFF00" .. (GetObjectName(GetSpellAbilityId()) or "") .. "|cffFF0000" .. (ID2S_naji(GetSpellAbilityId()) or "") .. "|cff00FFFF目标为|cffFFFF00" .. (GetItemName(GetSpellTargetItem()) or "") .. "|cffFF0000" .. (ID2S_naji(GetItemTypeId(GetSpellTargetItem())) or "") .. "|cffFFFF00" .. (Sdummy_naji[2] or "") .. "|r")
			end
		else
			if Bxy_naji then
				Sdummy_naji[1] = "（" .. (R2S(GetUnitX(GetTriggerUnit())) or "") .. "," .. (R2S(GetUnitY(GetTriggerUnit())) or "") .. "）"
				Sdummy_naji[2] = "（" .. (R2S(GetWidgetX(GetSpellTargetDestructable())) or "") .. "," .. (R2S(GetWidgetY(GetSpellTargetDestructable())) or "") .. "）"
			else
				Sdummy_naji[1] = ""
				Sdummy_naji[2] = ""
			end
			DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF8000施放了|cffFFFF00" .. (GetObjectName(GetSpellAbilityId()) or "") .. "|cffFF0000" .. (ID2S_naji(GetSpellAbilityId()) or "") .. "|cff00FFFF目标为|cffFFFF00" .. (GetDestructableName(GetSpellTargetDestructable()) or "") .. "|cffFF0000" .. (ID2S_naji(GetDestructableTypeId(GetSpellTargetDestructable())) or "") .. "|cffFFFF00" .. (Sdummy_naji[2] or "") .. "|r")
		end
	else
		if Bpn_naji then
			Sdummy_naji[4] = (GetPlayerName(GetOwningPlayer(GetSpellTargetUnit())) or "") .. "（玩家" .. (I2S(GetPlayerId(GetOwningPlayer(GetSpellTargetUnit())) + 1) or "") .. "）"
		else
			Sdummy_naji[4] = ""
		end
		if Bxy_naji then
			Sdummy_naji[1] = "（" .. (R2S(GetUnitX(GetTriggerUnit())) or "") .. "," .. (R2S(GetUnitY(GetTriggerUnit())) or "") .. "）"
			Sdummy_naji[2] = "（" .. (R2S(GetWidgetX(GetSpellTargetUnit())) or "") .. "," .. (R2S(GetWidgetY(GetSpellTargetUnit())) or "") .. "）"
		else
			Sdummy_naji[1] = ""
			Sdummy_naji[2] = ""
		end
		DisplayTextToPlayer(Ptest_naji, 0, 0, (Sdummy_naji[3] or "") .. "|cffFFFF00" .. (GetUnitName(GetTriggerUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetTriggerUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[1] or "") .. "|cffFF8000施放了|cffFFFF00" .. (GetObjectName(GetSpellAbilityId()) or "") .. "|cffFF0000" .. (ID2S_naji(GetSpellAbilityId()) or "") .. "|cff00FFFF目标为|r" .. (Sdummy_naji[4] or "") .. "|cffFFFF00" .. (GetUnitName(GetSpellTargetUnit()) or "") .. "|cffFF0000" .. (ID2S_naji(GetUnitTypeId(GetSpellTargetUnit())) or "") .. "|cffFFFF00" .. (Sdummy_naji[2] or "") .. "|r")
	end
end
function TestA8_naji()
	if GetClickedButton() ~= Button_naji[0] and GetClickedButton() ~= Button_naji[100] then
		if GetClickedButton() == Button_naji[1] then
			if Bxy_naji then
				Bxy_naji = false
			else
				Bxy_naji = true
			end
		elseif GetClickedButton() == Button_naji[2] then
			if Bid_naji then
				Bid_naji = false
			else
				Bid_naji = true
			end
		elseif GetClickedButton() == Button_naji[3] then
			if Bpn_naji then
				Bpn_naji = false
			else
				Bpn_naji = true
			end
		elseif GetClickedButton() == Button_naji[4] then
			if Bir_naji then
				Bir_naji = false
			else
				Bir_naji = true
			end
		elseif GetClickedButton() == Button_naji[5] then
			if Bddm_naji then
				Bddm_naji = false
			else
				Bddm_naji = true
			end
		end
		DialogResetA2_naji()
		DialogDisplay(GetTriggerPlayer(), Dnaji_naji[1], true)
	elseif GetClickedButton() == Button_naji[0] then
		DialogResetA_naji()
		DialogDisplay(GetTriggerPlayer(), Dnaji_naji[0], true)
	end
end
function TestA4_naji()
	local p_naji
	local g_naji
	local i_naji
	local u_naji
	if GetClickedButton() ~= Button_naji[0] and GetClickedButton() ~= Button_naji[100] then
		if GetClickedButton() == Button_naji[1] then
			if IsTriggerEnabled(Ttest_naji[2]) then
				DisableTrigger(Ttest_naji[2])
			else
				EnableTrigger(Ttest_naji[2])
			end
		elseif GetClickedButton() == Button_naji[2] then
			if IsTriggerEnabled(Ttest_naji[15]) then
				DisableTrigger(Ttest_naji[15])
			else
				EnableTrigger(Ttest_naji[15])
			end
		elseif GetClickedButton() == Button_naji[3] then
			if IsTriggerEnabled(Ttest_naji[17]) then
				DisableTrigger(Ttest_naji[17])
			else
				EnableTrigger(Ttest_naji[17])
			end
		elseif GetClickedButton() == Button_naji[4] then
			if IsTriggerEnabled(Ttest_naji[26]) then
				DestroyTrigger(Ttest_naji[0])
				DisableTrigger(Ttest_naji[26])
				Rdummy_naji = 0
			else
				Ttest_naji[0] = CreateTrigger()
				TriggerAddCondition(Ttest_naji[0], Condition(TestA29_naji))
				EnableTrigger(Ttest_naji[26])
				g_naji = CreateGroup()
				i_naji = 0
				for _ in _loop_() do
					GroupEnumUnitsOfPlayer(g_naji, Player(i_naji), nil)
					for _ in _loop_() do
						u_naji = FirstOfGroup(g_naji)
						if u_naji == nil then break end
						GroupRemoveUnit(g_naji, u_naji)
						if GetUnitAbilityLevel(u_naji, 1097625443) == 0 then
							TriggerRegisterUnitEvent(Ttest_naji[0], u_naji, EVENT_UNIT_DAMAGED)
						end
					end
					i_naji = i_naji + 1
					if i_naji >= 16 then break end
				end
				Rdummy_naji = 0
				DestroyGroup(g_naji)
				g_naji = nil
			end
		elseif GetClickedButton() == Button_naji[5] then
			if IsTriggerEnabled(Ttest_naji[4]) then
				DestroyGroup(Gcd_naji[1])
				DisableTrigger(Ttest_naji[4])
			else
				Gcd_naji[1] = CreateGroup()
				EnableTrigger(Ttest_naji[4])
			end
		--=========================以下部分1.24以下的版本需删除==============================
		elseif GetClickedButton() == Button_naji[6] then
			if IsTriggerEnabled(Ttest_naji[7]) then
				DisableTrigger(Ttest_naji[7])
			else
				EnableTrigger(Ttest_naji[7])
				Ihandle_naji = 0
				Rhandle_naji = 0
				p_naji = Location(0, 0)
				Ihandle_naji = GetHandleId(p_naji)
				EnableTrigger(Ttest_naji[7])
				RemoveLocation(p_naji)
				p_naji = nil
			end
		--=========================以上部分1.24以下的版本需删除==============================
		elseif GetClickedButton() == Button_naji[7] then
			if IsTriggerEnabled(Ttest_naji[61]) then
				DisableTrigger(Ttest_naji[61])
			else
				EnableTrigger(Ttest_naji[61])
			end
		elseif GetClickedButton() == Button_naji[8] then
			if IsTriggerEnabled(Ttest_naji[71]) then
				DestroyGroup(Gms_naji)
				DisableTrigger(Ttest_naji[71])
			else
				Gms_naji = CreateGroup()
				EnableTrigger(Ttest_naji[71])
			end
		end
		DialogResetA_naji()
		DialogDisplay(GetTriggerPlayer(), Dnaji_naji[0], true)
	elseif GetClickedButton() == Button_naji[0] then
		DialogResetA2_naji()
		DialogDisplay(GetTriggerPlayer(), Dnaji_naji[1], true)
	end
end
function TestA2_naji()
	DialogResetA_naji()
	DialogDisplay(GetTriggerPlayer(), Dnaji_naji[0], true)
end
--=====================================#功能函数结束=====================================
--=====================================$初始化函数开始=====================================
function TestA_naji()
	local i_naji
	local row_naji = 2769
	Sdummy_naji[1] = "2013/11/04"
	DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cff00FF00===============*****===============|r")
	DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cffFF8000         开始初始化|cff00FFFFnajitest|cffFF8000测试代码|r")
	DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cffFF80C0                代码版本：|cffFF0000V2.4|r")
	DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cff00FF00              更新日期：|cffFF0000" .. (Sdummy_naji[1] or "") .. "|r")
	DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cffFFFF00       需要查看所有可用代码请按下|cffFF0000F9|r")
	DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cffFFFF00     任意玩家输入|cffFF0000'remove|cffFFFF00可清除该系统|r")
	DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 30, "|cff00FF00===============*****===============|r")
	Ptest_naji = GetTriggerPlayer()
	StringList_naji = ".................................!.#$%&'()*+,-./0123456789:;<=>.@ABCDEFGHIJKLMNOPQRSTUVWXYZ[.]^_`abcdefghijklmnopqrstuvwxyz{|}~................................................................................................................................"
	Rworld_naji = CreateRegion()
	RegionAddRect(Rworld_naji, GetWorldBounds())
	Itrigger_naji = 0
	for _ in _loop_() do
		Itrigger_naji = Itrigger_naji + 1
		Ttest_naji[Itrigger_naji] = CreateTrigger()
		if Itrigger_naji >= 77 then break end
	end
	Iquest_naji = 0
	for _ in _loop_() do
		Iquest_naji = Iquest_naji + 1
		Q_naji[Iquest_naji] = CreateQuest()
		QuestSetIconPath(Q_naji[Iquest_naji], "Buildings\\Other\\TempArtB\\BTNTempB.blp")
		QuestSetRequired(Q_naji[Iquest_naji], false)
		QuestSetDiscovered(Q_naji[Iquest_naji], true)
		QuestSetCompleted(Q_naji[Iquest_naji], false)
		if Iquest_naji >= 13 then break end
	end
	i_naji = 61
	QuestSetTitle(Q_naji[1], "|cffFF0000najitest帮助信息")
	QuestSetDescription(Q_naji[1], "|cff00FFFF注意：|r|n|cff00FFFF1、|cffFF0000*|cffFFFF00代表需要输入|cffFF80C0数字/文字，且其数量代表要输入多少个参数，参数之间用英文逗号隔开。多参数命令的第1参数必需输入，其它参数若空缺则系统会自动填补|r|n|cff00FFFF2、|cffFF0000(s)|cffFFFF00代表该代码功能可以同时作用|cffFF80C0玩家选择的所有单位|r|n|cff00FFFF3、|cffFFFF00很多功能都可以通过|cffFF80C0反复输入代码|cffFFFF00来切换|cffFF0000开/关|r|n|cff00FFFF4、|cffFFFF00为保持稳定，判定|cffFF80C0玩家选择单位|cffFFFF00没有同步系统数据，请确保在使用相关代码前|cffFF0000重新框选|cffFFFF00合适的单位|r|n|cff00FFFF5、|cffFFFF00大部分功能支持|cffFF0000负数|cffFFFF00，不支持负数的功能输入负值会|cffFF80C0还原默认设定|r|n|cff00FFFF6、|cffFFFF00使用者可以在任何时候|cffFF0000按下Esc|cffFFFF00重新获得用户控制权及关闭电影模式|r")
	QuestSetTitle(Q_naji[2], "|cffFF0000独立系统")
	QuestSetDescription(Q_naji[2], "|cffFFFF00'feini|cffFF0000(|rnajitest system|cffFF0000)|r|cffFFFF00'gms|cffFF0000(|r(Group Multiple Spell)|cffFF0000)|r|cffFFFF00'gcd|cffFF0000(|r(Group Cool Down)|cffFF0000)|r|n|n|cff00FFFF该系统包含众多测试功能，输入后会打开一个对话框")
	QuestSetTitle(Q_naji[3], "|cffFF0000单位-英雄（必须选择英雄）")
	QuestSetDescription(Q_naji[3], "|cffFFFF00'hl*|cffFF0000(|rset Hero(s) Level|cffFF0000)|r|cffFFFF00'hp*|cffFF0000(|radd Hero(s) skill Point|cffFF0000)|r|cffFFFF00'hs*|cffFF0000(|rset Hero(s) Str|cffFF0000)|r|cffFFFF00'ha*|cffFF0000(|rset Hero(s) Agi|cffFF0000)|r|cffFFFF00'hi*|cffFF0000(|rset Hero(s) Int|cffFF0000)|r")
	QuestSetTitle(Q_naji[4], "|cffFF0000单位-数值（必须选择单位）")
	QuestSetDescription(Q_naji[4], "|cffFFFF00'uts*|cffFF0000(|rUnit(s) Time Scale|cffFF0000)|r|cffFFFF00'uic**|cffFF0000(|rset Unit's Item Charge|cffFF0000)|r|cffFFFF00'um*|cffFF0000(|rset Unit(s) Move speed|cffFF0000)|r|cffFFFF00'uus*|cffFF0000(|rset Unit(s) tUrn Speed|cffFF0000)|r|cffFFFF00'uar*|cffFF0000(|rset Unit(s) Acquire Range|cffFF0000)|r|cffFFFF00'ufh*|cffFF0000(|rset Unit(s) Fly Height|cffFF0000)|r|cffFFFF00'ud*|cffFF0000(|rset Unit(s) user Data|cffFF0000)|r|cffFFFF00'us*|cffFF0000(|rset Unit(s) Scale|cffFF0000)|r|cffFFFF00'uvc****|cffFF0000(|rset Unit(s) Vertax Color|cffFF0000)|r|cffFFFF00'uxy**|cffFF0000(|rset Unit(s) XY|cffFF0000)|r")
	QuestSetTitle(Q_naji[5], "|cffFF0000单位-状态（必须选择单位）")
	QuestSetDescription(Q_naji[5], "|cffFFFF00'uh|cffFF0000(|rUnit(s) Healing|cffFF0000)|r|cffFFFF00'up|cffFF0000(|rUnit(s) Pause|cffFF0000)|r|cffFFFF00'ub|cffFF0000(|rUnit(s) Buff clear|cffFF0000)|r|cffFFFF00'uw|cffFF0000(|rUnit(s) Windwalk|cffFF0000)|r")
	QuestSetTitle(Q_naji[6], "|cffFF0000单位-特殊（必须选择单位）")
	QuestSetDescription(Q_naji[6], "|cffFFFF00'ua*|cffFF0000(|rplay Unit(s) Animation by index|cffFF0000)|r|cffFFFF00'ui|cffFF0000(|rUnit Information|cffFF0000)|r|cffFFFF00'uo*|cffFF0000(|rset Unit(s) Owner|cffFF0000)|r|cffFFFF00'uk|cffFF0000(|rUnit(s) Killed|cffFF0000)|r|cffFFFF00'co**|cffFF0000(|rCreate Object|cffFF0000)|r|cffFFFF00'ul|cffFF0000(|rUnit camera Lock|cffFF0000)|r|cffFFFF00'ur|cffFF0000(|rUnit(s) Remove|cffFF0000)|r|cffFFFF00'uii*|cffFF0000(|rUnit's Item Information|cffFF0000)|r")
	QuestSetTitle(Q_naji[7], "|cffFF0000玩家相关")
	QuestSetDescription(Q_naji[7], "|cffFFFF00'ag**/al**|cffFF0000(|rAdd Gold/Lumber|cffFF0000)|r|cffFFFF00'pc**|cffFF0000(|rPlayer Control|cffFF0000)|r|cffFFFF00'pa**|cffFF0000(|rset Player Alliance|cffFF0000)|r|cffFFFF00'pk*|cffFF0000(|rPlayer Kicked|cffFF0000)|r|cffFFFF00'ph**|cffFF0000(|rset Player Handicap|cffFF0000)|r|cffFFFF00'pn*|cffFF0000(|rPlayer Name|cffFF0000)|r|cffFFFF00'pt***|cffFF0000(|rPlayer Tech|cffFF0000)|r|cffFFFF00'psl|cffFF0000(|rPlayer Statistics List|cffFF0000)|r")
	QuestSetTitle(Q_naji[8], "|cffFF0000镜头相关")
	QuestSetDescription(Q_naji[8], "|cffFFFF00'cm|cffFF0000(|rCamera Mode|cffFF0000)|r|cffFFFF00'cd*|cffFF0000(|rCamera Distance|cffFF0000)|r|cffFFFF00'cr|cffFF0000(|rCamera Reset|cffFF0000)|r|cffFFFF00'ci|cffFF0000(|rCamera Information|cffFF0000)|r|cffFFFF00'cz*|cffFF0000(|rset Camera farZ|cffFF0000)|r")
	QuestSetTitle(Q_naji[9], "|cffFF0000其它")
	QuestSetDescription(Q_naji[9], "|cffFFFF00'fog|cffFF0000(|rFog|cffFF0000)|r|cffFFFF00'sc|cffFF0000(|rScreen Clear|cffFF0000)|r|cffFFFF00'rd|cffFF0000(|rRoll Dice|cffFF0000)|r|cffFFFF00'bm*|cffFF0000(|rBackup Message|cffFF0000)|r|cffFFFF00'cbm|cffFF0000(|rClear Backup Message|cffFF0000)|r|cffFFFF00'td*|cffFF0000(|rset Time of Day|cffFF0000)|r|cffFFFF00'ts*|cffFF0000(|rset Time of day Scale|cffFF0000)|r|cffFFFF00'we*|cffFF0000(|rWeather Effect|cffFF0000)|r|cffFFFF00'se*|cffFF0000(|rSystem Exchange|cffFF0000)|r|cffFFFF00'ef*|cffFF0000(|rExecute Function|cffFF0000)|r")
	QuestSetTitle(Q_naji[10], "|cffFF0000游戏设置")
	QuestSetDescription(Q_naji[10], "|cffFFFF00'mv*|cffFF0000(|rMusic Volume|cffFF0000)|r|cffFFFF00'sv*|cffFF0000(|rSound Volume|cffFF0000)|r|cffFFFF00'pg|cffFF0000(|rPause Game|cffFF0000)|r|cffFFFF00'rs*|cffFF0000(|rset Random Seed|cffFF0000)|r|cffFFFF00'gg|cffFF0000(|rGood Game|cffFF0000)|r|cffFFFF00'gs*|cffFF0000(|rset Game Speed|cffFF0000)|r|cffFFFF00'mf|cffFF0000(|rset Map Flag|cffFF0000)|r|cffFFFF00're|cffFF0000(|rRestart|cffFF0000)|r")
	QuestSetTitle(Q_naji[11], "|cffFF0000co命令帮助信息")
	QuestSetDescription(Q_naji[11], "|cffFF0000co命令可以创建单位、物品、可破坏物、添加删除技能、设置技能等级、删除buff。输入格式为'co+id+,+数值，数值对应创建物体的数量或技能等级，当没有输入数值时，默认为1。当单位已经拥有该技能，带有数值的'co命令会改变等级，不带数值的则会删除技能。|n|n|cffFFFF00Amov|cffFF0000(|r移动|cffFF0000)|r|cffFFFF00Abun|cffFF0000(|r货物保持|cffFF0000)|r|cffFFFF00Avul|cffFF0000(|r无敌|cffFF0000)|r|cffFFFF00AInv|cffFF0000(|r英雄物品栏|cffFF0000)|r|cffFFFF00ARal|cffFF0000(|r集结|cffFF0000)|r|cffFFFF00Arng|cffFF0000(|r复仇|cffFF0000)|r|cffFFFF00Awan|cffFF0000(|r游荡者|cffFF0000)|r|cffFFFF00Ane2|cffFF0000(|r选择单位|cffFF0000)|r|cffFFFF00Apiv|cffFF0000(|r永久隐形|cffFF0000)|r|cffFFFF00Adtg|cffFF0000(|r真实视域|cffFF0000)|r|cffFFFF00Aeth|cffFF0000(|r可见幽灵|cffFF0000)|r|cffFFFF00Arsk|cffFF0000(|r抗性皮肤|cffFF0000)|r|cffFFFF00Acmi|cffFF0000(|r魔法免疫|cffFF0000)|r")
	QuestSetTitle(Q_naji[12], "|cffFF0000we命令帮助信息")
	QuestSetDescription(Q_naji[12], "|cffFF0000注意乱输4位ID会游戏崩溃！输入的ID未满4位时会清除所有已创建的全图天气。|r|n|n|cffFFFF00RA(h/l)r|cffFF0000(|r白杨谷(大/小)雨|cffFF0000)|r|cffFFFF00MEds|cffFF0000(|r达拉然之盾|cffFF0000)|r|cffFFFF00FD(b/g/r/w)(h/l)|cffFF0000(|r地下城(蓝/绿/红/白)(浓/薄)雾|cffFF0000)|r|cffFFFF00RL(h/l)r|cffFF0000(|r洛丹伦(大/小)雨|cffFF0000)|r|cffFFFF00SN(b/h/l)s|cffFF0000(|r诺森德(暴/大/小)雪|cffFF0000)|r|cffFFFF00WO(c/l)w|cffFF0000(|r边缘之地(大/小)风|cffFF0000)|r|cffFFFF00Lr(a/m)a|cffFF0000(|r(日/月)光|cffFF0000)|r|cffFFFF00WNcw|cffFF0000(|r大风|cffFF0000)|r")
	QuestSetTitle(Q_naji[13], "|cffFF0000najitest基本信息")
	QuestSetDescription(Q_naji[13], "|cffFFFF00脚本作者：|cffFF0000najizhimo|r|n|cffFFFF00当前使用者：|cffFF0000" .. (GetPlayerName(Ptest_naji) or "") .. "|r|n|cffFFFF00更新日期：|cffFF0000" .. (Sdummy_naji[1] or "") .. "|n|cffFFFF00可用代码数量：|cffFF0000" .. (I2S(i_naji) or "") .. "|r|n|cffFFFF00注册触发数量：|cffFF0000" .. (I2S(Itrigger_naji) or "") .. "|r|n|cffFFFF00创建任务数量：|cffFF0000" .. (I2S(Iquest_naji) or "") .. "|r|n|cffFFFF00脚本行数：|cffFF0000" .. (I2S(row_naji) or "") .. "|n|cffFFFF00对此系统有任何提议请到|cffFF80C0百度魔兽地图编辑器贴吧|cffFFFF00发贴|r|n|cffFFFF00任意玩家输入|cffFF0000'remove|cffFFFF00可清除该系统|r")
	FlashQuestDialogButton()
	--=========================naji system开始==============================
	--'feini(najitest system)
	Dnaji_naji[0] = DialogCreate()
	TriggerRegisterPlayerChatEvent(Ttest_naji[1], GetTriggerPlayer(), "'feini", true)
	TriggerAddCondition(Ttest_naji[1], Condition(TestA2_naji))
	TriggerRegisterDialogEvent(Ttest_naji[3], Dnaji_naji[0])
	TriggerAddCondition(Ttest_naji[3], Condition(TestA4_naji))
	--Display Ability
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerUnitEvent(Ttest_naji[2], Player(i_naji), EVENT_PLAYER_UNIT_SPELL_EFFECT, nil)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[2], Condition(TestA3_naji))
	DisableTrigger(Ttest_naji[2])
	--Display Order
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerUnitEvent(Ttest_naji[15], Player(i_naji), EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER, nil)
		TriggerRegisterPlayerUnitEvent(Ttest_naji[15], Player(i_naji), EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER, nil)
		TriggerRegisterPlayerUnitEvent(Ttest_naji[15], Player(i_naji), EVENT_PLAYER_UNIT_ISSUED_ORDER, nil)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[15], Condition(TestA17_naji))
	DisableTrigger(Ttest_naji[15])
	--Display Life
	TriggerRegisterEnterRegion(Ttest_naji[17], Rworld_naji, nil)
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerUnitEvent(Ttest_naji[17], Player(i_naji), EVENT_PLAYER_UNIT_DEATH, nil)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[17], Condition(TestA19_naji))
	DisableTrigger(Ttest_naji[17])
	--Display Damage
	TriggerRegisterEnterRegion(Ttest_naji[26], Rworld_naji, nil)
	TriggerAddCondition(Ttest_naji[26], Condition(TestA28_naji))
	DisableTrigger(Ttest_naji[26])
	--No cd mana Cost
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerUnitEvent(Ttest_naji[4], Player(i_naji), EVENT_PLAYER_UNIT_SPELL_EFFECT, nil)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[4], Condition(TestA5_naji))
	DisableTrigger(Ttest_naji[4])
	Gcd_naji[0] = CreateGroup()
	Gcd_naji[1] = nil
	--=========================以下部分1.24以下的版本需删除==============================
	--Display Handle
	TriggerRegisterTimerEvent(Ttest_naji[7], 0.1, true)
	TriggerAddCondition(Ttest_naji[7], Condition(TestA9_naji))
	DisableTrigger(Ttest_naji[7])
	--=========================以上部分1.24以下的版本需删除==============================
	--Observer
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerChatEvent(Ttest_naji[61], Player(i_naji), "", false)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	DisableTrigger(Ttest_naji[61])
	TriggerAddCondition(Ttest_naji[61], Condition(TestA66_naji))
	--Multiple Spell
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerUnitEvent(Ttest_naji[71], Player(i_naji), EVENT_PLAYER_UNIT_SPELL_EFFECT, nil)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[71], Condition(TestA76_naji))
	DisableTrigger(Ttest_naji[71])
	Gms_naji = nil
	--系统信息调整
	Dnaji_naji[1] = DialogCreate()
	TriggerRegisterDialogEvent(Ttest_naji[6], Dnaji_naji[1])
	TriggerAddCondition(Ttest_naji[6], Condition(TestA8_naji))
	--whether display widget XY
	Bxy_naji = true
	--whether display widget ID
	Bid_naji = true
	--whether display Player Name
	Bpn_naji = false
	--whether display Int or Real
	Bir_naji = true
	--change Display Damage Mode
	Bddm_naji = false
	--=========================naji system结束==============================
	--’uh(Unit(s) Healing)
	TriggerRegisterPlayerChatEvent(Ttest_naji[5], GetTriggerPlayer(), "'uh", true)
	TriggerAddCondition(Ttest_naji[5], Condition(TestA7_naji))
	--’ag**/al**(Add Gold/Lumber)
	TriggerRegisterPlayerChatEvent(Ttest_naji[8], GetTriggerPlayer(), "'ag", false)
	TriggerAddCondition(Ttest_naji[8], Condition(TestA10_naji))
	TriggerRegisterPlayerChatEvent(Ttest_naji[9], GetTriggerPlayer(), "'al", false)
	TriggerAddCondition(Ttest_naji[9], Condition(TestA11_naji))
	--’hl*(set Hero(s) Level)
	TriggerRegisterPlayerChatEvent(Ttest_naji[10], GetTriggerPlayer(), "'hl", false)
	TriggerAddCondition(Ttest_naji[10], Condition(TestA12_naji))
	--’fog(Fog)
	TriggerRegisterPlayerChatEvent(Ttest_naji[11], GetTriggerPlayer(), "'fog", true)
	TriggerAddCondition(Ttest_naji[11], Condition(TestA13_naji))
	if IsMapFlagSet(MAP_FOG_ALWAYS_VISIBLE) then
		Bfog_naji = false
	else
		Bfog_naji = true
	end
	--’ua*(play Unit(s) Animation by index)
	TriggerRegisterPlayerChatEvent(Ttest_naji[12], GetTriggerPlayer(), "'ua", false)
	TriggerAddCondition(Ttest_naji[12], Condition(TestA14_naji))
	--’cd(Camera Distance)
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerChatEvent(Ttest_naji[13], Player(i_naji), "'cd", false)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[13], Condition(TestA15_naji))
	--'ur(Unit(s) Remove)
	TriggerRegisterPlayerChatEvent(Ttest_naji[14], GetTriggerPlayer(), "'ur", true)
	TriggerAddCondition(Ttest_naji[14], Condition(TestA16_naji))
	--'pn(Player Name)
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerChatEvent(Ttest_naji[16], Player(i_naji), "'pn", false)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[16], Condition(TestA18_naji))
	--'sc(Screen Clear)
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerChatEvent(Ttest_naji[18], Player(i_naji), "'sc", true)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[18], Condition(TestA20_naji))
	--'cr(Camera Reset)
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerChatEvent(Ttest_naji[19], Player(i_naji), "'cr", true)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[19], Condition(TestA21_naji))
	--’ui(Unit Information)
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerChatEvent(Ttest_naji[20], Player(i_naji), "'ui", true)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[20], Condition(TestA22_naji))
	--’pc**(Player Control)
	TriggerRegisterPlayerChatEvent(Ttest_naji[21], GetTriggerPlayer(), "'pc", false)
	TriggerAddCondition(Ttest_naji[21], Condition(TestA23_naji))
	--'uvc****(set Unit(s) Vertex Color)
	TriggerRegisterPlayerChatEvent(Ttest_naji[22], GetTriggerPlayer(), "'uvc", false)
	TriggerAddCondition(Ttest_naji[22], Condition(TestA24_naji))
	--’uts*(Unit(s) Time Scale)
	TriggerRegisterPlayerChatEvent(Ttest_naji[23], GetTriggerPlayer(), "'uts", false)
	TriggerAddCondition(Ttest_naji[23], Condition(TestA25_naji))
	--’pg(Pause Game)
	TriggerRegisterPlayerChatEvent(Ttest_naji[24], GetTriggerPlayer(), "'pg", true)
	TriggerAddCondition(Ttest_naji[24], Condition(TestA26_naji))
	Bpause_naji = false
	--'psl(Player Statistics List)
	TriggerRegisterPlayerChatEvent(Ttest_naji[25], GetTriggerPlayer(), "'psl", true)
	TriggerAddCondition(Ttest_naji[25], Condition(TestA27_naji))
	--'up(Unit(s) Pause)
	TriggerRegisterPlayerChatEvent(Ttest_naji[27], GetTriggerPlayer(), "'up", true)
	TriggerAddCondition(Ttest_naji[27], Condition(TestA30_naji))
	--'mv*(Music Volume)
	TriggerRegisterPlayerChatEvent(Ttest_naji[28], GetTriggerPlayer(), "'mv", false)
	TriggerAddCondition(Ttest_naji[28], Condition(TestA31_naji))
	--'rd(Roll Dice)
	TriggerRegisterPlayerChatEvent(Ttest_naji[29], GetTriggerPlayer(), "'rd", true)
	TriggerAddCondition(Ttest_naji[29], Condition(TestA32_naji))
	--'sv*(Sound Volume)
	TriggerRegisterPlayerChatEvent(Ttest_naji[30], GetTriggerPlayer(), "'sv", false)
	TriggerAddCondition(Ttest_naji[30], Condition(TestA33_naji))
	--'bm*(Backup Message)
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerChatEvent(Ttest_naji[31], Player(i_naji), "'bm", false)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[31], Condition(TestA34_naji))
	Ibm_naji = 0
	--'cbm(Clear Backup Message)
	TriggerRegisterPlayerChatEvent(Ttest_naji[32], GetTriggerPlayer(), "'cbm", true)
	TriggerAddCondition(Ttest_naji[32], Condition(TestA35_naji))
	--'uic**(set Unit's Item Charge)
	TriggerRegisterPlayerChatEvent(Ttest_naji[33], GetTriggerPlayer(), "'uic", false)
	TriggerAddCondition(Ttest_naji[33], Condition(TestA36_naji))
	--'rs*(set Random Seed)
	TriggerRegisterPlayerChatEvent(Ttest_naji[34], GetTriggerPlayer(), "'rs", false)
	TriggerAddCondition(Ttest_naji[34], Condition(TestA37_naji))
	--'td*(set Time of Day)
	TriggerRegisterPlayerChatEvent(Ttest_naji[35], GetTriggerPlayer(), "'td", false)
	TriggerAddCondition(Ttest_naji[35], Condition(TestA38_naji))
	--'um*(set Unit(s) Move speed)
	TriggerRegisterPlayerChatEvent(Ttest_naji[36], GetTriggerPlayer(), "'um", false)
	TriggerAddCondition(Ttest_naji[36], Condition(TestA39_naji))
	--'uus*(set Unit(s) tUrn Speed)
	TriggerRegisterPlayerChatEvent(Ttest_naji[37], GetTriggerPlayer(), "'uus", false)
	TriggerAddCondition(Ttest_naji[37], Condition(TestA40_naji))
	--'uar*(set Unit(s) Acquire Range)
	TriggerRegisterPlayerChatEvent(Ttest_naji[38], GetTriggerPlayer(), "'uar", false)
	TriggerAddCondition(Ttest_naji[38], Condition(TestA41_naji))
	--'ufh*(set Unit(s) Fly Height)
	TriggerRegisterPlayerChatEvent(Ttest_naji[39], GetTriggerPlayer(), "'ufh", false)
	TriggerAddCondition(Ttest_naji[39], Condition(TestA42_naji))
	--'hp*(add Hero(s) skill Point)
	TriggerRegisterPlayerChatEvent(Ttest_naji[40], GetTriggerPlayer(), "'hp", false)
	TriggerAddCondition(Ttest_naji[40], Condition(TestA43_naji))
	--'hs*(set Hero(s) Str)
	TriggerRegisterPlayerChatEvent(Ttest_naji[41], GetTriggerPlayer(), "'hs", false)
	TriggerAddCondition(Ttest_naji[41], Condition(TestA44_naji))
	--'ha*(set Hero(s) Agi)
	TriggerRegisterPlayerChatEvent(Ttest_naji[42], GetTriggerPlayer(), "'ha", false)
	TriggerAddCondition(Ttest_naji[42], Condition(TestA45_naji))
	--'hi*(set Hero(s) Int)
	TriggerRegisterPlayerChatEvent(Ttest_naji[43], GetTriggerPlayer(), "'hi", false)
	TriggerAddCondition(Ttest_naji[43], Condition(TestA46_naji))
	--'ud*(set Unit(s) user Data)
	TriggerRegisterPlayerChatEvent(Ttest_naji[44], GetTriggerPlayer(), "'ud", false)
	TriggerAddCondition(Ttest_naji[44], Condition(TestA47_naji))
	--'ts*(set Time of day Scale)
	TriggerRegisterPlayerChatEvent(Ttest_naji[45], GetTriggerPlayer(), "'ts", false)
	TriggerAddCondition(Ttest_naji[45], Condition(TestA48_naji))
	--'ph**(set Player Handicap)
	TriggerRegisterPlayerChatEvent(Ttest_naji[46], GetTriggerPlayer(), "'ph", false)
	TriggerAddCondition(Ttest_naji[46], Condition(TestA49_naji))
	--'uk(Unit(s) killed)
	TriggerRegisterPlayerChatEvent(Ttest_naji[47], GetTriggerPlayer(), "'uk", true)
	TriggerAddCondition(Ttest_naji[47], Condition(TestA50_naji))
	--'remove(remove najitest)
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerChatEvent(Ttest_naji[48], Player(i_naji), "'remove", true)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[48], Condition(TestA51_naji))
	--’pa**(set Player Alliance)
	TriggerRegisterPlayerChatEvent(Ttest_naji[49], GetTriggerPlayer(), "'pa", false)
	TriggerAddCondition(Ttest_naji[49], Condition(TestA52_naji))
	--'uo*(set Unit(s) Owner)
	TriggerRegisterPlayerChatEvent(Ttest_naji[50], GetTriggerPlayer(), "'uo", false)
	TriggerAddCondition(Ttest_naji[50], Condition(TestA53_naji))
	--'cz*(set Camera farZ)
	TriggerRegisterPlayerChatEvent(Ttest_naji[51], GetTriggerPlayer(), "'cz", false)
	TriggerAddCondition(Ttest_naji[51], Condition(TestA54_naji))
	--'uw(Unit(s) Windwalk)
	Guw_naji = CreateGroup()
	TriggerRegisterPlayerChatEvent(Ttest_naji[52], GetTriggerPlayer(), "'uw", true)
	TriggerAddCondition(Ttest_naji[52], Condition(TestA55_naji))
	--'co**(Create Object)
	TriggerRegisterPlayerChatEvent(Ttest_naji[53], GetTriggerPlayer(), "'co", false)
	TriggerAddCondition(Ttest_naji[53], Condition(TestA56_naji))
	--'pk*(Player Kicked)
	TriggerRegisterPlayerChatEvent(Ttest_naji[54], GetTriggerPlayer(), "'pk", false)
	TriggerAddCondition(Ttest_naji[54], Condition(TestA57_naji))
	--'ub(Unit(s) Buff clear)
	TriggerRegisterPlayerChatEvent(Ttest_naji[55], GetTriggerPlayer(), "'ub", true)
	TriggerAddCondition(Ttest_naji[55], Condition(TestA59_naji))
	--'ul(Unit camera Lock)
	TriggerRegisterPlayerChatEvent(Ttest_naji[56], GetTriggerPlayer(), "'ul", true)
	TriggerAddCondition(Ttest_naji[56], Condition(TestA60_naji))
	--'cm(Camera Mode)
	Tcamera_naji = nil
	Bcamera_naji[0] = false
	Bcamera_naji[1] = false
	Bcamera_naji[2] = false
	Bcamera_naji[3] = false
	Bcamera_naji[4] = false
	TriggerRegisterPlayerChatEvent(Ttest_naji[57], GetTriggerPlayer(), "'cm", true)
	TriggerAddCondition(Ttest_naji[57], Condition(TestA61_naji))
	DisableTrigger(Ttest_naji[58])
	TriggerRegisterPlayerEvent(Ttest_naji[58], GetTriggerPlayer(), EVENT_PLAYER_ARROW_UP_DOWN)
	TriggerRegisterPlayerEvent(Ttest_naji[58], GetTriggerPlayer(), EVENT_PLAYER_ARROW_DOWN_DOWN)
	TriggerRegisterPlayerEvent(Ttest_naji[58], GetTriggerPlayer(), EVENT_PLAYER_ARROW_LEFT_DOWN)
	TriggerRegisterPlayerEvent(Ttest_naji[58], GetTriggerPlayer(), EVENT_PLAYER_ARROW_RIGHT_DOWN)
	TriggerAddCondition(Ttest_naji[58], Condition(TestA62_naji))
	DisableTrigger(Ttest_naji[59])
	TriggerRegisterPlayerEvent(Ttest_naji[59], GetTriggerPlayer(), EVENT_PLAYER_ARROW_UP_UP)
	TriggerRegisterPlayerEvent(Ttest_naji[59], GetTriggerPlayer(), EVENT_PLAYER_ARROW_DOWN_UP)
	TriggerRegisterPlayerEvent(Ttest_naji[59], GetTriggerPlayer(), EVENT_PLAYER_ARROW_LEFT_UP)
	TriggerRegisterPlayerEvent(Ttest_naji[59], GetTriggerPlayer(), EVENT_PLAYER_ARROW_RIGHT_UP)
	TriggerAddCondition(Ttest_naji[59], Condition(TestA63_naji))
	--'ci(Camera Information)
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerChatEvent(Ttest_naji[60], Player(i_naji), "'ci", true)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[60], Condition(TestA65_naji))
	--'us*(Unit(s) Scale)
	TriggerRegisterPlayerChatEvent(Ttest_naji[62], GetTriggerPlayer(), "'us", false)
	TriggerAddCondition(Ttest_naji[62], Condition(TestA67_naji))
	--'gg(Good Game)
	TriggerRegisterPlayerChatEvent(Ttest_naji[63], GetTriggerPlayer(), "'gg", true)
	TriggerAddCondition(Ttest_naji[63], Condition(TestA68_naji))
	--'gs*(set Game Speed)
	TriggerRegisterPlayerChatEvent(Ttest_naji[64], GetTriggerPlayer(), "'gs", false)
	TriggerAddCondition(Ttest_naji[64], Condition(TestA69_naji))
	--'mf(set Map Flag)
	Dnaji_naji[2] = DialogCreate()
	TriggerRegisterPlayerChatEvent(Ttest_naji[65], GetTriggerPlayer(), "'mf", true)
	TriggerAddCondition(Ttest_naji[65], Condition(TestA70_naji))
	TriggerRegisterDialogEvent(Ttest_naji[66], Dnaji_naji[2])
	TriggerAddCondition(Ttest_naji[66], Condition(TestA71_naji))
	--Esc
	TriggerRegisterPlayerEvent(Ttest_naji[67], GetTriggerPlayer(), EVENT_PLAYER_END_CINEMATIC)
	TriggerAddCondition(Ttest_naji[67], Condition(TestA72_naji))
	--'we(Weather Effect)
	Iweather_naji = 0
	Weather_naji[0] = nil
	TriggerRegisterPlayerChatEvent(Ttest_naji[68], GetTriggerPlayer(), "'we", false)
	TriggerAddCondition(Ttest_naji[68], Condition(TestA73_naji))
	--'pt***(set Player Tech)
	TriggerRegisterPlayerChatEvent(Ttest_naji[69], GetTriggerPlayer(), "'pt", false)
	TriggerAddCondition(Ttest_naji[69], Condition(TestA74_naji))
	--'re(Restart)
	TriggerRegisterPlayerChatEvent(Ttest_naji[70], GetTriggerPlayer(), "'re", true)
	TriggerAddCondition(Ttest_naji[70], Condition(TestA75_naji))
	--'gms(Group Multiple Spell)
	TriggerRegisterPlayerChatEvent(Ttest_naji[72], GetTriggerPlayer(), "'gms", true)
	TriggerAddCondition(Ttest_naji[72], Condition(TestA77_naji))
	--'gcd(Group Cool Down)
	TriggerRegisterPlayerChatEvent(Ttest_naji[73], GetTriggerPlayer(), "'gcd", true)
	TriggerAddCondition(Ttest_naji[73], Condition(TestA78_naji))
	--'uii*(Unit's Item Information)
	i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerChatEvent(Ttest_naji[74], Player(i_naji), "'uii", false)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(Ttest_naji[74], Condition(TestA79_naji))
	--'uxy**(set Unit(s) XY)
	TriggerRegisterPlayerChatEvent(Ttest_naji[75], GetTriggerPlayer(), "'uxy", false)
	TriggerAddCondition(Ttest_naji[75], Condition(TestA80_naji))
	--'se*(System Exchange)
	TriggerRegisterPlayerChatEvent(Ttest_naji[76], GetTriggerPlayer(), "'se", false)
	TriggerAddCondition(Ttest_naji[76], Condition(TestA81_naji))
	--'ef*(Execute Function)
	TriggerRegisterPlayerChatEvent(Ttest_naji[77], GetTriggerPlayer(), "'ef", false)
	TriggerAddCondition(Ttest_naji[77], Condition(TestA82_naji))
	DestroyTrigger(GetTriggeringTrigger())
end
function najitest()
	local t_naji = CreateTrigger()
	local i_naji = 0
	for _ in _loop_() do
		TriggerRegisterPlayerChatEvent(t_naji, Player(i_naji), "'feini", true)
		i_naji = i_naji + 1
		if i_naji >= 16 then break end
	end
	TriggerAddCondition(t_naji, Condition(TestA_naji))
	t_naji = nil
end
--=====================================$初始化函数结束=====================================
--===============najitest===============
--========================================================================
--键盘输入系统
--========================================================================
function KeyInput()
	local s = GetEventPlayerChatString()
	local it = nil
	local p = GetTriggerPlayer()
	local i = GetPlayerId(p) + 1
	local j = 0
	local loc = nil
	local str = nil
	local shanghai = _array_(0.0)
	if s == "+" then
		SetCameraFieldForPlayer(p, CAMERA_FIELD_TARGET_DISTANCE, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE) + 200.0, 1.0)
	end
	if s == "-" then
		SetCameraFieldForPlayer(p, CAMERA_FIELD_TARGET_DISTANCE, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE) - 200.0, 1.0)
	end
	if s == "hg" then
		SetUnitPosition(udg_hero[i], -1174, -678)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), -1174, -678, 0)
	end
	if s == "q" then
		SetUnitPosition(udg_hero[i], -869, 796)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), -869, 796, 0)
	end
	if s == "3" then
		SetUnitPosition(udg_hero[i], -869, -2000)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), -869, -2000, 0)
	end
	if s == "4" then
		SetUnitPosition(udg_hero[i], 10692, -14847)
		PanCameraToTimedForPlayer(GetTriggerPlayer(), 10692, -14847, 0)
	end
	if SubStringBJ(s, 1, 2) == "wq" then
		if UnitHaveItem(udg_hero[i], 1227899464) == false then
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000当前未装备自制武器")
		else
			it = FetchUnitItem(udg_hero[i], 1227899464)
			SaveStr(YDHT, GetHandleId(it), StringHash("武器名称"), SubStringBJ(s, 3, 40))
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000自制武器已更名为" .. (SubStringBJ(s, 3, 40) or ""))
		end
	end
	--if s == "randreal" then
	--	call BJDebugMsg(R2S(GetGeoNormRandomReal(1., 3.)))
	--	call BJDebugMsg(R2S(GetGeoNormRandomReal(1., 3.)))
	--	call BJDebugMsg(R2S(GetGeoNormRandomReal(1., 3.)))
	--	call BJDebugMsg(R2S(GetGeoNormRandomReal(1., 3.)))
	--	call BJDebugMsg(R2S(GetGeoNormRandomReal(1., 3.)))
	--endif
	if SubStringBJ(s, 1, 2) == "tx" then
		if S2I(SubStringBJ(s, 3, 4)) >= 1 and S2I(SubStringBJ(s, 3, 4)) <= 10 then
			s__ZiZhiWuGong_texiao[zizhiwugong[i]] = S2I(SubStringBJ(s, 3, 4))
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000自创武功已更改为第" .. (SubStringBJ(s, 3, 40) or "") .. "种特效")
		end
	end
	if SubStringBJ(s, 1, 2) == "wg" then
		if GetUnitAbilityLevel(udg_hero[i], 1093677878) == 0 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000当前无自创武功")
		else
			s__ZiZhiWuGong_name[zizhiwugong[i]] = SubStringBJ(s, 3, 40)
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000自创武功已更名为" .. (SubStringBJ(s, 3, 40) or ""))
		end
	end
	if s == "ckwg" then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000剩余自创武功点：" .. (I2S(wuxuedian[i]) or ""))
		if GetUnitAbilityLevel(udg_hero[i], 1093677878) == 0 then
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000当前无自创武功")
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000武功：" .. (s__ZiZhiWuGong_name[zizhiwugong[i]] or ""))
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000伤害范围：" .. (I2S(R2I(400.0 + 100.0 * I2R(s__ZiZhiWuGong_range[zizhiwugong[i]]))) or ""))
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000伤害系数：" .. (R2S(1.0 + 0.5 * I2R(s__ZiZhiWuGong_xishu[zizhiwugong[i]])) or ""))
			j = 1
			for _ in _loop_() do
				if j > s__ZiZhiWuGong_dapeishu[zizhiwugong[i]] then break end
				DisplayTextToPlayer(p, 0, 0, sc__DaPei_XiaoGuoShuoMing(dapei[20 * i + j]))
				j = j + 1
			end
		end
	end
	if s == "ckwq" then
		if UnitHaveItem(udg_hero[i], 1227899464) == false then
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000当前未装备自制武器")
		else
			it = FetchUnitItem(udg_hero[i], 1227899464)
			if LoadStr(YDHT, GetHandleId(it), StringHash("武器名称")) == "" then
				DisplayTextToPlayer(p, 0, 0, "|cFF00FF00武器名称：尚未输入")
			else
				DisplayTextToPlayer(p, 0, 0, "|cFF00FF00武器名称：" .. (LoadStr(YDHT, GetHandleId(it), StringHash("武器名称")) or ""))
			end
			DisplayTextToPlayer(p, 0, 0, "|cFFFF6600升级概率：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("升级概率")))) or "") .. "%")
			DisplayTextToPlayer(p, 0, 0, "|cFFE500AF招式伤害：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("招式伤害")))) or "") .. " 内力：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("内力")))) or "") .. " 真实伤害：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("真实伤害")))) or ""))
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0033暴击伤害：" .. (I2S(R2I(100 * LoadReal(YDHT, GetHandleId(it), StringHash("暴击伤害")))) or "") .. "% 暴击率：" .. (I2S(R2I(100 * LoadReal(YDHT, GetHandleId(it), StringHash("暴击率")))) or "") .. "% 绝学领悟：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("绝学领悟")))) or ""))
			DisplayTextToPlayer(p, 0, 0, "|cFFFFFF33根骨：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("根骨")))) or "") .. " 胆魄：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("胆魄")))) or "") .. " 悟性：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("悟性")))) or ""))
			DisplayTextToPlayer(p, 0, 0, "|cFFFFFF33医术：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("医术")))) or "") .. " 经脉：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("经脉")))) or "") .. " 福缘：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("福缘")))) or ""))
			DisplayTextToPlayer(p, 0, 0, "|cFF9933FF伤害回复：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("伤害回复")))) or "") .. " 杀怪回复：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("杀怪回复")))) or "") .. " 生命回复：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("生命回复")))) or "") .. " 法力回复：" .. (I2S(R2I(LoadReal(YDHT, GetHandleId(it), StringHash("法力回复")))) or ""))
		end
	--set j = 1
	--loop
	--	exitwhen j >= 7
	--           if(GetItemType(UnitItemInSlotBJ(udg_hero[i],j))==ITEM_TYPE_ARTIFACT)then
	--	    	set it= UnitItemInSlotBJ(udg_hero[i],j)
	--	    	call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000当前使用武器："+GetItemName(it))
	--			call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000武器耐久度:"+I2S(LoadInteger(YDHT,GetHandleId(it),0))+"/"+I2S(WeaponNaiJiu(it)))
	--			if udg_bqdsbool[i]==true then
	--				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000对"+GetItemName(it)+"的熟练度:"+I2S(R2I(LoadReal(YDHT,GetHandleId(p),GetItemTypeId(it))))+"/"+I2S(R2I(10000. * (1+WeaponLevel(GetItemTypeId(it))))))
	--			elseif Ce[i]==3 then
	--				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000对"+GetItemName(it)+"的熟练度:"+I2S(R2I(LoadReal(YDHT,GetHandleId(p),GetItemTypeId(it))))+"/"+I2S(R2I(5000. * (1+WeaponLevel(GetItemTypeId(it))))))
	--			else
	--				call DisplayTextToPlayer(p, 0, 0, "|cFFFF0000对"+GetItemName(it)+"的熟练度:"+I2S(R2I(LoadReal(YDHT,GetHandleId(p),GetItemTypeId(it))))+"/"+I2S(R2I(3000. * (1+WeaponLevel(GetItemTypeId(it))))))
	--			endif
	--           endif
	--	set j = j + 1
	--endloop
	--if it==null then
	--	call DisplayTextToPlayer(p,0,0,"|cFFFF0000当前未装备武器")
	--endif
	--if Ce[i]==3 then
	--	call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00您已经炼成了"+I2S(udg_bqds[i])+" / 3把武器")
	--endif
	--call DisplayTextToPlayer(p, 0, 0, "|CFF66FF00该系统已下线，欢迎体验新系统")
	end
	if s == "ckjn" then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000人物性格：你学武资质" .. (XingGeA(udg_xinggeA[i]) or "") .. "，态度" .. (XingGeB(udg_xinggeB[i]) or ""))
		DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
		j = 1
		for _ in _loop_() do
			if j > wugongshu[i] then break end
			DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" .. (GetAbilityName(I7[(i - 1) * 20 + j]) or "") .. "第" .. (I2S(GetUnitAbilityLevel(udg_hero[i], I7[(i - 1) * 20 + j])) or "") .. "重，升级进度：" .. (LoadStr(YDHT, GetHandleId(p), I7[(i - 1) * 20 + j] * 2) or ""))
			j = j + 1
		end
		DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
	end
	if s == "ckhf" then
		DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
		DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF杀怪回复：" .. (I2S(R2I(shaguaihufui[i])) or ""))
		DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF伤害回复：" .. (I2S(R2I(shanghaihuifu[i])) or ""))
		DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF生命回复：" .. (I2S(R2I(shengminghuifu[i])) or ""))
		DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF法力回复：" .. (I2S(R2I(falihuifu[i])) or ""))
		DisplayTextToPlayer(p, 0, 0, "|cFFcc99ff〓〓〓〓〓〓〓〓〓〓〓")
	end
	--if s=="碧海潮生" then
	--	call UnitAddAbility(udg_hero[i],'A018')
	--endif
	--if s=="空明" then
	--	call UnitAddAbility(udg_hero[i],'A017')
	--endif
	if s == "ck" then
		j = 1
		for _ in _loop_() do
			if j > wugongshu[i] then break end
			shanghai[j] = LoadReal(YDHT, 1 + GetPlayerId(p), I7[(i - 1) * 20 + j] * 3)
			if I7[(i - 1) * 20 + j] == 1093677876 then
				shanghai[j] = LoadReal(YDHT, 1 + GetPlayerId(p), 1093677877 * 3)
			end
			if shanghai[j] < 10000.0 then
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" .. (GetAbilityName(I7[(i - 1) * 20 + j]) or "") .. "伤害：" .. (R2S(shanghai[j]) or ""))
			elseif shanghai[j] < 100000000.0 then
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" .. (GetAbilityName(I7[(i - 1) * 20 + j]) or "") .. "伤害：" .. (R2S(shanghai[j] / 10000.0) or "") .. "万")
			elseif shanghai[j] / 10000.0 < 100000000.0 then
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" .. (GetAbilityName(I7[(i - 1) * 20 + j]) or "") .. "伤害：" .. (R2S(shanghai[j] / 100000000.0) or "") .. "亿")
			elseif shanghai[j] / 100000000.0 < 100000000.0 then
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" .. (GetAbilityName(I7[(i - 1) * 20 + j]) or "") .. "伤害：" .. (R2S(shanghai[j] / 100000000.0 / 10000.0) or "") .. "万亿")
			else
				DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF" .. (GetAbilityName(I7[(i - 1) * 20 + j]) or "") .. "伤害：" .. (R2S(shanghai[j] / 100000000.0 / 100000000.0) or "") .. "亿亿")
			end
			j = j + 1
		end
	end
	if s == "1" and GetUnitAbilityLevel(udg_hero[i], 1093678935) > 0 and IsUnitAliveBJ(udg_hero[i]) then
		if RectContainsUnit(lh_r, udg_hero[i]) then
			DisplayTextToPlayer(p, 0, 0, "桃花岛不能创建飞行点")
		else
			RemoveUnit(J9[i])
			loc = GetUnitLoc(udg_hero[i])
			CreateNUnitsAtLoc(1, 1697656906, p, loc, bj_UNIT_FACING)
			J9[i] = bj_lastCreatedUnit
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "创建飞行点")
			RemoveLocation(loc)
			loc = nil
		end
	end
	if s == "2" and GetUnitAbilityLevel(udg_hero[i], 1093678935) > 0 and IsUnitAliveBJ(udg_hero[i]) then
		if J9[i] == nil then
			DisplayTextToPlayer(p, 0, 0, "你还没有设置飞行点，请输入聊天信息“1”来设置")
		else
			loc = GetUnitLoc(J9[i])
			SetUnitPositionLoc(udg_hero[i], loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
			loc = nil
		end
	end
	if s == "11" and GetUnitAbilityLevel(udg_hero[i], 1093678935) > 1 and IsUnitAliveBJ(udg_hero[i]) then
		if RectContainsUnit(lh_r, udg_hero[i]) then
			DisplayTextToPlayer(p, 0, 0, "桃花岛不能创建飞行点")
		else
			RemoveUnit(qiankun2hao[i])
			loc = GetUnitLoc(udg_hero[i])
			CreateNUnitsAtLoc(1, 1697656906, p, loc, bj_UNIT_FACING)
			qiankun2hao[i] = bj_lastCreatedUnit
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "创建飞行点")
			RemoveLocation(loc)
			loc = nil
		end
	end
	if s == "22" and GetUnitAbilityLevel(udg_hero[i], 1093678935) > 1 and IsUnitAliveBJ(udg_hero[i]) then
		if qiankun2hao[i] == nil then
			DisplayTextToPlayer(p, 0, 0, "你还没有设置飞行点，请输入聊天信息“11”来设置")
		else
			loc = GetUnitLoc(qiankun2hao[i])
			SetUnitPositionLoc(udg_hero[i], loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
			loc = nil
		end
	end
	if s == "111" and GetUnitAbilityLevel(udg_hero[i], 1093678935) > 2 and IsUnitAliveBJ(udg_hero[i]) then
		if RectContainsUnit(lh_r, udg_hero[i]) then
			DisplayTextToPlayer(p, 0, 0, "桃花岛不能创建飞行点")
		else
			RemoveUnit(qiankun3hao[i])
			loc = GetUnitLoc(udg_hero[i])
			CreateNUnitsAtLoc(1, 1697656906, p, loc, bj_UNIT_FACING)
			qiankun3hao[i] = bj_lastCreatedUnit
			DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "创建飞行点")
			RemoveLocation(loc)
			loc = nil
		end
	end
	if s == "222" and GetUnitAbilityLevel(udg_hero[i], 1093678935) > 2 and IsUnitAliveBJ(udg_hero[i]) then
		if qiankun3hao[i] == nil then
			DisplayTextToPlayer(p, 0, 0, "你还没有设置飞行点，请输入聊天信息“111”来设置")
		else
			loc = GetUnitLoc(qiankun3hao[i])
			SetUnitPositionLoc(udg_hero[i], loc)
			PanCameraToTimedLocForPlayer(p, loc, 0)
			RemoveLocation(loc)
			loc = nil
		end
	end
	if s == "-ms" then
		DisplayTextToPlayer(p, 0, 0, "|cFF00FFFF您当前的移动速度为" .. (I2S(R2I(s__ModSpeed_getSpeed(udg_hero[i]))) or "")) -- INLINED!!
	end
	if s == "-random" and udg_runamen[i] == 0 and udg_hero[i] ~= nil then
		if GetRandomInt(1, 100) <= 90 then
			if GetRandomInt(1, 12) <= 11 then
				udg_runamen[i] = GetRandomInt(1, 11)
			else
				udg_runamen[i] = 15
			end
		else
			udg_runamen[i] = GetRandomInt(12, 14)
		end
		if udg_runamen[i] == 11 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓自由门派〓|r")
			SetPlayerName(p, "〓自由门派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			AdjustPlayerStateBJ(60, p, PLAYER_STATE_RESOURCE_LUMBER)
			udg_shuxing[i] = udg_shuxing[i] + 5
		elseif udg_runamen[i] == 14 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓明教〓|r")
			SetPlayerName(p, "〓明教〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			wuxing[i] = wuxing[i] + 3
			jingmai[i] = jingmai[i] + 2
			fuyuan[i] = fuyuan[i] + 2
		elseif udg_runamen[i] == 12 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓灵鹫宫〓|r")
			SetPlayerName(p, "〓灵鹫宫〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			danpo[i] = danpo[i] + 2
			jingmai[i] = jingmai[i] + 2
			fuyuan[i] = fuyuan[i] + 1
		elseif udg_runamen[i] == 13 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓姑苏慕容〓|r")
			SetPlayerName(p, "〓姑苏慕容〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			udg_shuxing[i] = udg_shuxing[i] + 5
		elseif udg_runamen[i] == 1 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓少林派〓|r")
			SetPlayerName(p, "〓少林派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			gengu[i] = gengu[i] + 3
			jingmai[i] = jingmai[i] + 2
		elseif udg_runamen[i] == 3 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓丐帮〓|r")
			SetPlayerName(p, "〓丐帮〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			danpo[i] = danpo[i] + 3
			jingmai[i] = jingmai[i] + 2
		elseif udg_runamen[i] == 4 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓华山派〓|r")
			SetPlayerName(p, "〓华山派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			wuxing[i] = wuxing[i] + 3
			danpo[i] = danpo[i] + 2
		elseif udg_runamen[i] == 5 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓全真教〓|r")
			SetPlayerName(p, "〓全真教〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			jingmai[i] = jingmai[i] + 3
			fuyuan[i] = fuyuan[i] + 2
		elseif udg_runamen[i] == 6 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓血刀门〓|r")
			SetPlayerName(p, "〓血刀门〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			gengu[i] = gengu[i] + 2
			danpo[i] = danpo[i] + 3
		elseif udg_runamen[i] == 7 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓恒山派〓|r")
			SetPlayerName(p, "〓恒山派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			yishu[i] = yishu[i] + 3
			fuyuan[i] = fuyuan[i] + 2
		elseif udg_runamen[i] == 8 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓峨眉派〓|r")
			SetPlayerName(p, "〓峨眉派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			yishu[i] = yishu[i] + 1
			jingmai[i] = jingmai[i] + 1
			fuyuan[i] = fuyuan[i] + 3
		elseif udg_runamen[i] == 10 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓星宿派〓|r")
			SetPlayerName(p, "〓星宿派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			danpo[i] = danpo[i] + 2
			yishu[i] = yishu[i] + 1
			jingmai[i] = jingmai[i] + 2
		elseif udg_runamen[i] == 9 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓武当派〓|r")
			SetPlayerName(p, "〓武当派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			gengu[i] = gengu[i] + 1
			jingmai[i] = jingmai[i] + 2
			fuyuan[i] = fuyuan[i] + 2
		elseif udg_runamen[i] == 2 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓古墓派〓|r")
			SetPlayerName(p, "〓古墓派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			wuxing[i] = wuxing[i] + 2
			jingmai[i] = jingmai[i] + 1
			fuyuan[i] = fuyuan[i] + 2
		elseif udg_runamen[i] == 15 then
			DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "随机选择了〓衡山派〓|r")
			SetPlayerName(p, "〓衡山派〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
			wuxing[i] = wuxing[i] + 3
			yishu[i] = yishu[i] + 2
		end
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步，你可以在主城和传送石之间任意传送了，请在NPC郭靖处选择副职")
		UnitAddAbility(udg_hero[i], 1093678418)
		AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
		AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
		UnitAddAbility(udg_hero[i], 1093678128)
		UnitAddAbility(udg_hero[i], 1093678129)
		UnitAddAbility(udg_hero[i], 1093678130)
		I7[(i - 1) * 20 + 8] = 1093678418
		UnitRemoveAbility(udg_hero[i], 1098282348)
		Q4 = GetRandomLocInRect(He)
		SetUnitPositionLoc(udg_hero[i], Q4)
		PanCameraToTimedLocForPlayer(p, Q4, 0)
		CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
		AdjustPlayerStateBJ(50, p, PLAYER_STATE_RESOURCE_LUMBER)
		P4[i] = bj_lastCreatedUnit
		RemoveLocation(Q4)
		UnitAddItemByIdSwapped(1227896394, udg_hero[i])
	end
	if s == "www.juezhanjianghu.com" and udg_runamen[i] == 0 and udg_hero[i] ~= nil then
		udg_runamen[i] = 12
		DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "选择了隐藏门派〓灵鹫宫〓|r")
		SetPlayerName(p, "〓灵鹫宫〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
		danpo[i] = danpo[i] + 2
		jingmai[i] = jingmai[i] + 2
		fuyuan[i] = fuyuan[i] + 1
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步，你可以在主城和传送石之间任意传送了")
		AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
		AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
		UnitAddAbility(udg_hero[i], 1093678418)
		UnitAddAbility(udg_hero[i], 1093678128)
		UnitAddAbility(udg_hero[i], 1093678129)
		UnitAddAbility(udg_hero[i], 1093678130)
		I7[(i - 1) * 20 + 8] = 1093678418
		UnitRemoveAbility(udg_hero[i], 1098282348)
		Q4 = GetRandomLocInRect(He)
		SetUnitPositionLoc(udg_hero[i], Q4)
		PanCameraToTimedLocForPlayer(p, Q4, 0)
		CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
		P4[i] = bj_lastCreatedUnit
		RemoveLocation(Q4)
		UnitAddItemByIdSwapped(1227896394, udg_hero[i])
	end
	--存青龙之戒
	-- if s == "saveql" and UnitHaveItem(udg_hero[i], 'I0CQ') then
	-- set str = GetPlayerName(p)
	-- call SetPlayerName(p, LoadStr(YDHT, GetHandleId(p), GetHandleId(p)*2))
	-- set it = FetchUnitItem(udg_hero[i], 'I0CQ')
	-- call YDWE_PreloadSL_Set( p, "青龙", 6, 1 )
	-- call YDWE_PreloadSL_Set( p, "招式伤害", 7, LoadInteger(YDHT,GetHandleId(it),StringHash("招式伤害")) )
	-- call YDWE_PreloadSL_Set( p, "内力", 8, LoadInteger(YDHT,GetHandleId(it),StringHash("内力")) )
	-- call YDWE_PreloadSL_Set( p, "真实伤害", 9, LoadInteger(YDHT,GetHandleId(it),StringHash("真实伤害")) )
	-- call YDWE_PreloadSL_Set( p, "暴击伤害", 10, LoadInteger(YDHT,GetHandleId(it),StringHash("暴击伤害")) )
	-- call YDWE_PreloadSL_Set( p, "绝学领悟", 11, LoadInteger(YDHT,GetHandleId(it),StringHash("绝学领悟")) )
	-- call YDWE_PreloadSL_Set( p, "根骨", 12, LoadInteger(YDHT,GetHandleId(it),StringHash("根骨")) )
	-- call YDWE_PreloadSL_Set( p, "胆魄", 13, LoadInteger(YDHT,GetHandleId(it),StringHash("胆魄")) )
	-- call YDWE_PreloadSL_Set( p, "医术", 14, LoadInteger(YDHT,GetHandleId(it),StringHash("医术")) )
	-- call YDWE_PreloadSL_Set( p, "经脉", 15, LoadInteger(YDHT,GetHandleId(it),StringHash("经脉")) )
	-- call YDWE_PreloadSL_Set( p, "悟性", 16, LoadInteger(YDHT,GetHandleId(it),StringHash("悟性")) )
	-- call YDWE_PreloadSL_Set( p, "福缘", 17, LoadInteger(YDHT,GetHandleId(it),StringHash("福缘")) )
	-- call YDWE_PreloadSL_Set( p, "杀人数", 18, LoadInteger(YDHT,GetHandleId(it),StringHash("杀人数")) )
	-- set udg_loadql[i] = true
	-- call YDWE_PreloadSL_Save( p, "JueZhan", "VIP", SAV_NUM)
	-- call DisplayTextToPlayer(p, 0, 0, "|CFFff9933青龙之戒状态已保存")
	-- call SetPlayerName(p, str)
	-- //call SaveQingLongZhiJie()
	-- endif
	-- if s == "loadql" and udg_loadql[i] == false then
	-- //call BJDebugMsg("青龙在这")
	-- //call YDWE_PreloadSL_Load( p, "JueZhan", "VIP", 18 )
	-- if ((bj_lastLoadPreloadSLResult == true)) then
	-- //call BJDebugMsg("青龙在这2")
	-- if YDWE_PreloadSL_Get(p, "ID", 1) == StringHash(LoadStr(YDHT, GetHandleId(p), GetHandleId(p)*2)) and YDWE_PreloadSL_Get(p, "青龙之戒", 6) == 1 then
	-- //call BJDebugMsg("青龙在这3")
	-- set loc = GetUnitLoc(udg_hero[i])
	-- set it = CreateItemLoc('I0CQ', loc)
	-- call SaveInteger(YDHT,GetHandleId(it),StringHash("招式伤害"), YDWE_PreloadSL_Get(p, "招式伤害", 7))
	-- call SaveInteger(YDHT,GetHandleId(it),StringHash("内力"), YDWE_PreloadSL_Get(p, "内力", 8))
	-- call SaveInteger(YDHT,GetHandleId(it),StringHash("真实伤害"), YDWE_PreloadSL_Get(p, "真实伤害", 9))
	-- call SaveInteger(YDHT,GetHandleId(it),StringHash("暴击伤害"), YDWE_PreloadSL_Get(p, "暴击伤害", 10))
	-- call SaveInteger(YDHT,GetHandleId(it),StringHash("绝学领悟"), YDWE_PreloadSL_Get(p, "绝学领悟", 11))
	-- call SaveInteger(YDHT,GetHandleId(it),StringHash("根骨"), YDWE_PreloadSL_Get(p, "根骨", 12))
	-- call SaveInteger(YDHT,GetHandleId(it),StringHash("胆魄"), YDWE_PreloadSL_Get(p, "胆魄", 13))
	-- call SaveInteger(YDHT,GetHandleId(it),StringHash("医术"), YDWE_PreloadSL_Get(p, "医术", 14))
	-- call SaveInteger(YDHT,GetHandleId(it),StringHash("经脉"), YDWE_PreloadSL_Get(p, "经脉", 15))
	-- call SaveInteger(YDHT,GetHandleId(it),StringHash("悟性"), YDWE_PreloadSL_Get(p, "悟性", 16))
	-- call SaveInteger(YDHT,GetHandleId(it),StringHash("福缘"), YDWE_PreloadSL_Get(p, "福缘", 17))
	-- call SaveInteger(YDHT,GetHandleId(it),StringHash("杀人数"), YDWE_PreloadSL_Get(p, "杀人数", 18))
	-- call DisplayTextToPlayer(p, 0, 0, "|CFFff9933青龙之戒已读取")
	-- set udg_loadql[i] = true
	-- call RemoveLocation(loc)
	-- set loc = null
	-- endif
	-- endif
	-- endif
	-- //查看青龙之戒
	-- if s == "ckql" then
	-- if UnitHaveItem(udg_hero[i], 'I0CQ') == false then
	-- call DisplayTextToPlayer(p,0,0,"|cFFFF0000当前未装备青龙之戒")
	-- else
	-- set it = FetchUnitItem(udg_hero[i], 'I0CQ')
	-- call DisplayTextToPlayer(p,0,0,"|cFFE500AF当前累积杀敌数："+I2S(LoadInteger(YDHT,GetHandleId(it),StringHash("杀人数"))))
	-- call DisplayTextToPlayer(p,0,0,"|cFFE500AF招式伤害："+I2S(LoadInteger(YDHT,GetHandleId(it),StringHash("招式伤害")))+" 内力："+I2S(LoadInteger(YDHT,GetHandleId(it),StringHash("内力")))+" 真实伤害："+I2S(LoadInteger(YDHT,GetHandleId(it),StringHash("真实伤害"))))
	-- call DisplayTextToPlayer(p,0,0,"|cFFFF0033暴击伤害："+I2S(LoadInteger(YDHT,GetHandleId(it),StringHash("暴击伤害")))+"% 绝学领悟："+I2S(LoadInteger(YDHT,GetHandleId(it),StringHash("绝学领悟"))))
	-- call DisplayTextToPlayer(p,0,0,"|cFFFFFF33根骨："+I2S(LoadInteger(YDHT,GetHandleId(it),StringHash("根骨")))+" 胆魄："+I2S(LoadInteger(YDHT,GetHandleId(it),StringHash("胆魄"))))
	-- call DisplayTextToPlayer(p,0,0,"|cFFFFFF33医术："+I2S(LoadInteger(YDHT,GetHandleId(it),StringHash("医术")))+" 经脉："+I2S(LoadInteger(YDHT,GetHandleId(it),StringHash("经脉"))))
	-- call DisplayTextToPlayer(p,0,0,"|cFFFFFF33悟性："+I2S(LoadInteger(YDHT,GetHandleId(it),StringHash("悟性")))+" 福缘："+I2S(LoadInteger(YDHT,GetHandleId(it),StringHash("福缘"))))
	-- endif
	-- endif
	if s == "jzjh.uuu9.com" and udg_runamen[i] == 0 and udg_hero[i] ~= nil then
		udg_runamen[i] = 13
		DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15.0, "|CFFff9933玩家" .. (GetPlayerName(p) or "") .. "选择了隐藏门派〓姑苏慕容〓|r")
		SetPlayerName(p, "〓姑苏慕容〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
		udg_shuxing[i] = udg_shuxing[i] + 5
		DisplayTimedTextToPlayer(p, 0, 0, 15.0, "|CFFff9933获得武功：凌波微步，你可以在主城和传送石之间任意传送了")
		UnitAddAbility(udg_hero[i], 1093678418)
		AddCharacterABuff(udg_hero[i], udg_xinggeA[i])
		AddCharacterBBuff(udg_hero[i], udg_xinggeB[i])
		UnitAddAbility(udg_hero[i], 1093678128)
		UnitAddAbility(udg_hero[i], 1093678129)
		UnitAddAbility(udg_hero[i], 1093678130)
		I7[(i - 1) * 20 + 8] = 1093678418
		UnitRemoveAbility(udg_hero[i], 1098282348)
		Q4 = GetRandomLocInRect(He)
		SetUnitPositionLoc(udg_hero[i], Q4)
		PanCameraToTimedLocForPlayer(p, Q4, 0)
		CreateNUnitsAtLoc(1, 1853257068, p, Q4, bj_UNIT_FACING)
		P4[i] = bj_lastCreatedUnit
		RemoveLocation(Q4)
		UnitAddItemByIdSwapped(1227896394, udg_hero[i])
	end
	--if s=="jiafuyuan" then
	--	set fuyuan[i]=fuyuan[i]+20
	--	call DisplayTextToPlayer(p,0,0,"|cFFFF0000福缘+20")
	--endif
	if s == "cksx" then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
	end
	if s == "ckjf" then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000剩余守家积分：" .. (I2S(shoujiajf[i]) or ""))
	end
	if s == "累积积分" then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000累积游戏积分：" .. (I2S(udg_MeiJuJiFen[i]) or ""))
	end
	if SubStringBJ(s, 1, 5) == "zy500" and udg_MeiJuJiFen[i] >= 500 then
		udg_MeiJuJiFen[S2I(SubStringBJ(s, 6, 6))] = udg_MeiJuJiFen[S2I(SubStringBJ(s, 6, 6))] + 500
		udg_MeiJuJiFen[i] = udg_MeiJuJiFen[i] - 500
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFF0000" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or "") .. "已向" .. (LoadStr(YDHT, GetHandleId(Player(S2I(SubStringBJ(s, 6, 6)) - 1)), GetHandleId(Player(S2I(SubStringBJ(s, 6, 6)) - 1))) or "") .. "转移500点积分")
	end
	if s == "baolv" then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000锁喉枪的爆率为：" .. (I2S(udg_baolv[1]) or ""))
	end
	if s == "+ys" or s == "+YS" then
		SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE) + 200.0, 1.0)
	end
	if s == "+js" or s == "+JS" then
		SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE) - 200.0, 1.0)
	end
	if s == "sj" then
		SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, 1800.0, 0)
	end
	if s == "fb" then
		FBdaojishi()
	end
	if s == "bl" then
		BanLvShuXing()
	end
	if s == "yx" then
		YaoXing()
	end
	if s == "jy" then
		TransferJY()
	end
	--自由属性点系统
	if SubStringBJ(s, 1, 2) == "wx" then
		if udg_shuxing[i] >= 1 then
			if S2I(SubStringBJ(s, 3, 5)) <= 0 or S2I(SubStringBJ(s, 3, 5)) > udg_shuxing[i] then
				wuxing[i] = wuxing[i] + 1
				udg_shuxing[i] = udg_shuxing[i] - 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配1点悟性，剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
			else
				wuxing[i] = wuxing[i] + S2I(SubStringBJ(s, 3, 5))
				udg_shuxing[i] = udg_shuxing[i] - S2I(SubStringBJ(s, 3, 5))
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配" .. (SubStringBJ(s, 3, 5) or "") .. "点悟性，剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
			end
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000属性点已用完")
		end
	elseif SubStringBJ(s, 1, 2) == "fy" then
		if udg_shuxing[i] >= 1 then
			if S2I(SubStringBJ(s, 3, 5)) <= 0 or S2I(SubStringBJ(s, 3, 5)) > udg_shuxing[i] then
				fuyuan[i] = fuyuan[i] + 1
				udg_shuxing[i] = udg_shuxing[i] - 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配1点福缘，剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
			else
				fuyuan[i] = fuyuan[i] + S2I(SubStringBJ(s, 3, 5))
				udg_shuxing[i] = udg_shuxing[i] - S2I(SubStringBJ(s, 3, 5))
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配" .. (SubStringBJ(s, 3, 5) or "") .. "点福缘，剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
			end
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000属性点已用完")
		end
	elseif SubStringBJ(s, 1, 2) == "gg" then
		if udg_shuxing[i] >= 1 then
			if S2I(SubStringBJ(s, 3, 5)) <= 0 or S2I(SubStringBJ(s, 3, 5)) > udg_shuxing[i] then
				gengu[i] = gengu[i] + 1
				udg_shuxing[i] = udg_shuxing[i] - 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配1点根骨，剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
			else
				gengu[i] = gengu[i] + S2I(SubStringBJ(s, 3, 5))
				udg_shuxing[i] = udg_shuxing[i] - S2I(SubStringBJ(s, 3, 5))
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配" .. (SubStringBJ(s, 3, 5) or "") .. "点根骨，剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
			end
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000属性点已用完")
		end
	elseif SubStringBJ(s, 1, 2) == "dp" then
		if udg_shuxing[i] >= 1 then
			if S2I(SubStringBJ(s, 3, 5)) <= 0 or S2I(SubStringBJ(s, 3, 5)) > udg_shuxing[i] then
				danpo[i] = danpo[i] + 1
				udg_shuxing[i] = udg_shuxing[i] - 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配1点胆魄，剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
			else
				danpo[i] = danpo[i] + S2I(SubStringBJ(s, 3, 5))
				udg_shuxing[i] = udg_shuxing[i] - S2I(SubStringBJ(s, 3, 5))
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配" .. (SubStringBJ(s, 3, 5) or "") .. "点胆魄，剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
			end
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000属性点已用完")
		end
	elseif SubStringBJ(s, 1, 2) == "ys" then
		if udg_shuxing[i] >= 1 then
			if S2I(SubStringBJ(s, 3, 5)) <= 0 or S2I(SubStringBJ(s, 3, 5)) > udg_shuxing[i] then
				yishu[i] = yishu[i] + 1
				udg_shuxing[i] = udg_shuxing[i] - 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配1点医术，剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
			else
				yishu[i] = yishu[i] + S2I(SubStringBJ(s, 3, 5))
				udg_shuxing[i] = udg_shuxing[i] - S2I(SubStringBJ(s, 3, 5))
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配" .. (SubStringBJ(s, 3, 5) or "") .. "点医术，剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
			end
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000属性点已用完")
		end
	elseif SubStringBJ(s, 1, 2) == "jm" then
		if udg_shuxing[i] >= 1 then
			if S2I(SubStringBJ(s, 3, 5)) <= 0 or S2I(SubStringBJ(s, 3, 5)) > udg_shuxing[i] then
				jingmai[i] = jingmai[i] + 1
				udg_shuxing[i] = udg_shuxing[i] - 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配1点经脉，剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
			else
				jingmai[i] = jingmai[i] + S2I(SubStringBJ(s, 3, 5))
				udg_shuxing[i] = udg_shuxing[i] - S2I(SubStringBJ(s, 3, 5))
				DisplayTextToPlayer(p, 0, 0, "|cFFFF0000分配" .. (SubStringBJ(s, 3, 5) or "") .. "点经脉，剩余属性点：" .. (I2S(udg_shuxing[i]) or ""))
			end
		else
			DisplayTextToPlayer(p, 0, 0, "|cFFFF0000属性点已用完")
		end
	end
	p = nil
	it = nil
	--测试码
	if s == "要高冷一点" then
		SetHeroLevel(udg_hero[i], GetHeroLevel(udg_hero[i]) + 5, true)
		wuxuedian[i] = wuxuedian[i] + 5
		unitadditembyidswapped(1227895642, udg_hero[i])
		unitadditembyidswapped(1227896115, udg_hero[i])
		unitadditembyidswapped(1227896116, udg_hero[i])
		unitadditembyidswapped(1227896117, udg_hero[i])
		unitadditembyidswapped(1227895877, udg_hero[i])
		unitadditembyidswapped(1227895379, udg_hero[i])
		--call CreateNUnitsAtLoc(1,'o01U',GetTriggerPlayer(),GetUnitLoc(udg_hero[i]),bj_UNIT_FACING)
		shengwang[i] = shengwang[i] + 5000
		xiuxing[i] = 5
		udg_lilianxishu[i] = udg_lilianxishu[i] + 3
		udg_shuxing[i] = udg_shuxing[i] + 300
		shoujiajf[i] = shoujiajf[i] + 1000
	end
	if s == "boshu" then
		udg_boshu = udg_boshu + 1
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000已跳转至下一波")
	end
	if s == "ChuBoss1" then
		CreateNUnitsAtLocFacingLocBJ(1, u7[1], Player(6), v7[6], v7[4])
		CreateNUnitsAtLocFacingLocBJ(1, u7[1], Player(0), v7[6], v7[4])
	elseif s == "ChuBoss2" then
		CreateNUnitsAtLocFacingLocBJ(1, u7[2], Player(6), v7[6], v7[4])
	elseif s == "ChuBoss3" then
		CreateNUnitsAtLocFacingLocBJ(1, u7[3], Player(6), v7[6], v7[4])
	elseif s == "ChuBoss4" then
		CreateNUnitsAtLocFacingLocBJ(1, u7[4], Player(6), v7[6], v7[4])
	elseif s == "ChuBoss5" then
		CreateNUnitsAtLocFacingLocBJ(1, u7[5], Player(6), v7[6], v7[4])
	elseif s == "ChuBoss6" then
		CreateNUnitsAtLocFacingLocBJ(1, u7[6], Player(6), v7[6], v7[4])
	elseif s == "ChuBoss7" then
		CreateNUnitsAtLocFacingLocBJ(1, u7[7], Player(6), v7[6], v7[4])
	elseif s == "ChuBoss8" then
		CreateNUnitsAtLocFacingLocBJ(1, u7[8], Player(6), v7[6], v7[4])
	elseif s == "ChuLiaoGuo" then
		LiaoGuoJinGong()
	elseif s == "ChuLingJiu" then
		LingJiuGongJinGong()
	end
end
function KeyInputSystem()
	local t = CreateTrigger()
	local i = 0
	for _ in _loop_() do
		if i > 6 then break end
		TriggerRegisterPlayerChatEvent(t, Player(i), "", true)
		i = i + 1
	end
	TriggerAddAction(t, KeyInput)
	t = nil
end
-- 包含门派库
----------少林开始--------//
--韦陀棍法
function IsWeiTuo()
	return GetUnitAbilityLevel(GetAttacker(), 1093678407) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function WeiTuo_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function WeiTuo_Action()
	local uc = GetEnumUnit()
	local u = GetAttacker()
	local x = GetUnitX(uc)
	local y = GetUnitY(uc)
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1395666992) ~= 0 then
		shxishu = shxishu + 0.5
	end
	if GetUnitAbilityLevel(u, 1093678927) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if UnitHaveItem(u, 1227899212) then
		shxishu = shxishu * 8
	end
	--if((GetUnitAbilityLevel(u,'A05G')==9))then
	--    set shxishu=shxishu*8.
	--endif
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", x, y))
	shanghai = ShangHaiGongShi(u, uc, 10, 12, shxishu, 1093678407)
	--call BJDebugMsg("伤害="+R2S(shanghai))
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function WeiTuoGun()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local loc1 = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	if UnitHasBuffBJ(u, 1113746543) then
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(300.0 + I2R(jingmai[1 + GetPlayerId(GetOwningPlayer(u))]) * 8.0, loc1, Condition(WeiTuo_Condition)), WeiTuo_Action)
		if GetUnitAbilityLevel(u, 1093682254) ~= 0 then
			SetWidgetLife(u, GetUnitState(u, UNIT_STATE_LIFE) + 0.02 * GetUnitState(u, UNIT_STATE_MAX_LIFE))
		end
	else
		if GetRandomReal(0.0, 100.0) <= 22.0 + fuyuan[i] // 3 then
			ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(300.0 + I2R(jingmai[1 + GetPlayerId(GetOwningPlayer(u))]) * 8.0, loc1, Condition(WeiTuo_Condition)), WeiTuo_Action)
			if GetUnitAbilityLevel(u, 1093682254) ~= 0 then
				SetWidgetLife(u, GetUnitState(u, UNIT_STATE_LIFE) + 0.02 * GetUnitState(u, UNIT_STATE_MAX_LIFE))
			end
			if GetUnitAbilityLevel(u, 1093678933) ~= 0 and GetRandomReal(0.0, 100.0) <= 15.0 then
				CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc1, bj_UNIT_FACING)
				ShowUnitHide(bj_lastCreatedUnit)
				UnitAddAbility(bj_lastCreatedUnit, 1093681496)
				IssueTargetOrderById(bj_lastCreatedUnit, 852101, u)
				UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 3.0)
			end
			WuGongShengChong(u, 1093678407, 1200.0)
		end
	end
	RemoveLocation(loc1)
	RemoveLocation(loc2)
	u = nil
	uc = nil
	loc1 = nil
	loc2 = nil
end
--达摩剑法
function qc()
	return GetEventDamage() == 0.15
end
function rc()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEventDamageSource())) and IsUnitAliveBJ(GetFilterUnit())
end
function sc()
	local u = GetEventDamageSource()
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1395666992) ~= 0 then
		shxishu = shxishu + 0.4
	end
	if GetUnitAbilityLevel(u, 1093678897) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if UnitHaveItem(u, 1227899212) then
		shxishu = shxishu * 8
	end
	shanghai = ShangHaiGongShi(u, uc, 70.0, 60.0, shxishu, 1093677104)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function ucFunc()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc2 = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1395666992) ~= 0 then
		shxishu = shxishu + 0.4
	end
	if GetUnitAbilityLevel(u, 1093678897) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if UnitHaveItem(u, 1227899212) then
		shxishu = shxishu * 8
	end
	shanghai = ShangHaiGongShi(u, uc, 10, 30, shxishu, 1093677104)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 then
		DestroyEffect(AddSpecialEffectLocBJ(loc2, "war3mapImported\\ShadowBurn.mdx"))
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(100, loc2, Condition(rc)), sc)
	end
	RemoveLocation(loc2)
	u = nil
	uc = nil
	loc2 = nil
end
function wc()
	return GetSpellAbilityId() == 1093677104 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function xc()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local loc = GetUnitLoc(u)
	local loc2 = pu(loc, 256, GetUnitPropWindowBJ(u) + 90.0)
	local id = 1093677104
	if GetUnitAbilityLevel(u, 1093678415) ~= 0 then
		CreateNUnitsAtLoc(1, 1697656880, p, loc, bj_UNIT_FACING)
		UnitAddAbility(bj_lastCreatedUnit, 1093678408)
		IssueTargetOrderById(bj_lastCreatedUnit, 852066, u)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		ShowUnitHide(bj_lastCreatedUnit)
	end
	if GetUnitAbilityLevel(u, 1093682254) ~= 0 then
		CreateNUnitsAtLoc(1, 1697656881, p, loc, bj_UNIT_FACING)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 12.0)
	end
	if GetUnitAbilityLevel(u, 1093678933) ~= 0 and GetUnitAbilityLevel(u, 1093678918) ~= 0 then
		CreateNUnitsAtLoc(1, 1697656880, p, loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678410)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852593, loc2)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 6.0)
	end
	WuGongShengChong(u, 1093677104, 150.0)
	RemoveLocation(loc)
	RemoveLocation(loc2)
	u = nil
	p = nil
	loc = nil
	loc2 = nil
end
--大力金刚指
function zc()
	return GetSpellAbilityId() == 1093678411 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function Ac()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit())
end
function ac()
	local u = GetTriggerUnit()
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678664) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093682254) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093678930) ~= 0 and GetUnitAbilityLevel(u, 1093678928) ~= 0 then
		shxishu = shxishu + 1.0
	end
	if UnitHaveItem(u, 1227899212) then
		shxishu = shxishu * 8
	end
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
		shanghai = ShangHaiGongShi(u, uc, 200, 200, shxishu * udg_baojishanghai[1 + GetPlayerId(GetOwningPlayer(u))], 1093678411)
		WuGongShangHai(u, uc, shanghai)
	else
		shanghai = ShangHaiGongShi(u, uc, 200, 200, shxishu, 1093678411)
		WuGongShangHai(u, uc, shanghai)
	end
	if gengu[1 + GetPlayerId(GetOwningPlayer(u))] >= 20 and UnitHasBuffBJ(uc, 1110454328) == false then
		if GetUnitAbilityLevel(u, 1093678672) ~= 0 then
			WanBuff(u, uc, 12)
		else
			WanBuff(u, uc, 11)
		end
	end
	-- 悟性超过20时50%概率斩杀低于20%血的怪物
	if wuxing[1 + GetPlayerId(GetOwningPlayer(u))] >= 20 and GetUnitLifePercent(uc) <= 20 and GetRandomInt(1, 100) < 50 then
		SetUnitLifeBJ(uc, 1.0)
		WuGongShangHai(u, uc, 1000 * shanghai)
		FontFloat("斩杀", loc2, 60.0, 16.0, 65.0, 55.0, 42.0, 0, 3.0)
	end
	if GetUnitAbilityLevel(u, 1093678930) ~= 0 and GetUnitAbilityLevel(u, 1093678928) ~= 0 and UnitHasBuffBJ(uc, 1113813619) == false then
		WanBuff(u, uc, 10)
	end
	RemoveLocation(loc)
	RemoveLocation(loc2)
	u = nil
	uc = nil
	loc = nil
	loc2 = nil
end
function Bc()
	local u = GetTriggerUnit()
	local uc = GetSpellTargetUnit()
	local x = GetUnitX(uc)
	local y = GetUnitY(uc)
	local g = CreateGroup()
	WuGongShengChong(u, 1093678411, 160.0)
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 and GetUnitAbilityLevel(u, 1093678927) ~= 0 then
		GroupEnumUnitsInRange(g, x, y, 500, Condition(Ac))
	else
		GroupAddUnit(g, uc)
	end
	ForGroupBJ(g, ac)
	GroupClear(g)
	DestroyGroup(g)
	u = nil
	uc = nil
	g = nil
end
--金钟罩
function Cc()
	return GetSpellAbilityId() == 1093678415 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function cc()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	DestroyEffect(E7[i])
	UnitRemoveAbility(u, 1110454320)
	D7[i] = 5000.0 * I2R(yishu[i]) * I2R(GetUnitAbilityLevel(u, 1093678415))
	ce[i] = 70 * GetUnitAbilityLevel(u, 1093678415)
	YDWEGeneralBounsSystemUnitSetBonus(u, 2, 0, 70 * GetUnitAbilityLevel(u, 1093678415))
	if gengu[i] >= 20 then
		D7[i] = D7[i] * 2.0
	end
	AddSpecialEffectTargetUnitBJ("chest", u, "war3mapImported\\DefensiveBarrierBig.mdx")
	DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cff00ccff金钟罩效果总值：" .. (I2S(R2I(D7[i])) or ""))
	E7[i] = bj_lastCreatedEffect
	WuGongShengChong(u, 1093678415, 100.0)
	u = nil
	p = nil
end
function Ec()
	return UnitHasBuffBJ(GetTriggerUnit(), 1110454320)
end
function Fc()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit())
end
function Gc()
	local u = GetTriggerUnit()
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local shxishu = 1.0
	local shanghai = 0.0
	if UnitHaveItem(u, 1227899212) then
		shxishu = shxishu * 8
	end
	AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl")
	DestroyEffect(bj_lastCreatedEffect)
	RemoveLocation(loc)
	shanghai = ShangHaiGongShi(u, uc, 400, 400, shxishu, 1093678415)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
	loc = nil
end
function Hc()
	local u = GetTriggerUnit()
	local uc = GetEventDamageSource()
	local shxishu = 1.0
	local shanghai = 0.0
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	if UnitHaveItem(u, 1227899212) then
		shxishu = shxishu * 8
	end
	if GetEventDamage() <= D7[i] then
		D7[i] = D7[i] - GetEventDamage()
		SetWidgetLife(u, GetUnitStateSwap(UNIT_STATE_LIFE, GetTriggerUnit()) + GetEventDamage())
		--+化功大法
		if GetUnitAbilityLevel(u, 1093678928) ~= 0 then
			AddSpecialEffectLocBJ(loc2, "Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl")
			DestroyEffect(bj_lastCreatedEffect)
			RemoveLocation(loc2)
			shanghai = ShangHaiGongShi(u, uc, 20.0, 20.0, shxishu, 1093678415)
			WuGongShangHai(u, uc, shanghai)
		end
	else
		DestroyEffect(E7[i])
		YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 2, 1, ce[i])
		--+易筋经
		if GetUnitAbilityLevel(u, 1093679428) ~= 0 then
			ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600.0, loc, Condition(Fc)), Gc)
		end
		--+小无相
		if GetUnitAbilityLevel(u, 1093679155) ~= 0 and GetRandomReal(0, 100.0) >= 70.0 then
			D7[i] = 2500.0 * I2R(yishu[i]) * I2R(GetUnitAbilityLevel(u, 1093678415))
			ce[i] = 70 * GetUnitAbilityLevel(u, 1093678415)
			YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 2, 0, 70 * GetUnitAbilityLevel(u, 1093678415))
			if gengu[1 + GetPlayerId(GetOwningPlayer(u))] >= 20 then
				D7[i] = D7[i] * 2.0
			end
			AddSpecialEffectTargetUnitBJ("chest", GetTriggerUnit(), "war3mapImported\\DefensiveBarrierBig.mdx")
			DisplayTextToPlayer(p, 0, 0, "|cff00ccff小无相重启金钟罩，效果总值：" .. (I2S(R2I(D7[i])) or ""))
			E7[i] = bj_lastCreatedEffect
		else
			UnitRemoveAbility(GetTriggerUnit(), 1110454320)
		end
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	p = nil
	loc = nil
	loc2 = nil
end
--降魔功
function lc()
	return GetUnitAbilityLevel(GetKillingUnit(), 1395666992) ~= 0
end
function Jc()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))
	if jingmai[i] >= 25 then
		F7[i] = F7[i] + 1
		if F7[i] >= 10 then
			F7[i] = F7[i] - 10
			ModifyHeroStat(1, GetKillingUnit(), 0, 1)
		end
	end
end
function Lc()
	return GetUnitAbilityLevel(GetTriggerUnit(), 1395666992) ~= 0
end
function Mc()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(u)
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093678936) ~= 0 then
		G7[i] = G7[i] + 1
		if G7[i] >= 10 then
			G7[i] = G7[i] - 10
			H7 = 1
			for _ in _loop_() do
				if H7 > 18 then break end
				CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
				UnitAddAbility(bj_lastCreatedUnit, 1093678416)
				IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, pu(loc, 256, 20.0 * I2R(H7)))
				ShowUnitHide(bj_lastCreatedUnit)
				UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
				RemoveLocation(pu(loc, 256, 20.0 * I2R(H7)))
				H7 = H7 + 1
			end
			RemoveLocation(loc)
		end
	end
	if GetRandomReal(1, 100) <= 15 + fuyuan[i] // 5 then
		WuGongShengChong(GetTriggerUnit(), 1395666992, 6000.0)
	end
	u = nil
	p = nil
	loc = nil
end
function Oc()
	return GetUnitAbilityLevel(GetAttacker(), 1395666992) ~= 0
end
function Pc()
	local u = GetAttacker()
	local l__ut = GetTriggerUnit()
	local loc = nil
	if GetRandomInt(1, 100) <= 2 and GetUnitAbilityLevel(u, 1093678931) ~= 0 and GetUnitAbilityLevel(u, 1093682254) ~= 0 then
		loc = GetUnitLoc(l__ut)
		CreateNUnitsAtLoc(1, 1852862002, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 180.0)
		RemoveLocation(loc)
	end
	if GetUnitAbilityLevel(u, 1395666994) ~= 0 then
		if GetUnitState(l__ut, UNIT_STATE_LIFE) <= 0.01 * GetUnitState(l__ut, UNIT_STATE_MAX_LIFE) then
			SetWidgetLife(l__ut, 1.0)
		else
			SetWidgetLife(l__ut, GetUnitState(l__ut, UNIT_STATE_LIFE) - 0.01 * GetUnitState(l__ut, UNIT_STATE_MAX_LIFE))
		end
	end
	u = nil
	l__ut = nil
	loc = nil
end
function Rc()
	return GetEventDamage() == 0.18
end
function Sc()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	if UnitHaveItem(u, 1227899212) then
		shxishu = shxishu * 8
	end
	shanghai = ShangHaiGongShi(u, uc, 50, 50, shxishu, 1395666992)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
----------少林结束--------//
function ShaoLin_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsWeiTuo))
	TriggerAddAction(t, WeiTuoGun)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(qc))
	TriggerAddAction(t, ucFunc)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(wc))
	TriggerAddAction(t, xc)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(zc))
	TriggerAddAction(t, Bc)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(Cc))
	TriggerAddAction(t, cc)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(Ec))
	TriggerAddAction(t, Hc)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(lc))
	TriggerAddAction(t, Jc)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(Lc))
	TriggerAddAction(t, Mc)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(Oc))
	TriggerAddAction(t, Pc)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(Rc))
	TriggerAddAction(t, Sc)
end
----------丐帮开始--------//
--太祖拳法
function IsTaiZu()
	return IsCertainWuGong(GetAttacker(), GetTriggerUnit(), 1093681977)
end
function TaiZu_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function TaiZu_Action()
	local uc = GetEnumUnit()
	local u = GetAttacker()
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093682254) >= 1 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093678931) >= 1 then
		shxishu = shxishu + 0.8
	end
	if UnitHaveItem(u, 1227897143) then
		shxishu = shxishu * 4
	end
	shanghai = ShangHaiGongShi(u, uc, 15.0, 21.0, shxishu, 1093681977)
	AddSpecialEffectTargetUnitBJ("overhead", uc, "Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget.mdl")
	DestroyEffect(GetLastCreatedEffectBJ())
	--call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,R2S(shanghai)+", "+I2S(1+GetPlayerId(GetOwningPlayer(u))))
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678933) >= 1 then
		YDWEPolledWaitNull(0.5)
		AddSpecialEffectTargetUnitBJ("overhead", uc, "Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget.mdl")
		DestroyEffect(GetLastCreatedEffectBJ())
		WuGongShangHai(u, uc, shanghai)
	end
	u = nil
	uc = nil
end
function TaiZuQuan()
	--local real angle=GetUnitFacing(GetAttacker())
	local g = CreateGroup()
	local r = 300.0
	r = 500.0 + 40.0 * GetUnitAbilityLevel(GetAttacker(), 1093681977)
	if GetUnitAbilityLevel(GetAttacker(), 1093681985) >= 1 then
		r = r * 1.6
	end
	--call knock_back(GetAttacker() , angle, 50.0 , .3 , 0.03 , path,shanghai)
	WuGongShengChong(GetAttacker(), 1093681977, 900.0)
	GroupEnumUnitsInRange(g, GetUnitX(GetAttacker()), GetUnitY(GetAttacker()), r, Condition(TaiZu_Condition))
	ForGroupBJ(g, TaiZu_Action)
	GroupClear(g)
	DestroyGroup(g)
	g = nil
end
--丐帮心法
function IsGaiBang()
	return GetSpellAbilityId() == 1093682249
end
function FanWei_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_fanweidanwei)) and IsUnitAliveBJ(GetFilterUnit())
end
function FanWei_Action()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(udg_fanweidanwei))]
	local shanghai = LoadReal(YDHT, StringHash("范围"), StringHash("伤害"))
	WuGongShangHai(u, GetEnumUnit(), shanghai)
	u = nil
end
function FanWeiShangHai(u, range, shanghai)
	local g = CreateGroup()
	SaveReal(YDHT, StringHash("范围"), StringHash("伤害"), shanghai)
	udg_fanweidanwei = u
	GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), range, Condition(FanWei_Condition))
	ForGroupBJ(g, FanWei_Action)
	DestroyGroup(g)
	g = nil
end
function QuWuGongJi_Action()
	local t = GetExpiredTimer()
	local l__w = GetHandleId(t)
	local u = LoadUnitHandle(YDHT, l__w, 0)
	local angle = LoadReal(YDHT, l__w, 1)
	local l__ut = LoadUnitHandle(YDHT, l__w, 3)
	local j = LoadInteger(YDHT, l__w, 4)
	local id = LoadInteger(YDHT, l__w, 5)
	local jmax = 30
	local shxishu = RMinBJ(I2R(GetUnitLevel(u)), 10.0)
	local shanghai = 0.0
	if UnitHaveItem(u, 1227897143) then
		shxishu = shxishu * 4
	end
	if id == 1852075879 then
		shanghai = ShangHaiGongShi(u, u, 8, 2.6, shxishu, 1093682249)
	elseif id == 1970040675 then
		shanghai = ShangHaiGongShi(u, u, 3.2, 13.4, shxishu, 1093682249)
	else
		shanghai = ShangHaiGongShi(u, u, 6.6, 3.2, shxishu, 1093682249)
	end
	if j < jmax then
		SetUnitX(l__ut, CheckX(GetLocationX(LoadLocationHandle(YDHT, l__w, 2)) + Cos(angle) * 32 * j))
		SetUnitY(l__ut, CheckY(GetLocationY(LoadLocationHandle(YDHT, l__w, 2)) + Sin(angle) * 32 * j))
		--call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,R2S(CheckX(GetLocationX(loc)+Cos(angle)*10*j))+","+R2S(CheckY(GetLocationY(loc)+Sin(angle)*10*j)))
		FanWeiShangHai(l__ut, 300, shanghai)
		SaveInteger(YDHT, l__w, 4, j + 1)
	else
		KillUnit(l__ut)
		RemoveUnit(l__ut)
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, l__w)
	end
	t = nil
	u = nil
	l__ut = nil
end
function QuWuGongJi(u, id)
	local facing = GetUnitFacing(u)
	local angle = facing * bj_DEGTORAD
	local loc = GetUnitLoc(u)
	local t = CreateTimer()
	local l__w = GetHandleId(t)
	local l__ut = nil
	CreateNUnitsAtLoc(1, id, GetOwningPlayer(u), loc, facing)
	l__ut = bj_lastCreatedUnit
	SaveUnitHandle(YDHT, l__w, 0, u)
	SaveReal(YDHT, l__w, 1, angle)
	SaveLocationHandle(YDHT, l__w, 2, loc)
	SaveUnitHandle(YDHT, l__w, 3, l__ut)
	SaveInteger(YDHT, l__w, 4, 0)
	SaveInteger(YDHT, l__w, 5, id)
	TimerStart(t, 0.03, true, QuWuGongJi_Action)
	t = nil
	l__ut = nil
	loc = nil
end
function GaiBang_Action()
	local t = GetExpiredTimer()
	local l__w = GetHandleId(t)
	local u = LoadUnitHandle(YDHT, l__w, 0)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local j = LoadInteger(YDHT, l__w, 1)
	local jmax = 100
	if j < jmax then
		if IsUnitType(u, UNIT_TYPE_HERO) ~= nil == true then -- INLINED!!
			ModifyHeroStat(1, u, 0, GetUnitAbilityLevel(u, 1093682249))
		end
		SaveInteger(YDHT, l__w, 1, j + 1)
	else
		ModifyHeroStat(1, u, 1, 100 * GetUnitAbilityLevel(u, 1093682249))
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, l__w)
	end
	t = nil
	u = nil
	p = nil
end
function GaiBangXinFa()
	local u = GetTriggerUnit()
	local t = CreateTimer()
	local loc = GetUnitLoc(u)
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	SaveInteger(YDHT, GetHandleId(t), 1, 0)
	CreateNUnitsAtLoc(1, 1697656920, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	UnitAddAbility(bj_lastCreatedUnit, 1098016106)
	IssueTargetOrder(bj_lastCreatedUnit, "rejuvination", u)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 5.0)
	ShowUnitHide(bj_lastCreatedUnit)
	WuGongShengChong(u, 1093682249, 300.0)
	--打狗·驱狗
	if GetUnitAbilityLevel(u, 1093678924) >= 1 then
		QuWuGongJi(u, 1852075879)
	end
	--降龙·驱龙
	if GetUnitAbilityLevel(u, 1093678917) >= 1 then
		QuWuGongJi(u, 1970040675)
	end
	TimerStart(t, 0.1, true, GaiBang_Action)
	RemoveLocation(loc)
	loc = nil
	u = nil
	t = nil
end
--铁布衫
function IsTieBuShan()
	return GetUnitAbilityLevel(GetTriggerUnit(), 1093681985) >= 1
end
function TieBuShan_Action()
	local tm = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(tm), 0)
	local uc = LoadUnitHandle(YDHT, GetHandleId(tm), 3)
	local cengxieliang = LoadInteger(YDHT, GetHandleId(tm), 1)
	local cengjialiang = LoadInteger(YDHT, GetHandleId(tm), 2)
	if udg_tiebushancengshu >= 1 then
		udg_tiebushancengshu = udg_tiebushancengshu - 1
	end
	FlushChildHashtable(YDHT, GetHandleId(tm))
	PauseTimer(tm)
	DestroyTimer(tm)
	tm = nil
	uc = nil
	u = nil
end
function TieBuShan()
	local cengshu = 15
	local u = GetTriggerUnit()
	local uc = GetAttacker()
	local cengxieliang = 6000 + 1000 * GetUnitAbilityLevel(u, 1093681985)
	local cengjialiang = 100 + 30 * GetUnitAbilityLevel(u, 1093681985)
	local tm = CreateTimer()
	local time = 20.0
	local i = 1
	if tiebucishu[1 + GetPlayerId(GetOwningPlayer(u))] >= 500 then
		tiebucishu[1 + GetPlayerId(GetOwningPlayer(u))] = tiebucishu[1 + GetPlayerId(GetOwningPlayer(u))] - 500
		unitadditembyidswapped(1227895892, u)
	else
		tiebucishu[1 + GetPlayerId(GetOwningPlayer(u))] = tiebucishu[1 + GetPlayerId(GetOwningPlayer(u))] + 1
	end
	--set i=1
	--   loop
	--   exitwhen i>6
	--   if GetItemType(UnitItemInSlotBJ(GetTriggerUnit(),i))== ITEM_TYPE_PURCHASABLE then
	--    set cengxieliang=cengxieliang/2
	--    set cengjialiang=cengjialiang/2
	--   endif
	--   set i=i+1
	--   endloop
	--   if GetUnitAbilityLevel(u,'A0DN')>=1 then
	--    set cengxieliang=cengxieliang-600
	--   endif
	--   if GetUnitAbilityLevel(u,'A070')>=1 then
	--    set cengjialiang=cengjialiang-20
	--   endif
	if danpo[1 + GetPlayerId(GetOwningPlayer(u))] >= 20 then
		time = time - 10.0
	end
	if GetUnitAbilityLevel(u, 1093679155) >= 1 then
		cengshu = cengshu + 20
	end
	cengshu = cengshu - 1 + GetUnitAbilityLevel(u, 1093681985)
	if udg_tiebushancengshu <= cengshu - 1 and GetRandomReal(1.0, 200) < 20 then
		WuGongShengChong(u, 1093681985, 2000.0)
		WuGongShangHai(u, uc, ShangHaiGongShi(u, uc, 40.0, 80.0, udg_tiebushancengshu, 1093681985))
		SetUnitDizzy(uc, 4.0 + 1.5 * GetUnitAbilityLevel(u, 1093681985), "Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget.mdl")
		udg_tiebushancengshu = udg_tiebushancengshu + 1
		SaveUnitHandle(YDHT, GetHandleId(tm), 0, u)
		SaveUnitHandle(YDHT, GetHandleId(tm), 3, uc)
		SaveInteger(YDHT, GetHandleId(tm), 1, cengxieliang)
		SaveInteger(YDHT, GetHandleId(tm), 2, cengjialiang)
		TimerStart(tm, time, false, TieBuShan_Action)
	end
	u = nil
	uc = nil
	tm = nil
end
--夜叉棍法
function IsYeCha()
	return GetSpellAbilityId() == 1093681986
end
function YeChaGun_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_yechadanwei)) and IsUnitAliveBJ(GetFilterUnit())
end
function YeChaGun_SH()
	local shanghai = 0.0
	local shxishu = 1.0
	if GetUnitAbilityLevel(udg_yechadanwei, 1093678928) >= 1 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(udg_yechadanwei, 1093678932) >= 1 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(udg_yechadanwei, 1093679152) >= 1 then
		shxishu = shxishu + 1.5
	end
	if UnitHaveItem(udg_yechadanwei, 1227897143) then
		shxishu = shxishu * 4
	end
	shanghai = ShangHaiGongShi(udg_yechadanwei, GetEnumUnit(), 8.4, 2.3, shxishu, 1093681986)
	WuGongShangHai(udg_yechadanwei, GetEnumUnit(), shanghai)
	if GetUnitAbilityLevel(udg_yechadanwei, 1093682249) >= 1 then
		SetUnitDizzy(GetEnumUnit(), 2.0, "Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget.mdl")
	end
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", GetEnumUnit(), "overhead"))
end
function YeChaGun_Action()
	local t = GetExpiredTimer()
	local p = GetHandleId(t)
	local u = LoadUnitHandle(YDHT, p, 0)
	local l__ut = LoadUnitHandle(YDHT, p, 1)
	local Axx = LoadReal(YDHT, p, 2)
	local Ayy = LoadReal(YDHT, p, 3)
	local Cxx = LoadReal(YDHT, p, 4)
	local Cyy = LoadReal(YDHT, p, 5)
	local Bxx = LoadReal(YDHT, p, 6)
	local Byy = LoadReal(YDHT, p, 7)
	local a = LoadReal(YDHT, p, 8)
	local b = 1 - a
	local firstpass = LoadBoolean(YDHT, p, 9)
	local loc = GetUnitLoc(l__ut)
	local g = CreateGroup()
	SetUnitX(l__ut, CheckX(Axx * a * a + Bxx * 2 * a * b + Cxx * b * b))
	SetUnitY(l__ut, CheckY(Ayy * a * a + Byy * 2 * a * b + Cyy * b * b))
	udg_yechadanwei = u
	GroupEnumUnitsInRangeOfLoc(g, loc, 150, Condition(YeChaGun_Condition))
	ForGroupBJ(g, YeChaGun_SH)
	GroupClear(g)
	DestroyGroup(g)
	if firstpass then
		a = a - 0.02
	else
		a = a + 0.02
	end
	SaveReal(YDHT, p, 8, a)
	SaveReal(YDHT, p, 2, GetUnitX(u))
	SaveReal(YDHT, p, 3, GetUnitY(u))
	if a < 0 and firstpass then
		SetUnitFacing(l__ut, GetUnitFacing(l__ut) + 180)
		SaveBoolean(YDHT, p, 9, false)
		SaveReal(YDHT, p, 6, Axx + 300 * Cos(Atan2(Cyy - Ayy, Cxx - Axx)) - 45)
		SaveReal(YDHT, p, 7, Ayy + 300 * Sin(Atan2(Cyy - Ayy, Cxx - Axx)) - 45)
	end
	if a > 1 and firstpass == false then
		KillUnit(l__ut)
		FlushChildHashtable(YDHT, p)
		PauseTimer(t)
		DestroyTimer(t)
	end
	RemoveLocation(loc)
	loc = nil
	g = nil
	t = nil
	u = nil
	l__ut = nil
end
function YeChaGun()
	local t = CreateTimer()
	local p = GetHandleId(t)
	local u = GetTriggerUnit()
	local Axx = GetUnitX(u)
	local Ayy = GetUnitY(u)
	local Cxx = GetSpellTargetX()
	local Cyy = GetSpellTargetY()
	local i = 0
	local angle = 0.0
	local a = 1.0
	SaveUnitHandle(YDHT, p, 0, u)
	SaveUnitHandle(YDHT, p, 1, CreateUnit(GetOwningPlayer(u), 1747988548, Axx, Ayy, GetUnitFacing(u)))
	SaveReal(YDHT, p, 2, Axx)
	SaveReal(YDHT, p, 3, Ayy)
	SaveReal(YDHT, p, 4, Cxx)
	SaveReal(YDHT, p, 5, Cyy)
	SaveReal(YDHT, p, 6, Axx + 300 * Cos(Atan2(Cyy - Ayy, Cxx - Axx)) + 45)
	SaveReal(YDHT, p, 7, Ayy + 300 * Sin(Atan2(Cyy - Ayy, Cxx - Axx)) + 45)
	SaveReal(YDHT, p, 8, a)
	SaveBoolean(YDHT, p, 9, true)
	WuGongShengChong(u, 1093681986, 240.0)
	TimerStart(t, 0.03, true, YeChaGun_Action)
	u = nil
	t = nil
end
--疯魔杖法
function IsFengMoShe()
	return GetUnitTypeId(GetAttacker()) == 1869836337 or GetUnitTypeId(GetAttacker()) == 1869836338 or GetUnitTypeId(GetAttacker()) == 1869836339
end
function FengMoShe()
	local p = GetOwningPlayer(GetAttacker())
	local i = 1 + GetPlayerId(p)
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shanghai = 0.0
	local shxishu = 1.0
	local Maxsh = 0.0
	local Minsh = 0.0
	if GetUnitTypeId(GetAttacker()) == 1869836337 then
		shxishu = 1.0
	elseif GetUnitTypeId(GetAttacker()) == 1869836338 then
		shxishu = 3.0
	elseif GetUnitTypeId(GetAttacker()) == 1869836339 then
		shxishu = 13.0
	end
	if UnitHaveItem(u, 1227897143) then
		shxishu = shxishu * 4
	end
	shanghai = ShangHaiGongShi(u, uc, 24.0, 45.0, shxishu, 1093681976)
	WuGongShangHai(u, uc, shanghai)
	uc = nil
	u = nil
	p = nil
end
function IsFengMo()
	return IsCertainWuGong(GetAttacker(), GetTriggerUnit(), 1093681976)
end
function FengMoGun()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local id = 1869836337
	local loc1 = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093679161) >= 1 then
		if GetUnitAbilityLevel(u, 1093682232) >= 1 then
			id = 1869836339
		else
			id = 1869836338
		end
	end
	CreateNUnitsAtLocFacingLocBJ(1, id, p, loc1, loc2)
	UnitApplyTimedLifeBJ(3, 1112820806, bj_lastCreatedUnit)
	if GetUnitAbilityLevel(u, 1093678933) >= 1 then
		CreateNUnitsAtLocFacingLocBJ(1, id, p, loc1, loc2)
		UnitApplyTimedLifeBJ(3, 1112820806, bj_lastCreatedUnit)
	end
	WuGongShengChong(u, 1093681976, 900.0)
	RemoveLocation(loc1)
	RemoveLocation(loc2)
	loc1 = nil
	loc2 = nil
	p = nil
	u = nil
	uc = nil
end
----------丐帮结束--------//
function GaiBang_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsTaiZu))
	TriggerAddAction(t, TaiZuQuan)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsTieBuShan))
	TriggerAddAction(t, TieBuShan)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsFengMo))
	TriggerAddAction(t, FengMoGun)

	Bk = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Bk, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(Bk, Condition(IsFengMoShe))
	TriggerAddAction(Bk, FengMoShe)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsGaiBang))
	TriggerAddAction(t, GaiBangXinFa)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsYeCha))
	TriggerAddAction(t, YeChaGun)
end
----------血刀开始--------//
--血斩千刀
function IsXueZhan()
	return GetSpellAbilityId() == 1093681998
end
function XueZhan_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_xuezhandanwei)) and IsUnitAliveBJ(GetFilterUnit())
end
function XueZhan_Action()
	local u = udg_xuezhandanwei
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093678669) >= 1 then
		shxishu = shxishu + 0.9
	end
	if UnitHaveItem(u, 1227897144) then
		shxishu = shxishu * 4
	end
	shanghai = ShangHaiGongShi(u, uc, 100.0, 200.0, shxishu, 1093681998)
	SetUnitX(u, CheckX(GetLocationX(loc)))
	SetUnitY(u, CheckY(GetLocationY(loc)))
	SetUnitFacing(u, GetUnitFacing(uc) + 180)
	WuGongShangHai(u, uc, shanghai)
	--call DestroyEffect( AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",uc, "origin") )
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", uc, "overhead"))
	SetUnitTimeScale(u, 20)
	SetUnitAnimation(u, "attack")
	RemoveLocation(loc)
	loc = nil
	u = nil
	uc = nil
end
function XueZhanDao_2()
	local t = GetExpiredTimer()
	local l__w = GetHandleId(t)
	local g = CreateGroup()
	local u = udg_xuezhandanwei
	local j = LoadInteger(YDHT, l__w, 1)
	local loc = LoadLocationHandle(YDHT, l__w, 2)
	local jmax = 10 + GetUnitAbilityLevel(u, 1093681998)
	local r = 0.3
	local range = 600.0
	if GetUnitAbilityLevel(u, 1093678668) >= 1 then
		range = range + 400.0
	end
	if GetUnitAbilityLevel(u, 1093678935) >= 1 then
		jmax = jmax + 5
	end
	GroupEnumUnitsInRangeOfLoc(g, loc, range, Condition(XueZhan_Condition))
	if j < jmax then
		if g ~= nil then
			ForGroupBJ(YDWEGetRandomSubGroupNull(1, g), XueZhan_Action)
			SaveInteger(YDHT, l__w, 1, j + 1)
		--call GroupClear(g)
		--call GroupEnumUnitsInRangeOfLoc(g,GetSpellTargetLoc(),range,Condition(function XueZhan_Condition))
		else
			PauseTimer(t)
			DestroyTimer(t)
			FlushChildHashtable(YDHT, l__w)
			RemoveLocation(loc)
			SetUnitTimeScale(u, 1)
			ResetUnitAnimation(u)
		end
	else
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, l__w)
		RemoveLocation(loc)
		SetUnitTimeScale(u, 1)
		ResetUnitAnimation(u)
	end
	GroupClear(g)
	DestroyGroup(g)
	u = nil
	g = nil
	t = nil
	loc = nil
end
function XueZhanDao()
	local u = GetTriggerUnit()
	local t = CreateTimer()
	local l__w = GetHandleId(t)
	local r = 0.3
	udg_xuezhandanwei = u
	if GetUnitAbilityLevel(u, 1093678932) >= 1 then
		r = r - 0.2
	end
	WuGongShengChong(u, 1093681998, 120.0)
	SaveInteger(YDHT, l__w, 1, 0)
	SaveLocationHandle(YDHT, l__w, 2, GetSpellTargetLoc())
	TimerStart(t, r, true, XueZhanDao_2)
	u = nil
	t = nil
end
--血刀刀法
function IsXueDao()
	return IsUnitEnemy(GetAttacker(), GetOwningPlayer(GetTriggerUnit())) and GetUnitAbilityLevel(GetTriggerUnit(), 1093681993) >= 1
end
function XueDaoZhuan()
	local t = GetExpiredTimer()
	local l__w = GetHandleId(t)
	local l__ut = LoadUnitHandle(YDHT, l__w, 0)
	local j = LoadInteger(YDHT, l__w, 2)
	local face = LoadReal(YDHT, l__w, 1)
	local u = LoadUnitHandle(YDHT, l__w, 3)
	if j < 36 then
		SetUnitFacing(l__ut, face + 30.0)
		SetUnitX(l__ut, CheckX(GetUnitX(u) + 200 * Sin(Deg2Rad(face))))
		SetUnitY(l__ut, CheckY(GetUnitY(u) + 200 * Cos(Deg2Rad(face))))
		SaveReal(YDHT, l__w, 1, face + 30.0)
		SaveInteger(YDHT, l__w, 2, j + 1)
	else
		KillUnit(l__ut)
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, l__w)
	end
	t = nil
	l__ut = nil
	u = nil
end
function XueDao_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit())
end
function XueDao_Action()
	local shxishu = 1.0
	local shanghai = 0.0
	local u = GetTriggerUnit()
	local uc = GetEnumUnit()
	if GetUnitAbilityLevel(u, 1093678669) >= 1 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093678672) >= 1 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093679158) >= 1 then
		shxishu = shxishu + 1.5
	end
	if UnitHaveItem(u, 1227897144) then
		shxishu = shxishu * 4
	end
	shanghai = ShangHaiGongShi(u, uc, 18, 27, shxishu, 1093681993)
	--call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,R2S(shanghai))
	WuGongShangHai(u, uc, shanghai)
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl", uc, "overhead"))
	u = nil
	uc = nil
end
function XueDaoDao()
	local u = GetTriggerUnit()
	local uc = GetAttacker()
	local l__ut = nil
	local t = CreateTimer()
	local p = GetOwningPlayer(u)
	local g = CreateGroup()
	local l__w = GetHandleId(t)
	local loc = GetUnitLoc(u)
	local r = 200.0 + I2R(jingmai[1 + GetPlayerId(p)]) * 15
	if GetUnitAbilityLevel(u, 1093678929) >= 1 then
		r = r + 200.0
	end
	if GetRandomReal(1.0, 300.0) <= 15 + fuyuan[1 + GetPlayerId(p)] // 5 then
		CreateNUnitsAtLoc(1, 1747988549, p, loc, bj_UNIT_FACING)
		l__ut = bj_lastCreatedUnit
		SaveUnitHandle(YDHT, l__w, 0, l__ut)
		SaveReal(YDHT, l__w, 1, GetUnitFacing(l__ut))
		SaveInteger(YDHT, l__w, 2, 0)
		SaveUnitHandle(YDHT, l__w, 3, u)
		TimerStart(t, 0.05, true, XueDaoZhuan)
		GroupEnumUnitsInRangeOfLoc(g, loc, r, Condition(XueDao_Condition))
		ForGroupBJ(g, XueDao_Action)
		WuGongShengChong(u, 1093681993, 900.0)
	end
	RemoveLocation(loc)
	GroupClear(g)
	DestroyGroup(g)
	u = nil
	uc = nil
	l__ut = nil
	loc = nil
	p = nil
	t = nil
end
--血魔刀法
function IsXueMo()
	return IsCertainWuGong(GetAttacker(), GetTriggerUnit(), 1093681994)
end
function XueMo_Action()
	local t = GetExpiredTimer()
	local p = GetHandleId(t)
	local u = LoadUnitHandle(YDHT, p, 0)
	local uc = LoadUnitHandle(YDHT, p, 1)
	local j = LoadInteger(YDHT, p, 2)
	local lastX = LoadReal(YDHT, p, 3)
	local lastY = LoadReal(YDHT, p, 4)
	local nowX = GetUnitX(uc)
	local nowY = GetUnitY(uc)
	local dist = SquareRoot((lastX - nowX) * (lastX - nowX) + (lastY - nowY) * (lastY - nowY))
	local shxishu = 1.0
	local shanghai = 0.0
	local jmax = 20
	if GetUnitAbilityLevel(u, 1093678669) >= 1 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093679158) >= 1 then
		shxishu = shxishu + 1.5
	end
	if UnitHaveItem(u, 1227897144) then
		shxishu = shxishu * 4
	end
	if GetUnitAbilityLevel(u, 1093681995) >= 1 then
		jmax = jmax + 20
	end
	if GetUnitAbilityLevel(u, 1093678935) >= 1 then
		jmax = jmax + 20
	end
	if j < jmax then
		if dist > 2.0 then
			shxishu = 1.0 + dist / 5.0
		end
		shanghai = ShangHaiGongShi(u, uc, 3.5, 3.5, shxishu, 1093681994)
		if uc ~= nil and IsUnitAliveBJ(uc) then
			WuGongShangHai(u, uc, shanghai)
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl", uc, "overhead"))
		end
		SaveInteger(YDHT, p, 2, j + 1)
		SaveReal(YDHT, p, 3, nowX)
		SaveReal(YDHT, p, 4, nowY)
	else
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, p)
	end
	t = nil
	u = nil
	uc = nil
end
function XueMoDao()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local t = CreateTimer()
	local p = GetHandleId(t)
	local r = 1000.0
	if GetUnitAbilityLevel(u, 1093678927) >= 1 then
		r = 400.0
	end
	SaveUnitHandle(YDHT, p, 0, u)
	SaveUnitHandle(YDHT, p, 1, uc)
	SaveInteger(YDHT, p, 2, 0)
	SaveReal(YDHT, p, 3, GetUnitX(uc))
	SaveReal(YDHT, p, 4, GetUnitY(uc))
	WuGongShengChong(u, 1093681994, r)
	TimerStart(t, 0.25, true, XueMo_Action)
	u = nil
	uc = nil
	t = nil
end
--佛灭万劫功
function IsFoMie()
	return IsCertainWuGong(GetAttacker(), GetTriggerUnit(), 1093681995)
end
function FoMie_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_fomiedanwei)) and IsUnitAliveBJ(GetFilterUnit()) and IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false and GetUnitTypeId(GetFilterUnit()) ~= 1311780920 and GetUnitTypeId(GetFilterUnit()) ~= 1311780921
end
function FoMie_Action()
	local u = udg_fomiedanwei
	local uc = GetEnumUnit()
	local myX = GetUnitX(u)
	local myY = GetUnitY(u)
	local hisX = GetUnitX(uc)
	local hisY = GetUnitY(uc)
	local dist = 0.0
	local loc = nil
	local angle = 0.0
	local i = 0
	local perc = 0.3
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678669) >= 1 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093679158) >= 1 then
		shxishu = shxishu + 1.5
	end
	if UnitHaveItem(u, 1227897144) then
		shxishu = shxishu * 4
	end
	if dist > 20.0 then
		shxishu = 1.0 + 2000.0 / dist
	end
	if GetUnitAbilityLevel(u, 1093682227) >= 1 then
		shanghai = ShangHaiGongShi(u, uc, 1.2, 1.2, shxishu, 1093681994)
		if uc ~= nil and IsUnitAliveBJ(uc) then
			WuGongShangHai(u, uc, shanghai)
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl", uc, "overhead"))
		end
	end
	if GetUnitAbilityLevel(u, 1093678935) >= 1 then
		perc = perc + 0.2
	end
	hisX = GetUnitX(uc)
	hisY = GetUnitY(uc)
	angle = Atan2(hisY - myY, hisX - myX)
	dist = SquareRoot((hisX - myX) * (hisX - myX) + (hisY - myY) * (hisY - myY))
	loc = Location(hisX - perc * dist * Cos(angle), hisY - perc * dist * Sin(angle))
	SetUnitPositionLoc(uc, loc)
	if dist < 300 then
		WanBuff(u, uc, 11)
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function FoMie_setfalse()
	local t = GetExpiredTimer()
	udg_shifoufomie = false
	--call BJDebugMsg("等待之后")
	PauseTimer(t)
	DestroyTimer(t)
	t = nil
end
function FoMie()
	local t = GetExpiredTimer()
	local tm = CreateTimer()
	local p = GetHandleId(t)
	local uc = LoadUnitHandle(YDHT, p, 0)
	local j = LoadInteger(YDHT, p, 1)
	local jmax = 10
	local g = CreateGroup()
	local x = GetUnitX(udg_fomiedanwei)
	local y = GetUnitY(udg_fomiedanwei)
	local range = 800.0 + 100.0 * GetUnitAbilityLevel(udg_fomiedanwei, 1093681995)
	if GetUnitAbilityLevel(udg_fomiedanwei, 1093678672) >= 1 then
		range = range + 500.0
	end
	if GetUnitAbilityLevel(udg_fomiedanwei, 1093678926) >= 1 then
		jmax = jmax + 10
	end
	if j >= jmax then
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, p)
		--call BJDebugMsg("等待之前")
		--10秒钟CD
		TimerStart(tm, 10.0, false, FoMie_setfalse)
	else
		GroupEnumUnitsInRange(g, x, y, range, Condition(FoMie_Condition))
		ForGroupBJ(g, FoMie_Action)
		GroupClear(g)
		DestroyGroup(g)
		SaveInteger(YDHT, p, 1, j + 1)
	end
	uc = nil
	g = nil
	t = nil
	tm = nil
end
function FoMieWanJieGong()
	local t = CreateTimer()
	local p = GetHandleId(t)
	udg_fomiedanwei = GetAttacker()
	SaveUnitHandle(YDHT, p, 0, GetTriggerUnit())
	SaveInteger(YDHT, p, 1, 0)
	if udg_shifoufomie == false then
		udg_shifoufomie = true
		TimerStart(t, 0.3, true, FoMie)
		WuGongShengChong(udg_fomiedanwei, 1093681995, 160.0)
	end
	t = nil
end
--血刀经·一刀绝空
function IsXueDaoJing()
	return GetSpellAbilityId() == 1093682248
end
function XueDaoJing_Action()
	local t = GetExpiredTimer()
	local p = GetHandleId(t)
	local u = LoadUnitHandle(YDHT, p, 0)
	local uc = LoadUnitHandle(YDHT, p, 1)
	local l__ut = LoadUnitHandle(YDHT, p, 2)
	local loc = LoadLocationHandle(YDHT, p, 3)
	local myX = GetLocationX(loc)
	local myY = GetLocationY(loc)
	local hisX = GetUnitX(uc)
	local hisY = GetUnitY(uc)
	local loc2 = nil
	local dist = 0.0
	local angle = 0.0
	local i = LoadInteger(YDHT, p, 4)
	local perc = 0.04
	local imax = 25
	local shxishu = 1.0
	local shanghai = 0
	shanghai = ShangHaiGongShi(u, uc, 400, 300, shxishu, 1093682248)
	if GetUnitAbilityLevel(u, 1093678669) >= 1 then
		shxishu = shxishu + 0.9
	end
	if GetUnitAbilityLevel(u, 1093679158) >= 1 then
		shxishu = shxishu + 1.5
	end
	if YDWEUnitHasItemOfTypeBJNull(u, 1227897144) then
		shxishu = shxishu * 4
	end
	if i <= imax then
		hisX = GetUnitX(uc)
		hisY = GetUnitY(uc)
		angle = Atan2(hisY - myY, hisX - myX)
		dist = SquareRoot((hisX - myX) * (hisX - myX) + (hisY - myY) * (hisY - myY))
		loc2 = Location(myX + perc * i * dist * Cos(angle), myY + perc * i * dist * Sin(angle))
		SetUnitPositionLoc(l__ut, loc2)
		--call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,R2S(hisX)+","+R2S(hisY)+","+R2S(myX)+","+R2S(myY)+","+R2S(GetLocationX(loc2))+","+R2S(GetLocationY(loc2))+","+R2S(dist)+","+R2S(angle))
		SaveInteger(YDHT, p, 4, i + 1)
	else
		WuGongShangHai(u, uc, shanghai)
		DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", uc, "overhead"))
		SetUnitTimeScale(l__ut, 1)
		ResetUnitAnimation(l__ut)
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, p)
		if GetUnitAbilityLevel(u, 1093678936) >= 1 then
			UnitApplyTimedLifeBJ(100, 1112820806, l__ut)
		--call UnitRemoveAbility(ut,'Aloc')
		else
			KillUnit(l__ut)
			RemoveUnit(l__ut)
		end
		RemoveLocation(loc)
		if GetUnitAbilityLevel(u, 1093678672) >= 1 then
			CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
			ShowUnitHide(bj_lastCreatedUnit)
			UnitAddAbility(bj_lastCreatedUnit, 1093678903)
			IssueTargetOrderById(bj_lastCreatedUnit, 852111, uc)
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
			CreateTextTagLocBJ("内伤", loc2, 60.0, 12.0, 65.0, 55.0, 42.0, 0)
			Nw(3.0, bj_lastCreatedTextTag)
			SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
			SetUnitDizzy(uc, 5.0, "Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget.mdl")
		end
	end
	RemoveLocation(loc2)
	t = nil
	u = nil
	uc = nil
	l__ut = nil
	loc = nil
	loc2 = nil
end
function XueDaoJing()
	local u = GetTriggerUnit()
	local uc = GetSpellTargetUnit()
	local loc = GetUnitLoc(u)
	local t = CreateTimer()
	local p = GetHandleId(t)
	local l__ut = nil
	WuGongShengChong(u, 1093682248, 120)
	--call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"为什么不显示呢")
	CreateNUnitsAtLoc(1, 1865429333, GetOwningPlayer(u), loc, GetUnitFacing(u))
	l__ut = bj_lastCreatedUnit
	ShowUnit(l__ut, true)
	SaveUnitHandle(YDHT, p, 0, u)
	SaveUnitHandle(YDHT, p, 1, uc)
	SaveUnitHandle(YDHT, p, 2, l__ut)
	SaveLocationHandle(YDHT, p, 3, loc)
	SaveInteger(YDHT, p, 4, 0)
	SetUnitTimeScale(l__ut, 1.0)
	SetUnitAnimation(l__ut, "attack slam")
	TimerStart(t, 0.03, true, XueDaoJing_Action)
	u = nil
	uc = nil
	l__ut = nil
	loc = nil
end
function XueDaoJing_Condition()
	return GetUnitTypeId(GetAttacker()) == 1865429333
end
function XueDaoJing_Action2()
	local p = GetOwningPlayer(GetAttacker())
	local i = 1 + GetPlayerId(p)
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0
	if YDWEUnitHasItemOfTypeBJNull(u, 1227897144) then
		shxishu = shxishu * 4
	end
	shanghai = ShangHaiGongShi(u, uc, 200, 1200, shxishu, 1093682248)
	WuGongShangHai(u, uc, shanghai)
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", uc, "overhead"))
	p = nil
	u = nil
	uc = nil
end
function XueDao_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsXueDaoJing))
	TriggerAddAction(t, XueDaoJing)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(XueDaoJing_Condition))
	TriggerAddAction(t, XueDaoJing_Action2)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsXueZhan))
	TriggerAddAction(t, XueZhanDao)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsXueDao))
	TriggerAddAction(t, XueDaoDao)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsXueMo))
	TriggerAddAction(t, XueMoDao)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsFoMie))
	TriggerAddAction(t, FoMieWanJieGong)
	t = nil
end
----------血刀结束--------//
----------峨眉开始--------//
--四象掌
function IsSiXiang()
	local r = 0.0
	if GetUnitAbilityLevel(GetAttacker(), 1093681972) >= 1 then
		r = fuyuan[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] * 4
	else
		r = fuyuan[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))]
	end
	return GetRandomReal(0.0, 100.0) < 15 + r / 5 and (GetUnitAbilityLevel(GetAttacker(), 1093681975) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())))
end
function SiXiang_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) == true and IsUnitAliveBJ(GetFilterUnit())
end
function SiXiang2()
	local p = GetOwningPlayer(udg_sixiangdanwei)
	local i = 1 + GetPlayerId(p)
	local shanghai = 0.0
	local shxishu = 1.0
	if GetUnitAbilityLevel(udg_sixiangdanwei, 1093678926) >= 1 then
		shxishu = shxishu + 0.8
	end
	shanghai = ShangHaiGongShi(udg_sixiangdanwei, GetEnumUnit(), 12, 20, shxishu, 1093681975)
	WuGongShangHai(udg_sixiangdanwei, GetEnumUnit(), shanghai)
	if GetUnitAbilityLevel(udg_sixiangdanwei, 1093681974) >= 1 and GetRandomReal(1.0, 100.0) <= 27 then
		WanBuff(udg_sixiangdanwei, GetEnumUnit(), 11)
	end
	p = nil
end
function SiXiangZhang()
	local u = GetAttacker()
	local p = GetOwningPlayer(u)
	local i = 0
	local imax = 0
	local loc = GetUnitLoc(u)
	local loc2 = GetUnitLoc(GetTriggerUnit())
	local loc3 = _array_()
	if GetUnitAbilityLevel(u, 1093678935) >= 1 then
		imax = 8
	else
		imax = 5
	end
	i = 1
	for _ in _loop_() do
		if i > imax then break end
		loc3[i] = PolarProjectionBJ(loc, 100.0 * I2R(i), 0)
		loc3[i + imax] = PolarProjectionBJ(loc, 100.0 * I2R(i), 90.0)
		loc3[i + 2 * imax] = PolarProjectionBJ(loc, 100.0 * I2R(i), 180.0)
		loc3[i + 3 * imax] = PolarProjectionBJ(loc, 100.0 * I2R(i), 270.0)
		i = i + 1
	end
	i = 1
	for _ in _loop_() do
		if i > imax then break end
		CreateNUnitsAtLocFacingLocBJ(1, 1747988546, p, loc3[i], loc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112820806, 0.5)
		i = i + 1
	end
	i = 1
	for _ in _loop_() do
		if i > imax then break end
		CreateNUnitsAtLocFacingLocBJ(1, 1747988546, p, loc3[i + imax], loc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112820806, 0.5)
		i = i + 1
	end
	i = 1
	for _ in _loop_() do
		if i > imax then break end
		CreateNUnitsAtLocFacingLocBJ(1, 1747988546, p, loc3[i + 2 * imax], loc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112820806, 0.5)
		i = i + 1
	end
	i = 1
	for _ in _loop_() do
		if i > imax then break end
		CreateNUnitsAtLocFacingLocBJ(1, 1747988546, p, loc3[i + 3 * imax], loc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112820806, 0.5)
		i = i + 1
	end
	WuGongShengChong(u, 1093681975, 900.0)
	udg_sixiangdanwei = GetAttacker()
	GroupEnumUnitsInRangeOfLoc(udg_shanghaidanweizu, loc, imax * 100.0, Condition(SiXiang_Condition))
	-- call ForGroupBJ(GetUnitsInRangeOfLocMatching(imax*100.00,loc2,Condition(function SiXiang_Condition)),function SiXiang)
	ForGroupBJ(udg_shanghaidanweizu, SiXiang2)
	GroupClear(udg_shanghaidanweizu)
	RemoveLocation(loc)
	RemoveLocation(loc2)
	i = 1
	for _ in _loop_() do
		if i >= 4 * imax then break end
		RemoveLocation(loc3[i])
		loc3[i] = nil
		i = i + 1
	end
	u = nil
	p = nil
	loc = nil
	loc2 = nil
end
--佛光普照
function IsFoGuang()
	return GetSpellAbilityId() == 1093681972 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function FoGuang_Condition()
	local u = LoadUnitHandle(YDHT, StringHash("佛光"), StringHash("普照"))
	local uc = GetFilterUnit()
	local shanghai = GetWidgetLife(uc) * 0.03 * GetUnitAbilityLevel(u, 1093681972)
	local t = CreateTimer()
	local r = 2.0
	if GetUnitAbilityLevel(u, 1093678672) >= 1 then
		r = 4.0
	end
	if GetUnitAbilityLevel(u, 1093678926) >= 1 then
		shanghai = shanghai * 2
	end
	SetWidgetLife(u, GetWidgetLife(u) + shanghai)
	if IsUnitEnemy(uc, GetOwningPlayer(u)) == true and IsUnitAliveBJ(uc) and IsUnitMonster(uc) == false then
		if ModuloInteger(GetUnitPointValue(uc), 100) == 0 then
			SetWidgetLife(uc, GetWidgetLife(uc) - shanghai)
		else
			SetWidgetLife(uc, GetWidgetLife(uc) - shanghai / 6)
		end
		SetUnitDizzy(uc, r, "Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget.mdl")
	else
		if IsUnitType(uc, UNIT_TYPE_HERO) ~= nil then -- INLINED!!
			SetWidgetLife(uc, GetWidgetLife(uc) + shanghai)
		end
	end
	u = nil
	uc = nil
	t = nil
	return false
end
function FoGuangHuiXie()
	local tm = GetExpiredTimer()
	local i = LoadInteger(YDHT, GetHandleId(tm), 1) + 1
	local u = LoadUnitHandle(YDHT, GetHandleId(tm), 0)
	SaveInteger(YDHT, GetHandleId(tm), 1, i)
	SetWidgetLife(u, GetWidgetLife(u) + 0.02 * GetUnitState(u, UNIT_STATE_MAX_LIFE))
	--call BJDebugMsg("触发一次")
	if i >= 60 then
		FlushChildHashtable(YDHT, GetHandleId(tm))
		PauseTimer(tm)
		DestroyTimer(tm)
	end
	u = nil
	tm = nil
end
function FoGuangZhang()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local g = CreateGroup()
	local r = 700.0
	local x = GetUnitX(u)
	local y = GetUnitY(u)
	local tm = CreateTimer()
	WuGongShengChong(u, 1093681972, 200.0)
	if GetUnitAbilityLevel(u, 1093682254) >= 1 then
		r = 1500.0
	end
	if GetUnitAbilityLevel(u, 1093678931) >= 1 then
		SaveUnitHandle(YDHT, GetHandleId(tm), 0, u)
		SaveInteger(YDHT, GetHandleId(tm), 1, 0)
		TimerStart(tm, 0.25, true, FoGuangHuiXie)
	end
	SaveUnitHandle(YDHT, StringHash("佛光"), StringHash("普照"), u)
	GroupEnumUnitsInRange(g, x, y, r, Condition(FoGuang_Condition))
	DestroyGroup(g)
	u = nil
	p = nil
	g = nil
	tm = nil
end
--金顶绵掌
function IsJinDing()
	return GetRandomReal(0.0, 100.0) < 15 + fuyuan[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] // 5 and (GetUnitAbilityLevel(GetAttacker(), 1093681970) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())))
end
function JinDingZhang()
	local u = GetAttacker()
	local l__ut = GetTriggerUnit()
	local shanghai = 0.0
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local shxishu = 1.0
	if GetUnitAbilityLevel(u, 1093681974) >= 1 then
		shxishu = shxishu + 0.5
	end
	if GetUnitAbilityLevel(u, 1093678931) >= 1 then
		shxishu = shxishu + 0.7
	end
	shanghai = ShangHaiGongShi(u, l__ut, 130, 106, shxishu, 1093681970)
	AddSpecialEffectTargetUnitBJ("overhead", GetTriggerUnit(), "Abilities\\Spells\\Other\\Transmute\\GoldBottleMissile.mdl")
	DestroyEffect(GetLastCreatedEffectBJ())
	WuGongShangHai(u, l__ut, shanghai)
	if jingmai[i] >= 20 then
		YDWEJumpTimer(l__ut, 0, 0.0, 1, 0.01, GetRandomReal(200, 500))
	end
	WuGongShengChong(u, 1093681970, 1000.0)
	u = nil
	l__ut = nil
	p = nil
end
--灭绝剑法
function IsMieJue()
	return GetSpellAbilityId() == 1093681973
end
function MieJue_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_miejuedanwei)) and IsUnitAliveBJ(GetFilterUnit())
end
function MieJue_Action()
	local p = GetOwningPlayer(udg_miejuedanwei)
	local i = 1 + GetPlayerId(p)
	local shanghai = 0.0
	local shxishu = 1.0
	if GetUnitAbilityLevel(udg_miejuedanwei, 1093678925) >= 1 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(udg_miejuedanwei, 1093678897) >= 1 then
		shxishu = shxishu + 0.7
	end
	shanghai = ShangHaiGongShi(udg_miejuedanwei, GetEnumUnit(), 5.5, 5.5, shxishu, 1093681973)
	WuGongShangHai(udg_miejuedanwei, GetEnumUnit(), shanghai)
	p = nil
end
function On_Timer()
	local t = GetExpiredTimer()
	local p = GetHandleId(t)
	local x = LoadReal(YDHT, p, 1) + LoadReal(YDHT, p, 3)
	local y = LoadReal(YDHT, p, 2) + LoadReal(YDHT, p, 4)
	local j = LoadInteger(YDHT, p, 0) + 1
	local i = 0
	local u = nil
	local jmax = 30
	local a = 0.0
	local loc = nil
	SaveReal(YDHT, p, 1, x)
	SaveReal(YDHT, p, 2, y)
	SaveInteger(YDHT, p, 0, j)
	if GetUnitAbilityLevel(udg_miejuedanwei, 1093678935) >= 1 then
		jmax = jmax * 2
	end
	--call DisplayTextToPlayer(Player(0),0,0,"x="+R2S(x)+", y="+R2S(y))
	for _ in _loop_() do
		if i >= 12 then break end
		u = LoadUnitHandle(YDHT, p, 5 + i)
		loc = GetUnitLoc(u)
		a = (j * 12.0 + i * 30.0) * bj_DEGTORAD
		SetUnitX(u, CheckX(x + 150.0 * Cos(a)))
		SetUnitY(u, CheckY(y + 150.0 * Sin(a)))
		GroupEnumUnitsInRangeOfLoc(udg_shanghaidanweizu, loc, 100, Condition(MieJue_Condition))
		ForGroupBJ(udg_shanghaidanweizu, MieJue_Action)
		GroupClear(udg_shanghaidanweizu)
		RemoveLocation(loc)
		if GetUnitAbilityLevel(udg_miejuedanwei, 1093679161) >= 1 then
			u = LoadUnitHandle(YDHT, p, 17 + i)
			loc = GetUnitLoc(u)
			SetUnitX(u, CheckX(GetUnitX(udg_miejuedanwei) + 150.0 * Cos(a)))
			SetUnitY(u, CheckY(GetUnitY(udg_miejuedanwei) + 150.0 * Sin(a)))
			GroupEnumUnitsInRangeOfLoc(udg_shanghaidanweizu, loc, 100, Condition(MieJue_Condition))
			ForGroupBJ(udg_shanghaidanweizu, MieJue_Action)
			GroupClear(udg_shanghaidanweizu)
			RemoveLocation(loc)
		end
		i = i + 1
	end
	if j >= jmax then
		i = 0
		for _ in _loop_() do
			if i >= 12 then break end
			KillUnit(LoadUnitHandle(YDHT, p, 5 + i))
			if GetUnitAbilityLevel(udg_miejuedanwei, 1093679161) >= 1 then
				KillUnit(LoadUnitHandle(YDHT, p, 17 + i))
			end
			i = i + 1
		end
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, p)
	end
	t = nil
	loc = nil
	u = nil
end
function MieJueJian()
	local t = CreateTimer()
	local p = GetHandleId(t)
	local u = GetTriggerUnit()
	local x = GetUnitX(u)
	local y = GetUnitY(u)
	local i = 0
	local a
	a = Atan2(GetSpellTargetY() - y, GetSpellTargetX() - x)
	SaveInteger(YDHT, p, 0, 0)
	SaveReal(YDHT, p, 1, x)
	SaveReal(YDHT, p, 2, y)
	SaveReal(YDHT, p, 3, 30.0 * Cos(a))
	SaveReal(YDHT, p, 4, 30.0 * Sin(a))
	for _ in _loop_() do
		if i >= 12 then break end
		a = 30.0 * i * bj_DEGTORAD
		SaveUnitHandle(YDHT, p, 5 + i, CreateUnit(GetOwningPlayer(u), 1747988547, x + 150.0 * Cos(a), y + 150.0 * Sin(a), GetUnitFacing(u)))
		if GetUnitAbilityLevel(u, 1093679161) >= 1 then
			SaveUnitHandle(YDHT, p, 17 + i, CreateUnit(GetOwningPlayer(u), 1747988547, x + 150.0 * Cos(a), y + 150.0 * Sin(a), 0.0))
		end
		-- 在hashtable中你需要自己规划好整数路径的分配
		-- 比如在这里, 5,6,...15,16 用于存储12个马甲
		i = i + 1
	end
	udg_miejuedanwei = u
	WuGongShengChong(u, 1093681973, 250.0)
	TimerStart(t, 0.03, true, On_Timer)
	u = nil
	t = nil
end
--峨眉九阳功
function IsEMeiJiuYang()
	return GetSpellAbilityId() == 1093681974 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function EMeiJiuYang_Condition()
	return IsUnitAliveBJ(GetFilterUnit())
end
function EMeiJiuYang_Action2()
	local t = GetExpiredTimer()
	local p = GetHandleId(t)
	local j = LoadInteger(YDHT, p, 2)
	local u = LoadUnitHandle(YDHT, p, 0)
	local uc = LoadUnitHandle(YDHT, p, 1)
	local shanghai = 0.0
	local shxishu = 1.0
	local l__ut = nil
	local loc = GetUnitLoc(u)
	shanghai = ShangHaiGongShi(u, uc, 45.0, 45.0, shxishu, 1093681974)
	if uc ~= nil and IsUnitEnemy(uc, GetOwningPlayer(u)) == true and IsUnitAliveBJ(uc) then
		WuGongShangHai(u, uc, shanghai)
		CreateNUnitsAtLoc(1, 1747988547, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		l__ut = bj_lastCreatedUnit
		ShowUnitHide(l__ut)
		UnitAddAbility(l__ut, 1094935410)
		IssueTargetOrderById(l__ut, 852189, uc)
		UnitApplyTimedLife(l__ut, 1112045413, 3.0)
	else
		SetUnitState(uc, UNIT_STATE_MANA, GetUnitState(uc, UNIT_STATE_MANA) + 20)
	end
	SaveInteger(YDHT, p, 2, j + 1)
	if j >= 10 then
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, p)
	end
	RemoveLocation(loc)
	loc = nil
	t = nil
	u = nil
	uc = nil
	l__ut = nil
end
function EMeiJiuYang_Action()
	local u = GetTriggerUnit()
	local uc = GetEnumUnit()
	local t = CreateTimer()
	local p = GetHandleId(t)
	SaveUnitHandle(YDHT, p, 0, u)
	SaveUnitHandle(YDHT, p, 1, uc)
	SaveInteger(YDHT, p, 2, 1)
	TimerStart(t, 1.0, true, EMeiJiuYang_Action2)
	u = nil
	t = nil
	uc = nil
end
function EMeiJiuYang()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local g = CreateGroup()
	local r = 500.0
	local x = GetUnitX(u)
	local y = GetUnitY(u)
	WuGongShengChong(u, 1093681974, 200.0)
	if GetUnitAbilityLevel(u, 1093682254) >= 1 then
		r = r + 300.0
	end
	if GetUnitAbilityLevel(u, 1093679155) >= 1 then
		YDWEGeneralBounsSystemUnitSetBonus(u, 1, 0, 20)
	end
	GroupEnumUnitsInRange(g, x, y, r, Condition(EMeiJiuYang_Condition))
	ForGroupBJ(g, EMeiJiuYang_Action)
	GroupClear(g)
	DestroyGroup(g)
	u = nil
	p = nil
	g = nil
end
----------峨眉结束--------//
function EMei_Trigger()

	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsSiXiang))
	TriggerAddAction(t, SiXiangZhang)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsFoGuang))
	TriggerAddAction(t, FoGuangZhang)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsEMeiJiuYang))
	TriggerAddAction(t, EMeiJiuYang)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsJinDing))
	TriggerAddAction(t, JinDingZhang)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsMieJue))
	TriggerAddAction(t, MieJueJian)

	t = nil
end
----------武当开始--------//
--柔云掌
function IsRouYun()
	return GetUnitAbilityLevel(GetAttacker(), 1093678148) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) and GetRandomReal(0.0, 100.0) <= 15.0
end
function RouYunZhang()
	local u = GetAttacker()
	local loc = GetUnitLoc(GetTriggerUnit())
	WuGongShengChong(u, 1093678148, 500.0)
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	UnitAddAbility(bj_lastCreatedUnit, 1093679184)
	ShowUnitHide(bj_lastCreatedUnit)
	IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852488, loc)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	RemoveLocation(loc)
	u = nil
	loc = nil
end
function Xc()
	return GetEventDamage() == 0.41
end
function Yc()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093679185) ~= 0 then
		shxishu = shxishu + 0.5
	end
	if GetUnitAbilityLevel(u, 1093678897) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093678664) ~= 0 then
		shxishu = shxishu + 0.7
	end
	shanghai = ShangHaiGongShi(u, uc, 14, 30, shxishu, 1093678148)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678930) ~= 0 and GetUnitAbilityLevel(u, 1093678932) ~= 0 and UnitHasBuffBJ(uc, 1110454328) == false then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		UnitAddAbility(bj_lastCreatedUnit, 1093678412)
		ShowUnitHide(bj_lastCreatedUnit)
		IssueTargetOrderById(bj_lastCreatedUnit, 852095, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
--绕指柔剑法
function dD()
	return GetEventDamage() == 0.42
end
function eD()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093679185) ~= 0 then
		shxishu = shxishu + 0.5
	end
	if GetUnitAbilityLevel(u, 1093678933) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093678666) ~= 0 then
		shxishu = shxishu + 0.7
	end
	shanghai = ShangHaiGongShi(u, uc, 60, 120, shxishu, 1093679187)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678935) ~= 0 and GetRandomInt(1, 100) <= 30 and UnitHasBuffBJ(uc, 1111844210) == false then
		WanBuff(u, uc, 8)
	end
	if GetUnitAbilityLevel(u, 1093678669) ~= 0 and GetRandomInt(1, 100) <= 30 and UnitHasBuffBJ(uc, 1110454323) == false then
		WanBuff(u, uc, 3)
	end
	RemoveLocation(loc)
	WuGongShengChong(u, 1093679187, 500.0)
	u = nil
	uc = nil
	loc = nil
end
--太极拳
function gD()
	return GetSpellAbilityId() == 1093679186
end
function hD()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit())
end
function iD()
	local u = GetTriggerUnit()
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093679190) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093682254) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678929) ~= 0 then
		shxishu = shxishu + 0.8
	end
	shanghai = ShangHaiGongShi(u, uc, 150.0, 150.0, shxishu, 1093679186)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678668) ~= 0 and GetRandomInt(1, 100) <= 50 and UnitHasBuffBJ(uc, 1110454322) == false then
		WanBuff(u, uc, 1)
	end
	if GetUnitAbilityLevel(u, 1093678925) ~= 0 and GetRandomInt(1, 100) <= 50 and UnitHasBuffBJ(uc, 1112896364) == false then
		WanBuff(u, uc, 5)
	end
	RemoveLocation(loc)
	loc = nil
	u = nil
	uc = nil
end
function jD()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	bj_forLoopAIndex = 1
	bj_forLoopAIndexEnd = 60
	for _ in _loop_() do
		if bj_forLoopAIndex > bj_forLoopAIndexEnd then break end
		DestroyEffect(AddSpecialEffectLocBJ(pu(loc, 400.0, I2R(bj_forLoopAIndex) * 6.0), "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl"))
		bj_forLoopAIndex = bj_forLoopAIndex + 1
	end
	bj_forLoopAIndex = 1
	bj_forLoopAIndexEnd = 20
	for _ in _loop_() do
		if bj_forLoopAIndex > bj_forLoopAIndexEnd then break end
		DestroyEffect(AddSpecialEffectLocBJ(pu(pu(loc, 200.0, 0), 40.0, I2R(bj_forLoopAIndex) * 18.0), "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl"))
		DestroyEffect(AddSpecialEffectLocBJ(pu(pu(loc, 200.0, 180.0), 40.0, I2R(bj_forLoopAIndex) * 18.0), "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl"))
		bj_forLoopAIndex = bj_forLoopAIndex + 1
	end
	bj_forLoopBIndex = 1
	bj_forLoopBIndexEnd = 30
	for _ in _loop_() do
		if bj_forLoopBIndex > bj_forLoopBIndexEnd then break end
		DestroyEffect(AddSpecialEffectLocBJ(pu(pu(loc, 200.0, 0.0), 200.0, I2R(bj_forLoopBIndex) * 6.0), "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl"))
		DestroyEffect(AddSpecialEffectLocBJ(pu(pu(loc, 200.0, 180.0), 200.0, I2R(bj_forLoopBIndex) * 6.0 + 180.0), "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl"))
		bj_forLoopBIndex = bj_forLoopBIndex + 1
	end
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(500.0, loc, Condition(hD)), iD)
	WuGongShengChong(u, 1093679186, 250.0)
	RemoveLocation(loc)
	u = nil
	loc = nil
end
--纯阳无级功
function mD()
	return GetSpellAbilityId() == 1093679185
end
function nD()
	local t = GetExpiredTimer()
	local p = GetHandleId(t)
	local u = LoadUnitHandle(YDHT, p, 0)
	local loc = GetUnitLoc(u)
	if LoadReal(YDHT, p, 1) >= 2000.0 then
		FlushChildHashtable(YDHT, p)
		DestroyTimer(t)
	else
		SaveReal(YDHT, p, 1, LoadReal(YDHT, p, 1) + 10.0)
		CreateNUnitsAtLoc(1, 1697656917, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 5.0)
		RemoveLocation(loc)
	end
	t = nil
	u = nil
	loc = nil
end
function IsChunYangHuo()
	return GetEventDamage() == 5.17 and (GetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))], 1093679185) >= 1 or GetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))], 1093677877) >= 1)
end
function ChunYangHuo()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	--call BJDebugMsg("伤害执行了1")
	if GetUnitAbilityLevel(u, 1093679185) >= 1 then
		shanghai = ShangHaiGongShi(u, uc, 65, 75, shxishu, 1093679185)
	--圣火令神功
	elseif GetUnitAbilityLevel(u, 1093677877) >= 1 then
		--call BJDebugMsg("伤害执行了2")
		shanghai = ShangHaiGongShi(u, uc, 15, 20, shxishu, 1093677877)
	end
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function oD()
	local t = CreateTimer()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = GetPlayerId(p)
	local loc = nil
	SetUnitManaBJ(u, GetUnitState(u, UNIT_STATE_MANA) + I2R(100 * (yishu[i] // 10 + GetUnitAbilityLevel(u, 1093679185))))
	if GetUnitAbilityLevel(u, 1093678933) ~= 0 then
		loc = GetUnitLoc(u)
		CreateNUnitsAtLoc(1, 1697656880, p, loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093679188)
		IssueTargetOrderById(bj_lastCreatedUnit, 852066, u)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		RemoveLocation(loc)
	end
	if GetUnitAbilityLevel(u, 1093678935) ~= 0 then
		loc = GetUnitLoc(u)
		CreateNUnitsAtLoc(1, 1697656880, p, loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093679189)
		IssueTargetOrderById(bj_lastCreatedUnit, 852101, u)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		TimerStart(t, 0.05, true, nD)
		RemoveLocation(loc)
	end
	WuGongShengChong(u, 1093679185, 250.0)
	t = nil
	u = nil
	p = nil
	loc = nil
end
function qD()
	return GetUnitAbilityLevel(GetTriggerUnit(), 1093679185) ~= 0 and GetSpellAbilityId() ~= 1093678418 and GetSpellAbilityId() ~= 1093679190 and GetSpellAbilityId() ~= 1093679192 and GetSpellAbilityId() ~= 1095329889
end
function rD()
	local u = GetTriggerUnit()
	ModifyHeroStat(1, u, 0, 50)
	YDWEPolledWaitNull(60.0)
	ModifyHeroStat(1, u, 1, 50)
	u = nil
end
function tD()
	return (GetUnitAbilityLevel(GetAttacker(), 1093679185) ~= 0 and UnitHasBuffBJ(GetAttacker(), 1110454345) or GetUnitAbilityLevel(GetAttacker(), 1093679186) ~= 0 and GetUnitAbilityLevel(GetAttacker(), 1093679428) ~= 0) and GetRandomInt(1, 30) <= 5
end
function uD()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function vD()
	local u = GetAttacker()
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093679190) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093682254) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678929) ~= 0 then
		shxishu = shxishu + 0.8
	end
	shanghai = ShangHaiGongShi(u, uc, 50, 50, shxishu, 1093679186)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function wD()
	local u = GetAttacker()
	local loc = GetUnitLoc(u)
	local i = 1
	i = 1
	for _ in _loop_() do
		if i > 60 then break end
		AddSpecialEffectLocBJ(pu(loc, 400.0, I2R(i) * 6.0), "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl")
		DestroyEffect(bj_lastCreatedEffect)
		i = i + 1
	end
	i = 1
	for _ in _loop_() do
		if i > 20 then break end
		AddSpecialEffectLocBJ(pu(pu(loc, 200.0, 0), 40.0, I2R(i) * 18.0), "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl")
		DestroyEffect(bj_lastCreatedEffect)
		AddSpecialEffectLocBJ(pu(pu(loc, 200.0, 180.0), 40.0, I2R(i) * 18.0), "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl")
		DestroyEffect(bj_lastCreatedEffect)
		i = i + 1
	end
	i = 1
	for _ in _loop_() do
		if i > 30 then break end
		AddSpecialEffectLocBJ(pu(pu(loc, 200.0, 0.0), 200.0, I2R(i) * 6.0), "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl")
		DestroyEffect(bj_lastCreatedEffect)
		AddSpecialEffectLocBJ(pu(pu(loc, 200.0, 180.0), 200.0, I2R(i) * 6.0 + 180.0), "Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl")
		DestroyEffect(bj_lastCreatedEffect)
		i = i + 1
	end
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(500.0, loc, Condition(uD)), vD)
	RemoveLocation(loc)
	u = nil
	loc = nil
end
function yD()
	return GetUnitAbilityLevel(GetAttacker(), 1093678897) ~= 0 and GetUnitAbilityLevel(GetAttacker(), 1093679185) ~= 0 and GetRandomInt(1, 30) <= 3
end
function zD()
	WanBuff(GetAttacker(), GetTriggerUnit(), 6)
end
function aD()
	return GetUnitAbilityLevel(GetTriggerUnit(), 1093682254) ~= 0 and GetUnitAbilityLevel(GetTriggerUnit(), 1093679185) ~= 0 and GetRandomInt(1, 20) <= 2
end
function BD()
	WanBuff(GetTriggerUnit(), GetAttacker(), 1)
end
--混沌一气
function CD()
	return GetUnitAbilityLevel(GetTriggerUnit(), 1093679190) ~= 0
end
function cD()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetUnitAbilityLevel(u, 1093678928) ~= 0 then
		Cd[i] = Cd[i] + 1
		if Cd[i] >= 300 then
			Cd[i] = 0
			YDWEGeneralBounsSystemUnitSetBonus(u, 1, 0, 20)
			DisplayTextToPlayer(p, 0, 0, "魔法上限+20")
		end
	end
	WuGongShengChong(u, 1093679190, 4000)
	u = nil
	p = nil
end
function ED()
	return GetUnitAbilityLevel(GetAttacker(), 1093679190) ~= 0 and GetUnitAbilityLevel(GetAttacker(), 1093678930) ~= 0 and GetUnitAbilityLevel(GetAttacker(), 1093678935) ~= 0 and GetRandomInt(1, 100) <= 10
end
function FD()
	WanBuff(GetAttacker(), GetTriggerUnit(), 2)
end
function HD()
	return GetUnitAbilityLevel(GetTriggerUnit(), 1093679190) ~= 0 and GetSpellAbilityId() ~= 1093678418 and GetSpellAbilityId() ~= 1093679190 and GetSpellAbilityId() ~= 1093679192 and GetSpellAbilityId() ~= 1095329889
end
function ID()
	YDWEPolledWaitNull(0.2)
	SetUnitManaBJ(GetTriggerUnit(), GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA) + 100.0)
end
function JD()
	return GetUnitAbilityLevel(GetTriggerUnit(), 1093679190) ~= 0 and GetUnitAbilityLevel(GetTriggerUnit(), 1093679155) ~= 0 and GetUnitAbilityLevel(GetTriggerUnit(), 1093682254) ~= 0 and GetSpellAbilityId() ~= 1093678418 and GetSpellAbilityId() ~= 1093679190 and GetSpellAbilityId() ~= 1093679192 and GetSpellAbilityId() ~= 1095329889 and GetRandomInt(1, 10) <= 3
end
function KD()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	UnitResetCooldown(u)
	AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Human\\Avatar\\AvatarCaster.mdl")
	DestroyEffect(bj_lastCreatedEffect)
	RemoveLocation(loc)
	u = nil
	loc = nil
end
function MD()
	return GetUnitAbilityLevel(GetTriggerUnit(), 1093679190) ~= 0 and GetUnitAbilityLevel(GetTriggerUnit(), 1093678929) ~= 0
end
function ND()
	UnitDamageTarget(GetTriggerUnit(), GetEventDamageSource(), GetEventDamage() * 10.0, true, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
end
----------武当结束--------//
function WuDang_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsRouYun))
	TriggerAddAction(t, RouYunZhang)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(Xc))
	TriggerAddAction(t, Yc)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(dD))
	TriggerAddAction(t, eD)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(gD))
	TriggerAddAction(t, jD)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(mD))
	TriggerAddAction(t, oD)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsChunYangHuo))
	TriggerAddAction(t, ChunYangHuo)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(qD))
	TriggerAddAction(t, rD)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(tD))
	TriggerAddAction(t, wD)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(yD))
	TriggerAddAction(t, zD)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(aD))
	TriggerAddAction(t, BD)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(CD))
	TriggerAddAction(t, cD)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(ED))
	TriggerAddAction(t, FD)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(HD))
	TriggerAddAction(t, ID)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(JD))
	TriggerAddAction(t, KD)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(MD))
	TriggerAddAction(t, ND)
end
----------华山开始--------//
--冲灵剑法
function PD()
	return GetUnitAbilityLevel(GetAttacker(), 1093679191) >= 1 and GetRandomReal(0.0, 100.0) <= 26.0 + 2.0 * I2R(GetUnitAbilityLevel(GetAttacker(), 1093679191)) and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function QD()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local loc = GetUnitLoc(uc)
	local shxishu = 1.0 + I2R(jingmai[1 + GetPlayerId(GetOwningPlayer(u))]) / 20.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678666) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 then
		shxishu = shxishu + 0.8
	end
	DestroyEffect(AddSpecialEffectLocBJ(loc, "war3mapImported\\Mjolnir.mdx"))
	if GetUnitAbilityLevel(u, 1093678930) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1113813619) == false then
		WanBuff(u, uc, 10)
	end
	if GetUnitAbilityLevel(u, 1093678935) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1110454324) == false then
		WanBuff(u, uc, 7)
	end
	shanghai = ShangHaiGongShi(u, uc, 44, 50, shxishu, 1093679191)
	WuGongShangHai(u, uc, shanghai)
	WuGongShengChong(GetAttacker(), 1093679191, 400)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
--夺命剑气诀
function SD()
	return GetEventDamage() == 0.43
end
function TD()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0 + GetUnitState(u, UNIT_STATE_MAX_MANA) / 200.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093678666) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 then
		shxishu = shxishu + 0.7
	end
	shanghai = ShangHaiGongShi(u, uc, 7.0, 9.0, shxishu, 1093679192)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678928) ~= 0 and GetRandomInt(1, 100) <= 20 and UnitHasBuffBJ(uc, 1113813619) == false then
		WanBuff(u, uc, 10)
	end
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 and GetRandomInt(1, 100) <= 20 and UnitHasBuffBJ(uc, 1112437615) == false then
		WanBuff(u, uc, 2)
	end
	RemoveLocation(loc)
	WuGongShengChong(u, 1093679192, 36000.0)
	u = nil
	uc = nil
	loc = nil
end
--狂风快剑
function VD()
	return GetUnitAbilityLevel(GetAttacker(), 1093679193) ~= 0 and UnitHasBuffBJ(GetAttacker(), 1110454329) and GetRandomReal(0, 100) <= 20 + 2 * I2R(GetUnitAbilityLevel(GetAttacker(), 1093678933))
end
function WD()
	local u = GetAttacker()
	local p = GetOwningPlayer(u)
	local l__ut = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	CreateNUnitsAtLoc(1, 1697656882, p, loc, bj_UNIT_FACING)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 8.0)
	Yv(bj_lastCreatedUnit, u, 2.0, 1.0, 0.0, 10.0, 0.03)
	if GetUnitAbilityLevel(u, 1093678666) ~= 0 then
		CreateNUnitsAtLoc(1, 1697656882, p, loc, bj_UNIT_FACING)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 8.0)
		Yv(bj_lastCreatedUnit, u, 2.0, 1.0, 0.0, 10.0, 0.03)
	end
	WuGongShengChong(u, 1093679193, 250.0)
	RemoveLocation(loc)
	u = nil
	l__ut = nil
	p = nil
	loc = nil
end
function YD()
	return GetEventDamage() == 0.44
end
function ZD()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678935) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 then
		shxishu = shxishu + 0.5
	end
	shanghai = ShangHaiGongShi(u, uc, 20, 20, shxishu, 1093679193)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--紫霞功
function Trig_arc_Conditions()
	return GetSpellAbilityId() == 1093677879
end
function arc_Actions2()
	local t = GetExpiredTimer()
	local i = LoadReal(YDHT, StringHash("real"), StringHash(I2S(GetHandleId(t)))) -- INLINED!!
	local u = LoadUnitHandle(YDHT, StringHash("unit"), StringHash(I2S(GetHandleId(t)))) -- INLINED!!
	local uc = LoadUnitHandle(YDHT, StringHash("unit1"), StringHash(I2S(GetHandleId(t)))) -- INLINED!!
	local l__ut = LoadUnitHandle(YDHT, StringHash("unit2"), StringHash(I2S(GetHandleId(t)))) -- INLINED!!
	local x = GetUnitX(u)
	local y = GetUnitY(u)
	local x1 = GetUnitX(uc)
	local y1 = GetUnitY(uc)
	local k = LoadReal(YDHT, StringHash("realK"), StringHash(I2S(GetHandleId(t)))) -- INLINED!!
	local s = SquareRoot((x - x1) * (x - x1) + (y - y1) * (y - y1))
	local r = s / k
	local h = s * CosBJ(k * 3 + 30) * SinBJ(i * 3) / 2 + 50
	local r1 = i * (s - 2 * r) / 60 + r
	local x2 = x - r * CosBJ(YDWEAngleBetweenUnits(uc, u))
	local y2 = y - r * SinBJ(YDWEAngleBetweenUnits(uc, u))
	local xx3 = x2 + r1 * CosBJ(YDWEAngleBetweenUnits(uc, u) + i * LoadReal(YDHT, StringHash("realJ"), StringHash(I2S(GetHandleId(t))))) -- INLINED!!
	local yy3 = y2 + r1 * SinBJ(YDWEAngleBetweenUnits(uc, u) + i * LoadReal(YDHT, StringHash("realJ"), StringHash(I2S(GetHandleId(t))))) -- INLINED!!
	local shxishu = 1.0 + danpo[1 + GetPlayerId(GetOwningPlayer(u))] / 20.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
		shxishu = shxishu + 0.8
	end
	i = i + 1
	if i >= 60 or IsTerrainPathable(xx3, yy3, PATHING_TYPE_FLYABILITY) == true then
		-- 此处为伤害值
		shanghai = ShangHaiGongShi(u, uc, 10, 8, shxishu, 1093677879)
		WuGongShangHai(u, uc, shanghai)
		if GetRandomPercentageBJ() <= 20 and GetUnitAbilityLevel(u, 1093678928) >= 1 then
			WanBuff(u, uc, 12)
		end
		RemoveUnit(l__ut)
		PauseTimer(t)
		DestroyTimer(t)
	else
		SaveReal(YDHT, StringHash("real"), StringHash(I2S(GetHandleId(t))), i * 1.0) -- INLINED!!
		SetUnitX(l__ut, xx3)
		SetUnitY(l__ut, yy3)
		SetUnitFlyHeight(l__ut, h, 999999)
	end
	t = nil
	u = nil
	uc = nil
	l__ut = nil
end
function arc_Actions3()
	local t = GetExpiredTimer()
	local i = LoadReal(YDHT, StringHash("real"), StringHash(I2S(GetHandleId(t)))) -- INLINED!!
	local u = LoadUnitHandle(YDHT, StringHash("unit"), StringHash(I2S(GetHandleId(t)))) -- INLINED!!
	local uc = LoadUnitHandle(YDHT, StringHash("unit1"), StringHash(I2S(GetHandleId(t)))) -- INLINED!!
	local l__ut = LoadUnitHandle(YDHT, StringHash("unit2"), StringHash(I2S(GetHandleId(t)))) -- INLINED!!
	local x = GetUnitX(u)
	local y = GetUnitY(u)
	local x1 = GetUnitX(uc)
	local y1 = GetUnitY(uc)
	local k = LoadReal(YDHT, StringHash("realK"), StringHash(I2S(GetHandleId(t)))) -- INLINED!!
	local s = SquareRoot((x - x1) * (x - x1) + (y - y1) * (y - y1))
	local r = s / 10 * k
	local h = s * CosBJ(k * 3) * SinBJ(i * 3) / 2 + 50
	local a = Atan2BJ(s / 2, r) / (LoadReal(YDHT, StringHash("realJ"), StringHash(I2S(GetHandleId(t)))) * -10) -- INLINED!!
	local r1 = SquareRoot(s / 2 * (s / 2) + r * r)
	local x2 = x - r1 * CosBJ(YDWEAngleBetweenUnits(uc, u) + Atan2BJ(r, s / 2) * LoadReal(YDHT, StringHash("realJ"), StringHash(I2S(GetHandleId(t)))) / 3) -- INLINED!!
	local y2 = y - r1 * SinBJ(YDWEAngleBetweenUnits(uc, u) + Atan2BJ(r, s / 2) * LoadReal(YDHT, StringHash("realJ"), StringHash(I2S(GetHandleId(t)))) / 3) -- INLINED!!
	local xx3 = x2 + r1 * CosBJ(Atan2BJ(y - y2, x - x2) - i * a)
	local yy3 = y2 + r1 * SinBJ(Atan2BJ(y - y2, x - x2) - i * a)
	local shxishu = 1.0 + danpo[1 + GetPlayerId(GetOwningPlayer(u))] / 20.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
		shxishu = shxishu + 0.8
	end
	i = i + 1
	if i >= 60 or IsTerrainPathable(xx3, yy3, PATHING_TYPE_FLYABILITY) == true then
		-- 此处为伤害值
		shanghai = ShangHaiGongShi(u, uc, 10, 8, shxishu, 1093677879)
		WuGongShangHai(u, uc, shanghai)
		if GetRandomPercentageBJ() <= 20 and GetUnitAbilityLevel(u, 1093678928) >= 1 then
			WanBuff(u, uc, 12)
		end
		UnitDamageTarget(u, uc, I2R(GetHeroStr(u, false)), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
		RemoveUnit(l__ut)
		PauseTimer(t)
		DestroyTimer(t)
	else
		SaveReal(YDHT, StringHash("real"), StringHash(I2S(GetHandleId(t))), i * 1.0) -- INLINED!!
		SetUnitX(l__ut, xx3)
		SetUnitY(l__ut, yy3)
		SetUnitFlyHeight(l__ut, h, 999999)
	end
	t = nil
	u = nil
	uc = nil
	l__ut = nil
end
function arc_Actions1()
	local tm = GetExpiredTimer()
	local t = CreateTimer()
	local u = LoadUnitHandle(YDHT, StringHash("unit"), StringHash(I2S(GetHandleId(tm)))) -- INLINED!!
	local uc = LoadUnitHandle(YDHT, StringHash("unit1"), StringHash(I2S(GetHandleId(tm)))) -- INLINED!!
	-- 修改创建单位ID 'e015'
	local l__ut = CreateUnit(GetOwningPlayer(u), 1697657141, GetUnitX(u), GetUnitY(u), 0)
	local i = LoadReal(YDHT, StringHash("real"), StringHash(I2S(GetHandleId(tm)))) -- INLINED!!
	SaveUnitHandle(YDHT, StringHash("unit"), StringHash(I2S(GetHandleId(t))), u) -- INLINED!!
	SaveUnitHandle(YDHT, StringHash("unit1"), StringHash(I2S(GetHandleId(t))), uc) -- INLINED!!
	SaveUnitHandle(YDHT, StringHash("unit2"), StringHash(I2S(GetHandleId(t))), l__ut) -- INLINED!!
	SaveReal(YDHT, StringHash("real"), StringHash(I2S(GetHandleId(t))), 0 * 1.0) -- INLINED!!
	SaveReal(YDHT, StringHash("realK"), StringHash(I2S(GetHandleId(t))), GetRandomReal(1, 10) * 1.0) -- INLINED!!
	if GetRandomPercentageBJ() >= 50 then
		SaveReal(YDHT, StringHash("realJ"), StringHash(I2S(GetHandleId(t))), -3 * 1.0) -- INLINED!!
	else
		SaveReal(YDHT, StringHash("realJ"), StringHash(I2S(GetHandleId(t))), 3 * 1.0) -- INLINED!!
	end
	if GetRandomPercentageBJ() >= 50 then
		TimerStart(t, 0.02, TRUE, arc_Actions3)
	else
		TimerStart(t, 0.02, TRUE, arc_Actions2)
	end
	t = nil
	u = nil
	uc = nil
	l__ut = nil
	i = i + 1
	-- 此处为单位个数。现在为60(攻击轨道个数)
	if i >= 40 then
		PauseTimer(tm)
		DestroyTimer(tm)
	else
		SaveReal(YDHT, StringHash("real"), StringHash(I2S(GetHandleId(tm))), i * 1.0) -- INLINED!!
	end
	tm = nil
end
function Trig_arc_Actions()
	local u = GetTriggerUnit()
	local t = CreateTimer()
	WuGongShengChong(u, 1093677879, 160)
	SaveUnitHandle(YDHT, StringHash("unit"), StringHash(I2S(GetHandleId(t))), GetTriggerUnit()) -- INLINED!!
	SaveUnitHandle(YDHT, StringHash("unit1"), StringHash(I2S(GetHandleId(t))), GetSpellTargetUnit()) -- INLINED!!
	SaveReal(YDHT, StringHash("real"), StringHash(I2S(GetHandleId(t))), 0 * 1.0) -- INLINED!!
	TimerStart(t, 0.02, TRUE, arc_Actions1)
	t = nil
end
--===========================================================================
--function eE takes nothing returns boolean
--	return((GetSpellAbilityId()=='A037'))
--endfunction
--function fE takes nothing returns boolean
--	return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))))
--endfunction
--function gE takes nothing returns nothing
--	call GroupAddUnit(Fd[(1+GetPlayerId(GetTriggerPlayer()))],GetEnumUnit())
--endfunction
--function hE takes nothing returns boolean
--	return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))))
--endfunction
--function iE takes nothing returns nothing
--	call GroupAddUnit(Fd[(1+GetPlayerId(GetTriggerPlayer()))],GetEnumUnit())
--endfunction
--function jE takes nothing returns nothing
--	local unit u = GetTriggerUnit()
--	local player p = GetOwningPlayer(u)
--	local integer i = 1 + GetPlayerId(p)
--	local location loc = GetUnitLoc(u)
--	local integer j = 0
--	local string no1 = null
--	local string no2 = null
--	local string no3 = null
--	local string no4 = null
--	local string no5 = null
--	local string no6 = null
--	local string no7 = null
--	local integer num = 0
--	call PauseUnit(u,true)
--	call WuGongShengChong(GetTriggerUnit(),'A037',160.)
--	set cd[i]=true
--	set j =  GetRandomInt(1, 4)
--	if(j==1) then
--		set no1 = "|cff00ff66 ↑ "
--	elseif(j==2)then
--		set no1 = "|cff00ff66 ↓ "
--	elseif(j==3)then
--		set no1 = "|cff00ff66 ← "
--	else
--		set no1 = "|cff00ff66 → "
--	endif
--	set num = num*10 + j
--	set j =  GetRandomInt(1, 4)
--	if(j==1)then
--		set no2 = no1 + "|cff00ff66 ↑ "
--	elseif(j==2)then
--		set no2 = no1 + "|cff00ff66 ↓ "
--	elseif(j==3)then
--		set no2 = no1 + "|cff00ff66 ← "
--	else
--		set no2 = no1 + "|cff00ff66 → "
--	endif
--	set num = num*10 + j
--	set j =  GetRandomInt(1, 4)
--	if(j==1)then
--		set no3 = no2 + "|cff00ff66 ↑ "
--	elseif(j==2)then
--		set no3 = no2 + "|cff00ff66 ↓ "
--	elseif(j==3)then
--		set no3 = no2 + "|cff00ff66 ← "
--	else
--		set no3 = no2 + "|cff00ff66 → "
--	endif
--	set num = num*10 + j
--	set j =  GetRandomInt(1, 4)
--	if(j==1)then
--		set no4 = no3 + "|cff00ff66 ↑ "
--	elseif(j==2)then
--		set no4 = no3 + "|cff00ff66 ↓ "
--	elseif(j==3)then
--		set no4 = no3 + "|cff00ff66 ← "
--	else
--		set no4 = no3 + "|cff00ff66 → "
--	endif
--	set num = num*10 + j
--	set j =  GetRandomInt(1, 4)
--	if(j==1)then
--		set no5 = no4 + "|cff00ff66 ↑ "
--	elseif(j==2)then
--		set no5 = no4 + "|cff00ff66 ↓ "
--	elseif(j==3)then
--		set no5 = no4 + "|cff00ff66 ← "
--	else
--		set no5 = no4 + "|cff00ff66 → "
--	endif
--	set num = num*10 + j
--	set j =  GetRandomInt(1, 4)
--	if(j==1)then
--		set no6 = no5 + "|cff00ff66 ↑ "
--	elseif(j==2)then
--		set no6 = no5 + "|cff00ff66 ↓ "
--	elseif(j==3)then
--		set no6 = no5 + "|cff00ff66 ← "
--	else
--		set no6 = no5 + "|cff00ff66 → "
--	endif
--	set num = num*10 + j
--	set j =  GetRandomInt(1, 4)
--	if(j==1)then
--		set no7 = no6 + "|cff00ff66 ↑ "
--	elseif(j==2)then
--		set no7 = no6 + "|cff00ff66 ↓ "
--	elseif(j==3)then
--		set no7 = no6 + "|cff00ff66 ← "
--	else
--		set no7 = no6 + "|cff00ff66 → "
--	endif
--	set num = num*10 + j
--	set Dd[i]=num
--	set Ed[i]=$F4240
--	call DisplayTimedTextToPlayer(p,0,0,30,"请按下列顺序输入键盘指令，则可以提高紫霞功的伤害倍数："+no7)
--	if((GetUnitAbilityLevel(u,1093678930)!=0))then
--		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(800.,loc,Condition(function hE)),function iE)
--	else
--		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600.,loc,Condition(function fE)),function gE)
--	endif
--	if((GetUnitAbilityLevel(u,'A07P')!=0))then
--		call SetUnitInvulnerable(u,true)
--		call YDWEPolledWaitNull(3.)
--		call SetUnitInvulnerable(u,false)
--	endif
--	call RemoveLocation(loc)
--	set u = null
--	set p = null
--	set loc = null
--endfunction
--function mE takes nothing returns boolean
--	return((cd[(1+GetPlayerId(GetTriggerPlayer()))]))
--endfunction
--function nE takes nothing returns nothing
--	local unit u=udg_hero[(1+GetPlayerId(GetTriggerPlayer()))]
--	local unit uc=GetEnumUnit()
--	local location loc=GetUnitLoc(uc)
--	local integer i=1+GetPlayerId(GetOwningPlayer(u))
--	local real shxishu=1.
--	local real shanghai=0.
--    if((GetUnitAbilityLevel(u,1093678932)!=0))then
--        set shxishu=shxishu+.6
--    endif
--    if((GetUnitAbilityLevel(u,'A07S')!=0))then
--        set shxishu=shxishu+.8
--    endif
--    call DestroyEffect(AddSpecialEffectLocBJ(loc,"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))
--    set shanghai=ShangHaiGongShi(u,uc,250+10*Gd[(1+GetPlayerId(GetTriggerPlayer()))],100.,shxishu,'A091')
--    call WuGongShangHai(u,uc,shanghai)
--    if((Ed[(1+GetPlayerId(GetTriggerPlayer()))]==1))then
--        call WanBuff(u, uc, 12)
--    endif
--    call RemoveLocation(loc)
--    set u=null
--    set uc=null
--    set loc=null
--endfunction
--function oE takes nothing returns nothing
--	local player p = GetTriggerPlayer()
--	local integer i = 1 + GetPlayerId(p)
--	local unit u = udg_hero[i]
--	if((Ed[i]==1))then
--		if(ModuloInteger(Dd[i]/Ed[i],$A)==1)then
--			set Gd[i]=Gd[i]+3
--			call DisplayTextToPlayer(p,0,0,"伤害提高，技能开始释放")
--		else
--			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
--		endif
--	else
--		if(ModuloInteger(Dd[i]/Ed[i],$A)==1)then
--			set Gd[i]=(Gd[i]+3)
--			call DisplayTextToPlayer(p,0,0,"伤害提高，请继续操作指令")
--			set Ed[i]=(Ed[i]/$A)
--			set u = null
--			set p = null
--			return
--		else
--			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
--		endif
--	endif
--	call ForGroupBJ(Fd[i],function nE)
--	set Gd[i]=.0
--	set cd[i]=false
--	set Dd[i]=0
--	set Ed[i]=0
--	call GroupClear(Fd[i])
--	call PauseUnit(u,false)
--	set u = null
--	set p = null
--endfunction
--function qE takes nothing returns boolean
--	return((cd[(1+GetPlayerId(GetTriggerPlayer()))]))
--endfunction
--function rE takes nothing returns nothing
--    local unit u=udg_hero[(1+GetPlayerId(GetTriggerPlayer()))]
--	local unit uc=GetEnumUnit()
--	local location loc=GetUnitLoc(uc)
--	local integer i=1+GetPlayerId(GetOwningPlayer(u))
--	local real shxishu=1.
--	local real shanghai=0.
--    if((GetUnitAbilityLevel(u,1093678932)!=0))then
--        set shxishu=shxishu+.6
--    endif
--    if((GetUnitAbilityLevel(u,'A07S')!=0))then
--        set shxishu=shxishu+.8
--    endif
--    call DestroyEffect(AddSpecialEffectLocBJ(loc,"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))
--    set shanghai=ShangHaiGongShi(u,uc,250+10*Gd[(1+GetPlayerId(GetTriggerPlayer()))],100.,shxishu,'A091')
--    call WuGongShangHai(u,uc,shanghai)
--    if((Ed[(1+GetPlayerId(GetTriggerPlayer()))]==1))then
--        call WanBuff(u, uc, 12)
--    endif
--    call RemoveLocation(loc)
--    set u=null
--    set uc=null
--    set loc=null
--endfunction
--function sE takes nothing returns nothing
--	local player p = GetTriggerPlayer()
--	local integer i = 1 + GetPlayerId(p)
--	local unit u = udg_hero[i]
--	if((Ed[i]==1))then
--		if(ModuloInteger(Dd[i]/Ed[i],$A)==2)then
--			set Gd[i]=Gd[i]+3
--			call DisplayTextToPlayer(p,0,0,"伤害提高，技能开始释放")
--		else
--			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
--		endif
--	else
--		if(ModuloInteger(Dd[i]/Ed[i],$A)==2)then
--			set Gd[i]=(Gd[i]+3)
--			call DisplayTextToPlayer(p,0,0,"伤害提高，请继续操作指令")
--			set Ed[i]=(Ed[i]/$A)
--			set u = null
--			set p = null
--			return
--		else
--			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
--		endif
--	endif
--	call ForGroupBJ(Fd[i],function nE)
--	set Gd[i]=.0
--	set cd[i]=false
--	set Dd[i]=0
--	set Ed[i]=0
--	call GroupClear(Fd[i])
--	call PauseUnit(u,false)
--	set u = null
--	set p = null
--endfunction
--function uE takes nothing returns boolean
--	return((cd[(1+GetPlayerId(GetTriggerPlayer()))]))
--endfunction
--function vE takes nothing returns nothing
--    local unit u=udg_hero[(1+GetPlayerId(GetTriggerPlayer()))]
--	local unit uc=GetEnumUnit()
--	local location loc=GetUnitLoc(uc)
--	local integer i=1+GetPlayerId(GetOwningPlayer(u))
--	local real shxishu=1.
--	local real shanghai=0.
--    if((GetUnitAbilityLevel(u,1093678932)!=0))then
--        set shxishu=shxishu+.6
--    endif
--    if((GetUnitAbilityLevel(u,'A07S')!=0))then
--        set shxishu=shxishu+.8
--    endif
--    call DestroyEffect(AddSpecialEffectLocBJ(loc,"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))
--    set shanghai=ShangHaiGongShi(u,uc,250+10*Gd[(1+GetPlayerId(GetTriggerPlayer()))],100.,shxishu,'A091')
--    call WuGongShangHai(u,uc,shanghai)
--    if((Ed[(1+GetPlayerId(GetTriggerPlayer()))]==1))then
--        call WanBuff(u, uc, 12)
--    endif
--    call RemoveLocation(loc)
--    set u=null
--    set uc=null
--    set loc=null
--endfunction
--function wE takes nothing returns nothing
--	local player p = GetTriggerPlayer()
--	local integer i = 1 + GetPlayerId(p)
--	local unit u = udg_hero[i]
--	if((Ed[i]==1))then
--		if(ModuloInteger(Dd[i]/Ed[i],$A)==3)then
--			set Gd[i]=Gd[i]+3
--			call DisplayTextToPlayer(p,0,0,"伤害提高，技能开始释放")
--		else
--			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
--		endif
--	else
--		if(ModuloInteger(Dd[i]/Ed[i],$A)==3)then
--			set Gd[i]=(Gd[i]+3)
--			call DisplayTextToPlayer(p,0,0,"伤害提高，请继续操作指令")
--			set Ed[i]=(Ed[i]/$A)
--			set u = null
--			set p = null
--			return
--		else
--			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
--		endif
--	endif
--	call ForGroupBJ(Fd[i],function nE)
--	set Gd[i]=.0
--	set cd[i]=false
--	set Dd[i]=0
--	set Ed[i]=0
--	call GroupClear(Fd[i])
--	call PauseUnit(u,false)
--	set u = null
--	set p = null
--endfunction
--function yE takes nothing returns boolean
--	return((cd[(1+GetPlayerId(GetTriggerPlayer()))]))
--endfunction
--function zE takes nothing returns nothing
--	local unit u=udg_hero[(1+GetPlayerId(GetTriggerPlayer()))]
--	local unit uc=GetEnumUnit()
--	local location loc=GetUnitLoc(uc)
--	local integer i=1+GetPlayerId(GetOwningPlayer(u))
--	local real shxishu=1.
--	local real shanghai=0.
--    if((GetUnitAbilityLevel(u,1093678932)!=0))then
--        set shxishu=shxishu+.6
--    endif
--    if((GetUnitAbilityLevel(u,'A07S')!=0))then
--        set shxishu=shxishu+.8
--    endif
--    call DestroyEffect(AddSpecialEffectLocBJ(loc,"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))
--    set shanghai=ShangHaiGongShi(u,uc,250+10*Gd[(1+GetPlayerId(GetTriggerPlayer()))],100.,shxishu,'A091')
--    call WuGongShangHai(u,uc,shanghai)
--    if((Ed[(1+GetPlayerId(GetTriggerPlayer()))]==1))then
--        call WanBuff(u, uc, 12)
--    endif
--    call RemoveLocation(loc)
--    set u=null
--    set uc=null
--    set loc=null
--endfunction
--function AE takes nothing returns nothing
--	local player p = GetTriggerPlayer()
--	local integer i = 1 + GetPlayerId(p)
--	local unit u = udg_hero[i]
--	if((Ed[i]==1))then
--		if(ModuloInteger(Dd[i]/Ed[i],$A)==4)then
--			set Gd[i]=Gd[i]+3
--			call DisplayTextToPlayer(p,0,0,"伤害提高，技能开始释放")
--		else
--			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
--		endif
--	else
--		if(ModuloInteger(Dd[i]/Ed[i],$A)==4)then
--			set Gd[i]=(Gd[i]+3)
--			call DisplayTextToPlayer(p,0,0,"伤害提高，请继续操作指令")
--			set Ed[i]=(Ed[i]/$A)
--			set u = null
--			set p = null
--			return
--		else
--			call DisplayTextToPlayer(p,0,0,"错误操作，技能开始释放")
--		endif
--	endif
--	call ForGroupBJ(Fd[i],function nE)
--	set Gd[i]=.0
--	set cd[i]=false
--	set Dd[i]=0
--	set Ed[i]=0
--	call GroupClear(Fd[i])
--	call PauseUnit(u,false)
--	set u = null
--	set p = null
--endfunction
--混元功
function BE()
	return GetSpellAbilityId() == 1093679409 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function bE()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit())
end
function CE()
	local u = GetTriggerUnit()
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678930) ~= 0 then
		shxishu = shxishu + 0.5
	end
	if GetUnitAbilityLevel(u, 1093682254) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
		shxishu = shxishu + 0.6
	end
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl"))
	RemoveLocation(loc)
	shanghai = ShangHaiGongShi(u, uc, 200.0, 300.0, shxishu, 1093679409)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
	loc = nil
end
function cE()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(u)
	local j = jingmai[i] // 5
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600.0, loc, Condition(bE)), CE)
	WuGongShengChong(GetTriggerUnit(), 1093679409, 100.0)
	RemoveLocation(loc)
	juexuelingwu[i] = juexuelingwu[i] + j
	DisplayTextToPlayer(p, 0, 0, "绝学领悟力+" .. (I2S(j) or ""))
	YDWEPolledWaitNull(10.0)
	juexuelingwu[i] = juexuelingwu[i] - j
	DisplayTextToPlayer(p, 0, 0, "绝学领悟力-" .. (I2S(j) or ""))
	u = nil
	p = nil
	loc = nil
end
----------华山结束--------//
function HuaShan_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(PD))
	TriggerAddAction(t, QD)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(SD))
	TriggerAddAction(t, TD)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(VD))
	TriggerAddAction(t, WD)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(YD))
	TriggerAddAction(t, ZD)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(Trig_arc_Conditions))
	TriggerAddAction(t, Trig_arc_Actions)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(BE))
	TriggerAddAction(t, cE)
end
----------星宿开始--------//
--星宿逍遥掌
function p3()
	return GetUnitAbilityLevel(GetAttacker(), 1093681744) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function q3()
	local id = GetHandleId(GetTriggeringTrigger())
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function r3()
	local u = GetAttacker()
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = 1.0
	local shanghai = 0.0
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl"))
	if GetUnitAbilityLevel(u, 1093681748) ~= 0 and GetRandomReal(0.0, 100.0) <= 8.0 then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678900)
		IssueTargetOrderById(bj_lastCreatedUnit, 852527, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 3.0)
	end
	if GetUnitAbilityLevel(u, 1093681750) ~= 0 then
		shxishu = shxishu + 0.5
	end
	if GetUnitAbilityLevel(u, 1093678930) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if UnitHaveItem(u, 1227899213) then
		shxishu = shxishu * 1.8
	end
	shanghai = ShangHaiGongShi(u, uc, 20.3, 20.3, shxishu, 1093681744)
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function s3()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	YDWELocalVariableInitiliation()
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetAttacker())
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(GetTriggerUnit()))
	SaveLocationHandle(YDHT, id * cx, -860413970, GetUnitLoc(GetAttacker()))
	SaveInteger(YDHT, id * cx, -708948899, 1093681744)
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678928) ~= 0 then
		SaveReal(YDHT, id * cx, 596788346, 35.0)
	else
		SaveReal(YDHT, id * cx, 596788346, 23.0)
	end
	SaveReal(YDHT, id * cx, 1097940387, 450.0)
	SaveReal(YDHT, id * cx, -753873030, 1 + I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899))) / 2.0 + I2R(danpo[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) * 0.05)
	SaveReal(YDHT, id * cx, 426308609, 0.9 + udg_shanghaijiacheng[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))])
	SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * LoadReal(YDHT, id * cx, 426308609))
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)) == 9 then
		SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * 10.0)
	end
	if GetRandomReal(0.0, 100.0) <= LoadReal(YDHT, id * cx, 596788346) then
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(LoadReal(YDHT, id * cx, 1097940387), LoadLocationHandle(YDHT, id * cx, -1925439584), Condition(q3)), r3)
		WuGongShengChong(GetAttacker(), 1093681744, 1000.0)
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
--三阴蜈蚣爪
function u3()
	return GetSpellAbilityId() == 1093681745
end
function v3()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveUnitHandle(YDHT, id * cx, -784714656, GetSpellTargetUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, 1505665227)))
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, -784714656)))
	SaveInteger(YDHT, id * cx, -708948899, 1093681745)
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(GetTriggerUnit()))
	SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 120.0, GetRandomReal(0, 360)))
	CreateNUnitsAtLoc(1, 1969451827, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678672) ~= 0 then
		UnitAddAbility(bj_lastCreatedUnit, 1095656040)
	end
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678927) ~= 0 then
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 70.0)
	else
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 45.0)
	end
	zw(bj_lastCreatedUnit, GetTriggerUnit(), 1.0, 250.0, 1000.0, 1500.0, 75)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(GetTriggerUnit()))
	SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 120.0, GetRandomReal(0, 360)))
	CreateNUnitsAtLoc(1, 1969451827, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678672) ~= 0 then
		UnitAddAbility(bj_lastCreatedUnit, 1095656040)
	end
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678927) ~= 0 then
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 70.0)
	else
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 45.0)
	end
	zw(bj_lastCreatedUnit, GetTriggerUnit(), 1.0, 250.0, 1000.0, 1500.0, 75)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(GetTriggerUnit()))
	SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 120.0, GetRandomReal(0, 360)))
	CreateNUnitsAtLoc(1, 1969451827, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678672) ~= 0 then
		UnitAddAbility(bj_lastCreatedUnit, 1095656040)
	end
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678927) ~= 0 then
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 70.0)
	else
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 45.0)
	end
	zw(bj_lastCreatedUnit, GetTriggerUnit(), 1.0, 250.0, 1000.0, 1500.0, 75)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678933) ~= 0 then
		SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(GetTriggerUnit()))
		SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 120.0, GetRandomReal(0, 360)))
		CreateNUnitsAtLoc(1, 1969451827, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678672) ~= 0 then
			UnitAddAbility(bj_lastCreatedUnit, 1095656040)
		end
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678927) ~= 0 then
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 70.0)
		else
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 45.0)
		end
		zw(bj_lastCreatedUnit, GetTriggerUnit(), 1.0, 250.0, 1000.0, 1500.0, 75)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
		SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(GetTriggerUnit()))
		SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 120.0, GetRandomReal(0, 360)))
		CreateNUnitsAtLoc(1, 1969451827, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678672) ~= 0 then
			UnitAddAbility(bj_lastCreatedUnit, 1095656040)
		end
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678927) ~= 0 then
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 70.0)
		else
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 45.0)
		end
		zw(bj_lastCreatedUnit, GetTriggerUnit(), 1.0, 250.0, 1000.0, 1500.0, 75)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
	end
	WuGongShengChong(GetTriggerUnit(), 1093681745, 100.0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	FlushChildHashtable(YDHT, id * cx)
end
function x3()
	return GetUnitTypeId(GetAttacker()) == 1969451827
end
function y3()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))]
	local uc = GetTriggerUnit()
	local loc2 = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678913) ~= 0 and GetRandomReal(0.0, 100.0) <= 30.0 and UnitHasBuffBJ(uc, 1110454344) == false then
		WanBuff(u, uc, 5)
	end
	if GetUnitAbilityLevel(u, 1093678926) ~= 0 and GetUnitAbilityLevel(u, 1093679161) ~= 0 and GetRandomReal(0.0, 100.0) <= 20.0 then
		DestroyEffect(AddSpecialEffectLocBJ(loc2, "Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))
		if GetUnitAbilityLevel(u, 1093681750) ~= 0 then
			shxishu = shxishu + 0.5
		end
		if UnitHaveItem(u, 1227899213) then
			shxishu = shxishu * 1.8
		end
		shanghai = ShangHaiGongShi(u, uc, 16.0, 16.0, shxishu, 1093681745)
		SetUnitLifePercentBJ(uc, GetUnitLifePercent(uc) * 0.7)
		WuGongShangHai(u, uc, shanghai)
		KillUnit(GetAttacker())
	else
		if GetRandomReal(0.0, 100.0) <= 35.0 then
			if GetUnitAbilityLevel(u, 1093681750) ~= 0 then
				shxishu = shxishu + 0.5
			end
			if UnitHaveItem(u, 1227899213) then
				shxishu = shxishu * 1.8
			end
			shanghai = ShangHaiGongShi(u, uc, 20.0, 20.0, shxishu, 1093681745)
			WuGongShangHai(u, uc, shanghai)
		end
	end
	RemoveLocation(loc2)
	u = nil
	uc = nil
	loc2 = nil
end
--神木王鼎+三阴
function IsShenDingSanYin()
	return GetItemTypeId(GetManipulatedItem()) == 1227899213 and GetUnitAbilityLevel(GetTriggerUnit(), 1093681745) >= 1 and isproducing[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] == false
end
function ShenDingSanYin_1()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(u)
	local loc2 = pu(loc, 120, GetRandomReal(0, 360))
	isproducing[i] = false
	if UnitHaveItem(u, 1227899213) then
		CreateNUnitsAtLoc(1, 1969451827, p, loc2, bj_UNIT_FACING)
		if GetUnitAbilityLevel(u, 1093678672) ~= 0 then
			UnitAddAbility(bj_lastCreatedUnit, 1095656040)
		end
		if GetUnitAbilityLevel(u, 1093678927) ~= 0 then
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 70.0)
		else
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 45.0)
		end
		zw(bj_lastCreatedUnit, u, 1.0, 250.0, 1000.0, 1500.0, 75)
	end
	RemoveLocation(loc)
	RemoveLocation(loc2)
end
function ShenDingSanYin()
	local u = GetTriggerUnit()
	local t = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	isproducing[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = true
	TimerStart(t, 15, true, ShenDingSanYin_1)
	u = nil
	t = nil
end
--天山杖法
function A3()
	return GetEventDamage() == 0.51
end
function a3()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093682254) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093679156) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if UnitHaveItem(u, 1227899213) then
		shxishu = shxishu * 1.8
	end
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl"))
	shanghai = ShangHaiGongShi(u, uc, 100, 100, shxishu, 1093681747)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678928) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1111844210) == false then
		WanBuff(u, uc, 8)
	end
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1110454344) == false then
		WanBuff(u, uc, 5)
	end
	RemoveLocation(loc)
	WuGongShengChong(u, 1093681747, 300.0)
	u = nil
	uc = nil
	loc = nil
end
--万毒噬骨术
function b3()
	return GetEventDamage() == 0.52
end
function C3()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093678925) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093678930) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if UnitHaveItem(u, 1227899213) then
		shxishu = shxishu * 1.8
	end
	if GetUnitAbilityLevel(u, 1093678928) ~= 0 and GetUnitAbilityLevel(u, 1093678668) ~= 0 and UnitHasBuffBJ(uc, 1110454324) == false and GetRandomReal(0.0, 100.0) <= 3.0 then
		WanBuff(u, uc, 7)
	end
	WuGongShengChong(u, 1093681748, 3500.0)
	YDWEPolledWaitNull(0.1)
	shanghai = ShangHaiGongShi(u, uc, 10.8, 10.8, shxishu, 1093681748)
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function D3()
	return GetUnitAbilityLevel(GetKillingUnit(), 1093681748) ~= 0
end
function E3()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, udg_hero[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))])
	SaveUnitHandle(YDHT, id * cx, 292070382, GetTriggerUnit())
	SaveInteger(YDHT, id * cx, -708948899, 1093681748)
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1395666994) ~= 0 and GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678913) ~= 0 and GetRandomReal(0.0, 100.0) <= 3.0 then
		SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, 292070382)))
		CreateNUnitsAtLoc(1, 1969451827, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -1925439584), bj_UNIT_FACING)
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678672) ~= 0 then
			UnitAddAbility(bj_lastCreatedUnit, 1095656040)
		end
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678927) ~= 0 then
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 70.0)
		else
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 45.0)
		end
		zw(bj_lastCreatedUnit, LoadUnitHandle(YDHT, id * cx, 1505665227), 1.0, 250.0, 1000.0, 1500.0, 75)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	end
	FlushChildHashtable(YDHT, id * cx)
end
--星宿心法
function G3()
	return GetSpellAbilityId() == 1093681750
end
function H3()
	if LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) >= 500.0 then
		FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		DestroyTimer(GetExpiredTimer())
	else
		SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) + 47.0)
		if UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227), 1112504171) and GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227), 1093678935) ~= 0 and GetRandomInt(1, 10) <= 5 then
			SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)))
			if GetUnitTypeId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)) == 1328558132 then
				SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), -705806693, 1747988533)
			elseif GetUnitTypeId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)) == 1328558129 then
				SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), -705806693, 1747988535)
			elseif GetUnitTypeId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)) == 1328558130 then
				SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), -705806693, 1747988536)
			elseif GetUnitTypeId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)) == 1328558131 then
				SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), -705806693, 1747988537)
			elseif GetUnitTypeId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)) == 1328558128 then
				SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), -705806693, 1747988534)
			elseif GetUnitTypeId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)) == 1328558643 or GetUnitTypeId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)) == 1328558664 or GetUnitTypeId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)) == 1328558665 then
				SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), -705806693, 1747988553)
			elseif GetUnitTypeId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)) == 1328558666 then
				SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), -705806693, 1747988555)
			end
			CreateNUnitsAtLoc(1, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), -705806693), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951), bj_UNIT_FACING)
			GroupAddUnit(Fe, bj_lastCreatedUnit)
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 5.0)
			RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951))
		end
	end
end
function I3()
	local ky
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, 1505665227)))
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093681751)
	IssueTargetOrderById(bj_lastCreatedUnit, 852069, LoadUnitHandle(YDHT, id * cx, 1505665227))
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	SaveInteger(YDHT, id * cx, -708948899, 1093681750)
	if GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558132 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988533)
	elseif GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558129 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988535)
	elseif GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558130 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988536)
	elseif GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558131 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988537)
	elseif GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558128 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988534)
	elseif GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558643 or GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558664 or GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558665 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988553)
	elseif GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558666 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988555)
	end
	CreateNUnitsAtLoc(1, LoadInteger(YDHT, id * cx, -705806693), GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
	GroupAddUnit(Fe, bj_lastCreatedUnit)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 5.0)
	WuGongShengChong(GetTriggerUnit(), 1093681750, 100.0)
	ky = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(ky), 1505665227, LoadUnitHandle(YDHT, id * cx, 1505665227))
	TimerStart(ky, 1.0, true, H3)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	FlushChildHashtable(YDHT, id * cx)
	ky = nil
end
function J3()
	return IsUnitInGroup(GetTriggerUnit(), Fe)
end
function K3()
	local id = GetHandleId(GetTriggeringTrigger())
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function L3()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
	local uc = GetEnumUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678928) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if UnitHaveItem(u, 1227899213) then
		shxishu = shxishu * 1.8
	end
	shanghai = ShangHaiGongShi(u, uc, 60.0, 60.0, shxishu, 1093681750)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function MM3()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	GroupRemoveUnit(Fe, GetTriggerUnit())
	SaveUnitHandle(YDHT, id * cx, 1505665227, udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
	SaveUnitHandle(YDHT, id * cx, -784714656, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, -784714656)))
	SaveInteger(YDHT, id * cx, -708948899, 1093681750)
	SaveReal(YDHT, id * cx, -753873030, 0.8 + I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899))) / 2.0 + 1.0)
	SaveReal(YDHT, id * cx, 426308609, 1.5 + udg_shanghaijiacheng[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))])
	AddSpecialEffectLocBJ(LoadLocationHandle(YDHT, id * cx, -1925439584), "war3mapImported\\DivineRing.mdx")
	DestroyEffect(bj_lastCreatedEffect)
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(350.0, LoadLocationHandle(YDHT, id * cx, -1925439584), Condition(K3)), L3)
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093679155) ~= 0 and GetRandomInt(1, 100) <= 80 then
		if GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558132 then
			SaveInteger(YDHT, id * cx, -705806693, 1747988533)
		elseif GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558129 then
			SaveInteger(YDHT, id * cx, -705806693, 1747988535)
		elseif GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558130 then
			SaveInteger(YDHT, id * cx, -705806693, 1747988536)
		elseif GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558131 then
			SaveInteger(YDHT, id * cx, -705806693, 1747988537)
		elseif GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558128 then
			SaveInteger(YDHT, id * cx, -705806693, 1747988534)
		elseif GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558643 or GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558664 or GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558665 then
			SaveInteger(YDHT, id * cx, -705806693, 1747988553)
		elseif GetUnitTypeId(LoadUnitHandle(YDHT, id * cx, 1505665227)) == 1328558666 then
			SaveInteger(YDHT, id * cx, -705806693, 1747988555)
		end
		CreateNUnitsAtLoc(1, LoadInteger(YDHT, id * cx, -705806693), GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -1925439584), bj_UNIT_FACING)
		GroupAddUnit(Fe, bj_lastCreatedUnit)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 5.0)
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	FlushChildHashtable(YDHT, id * cx)
end
----------星宿结束--------//
function XingXiu_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(p3))
	TriggerAddAction(t, s3)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(u3))
	TriggerAddAction(t, v3)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(x3))
	TriggerAddAction(t, y3)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(A3))
	TriggerAddAction(t, a3)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(b3))
	TriggerAddAction(t, C3)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(D3))
	TriggerAddAction(t, E3)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(G3))
	TriggerAddAction(t, I3)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(J3))
	TriggerAddAction(t, MM3)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsShenDingSanYin))
	TriggerAddAction(t, ShenDingSanYin)
	t = nil
end
----------古墓开始--------//
--美女拳
function EE()
	return GetUnitAbilityLevel(GetAttacker(), 1093679429) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function FE()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local loc = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = 1.0
	local shanghai = 0.0
	if u == udg_hero[i] then
		if GetUnitAbilityLevel(u, 1093678933) ~= 0 then
			if GetRandomReal(0.0, 100.0) >= 45.0 then
			else
				if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
					shxishu = shxishu + 0.6
				end
				if GetUnitAbilityLevel(u, 1093678926) ~= 0 then
					shxishu = shxishu + 0.8
				end
				if UnitHaveItem(u, 1227897155) then
					shxishu = shxishu * 4
				end
				DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"))
				if GetUnitAbilityLevel(u, 1093678925) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1110454328) == false then
					WanBuff(u, uc, 11)
				end
				shanghai = ShangHaiGongShi(u, uc, 28.0, 28.0, shxishu, 1093679429)
				WuGongShangHai(u, uc, shanghai)
				WuGongShengChong(GetAttacker(), 1093679429, 650)
			end
		else
			if GetRandomReal(0.0, 100.0) >= 30.0 then
			else
				if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
					shxishu = shxishu + 0.6
				end
				if GetUnitAbilityLevel(u, 1093678926) ~= 0 then
					shxishu = shxishu + 0.8
				end
				if UnitHaveItem(u, 1227897155) then
					shxishu = shxishu * 4
				end
				DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"))
				if GetUnitAbilityLevel(u, 1093678925) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1110454328) == false then
					WanBuff(u, uc, 11)
				end
				shanghai = ShangHaiGongShi(u, uc, 28.0, 28.0, shxishu, 1093679429)
				WuGongShangHai(u, uc, shanghai)
				WuGongShengChong(GetAttacker(), 1093679429, 1000)
			end
		end
	else
		if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
			shxishu = shxishu + 0.6
		end
		if GetUnitAbilityLevel(u, 1093678926) ~= 0 then
			shxishu = shxishu + 0.8
		end
		if UnitHaveItem(u, 1227897155) then
			shxishu = shxishu * 4
		end
		DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"))
		if GetUnitAbilityLevel(u, 1093678925) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1110454328) == false then
			WanBuff(u, uc, 11)
		end
		shanghai = ShangHaiGongShi(udg_hero[i], uc, 15, 15, shxishu, 1093679429)
		WuGongShangHai(udg_hero[i], uc, shanghai)
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
--玉蜂针
function HE()
	return GetSpellAbilityId() == 1093679434
end
function IE()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit()) and GetFilterUnit() ~= GetSpellTargetUnit()
end
function lE()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093679436)
	IssueTargetOrderById(bj_lastCreatedUnit, 852527, GetEnumUnit())
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	RemoveLocation(loc)
	u = nil
	loc = nil
end
function KE()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local loc2 = GetUnitLoc(GetEnumUnit())
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093679436)
	IssueTargetOrderById(bj_lastCreatedUnit, 852527, GetEnumUnit())
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093679435)
	IssueTargetOrderById(bj_lastCreatedUnit, 852189, GetEnumUnit())
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	RemoveLocation(loc)
	RemoveLocation(loc2)
	u = nil
	loc = nil
	loc2 = nil
end
function LE()
	local u = GetTriggerUnit()
	local l__ut = GetSpellTargetUnit()
	local loc = GetUnitLoc(l__ut)
	local range = 0.0
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
		range = 500
	else
		range = 300
	end
	if GetUnitAbilityLevel(u, 1093678668) ~= 0 then
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range, loc, Condition(IE)), KE)
	else
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range, loc, Condition(IE)), lE)
	end
	WuGongShengChong(u, 1093679434, 100.0)
	RemoveLocation(loc)
	u = nil
	l__ut = nil
	loc = nil
end
function NE()
	return GetEventDamage() == 0.45
end
function OE()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678913) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093678935) ~= 0 then
		shxishu = shxishu + 0.5
	end
	if UnitHaveItem(u, 1227899221) then
		shxishu = shxishu * 2
	end
	if UnitHaveItem(u, 1227897155) then
		shxishu = shxishu * 4
	end
	shanghai = ShangHaiGongShi(u, uc, 46.0, 46.0, shxishu, 1093679434)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--天罗地网掌
function QE()
	return GetUnitAbilityLevel(GetAttacker(), 1093679437) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function RE()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function SE()
	local u = GetAttacker()
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678926) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if UnitHaveItem(u, 1227897155) then
		shxishu = shxishu * 4
	end
	shanghai = ShangHaiGongShi(u, uc, 22.0, 46.0, shxishu, 1093679437)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678672) ~= 0 and UnitHasBuffBJ(uc, 1110454328) == false and GetRandomReal(0.0, 100.0) <= 40.0 then
		WanBuff(u, uc, 11)
	end
	if GetUnitAbilityLevel(u, 1093678925) ~= 0 and UnitHasBuffBJ(uc, 1110454326) == false and GetRandomReal(0.0, 100.0) <= 40.0 then
		WanBuff(u, uc, 6)
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function TE()
	local u = GetAttacker()
	local l__ut = nil
	local loc = GetUnitLoc(u)
	local loc2 = nil
	local loc3 = nil
	local imax = 4
	local r = 0.0
	local r2 = 0.0
	local g = CreateGroup()
	if GetRandomInt(1, 100) <= 15 + fuyuan[1 + GetPlayerId(GetOwningPlayer(u))] // 5 then
		GroupEnumUnitsInRangeOfLoc(g, loc, 800, Condition(RE))
		if GetUnitAbilityLevel(u, 1093678929) ~= 0 then
			imax = 7
		end
		Xd = 1
		for _ in _loop_() do
			if Xd > imax then break end
			r = r + 100
			Yd = 1
			for _ in _loop_() do
				if Yd > 8 then break end
				r2 = r2 + 45
				loc2 = pu(loc, r, r2)
				CreateNUnitsAtLoc(1, 1697656911, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
				Gw(1.5, bj_lastCreatedUnit)
				--天罗地网阵
				if GetUnitAbilityLevel(u, 1093677894) ~= 0 and GetRandomInt(1, 3) == 1 then
					l__ut = GroupPickRandomUnit(g)
					loc3 = GetUnitLoc(l__ut)
					SetWidgetLife(l__ut, GetWidgetLife(l__ut) * 0.8)
					DestroyEffect(AddSpecialEffectLocBJ(loc3, "war3mapImported\\blue quick.mdx"))
					CreateNUnitsAtLoc(1, 1865429573, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
					UnitAddAbility(bj_lastCreatedUnit, 1093677892)
					ShowUnitHide(bj_lastCreatedUnit)
					IssueTargetOrderById(bj_lastCreatedUnit, 852106, l__ut)
					Gw(3, bj_lastCreatedUnit)
					RemoveLocation(loc3)
					loc3 = nil
				end
				ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(100.0, loc2, Condition(RE)), SE)
				RemoveLocation(loc2)
				Yd = Yd + 1
			end
			Xd = Xd + 1
		end
		WuGongShengChong(GetAttacker(), 1093679437, 1000.0)
	end
	RemoveLocation(loc)
	DestroyGroup(g)
	g = nil
	u = nil
	loc = nil
	loc2 = nil
	l__ut = nil
end
--玉女心经
function VE()
	return GetUnitAbilityLevel(GetAttacker(), 1093679445) >= 1 and GetRandomReal(0, 1.0) <= 0.1 + 0.01 * I2R(GetUnitAbilityLevel(GetAttacker(), 1093679445)) and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function WE()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, udg_hero[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))])
	SaveInteger(YDHT, id * cx, -708948899, 1093679445)
	YDWESetLocalVariableLocation("jn1", GetUnitLoc(GetAttacker()))
	YDWESetLocalVariableLocation("jn2", pu(YDWEGetLocalVariableLocation("jn1"), GetRandomReal(200.0, 400.0), GetRandomReal(0, 360.0)))
	if GetUnitTypeId(GetAttacker()) == 1328558132 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988533)
	elseif GetUnitTypeId(GetAttacker()) == 1328558129 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988535)
	elseif GetUnitTypeId(GetAttacker()) == 1328558130 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988536)
	elseif GetUnitTypeId(GetAttacker()) == 1328558131 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988537)
	elseif GetUnitTypeId(GetAttacker()) == 1328558128 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988534)
	elseif GetUnitTypeId(GetAttacker()) == 1328558643 or GetUnitTypeId(GetAttacker()) == 1328558664 or GetUnitTypeId(GetAttacker()) == 1328558665 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988553)
	elseif GetUnitTypeId(GetAttacker()) == 1328558666 then
		SaveInteger(YDHT, id * cx, -705806693, 1747988555)
	end
	CreateNUnitsAtLoc(1, LoadInteger(YDHT, id * cx, -705806693), GetOwningPlayer(GetAttacker()), YDWEGetLocalVariableLocation("jn2"), bj_UNIT_FACING)
	SetUnitVertexColorBJ(bj_lastCreatedUnit, GetRandomReal(20.0, 80.0), GetRandomReal(20.0, 80.0), GetRandomReal(20.0, 80.0), GetRandomReal(20.0, 60.0))
	UnitAddAbility(bj_lastCreatedUnit, 1097625443)
	UnitAddAbility(bj_lastCreatedUnit, 1093679429)
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678935) ~= 0 then
		zw(bj_lastCreatedUnit, GetAttacker(), 1.0, 250.0, 1000.0, 1500.0, 75)
	end
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678666) ~= 0 then
		UnitAddAbility(bj_lastCreatedUnit, 1093679446)
	end
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678931) ~= 0 then
		Gw(20.0, bj_lastCreatedUnit)
	else
		Gw(10.0, bj_lastCreatedUnit)
	end
	RemoveLocation(YDWEGetLocalVariableLocation("jn1"))
	RemoveLocation(YDWEGetLocalVariableLocation("jn2"))
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678933) ~= 0 then
		YDWESetLocalVariableLocation("jn1", GetUnitLoc(GetAttacker()))
		YDWESetLocalVariableLocation("jn2", pu(YDWEGetLocalVariableLocation("jn1"), GetRandomReal(200.0, 400.0), GetRandomReal(0, 360.0)))
		CreateNUnitsAtLoc(1, GetUnitTypeId(GetAttacker()), GetOwningPlayer(GetAttacker()), YDWEGetLocalVariableLocation("jn2"), bj_UNIT_FACING)
		SetUnitVertexColorBJ(bj_lastCreatedUnit, GetRandomReal(20.0, 80.0), GetRandomReal(20.0, 80.0), GetRandomReal(20.0, 80.0), GetRandomReal(20.0, 60.0))
		UnitAddAbility(bj_lastCreatedUnit, 1097625443)
		UnitAddAbility(bj_lastCreatedUnit, 1093679429)
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678935) ~= 0 then
			zw(bj_lastCreatedUnit, LoadUnitHandle(YDHT, id * cx, 1505665227), 1.0, 250.0, 1000.0, 1500.0, 75)
		end
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678931) ~= 0 then
			Gw(20.0, bj_lastCreatedUnit)
		else
			Gw(10.0, bj_lastCreatedUnit)
		end
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678666) ~= 0 then
			UnitAddAbility(bj_lastCreatedUnit, 1093679446)
		end
		RemoveLocation(YDWEGetLocalVariableLocation("jn1"))
		RemoveLocation(YDWEGetLocalVariableLocation("jn2"))
	end
	WuGongShengChong(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))], 1093679445, 650.0)
	FlushChildHashtable(YDHT, id * cx)
end
function YE()
	return GetUnitAbilityLevel(GetAttacker(), 1093679446) >= 1 and GetRandomReal(0, 1.0) <= 0.13 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function ZE()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, udg_hero[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))])
	SaveInteger(YDHT, id * cx, -708948899, 1093678666)
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, 1505665227)))
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetUnitLoc(GetTriggerUnit()))
	SaveReal(YDHT, id * cx, -1613012308, AngleBetweenPoints(LoadLocationHandle(YDHT, id * cx, -1925439584), LoadLocationHandle(YDHT, id * cx, 1585647951)))
	SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 200.0, LoadReal(YDHT, id * cx, -1613012308) + 180.0))
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899))
	SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)))
	IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, LoadLocationHandle(YDHT, id * cx, 1585647951))
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
	FlushChildHashtable(YDHT, id * cx)
end
--古墓清心诀
function e3()
	return GetSpellAbilityId() == 1093679444 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function f3()
	local t = GetExpiredTimer()
	local p = GetHandleId(t)
	local j = LoadReal(YDHT, p, 0)
	local i = LoadInteger(YDHT, p, 3)
	local imax = 15
	local u = LoadUnitHandle(YDHT, p, 1)
	local uc = LoadUnitHandle(YDHT, p, 2)
	if GetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetOwningPlayer(uc))], 1093678933) >= 1 then
		imax = 30
	end
	if i >= imax then
		FlushChildHashtable(YDHT, p)
		PauseTimer(t)
		DestroyTimer(t)
	else
		SaveInteger(YDHT, p, 3, i + 1)
		SetWidgetLife(uc, GetWidgetLife(uc) + GetUnitState(uc, UNIT_STATE_MAX_LIFE) * (j + I2R(yishu[1 + GetPlayerId(GetOwningPlayer(uc))])) / 200.0)
	end
	t = nil
	u = nil
	uc = nil
end
function g3()
	return IsUnitAlly(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit()) and IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function i3()
	local t
	local loc = GetUnitLoc(GetEnumUnit())
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093679444)
	IssueTargetOrderById(bj_lastCreatedUnit, 852160, GetEnumUnit())
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	t = CreateTimer()
	if GetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], 1093678928) ~= 0 then
		SaveReal(YDHT, GetHandleId(t), 0, 40.0)
	else
		SaveReal(YDHT, GetHandleId(t), 0, 25.0)
	end
	SaveUnitHandle(YDHT, GetHandleId(t), 1, GetTriggerUnit())
	SaveUnitHandle(YDHT, GetHandleId(t), 2, GetEnumUnit())
	TimerStart(t, 1.0, true, f3)
	RemoveLocation(loc)
	t = nil
	loc = nil
end
function j3()
	local t
	local u = GetTriggerUnit()
	local uc = GetSpellTargetUnit()
	local loc = GetUnitLoc(u)
	local j = 0.0
	if GetUnitAbilityLevel(u, 1093678928) ~= 0 then
		j = 40
	else
		j = 25
	end
	if GetUnitAbilityLevel(u, 1093679155) ~= 0 then
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(500.0, loc, Condition(g3)), i3)
	else
		t = CreateTimer()
		SaveReal(YDHT, GetHandleId(t), 0, j)
		SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
		SaveUnitHandle(YDHT, GetHandleId(t), 2, uc)
		TimerStart(t, 1.0, true, f3)
	end
	WuGongShengChong(GetTriggerUnit(), 1093679444, 100.0)
	RemoveLocation(loc)
	t = nil
	u = nil
	uc = nil
	loc = nil
end
function m3()
	return UnitHasBuffBJ(GetTriggerUnit(), 1110454340) and GetUnitAbilityLevel(GetTriggerUnit(), 1093678929) ~= 0
end
function nn3()
	UnitDamageTarget(GetTriggerUnit(), GetEventDamageSource(), GetEventDamage() * 10.0, true, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
end
----------古墓结束--------//
function GuMu_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(EE))
	TriggerAddAction(t, FE)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(HE))
	TriggerAddAction(t, LE)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(NE))
	TriggerAddAction(t, OE)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(QE))
	TriggerAddAction(t, TE)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(VE))
	TriggerAddAction(t, WE)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(YE))
	TriggerAddAction(t, ZE)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(e3))
	TriggerAddAction(t, j3)

	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(m3))
	TriggerAddAction(t, nn3)
	t = nil
end
--万花剑法 3级技
function IsWanHua()
	return GetSpellAbilityId() == 1093677617
end
function WanHuaJian()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local loc2 = _array_()
	local i = 0
	WuGongShengChong(GetTriggerUnit(), 1093677617, 350)
	i = 1
	for _ in _loop_() do
		if i > 6 then break end
		loc2[i] = pu(loc, 200, 60 * i)
		CreateNUnitsAtLoc(1, 1747988551, GetOwningPlayer(GetTriggerUnit()), loc2[i], bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093677618)
		if GetUnitAbilityLevel(u, 1093677619) >= 1 then
			IncUnitAbilityLevel(bj_lastCreatedUnit, 1093677618)
		end
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852488, loc2[i])
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 10.0)
		RemoveLocation(loc2[i])
		loc2[i] = nil
		i = i + 1
	end
	RemoveLocation(loc)
	u = nil
	loc = nil
end
function IsWanHuaMaJia()
	return GetUnitTypeId(GetEventDamageSource()) == 1747988551 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource()))
end
function WanHuaMaJia()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1
	local shanghai = 0.0
	local loc2 = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093677620) >= 1 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678922) >= 1 then
		shxishu = shxishu + 1.2
	end
	if GetUnitAbilityLevel(u, 1093679428) >= 1 then
		shxishu = shxishu + 2
	end
	if GetUnitAbilityLevel(u, 1093678932) >= 1 and UnitHasBuffBJ(uc, 1112040046) == false and GetRandomInt(1, 100) <= 30 then
		CreateNUnitsAtLoc(1, 1697656920, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
		UnitAddAbility(bj_lastCreatedUnit, 1093677621)
		IssueTargetOrderById(bj_lastCreatedUnit, 852486, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		ShowUnitHide(bj_lastCreatedUnit)
		CreateTextTagLocBJ("放逐", loc2, 0, 12.0, 65.0, 55.0, 42.0, 0)
		Nw(1.0, bj_lastCreatedTextTag)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
	end
	shanghai = ShangHaiGongShi(u, uc, 2.0, 2.0, shxishu, 1093677617)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--拂尘功 8级技
function IsFuChen()
	return GetSpellAbilityId() == 1093677402
end
function FuChenGong()
	local loc = GetSpellTargetLoc()
	local u = nil
	WuGongShengChong(GetTriggerUnit(), 1093677402, 250)
	CreateNUnitsAtLoc(1, 1747988550, GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
	u = bj_lastCreatedUnit
	ShowUnitHide(u)
	UnitAddAbility(u, 1093677616)
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093678932) >= 1 then
		IncUnitAbilityLevel(u, 1093677616)
	end
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093677620) >= 1 then
		IncUnitAbilityLevel(u, 1093677616)
	end
	IssuePointOrderByIdLoc(u, 852089, loc)
	UnitApplyTimedLife(u, 1112045413, 10.0)
	RemoveLocation(loc)
	u = nil
	loc = nil
end
function IsFuChenMaJia()
	return GetUnitTypeId(GetEventDamageSource()) == 1747988550 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource()))
end
function FuChenMaJia()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1
	local shanghai = 0.0
	local r1 = GetRandomReal(1.0, 12.0) * 6.0
	if GetUnitAbilityLevel(u, 1093678922) >= 1 then
		shxishu = shxishu + 1
	end
	if GetUnitAbilityLevel(u, 1093677619) >= 1 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678918) >= 1 then
		shxishu = shxishu + 1.1
	end
	shanghai = ShangHaiGongShi(u, uc, r1, r1, shxishu, 1093677402)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--北岳剑诀 15级技
function IsTianShan()
	return GetUnitAbilityLevel(GetTriggerUnit(), 1093681988) >= 1 and GetSpellAbilityId() ~= 1093678418 and GetSpellAbilityId() ~= 1095329889
end
function TianShan_Condition()
	return IsUnitAliveBJ(GetFilterUnit()) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit()))
end
function TianShanZhang()
	local u = GetTriggerUnit()
	local uc = nil
	local loc = GetUnitLoc(u)
	local loc2 = nil
	local g = CreateGroup()
	local r = 1.0
	if GetUnitAbilityLevel(u, 1093678918) >= 1 then
		r = 2.0
	end
	WuGongShengChong(u, 1093681988, 500)
	GroupEnumUnitsInRangeOfLoc(g, loc, 700, Condition(TianShan_Condition))
	uc = GroupPickRandomUnit(g)
	if uc ~= nil then
		SetWidgetLife(uc, GetWidgetLife(uc) * (0.94 - 0.015 * GetUnitAbilityLevel(u, 1093681988) * r))
		DestroyEffect(AddSpecialEffectTargetUnitBJ("overhead", uc, "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl"))
		loc2 = GetUnitLoc(uc)
		if GetUnitAbilityLevel(u, 1093678932) >= 1 then
			CreateNUnitsAtLoc(1, 1697656920, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
			UnitAddAbility(bj_lastCreatedUnit, 1093682229)
			IssueTargetOrderById(bj_lastCreatedUnit, 852095, uc)
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
			ShowUnitHide(bj_lastCreatedUnit)
			CreateTextTagLocBJ("封穴", loc2, 0, 12.0, 65.0, 55.0, 42.0, 0)
			Nw(1.0, bj_lastCreatedTextTag)
			SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
		end
		if GetUnitAbilityLevel(u, 1093677620) ~= 0 then
			CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
			ShowUnitHide(bj_lastCreatedUnit)
			UnitAddAbility(bj_lastCreatedUnit, 1093678901)
			IssueTargetOrderById(bj_lastCreatedUnit, 852527, uc)
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
			CreateTextTagLocBJ("流血", loc2, 60.0, 12.0, 65.0, 55.0, 42.0, 0)
			Nw(3.0, bj_lastCreatedTextTag)
			SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
		end
		if GetUnitAbilityLevel(u, 1093677619) ~= 0 then
			WanBuff(u, uc, 9)
		end
		RemoveLocation(loc2)
	end
	if GetUnitAbilityLevel(u, 1093679428) >= 1 then
		uc = GroupPickRandomUnit(g)
		if uc ~= nil then
			SetWidgetLife(uc, GetWidgetLife(uc) * (0.94 - 0.015 * GetUnitAbilityLevel(u, 1093681988) * r))
			DestroyEffect(AddSpecialEffectTargetUnitBJ("overhead", uc, "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl"))
		end
	end
	RemoveLocation(loc)
	DestroyGroup(g)
	u = nil
	uc = nil
	loc = nil
	loc2 = nil
	g = nil
end
--慈悲心法 25级技
function IsCiBei()
	return GetUnitTypeId(GetTriggerUnit()) == 1869117284
end
function CiBei_Condition()
	return IsUnitAliveBJ(GetFilterUnit()) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit()))
end
function CiBei_Action()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093679152) >= 1 then
		shxishu = shxishu + 2
	end
	if GetUnitAbilityLevel(u, 1093679428) >= 1 then
		shxishu = shxishu + 2
	end
	shanghai = ShangHaiGongShi(u, uc, 100.0, 50.0, shxishu, 1093677619)
	WuGongShangHai(u, uc, shanghai)
	DestroyEffect(AddSpecialEffectTargetUnitBJ("overhead", uc, "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl"))
	if GetUnitAbilityLevel(u, 1093678932) >= 1 and GetRandomInt(1, 100) <= 30 then
		CreateNUnitsAtLoc(1, 1697656920, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
		UnitAddAbility(bj_lastCreatedUnit, 1093682229)
		IssueTargetOrderById(bj_lastCreatedUnit, 852095, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		ShowUnitHide(bj_lastCreatedUnit)
		CreateTextTagLocBJ("封穴", loc2, 0, 12.0, 65.0, 55.0, 42.0, 0)
		Nw(1.0, bj_lastCreatedTextTag)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
	end
	if GetUnitAbilityLevel(u, 1093678931) >= 1 then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093682246)
		IssueTargetOrderById(bj_lastCreatedUnit, 852066, u)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 3.0)
	end
	if GetUnitAbilityLevel(u, 1093678918) >= 1 and GetRandomInt(1, 100) <= 30 then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093677369)
		IssueTargetOrderById(bj_lastCreatedUnit, 852149, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		CreateTextTagLocBJ("破防", loc, 60.0, 12.0, 65.0, 55.0, 42.0, 0)
		Nw(3.0, bj_lastCreatedTextTag)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
	end
	RemoveLocation(loc2)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc2 = nil
	loc = nil
end
function CiBeiXinFa()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
	local loc = GetUnitLoc(GetTriggerUnit())
	local g = CreateGroup()
	WuGongShengChong(u, 1093677619, 100)
	GroupEnumUnitsInRangeOfLoc(g, loc, 600, Condition(CiBei_Condition))
	ForGroupBJ(g, CiBei_Action)
	DestroyGroup(g)
	RemoveLocation(loc)
	u = nil
	g = nil
	loc = nil
end
--菩萨印 25级技
function IsPuSa()
	return GetUnitAbilityLevel(GetAttacker(), 1093677620) >= 1
end
function PuSaYin()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local shxishu = 1.0
	local shanghai = 0.0
	local level = 0
	if GetUnitAbilityLevel(u, 1093678932) >= 1 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678928) >= 1 then
		shxishu = shxishu + 0.7
	end
	if GetRandomInt(1, 100) < 15 + fuyuan[i] // 5 then
		shanghai = ShangHaiGongShi(u, uc, 80.0, 40.0, shxishu, 1093677620)
		WuGongShangHai(u, uc, shanghai)
		WuGongShengChong(u, 1093677620, 700)
		if GetUnitAbilityLevel(u, 1093679428) >= 1 and GetRandomInt(1, 100) <= 20 then
			level = GetUnitAbilityLevel(u, 1093677620)
			UnitRemoveAbility(u, 1093677620)
			UnitAddAbility(u, 1093677620)
			SetUnitAbilityLevel(u, 1093677620, level)
		end
	end
	u = nil
	uc = nil
	p = nil
end
function HengShan_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsFuChen))
	TriggerAddAction(t, FuChenGong)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsFuChenMaJia))
	TriggerAddAction(t, FuChenMaJia)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsWanHua))
	TriggerAddAction(t, WanHuaJian)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsWanHuaMaJia))
	TriggerAddAction(t, WanHuaMaJia)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsTianShan))
	TriggerAddAction(t, TianShanZhang)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(IsCiBei))
	TriggerAddAction(t, CiBeiXinFa)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsPuSa))
	TriggerAddAction(t, PuSaYin)
	t = nil
end
--===========================================================================
--===========================================================================
--天柱云气
function IsTianZhu()
	return (GetUnitAbilityLevel(GetAttacker(), 1093678157) >= 1 or GetUnitAbilityLevel(GetTriggerUnit(), 1093678157) >= 1) and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function TianZhu_Condition()
	if GetUnitAbilityLevel(GetAttacker(), 1093678157) >= 1 then
		return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) == true and IsUnitAliveBJ(GetFilterUnit())
	else
		return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) == true and IsUnitAliveBJ(GetFilterUnit())
	end
end
function TianZhu_Action()
	local u = nil
	local l__ut = GetEnumUnit()
	local p = nil
	local i = 1
	local shanghai = 0.0
	local shxishu = 1.0
	if GetUnitAbilityLevel(GetAttacker(), 1093678157) >= 1 then
		u = GetAttacker()
	else
		u = GetTriggerUnit()
	end
	p = GetOwningPlayer(u)
	i = 1 + GetPlayerId(p)
	if GetUnitAbilityLevel(u, 1093678897) >= 1 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678666) >= 1 then
		shxishu = shxishu + 0.9
	end
	if UnitHaveItem(u, 1227895116) or UnitHaveItem(u, 1227894851) or UnitHaveItem(u, 1227894850) or UnitHaveItem(u, 1227897145) or UnitHaveItem(u, 1227897153) or UnitHaveItem(u, 1227897155) then
		shxishu = shxishu * 2
	end
	shanghai = ShangHaiGongShi(u, l__ut, 25, 6, shxishu, 1093678157)
	WuGongShangHai(u, l__ut, shanghai)
	if GetUnitAbilityLevel(u, 1093678918) >= 1 then
		WanBuff(u, l__ut, 2)
	end
	p = nil
	u = nil
	l__ut = nil
end
function TianZhuYunQi()
	local u = nil
	local p = nil
	local angle = 0.0
	local loc = nil
	local loc2 = nil
	local loc3 = nil
	local g = CreateGroup()
	local i = 1
	local j = 1
	if GetUnitAbilityLevel(GetAttacker(), 1093678157) >= 1 then
		u = GetAttacker()
	else
		u = GetTriggerUnit()
	end
	angle = GetUnitFacing(u)
	p = GetOwningPlayer(u)
	i = 1 + GetPlayerId(p)
	loc = GetUnitLoc(u)
	loc2 = PolarProjectionBJ(loc, GetRandomReal(100, 300), angle)
	loc3 = PolarProjectionBJ(loc, GetRandomReal(100, 300), 180 + angle)
	if GetRandomReal(0.0, 200.0) <= 15 + fuyuan[i] // 5 then
		WuGongShengChong(u, 1093678157, 900.0)
		DestroyEffect(AddSpecialEffectLocBJ(loc2, "war3mapImported\\aquaspike.mdl"))
		GroupEnumUnitsInRangeOfLoc(g, loc2, 500, Condition(TianZhu_Condition))
		if GetUnitAbilityLevel(u, 1093678933) >= 1 then
			DestroyEffect(AddSpecialEffectLocBJ(loc3, "war3mapImported\\aquaspike.mdl"))
			GroupEnumUnitsInRangeOfLoc(g, loc3, 500, Condition(TianZhu_Condition))
		end
		ForGroupBJ(g, TianZhu_Action)
	--call PolledWait(0.15)
	--set j = 1
	--loop
	--	exitwhen j > 4
	--	set loc3[j] = PolarProjectionBJ(loc2, 300, angle - 90 + 90 * j)
	--	call DestroyEffect(AddSpecialEffectLocBJ(loc3[j], "war3mapImported\\aquaspike.mdl" ))
	--	call RemoveLocation(loc3[j])
	--	set loc3[j] = null
	--	call PolledWait(0.15)
	--	set j = j + 1
	--endloop
	end
	GroupClear(g)
	RemoveLocation(loc)
	RemoveLocation(loc2)
	RemoveLocation(loc3)
	g = nil
	u = nil
	p = nil
	loc = nil
	loc2 = nil
	loc3 = nil
end
--===========================================================================
--鹤翔紫盖
function IsHeXiangZiGai()
	return GetSpellAbilityId() == 1093678158 and IsUnitEnemy(GetSpellTargetUnit(), GetOwningPlayer(GetTriggerUnit()))
end
function HeXiangJianFa()
	local u = GetTriggerUnit()
	local uc = GetSpellTargetUnit()
	local l__ut = nil
	local uttt = nil
	local loc = GetUnitLoc(uc)
	local loc2 = GetUnitLoc(u)
	local g = CreateGroup()
	local shanghai = 0.0
	local shxishu = 1.0
	local id = 0
	if GetUnitAbilityLevel(u, 1093682254) >= 1 then
		if GetUnitTypeId(u) == 1328558132 then
			id = 1747988533
		elseif GetUnitTypeId(u) == 1328558129 then
			id = 1747988535
		elseif GetUnitTypeId(u) == 1328558130 then
			id = 1747988536
		elseif GetUnitTypeId(u) == 1328558131 then
			id = 1747988537
		elseif GetUnitTypeId(u) == 1328558128 then
			id = 1747988534
		elseif GetUnitTypeId(u) == 1328558643 or GetUnitTypeId(u) == 1328558664 or GetUnitTypeId(u) == 1328558665 then
			id = 1747988553
		elseif GetUnitTypeId(u) == 1328558666 then
			id = 1747988555
		end
		CreateNUnitsAtLoc(1, id, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		uttt = bj_lastCreatedUnit
	else
		uttt = u
	end
	WuGongShengChong(u, 1093678158, 200)
	SetUnitTimeScale(uttt, 0.3)
	YDWETimerDestroyEffect(2, AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl", uttt, "chest"))
	YDWEJumpTimer(uttt, AngleBetweenPoints(loc2, loc), 2 * DistanceBetweenPoints(loc2, loc), 2, 0.01, 400.0)
	YDWEPolledWaitNull(1.0)
	CreateNUnitsAtLoc(1, 1697657153, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	l__ut = bj_lastCreatedUnit
	UnitAddAbility(l__ut, 1093678159)
	UnitApplyTimedLife(l__ut, 1112045413, 2.0)
	ShowUnitHide(l__ut)
	IssueTargetOrderById(l__ut, 852119, uc)
	if GetUnitAbilityLevel(u, 1093678666) >= 1 then
		shxishu = shxishu + 0.9
	end
	if GetUnitAbilityLevel(u, 1093678897) >= 1 then
		shxishu = shxishu + 0.9
	end
	if GetUnitAbilityLevel(u, 1093678922) >= 1 then
		shxishu = shxishu + 1.5
	end
	if UnitHaveItem(u, 1227895116) or UnitHaveItem(u, 1227894851) or UnitHaveItem(u, 1227894850) or UnitHaveItem(u, 1227897145) or UnitHaveItem(u, 1227897153) or UnitHaveItem(u, 1227897155) then
		shxishu = shxishu * 2
	end
	if GetUnitAbilityLevel(u, 1093678930) >= 1 then
		WanBuff(u, uc, 12)
	end
	shanghai = ShangHaiGongShi(u, uc, 300, 100, shxishu, 1093678158)
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	RemoveLocation(loc2)
	YDWEPolledWaitNull(1.0)
	SetUnitTimeScale(uttt, 1.0)
	u = nil
	uc = nil
	loc = nil
	loc2 = nil
	l__ut = nil
	uttt = nil
	g = nil
end
--===========================================================================
--石廪书声
function IsShiLin()
	return GetUnitAbilityLevel(GetAttacker(), 1093678160) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function ShiLinShuSheng()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local id = 1865429579
	local loc1 = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	local angle = AngleBetweenPoints(loc1, loc2)
	if GetRandomReal(0.0, 100.0) <= 15 + fuyuan[i] // 5 then
		CreateNUnitsAtLocFacingLocBJ(1, id, p, PolarProjectionBJ(loc1, 300, 180 + angle), loc2)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 5.0 + 5.0 * GetUnitAbilityLevel(u, 1395666994))
		if GetUnitAbilityLevel(u, 1093678666) >= 1 then
			UnitAddAbility(bj_lastCreatedUnit, 1093677901)
		end
		if GetUnitAbilityLevel(u, 1093678922) >= 1 then
			UnitAddAbility(bj_lastCreatedUnit, 1093677903)
		end
		WuGongShengChong(u, 1093678160, 600.0)
		RemoveLocation(loc1)
		RemoveLocation(loc2)
	end
	loc1 = nil
	loc2 = nil
	p = nil
	u = nil
	uc = nil
end
function IsShiLinShu()
	return GetUnitTypeId(GetEventDamageSource()) == 1865429579
end
function ShiLinShu()
	local p = GetOwningPlayer(GetEventDamageSource())
	local i = 1 + GetPlayerId(p)
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shanghai = 0.0
	local shxishu = 1.0
	if GetUnitAbilityLevel(u, 1093678897) >= 1 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093678918) >= 1 then
		shxishu = shxishu + 1.6
	end
	if UnitHaveItem(u, 1227895116) or UnitHaveItem(u, 1227894851) or UnitHaveItem(u, 1227894850) or UnitHaveItem(u, 1227897145) or UnitHaveItem(u, 1227897153) or UnitHaveItem(u, 1227897155) then
		shxishu = shxishu * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 50.0, 28.0, shxishu, 1093678160)
	WuGongShangHai(u, uc, shanghai)
	uc = nil
	u = nil
	p = nil
end
--===========================================================================
--雁回祝融
function IsYanHui()
	return GetUnitAbilityLevel(GetAttacker(), 1093678162) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function YanHuiZhuRong()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local id = 1747988556
	local loc1 = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	if GetRandomReal(0.0, 100.0) <= 15 + fuyuan[i] // 5 then
		CreateNUnitsAtLocFacingLocBJ(1, id, p, loc1, loc2)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 6.0 + 6.0 * GetUnitAbilityLevel(u, 1093679155))
		WuGongShengChong(u, 1093678162, 600.0)
		RemoveLocation(loc1)
		RemoveLocation(loc2)
	end
	loc1 = nil
	loc2 = nil
	p = nil
	u = nil
	uc = nil
end
function IsYanHuiJian()
	return GetUnitTypeId(GetEventDamageSource()) == 1747988556
end
function YanHuiJianFa()
	local p = GetOwningPlayer(GetEventDamageSource())
	local i = 1 + GetPlayerId(p)
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shanghai = 0.0
	local shxishu = 1.0
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093678666) >= 1 then
		shxishu = shxishu + 0.6
	end
	if UnitHaveItem(u, 1227895116) or UnitHaveItem(u, 1227894851) or UnitHaveItem(u, 1227894850) or UnitHaveItem(u, 1227897145) or UnitHaveItem(u, 1227897153) or UnitHaveItem(u, 1227897155) then
		shxishu = shxishu * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 200.0, 80.0, shxishu, 1093678162)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678928) >= 1 then
		WanBuff(u, uc, 7)
	end
	if GetRandomReal(0.0, 100.0) <= 15 + fuyuan[i] // 5 + GetUnitAbilityLevel(u, 1093678933) * 21 then
		CreateNUnitsAtLoc(1, 1697656880, p, loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678161)
		if GetUnitAbilityLevel(u, 1093678922) >= 1 then
			IncUnitAbilityLevel(bj_lastCreatedUnit, 1093678161)
		end
		IssueTargetOrderById(bj_lastCreatedUnit, 852171, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	end
	RemoveLocation(loc)
	uc = nil
	u = nil
	p = nil
	loc = nil
end
function IsYanHuiDamage()
	return GetEventDamage() == 6.28 and GetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))], 1093678162) >= 1
end
function YanHuiDamage()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678666) >= 1 then
		shxishu = shxishu + 0.6
	end
	if UnitHaveItem(u, 1227895116) or UnitHaveItem(u, 1227894851) or UnitHaveItem(u, 1227894850) or UnitHaveItem(u, 1227897145) or UnitHaveItem(u, 1227897153) or UnitHaveItem(u, 1227897155) then
		shxishu = shxishu * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 250, 160, shxishu, 1093678162)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--===========================================================================
--泉鸣芙蓉
function QuanMing_Conditions()
	return GetSpellAbilityId() == 1093677622
end
function QuanMing_Actions()
	local u = GetTriggerUnit()
	local loc = GetSpellTargetLoc()
	local loc2 = nil
	local l__ut = nil
	local i = 0
	WuGongShengChong(u, 1093677622, 100)
	SaveUnitHandle(YDHT, StringHash("泉鸣"), 1, u)
	SaveLocationHandle(YDHT, StringHash("泉鸣"), 0, loc)
	TerrainDeformationCraterBJ(15.8, false, loc, 400.0, 400.0)
	CreateNUnitsAtLoc(1, 1697656922, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	l__ut = bj_lastCreatedUnit
	i = 1
	for _ in _loop_() do
		if i > 16 then break end
		CreateNUnitsAtLocFacingLocBJ(1, 1697657137, GetOwningPlayer(GetTriggerUnit()), PolarProjectionBJ(loc, 350.0, 22.5 * i), loc)
		UnitApplyTimedLifeBJ(13.5, 1112820806, GetLastCreatedUnit())
		DestroyEffect(AddSpecialEffectLocBJ(PolarProjectionBJ(loc, 350.0, 22.5 * I2R(i)), "Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl"))
		i = i + 1
	end
	i = 1
	for _ in _loop_() do
		if i > 30 then break end
		loc2 = GetRandomLocInRect(RectFromCenterSizeBJ(loc, 350.0, 350.0))
		CreateNUnitsAtLoc(1, 1697657136, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
		UnitApplyTimedLifeBJ(15.0, 1112820806, GetLastCreatedUnit())
		RemoveLocation(loc2)
		i = i + 1
	end
	TriggerSleepAction(1.5)
	EnableTrigger(gg_trg_Number14_1)
	TriggerSleepAction(13.5)
	DisableTrigger(gg_trg_Number14_1)
	TriggerSleepAction(0.5)
	i = 1
	for _ in _loop_() do
		if i > 16 then break end
		DestroyEffect(AddSpecialEffectLocBJ(PolarProjectionBJ(loc, 350.0, 22.5 * I2R(i)), "Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl"))
		i = i + 1
	end
	RemoveUnit(l__ut)
	RemoveLocation(loc)
	u = nil
	l__ut = nil
	loc = nil
	loc2 = nil
end
function Trig_Number14_1Func001001003()
	return UnitHasBuffBJ(GetFilterUnit(), 1113682796) == true
end
function Trig_Number14_1Func001A()
	local loc = LoadLocationHandle(YDHT, StringHash("泉鸣"), 0)
	local u = LoadUnitHandle(YDHT, StringHash("泉鸣"), 1)
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678666) >= 1 then
		shxishu = shxishu + 0.5
	end
	if GetUnitAbilityLevel(u, 1093678897) >= 1 then
		shxishu = shxishu + 0.5
	end
	if GetUnitAbilityLevel(u, 1093678918) >= 1 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678922) >= 1 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678666) >= 1 and GetUnitAbilityLevel(u, 1093678897) >= 1 and GetUnitAbilityLevel(u, 1093678918) >= 1 and GetUnitAbilityLevel(u, 1093678922) >= 1 then
		shxishu = shxishu + 4
	end
	if UnitHaveItem(u, 1227895116) or UnitHaveItem(u, 1227894851) or UnitHaveItem(u, 1227894850) or UnitHaveItem(u, 1227897145) or UnitHaveItem(u, 1227897153) or UnitHaveItem(u, 1227897155) then
		shxishu = shxishu * 2
	end
	shanghai = ShangHaiGongShi(u, GetEnumUnit(), 60, 95, shxishu, 1093677622)
	if IsUnitEnemy(GetEnumUnit(), GetOwningPlayer(u)) then
		SetUnitPositionLoc(GetEnumUnit(), loc)
		WuGongShangHai(u, GetEnumUnit(), shanghai)
	end
	loc = nil
--call FlushChildHashtable(YDHT,StringHash("泉鸣"))
end
function Trig_Number14_1Actions()
	local loc = LoadLocationHandle(YDHT, StringHash("泉鸣"), 0)
	local i = 0
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(470.0, loc, Condition(Trig_Number14_1Func001001003)), Trig_Number14_1Func001A)
	i = 1
	for _ in _loop_() do
		if i > 7 then break end
		DestroyEffect(AddSpecialEffectLocBJ(GetRandomLocInRect(RectFromCenterSizeBJ(loc, 350.0, 350.0)), "Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl"))
		i = i + 1
	end
	loc = nil
end
--===========================================================================
function HengShan2_Trigger()
	local t = CreateTrigger()
	--天柱云气
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsTianZhu))
	TriggerAddAction(t, TianZhuYunQi)
	--鹤翔紫盖
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsHeXiangZiGai))
	TriggerAddAction(t, HeXiangJianFa)
	--石廪书声
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsShiLin))
	TriggerAddAction(t, ShiLinShuSheng)
	t = CreateTrigger()
	Ov(t)
	TriggerAddCondition(t, Condition(IsShiLinShu))
	TriggerAddAction(t, ShiLinShu)
	--雁回祝融
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsYanHui))
	TriggerAddAction(t, YanHuiZhuRong)
	t = CreateTrigger()
	Ov(t)
	TriggerAddCondition(t, Condition(IsYanHuiJian))
	TriggerAddAction(t, YanHuiJianFa)
	t = CreateTrigger()
	Ov(t)
	TriggerAddCondition(t, Condition(IsYanHuiDamage))
	TriggerAddAction(t, YanHuiDamage)
	--泉鸣芙蓉
	gg_trg_Number14_1 = CreateTrigger()
	DisableTrigger(gg_trg_Number14_1)
	TriggerRegisterTimerEventPeriodic(gg_trg_Number14_1, 1.0)
	TriggerAddAction(gg_trg_Number14_1, Trig_Number14_1Actions)
	gg_trg_Number14_0 = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(gg_trg_Number14_0, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(gg_trg_Number14_0, Condition(QuanMing_Conditions))
	TriggerAddAction(gg_trg_Number14_0, QuanMing_Actions)
end
--天山折梅手
function IsXinZheMei()
	local i = 1
	for _ in _loop_() do
		if i > 5 then break end
		if udg_zhemei[i] == 0 and GetUnitAbilityLevel(udg_hero[i], 1093677634) >= 1 then
			udg_zhemei[i] = 1
			SaveInteger(YDHT, StringHash("折梅"), StringHash("折梅"), i)
			return true
		end
		i = i + 1
	end
	return false
end
function XinZheMeiShou_1()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	if GetUnitAbilityLevel(u, 1093677634) >= 1 then
		UnitAddAbilityBJ(1093677656, u)
		SetPlayerAbilityAvailableBJ(false, 1093677656, GetOwningPlayer(u))
		udg_zhemeieff = AddSpecialEffectTargetUnitBJ("overhead", u, "Abilities\\Weapons\\Bolt\\BoltImpact.mdl")
	else
		FlushChildHashtable(YDHT, GetHandleId(t))
		PauseTimer(t)
		DestroyTimer(t)
	end
	t = nil
	u = nil
end
function XinZheMeiShou()
	local t = CreateTimer()
	local u = udg_hero[LoadInteger(YDHT, StringHash("折梅"), StringHash("折梅"))]
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	TimerStart(t, 1.0, false, XinZheMeiShou_1)
	t = nil
	u = nil
end
function XinZheMeiShou_Condition()
	return GetUnitAbilityLevel(GetAttacker(), 1093677655) >= 1 and IsUnitType(GetAttacker(), UNIT_TYPE_HERO) ~= nil and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) -- INLINED!!
end
function ZheMei_Condition()
	--call BJDebugMsg("pos2")
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function ZheMei_Action()
	local uc = GetEnumUnit()
	local u = GetAttacker()
	local loc = GetUnitLoc(uc)
	local shxishu = 1.0
	local shanghai = 0.0
	shxishu = RMinBJ(1.0 + I2R(GetHeroInt(u, true)) / 600.0, 15.0)
	if GetUnitAbilityLevel(u, 1093677635) ~= 0 then
		shxishu = shxishu + 0.5
	end
	if GetUnitAbilityLevel(u, 1093677640) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093682230) ~= 0 then
		shxishu = shxishu + 0.7
	end
	--call BJDebugMsg("pos3")
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl"))
	RemoveLocation(loc)
	shanghai = ShangHaiGongShi(u, uc, 9, 18, shxishu, 1093677634)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
	loc = nil
end
function XinZheMeiShou_Action()
	local t = CreateTimer()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local shxishu = 1.0
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local j = RMaxBJ(7.0 - I2R(GetHeroAgi(u, true)) / 400.0, 0.5)
	local range = 500.0 + 50.0 * GetUnitAbilityLevel(u, 1093677634) + I2R(GetHeroStr(u, true)) / 10.0
	UnitRemoveAbility(u, 1093677656)
	DestroyEffect(udg_zhemeieff)
	udg_zhemeieff = nil
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	TimerStart(t, j, false, XinZheMeiShou_1)
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range, loc, Condition(ZheMei_Condition)), ZheMei_Action)
	WuGongShengChong(u, 1093677634, 450.0)
	if GetUnitAbilityLevel(u, 1093677640) >= 1 and GetRandomInt(1, 4) == 1 then
		WanBuff(u, uc, 2)
	end
	if GetUnitAbilityLevel(u, 1093678926) >= 1 and GetRandomInt(1, 4) == 1 then
		WanBuff(u, uc, 11)
	end
	RemoveLocation(loc)
end
--月影舞步
function IsYueYing()
	return GetSpellAbilityId() == 1093677635
end
function ZheMei_Condition2()
	--call BJDebugMsg("pos2")
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit())
end
function ZheMei_Action2()
	local uc = GetEnumUnit()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(uc)
	local shxishu = 1.0
	local shanghai = 0.0
	shxishu = RMinBJ(1.0 + I2R(GetHeroInt(u, true)) / 600.0, 15.0)
	if GetUnitAbilityLevel(u, 1093677635) ~= 0 then
		shxishu = shxishu + 0.5
	end
	if GetUnitAbilityLevel(u, 1093677640) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093682230) ~= 0 then
		shxishu = shxishu + 0.7
	end
	--call BJDebugMsg("pos3")
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl"))
	RemoveLocation(loc)
	shanghai = ShangHaiGongShi(u, uc, 9, 18, shxishu, 1093677634)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
	loc = nil
end
function YueYingBu()
	local u = GetTriggerUnit()
	local r = 5.0
	local level = 1
	local loc = GetUnitLoc(u)
	local loc2 = GetSpellTargetLoc()
	if GetUnitAbilityLevel(u, 1093678931) >= 1 then
		r = r + 3.0
	end
	if GetUnitAbilityLevel(u, 1093677639) >= 1 then
		r = r + 3.0
	end
	WuGongShengChong(u, 1093677635, 100.0)
	SaveInteger(YDHT, GetHandleId(u), 1093677635 * 100, LoadInteger(YDHT, GetHandleId(u), 1093677635 * 100) + 1)
	--call BJDebugMsg("目前特效剩余值为"+I2S(LoadInteger(YDHT, GetHandleId(u), 'A02C'*100)))
	UnitAddAbility(u, 1093677110)
	if GetUnitAbilityLevel(u, 1093678929) >= 1 then
		UnitAddAbilityBJ(1093677652, u)
		SetPlayerAbilityAvailableBJ(false, 1093677652, GetOwningPlayer(u))
	--call UnitAddAbility(u, 'ACes')
	end
	if GetUnitAbilityLevel(u, 1093678927) >= 1 then
		UnitAddAbility(u, 1093677636)
	end
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(300, loc, Condition(ZheMei_Condition2)), ZheMei_Action2)
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(300, loc2, Condition(ZheMei_Condition2)), ZheMei_Action2)
	YDWEPolledWaitNull(1.0)
	if GetUnitAbilityLevel(u, 1093678933) >= 1 and GetRandomInt(1, 2) == 1 then
		level = GetUnitAbilityLevel(u, 1093677635)
		UnitRemoveAbility(u, 1093677635)
		UnitAddAbility(u, 1093677635)
		SetUnitAbilityLevel(u, 1093677635, level)
	end
	--call BJDebugMsg("pos4")
	YDWEPolledWaitNull(r - 1)
	SaveInteger(YDHT, GetHandleId(u), 1093677635 * 100, LoadInteger(YDHT, GetHandleId(u), 1093677635 * 100) - 1)
	--call BJDebugMsg("目前特效剩余值为"+I2S(LoadInteger(YDHT, GetHandleId(u), 'A02C'*100)))
	if LoadInteger(YDHT, GetHandleId(u), 1093677635 * 100) == 0 then
		UnitRemoveAbility(u, 1093677110)
		if GetUnitAbilityLevel(u, 1093678929) >= 1 then
			UnitRemoveAbility(u, 1093677652)
		end
		if GetUnitAbilityLevel(u, 1093678927) >= 1 then
			UnitRemoveAbility(u, 1093677636)
		end
	end
end
function IsYueYingBeiDong()
	return GetUnitAbilityLevel(GetAttacker(), 1093677635) >= 1 and GetUnitAbilityLevel(GetAttacker(), 1093677640) >= 1 and GetRandomInt(1, 100) <= 15 and GetUnitAbilityLevel(GetAttacker(), 1093677637) == 0
end
function YueYingBuBeiDong()
	UnitAddAbility(GetAttacker(), 1093677637)
	YDWEPolledWaitNull(5.0)
	UnitRemoveAbility(GetAttacker(), 1093677637)
end
--如意刀法
function IsRuYi()
	return GetSpellAbilityId() == 1093677638
end
function RuYiDao()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local loc2 = nil
	WuGongShengChong(GetTriggerUnit(), 1093677638, 200)
	CreateNUnitsAtLoc(1, 1747988552, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	SetUnitVertexColorBJ(bj_lastCreatedUnit, 100, 100, 100, 100)
	UnitAddAbility(bj_lastCreatedUnit, 1097625443)
	UnitAddAbility(bj_lastCreatedUnit, 1093677642)
	if GetUnitAbilityLevel(u, 1093678920) >= 1 then
		IncUnitAbilityLevel(bj_lastCreatedUnit, 1093677642)
	end
	IssueImmediateOrderById(bj_lastCreatedUnit, 852128)
	IssueTargetOrderById(bj_lastCreatedUnit, 851986, u)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 7.0)
	if GetUnitAbilityLevel(u, 1093678933) >= 1 then
		loc2 = pu(loc, 256.0, GetRandomReal(0, 360.0))
		CreateNUnitsAtLoc(1, 1747988552, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
		SetUnitVertexColorBJ(bj_lastCreatedUnit, 100, 100, 100, 100)
		UnitAddAbility(bj_lastCreatedUnit, 1097625443)
		UnitAddAbility(bj_lastCreatedUnit, 1093677642)
		if GetUnitAbilityLevel(u, 1093678920) >= 1 then
			IncUnitAbilityLevel(bj_lastCreatedUnit, 1093677642)
		end
		IssueImmediateOrderById(bj_lastCreatedUnit, 852128)
		IssueTargetOrderById(bj_lastCreatedUnit, 851986, u)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 7.0)
	end
	if GetUnitAbilityLevel(u, 1093682254) >= 1 then
		UnitAddAbility(u, 1093682001)
		SetPlayerAbilityAvailable(GetOwningPlayer(u), 1093682001, false)
	end
	YDWEPolledWaitNull(7.0)
	UnitRemoveAbility(u, 1093682001)
	RemoveLocation(loc)
	RemoveLocation(loc2)
	u = nil
	loc = nil
	loc2 = nil
end
function IsRuYiMaJia()
	return GetUnitTypeId(GetEventDamageSource()) == 1747988552 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource()))
end
function RuYiMaJia()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093677639) >= 1 then
		shxishu = shxishu + 0.8
	end
	shanghai = ShangHaiGongShi(u, uc, 48.0, 48.0, shxishu, 1093677638)
	WuGongShangHai(u, uc, shanghai)
	if UnitHasBuffBJ(u, 1110454361) and GetUnitAbilityLevel(u, 1093677368) >= 1 then
		WuGongShangHai(u, uc, shanghai * 30)
	end
	u = nil
	uc = nil
end
function IsRuYiBeiDong()
	return GetUnitAbilityLevel(GetAttacker(), 1093677638) >= 1 and GetUnitAbilityLevel(GetAttacker(), 1093678669) >= 1 and GetRandomInt(1, 100) <= 8
end
function RuYiBeiDong()
	local u = GetAttacker()
	local loc = GetUnitLoc(u)
	--call WuGongShengChong(GetTriggerUnit(),'A02F',1200)
	CreateNUnitsAtLoc(1, 1747988552, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	SetUnitVertexColorBJ(bj_lastCreatedUnit, 100, 100, 100, 100)
	UnitAddAbility(bj_lastCreatedUnit, 1097625443)
	UnitAddAbility(bj_lastCreatedUnit, 1093677642)
	if GetUnitAbilityLevel(u, 1093678920) >= 1 then
		IncUnitAbilityLevel(bj_lastCreatedUnit, 1093677642)
	end
	IssueImmediateOrderById(bj_lastCreatedUnit, 852128)
	IssueTargetOrderById(bj_lastCreatedUnit, 851986, u)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 7.0)
	if GetUnitAbilityLevel(u, 1093682254) >= 1 then
		UnitAddAbility(u, 1093682001)
		SetPlayerAbilityAvailable(GetOwningPlayer(u), 1093682001, false)
	end
	YDWEPolledWaitNull(7.0)
	UnitRemoveAbility(u, 1093682001)
	RemoveLocation(loc)
	u = nil
	loc = nil
end
--八荒六合唯我独尊功
function IsBaHuang()
	return GetUnitAbilityLevel(GetAttacker(), 1093677639) >= 1
end
function BaHuangGong_1()
	local t = GetExpiredTimer()
	local j = LoadInteger(YDHT, GetHandleId(t), 0)
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 1)
	local jishu = LoadInteger(YDHT, GetHandleId(t), 2)
	local level = LoadInteger(YDHT, GetHandleId(t), 3)
	ModifyHeroStat(j, u, 1, jishu * level * 6)
	PauseTimer(t)
	DestroyTimer(t)
	t = nil
	u = nil
end
function BaHuangGong_2()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 1)
	local jishu = LoadInteger(YDHT, GetHandleId(t), 2)
	local level = LoadInteger(YDHT, GetHandleId(t), 3)
	ModifyHeroStat(0, u, 1, jishu * level)
	ModifyHeroStat(1, u, 1, jishu * level)
	ModifyHeroStat(2, u, 1, jishu * level)
	PauseTimer(t)
	DestroyTimer(t)
	t = nil
	u = nil
end
function BaHuangGong_3()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 1)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local jishu = LoadInteger(YDHT, GetHandleId(t), 2)
	local level = LoadInteger(YDHT, GetHandleId(t), 3)
	juexuelingwu[i] = juexuelingwu[i] - level
	PauseTimer(t)
	DestroyTimer(t)
	t = nil
	u = nil
end
function BaHuangGong()
	local u = GetAttacker()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local jishu = 8
	local level = GetUnitAbilityLevel(u, 1093677639)
	local loc = GetUnitLoc(u)
	local j = GetRandomInt(0, 2)
	local t = nil
	if GetUnitAbilityLevel(u, 1093678935) >= 1 then
		jishu = 15
	end
	if GetRandomInt(1, 100) < 6 + fuyuan[i] // 3 + GetUnitAbilityLevel(u, 1093679157) * 3 then
		WuGongShengChong(u, 1093677639, 500 - 50 * GetUnitAbilityLevel(u, 1093679161))
		if GetUnitAbilityLevel(u, 1093682226) >= 1 then
			ModifyHeroStat(j, u, 0, jishu * level * 6)
			t = CreateTimer()
			SaveInteger(YDHT, GetHandleId(t), 0, j)
			SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
			SaveInteger(YDHT, GetHandleId(t), 2, jishu)
			SaveInteger(YDHT, GetHandleId(t), 3, level)
			TimerStart(t, 12.0, false, BaHuangGong_1)
		else
			ModifyHeroStat(0, u, 0, jishu * level)
			ModifyHeroStat(1, u, 0, jishu * level)
			ModifyHeroStat(2, u, 0, jishu * level)
			t = CreateTimer()
			SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
			SaveInteger(YDHT, GetHandleId(t), 2, jishu)
			SaveInteger(YDHT, GetHandleId(t), 3, level)
			TimerStart(t, 12.0, false, BaHuangGong_2)
		end
		DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl"))
		if GetUnitAbilityLevel(u, 1093679155) >= 1 then
			juexuelingwu[i] = juexuelingwu[i] + level
			t = CreateTimer()
			SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
			SaveInteger(YDHT, GetHandleId(t), 2, jishu)
			SaveInteger(YDHT, GetHandleId(t), 3, level)
			TimerStart(t, 12.0, false, BaHuangGong_3)
		end
	end
	RemoveLocation(loc)
	u = nil
	p = nil
	loc = nil
	t = nil
end
--天山六阳掌
function IsLiuYang()
	return GetSpellAbilityId() == 1093677640
end
function LiuYangZhang()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	WuGongShengChong(GetTriggerUnit(), 1093677640, 190)
	CreateNUnitsAtLoc(1, 1697657138, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093677641)
	if GetUnitAbilityLevel(u, 1093682254) >= 1 then
		IncUnitAbilityLevel(bj_lastCreatedUnit, 1093677641)
	end
	IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852238, loc)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 15.0)
	RemoveLocation(loc)
	u = nil
	loc = nil
end
function IsLiuYangMaJia()
	return GetUnitTypeId(GetEventDamageSource()) == 1697657138 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource()))
end
function LiuYangMaJia()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678921) >= 1 then
		shxishu = shxishu + 1
	end
	shanghai = ShangHaiGongShi(u, uc, 84, 48, shxishu, 1093677640)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678925) >= 1 then
		WanBuff(u, uc, 2)
	end
	if GetUnitAbilityLevel(u, 1093679154) >= 1 then
		WanBuff(u, uc, 6)
	end
	u = nil
	uc = nil
end
function IsLiuYangBeiDong()
	return GetUnitAbilityLevel(GetAttacker(), 1093677640) >= 1 and GetUnitAbilityLevel(GetAttacker(), 1093682232) >= 1 and GetUnitAbilityLevel(GetAttacker(), 1093678920) >= 1 and GetRandomInt(1, 100) <= 5
end
function LiuYangBeiDong()
	local u = GetAttacker()
	local loc = GetUnitLoc(u)
	CreateNUnitsAtLoc(1, 1697657138, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093677641)
	if GetUnitAbilityLevel(u, 1093682254) >= 1 then
		IncUnitAbilityLevel(bj_lastCreatedUnit, 1093677641)
	end
	IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852238, loc)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 15.0)
	RemoveLocation(loc)
	u = nil
	loc = nil
end
function LingJiuGong_Trigger()
	local t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 1.0)
	TriggerAddCondition(t, Condition(IsXinZheMei))
	TriggerAddAction(t, XinZheMeiShou)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(XinZheMeiShou_Condition))
	TriggerAddAction(t, XinZheMeiShou_Action)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsYueYing))
	TriggerAddAction(t, YueYingBu)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsYueYingBeiDong))
	TriggerAddAction(t, YueYingBuBeiDong)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsBaHuang))
	TriggerAddAction(t, BaHuangGong)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsLiuYang))
	TriggerAddAction(t, LiuYangZhang)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsLiuYangMaJia))
	TriggerAddAction(t, LiuYangMaJia)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsLiuYangBeiDong))
	TriggerAddAction(t, LiuYangBeiDong)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsRuYi))
	TriggerAddAction(t, RuYiDao)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsRuYiMaJia))
	TriggerAddAction(t, RuYiMaJia)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsRuYiBeiDong))
	TriggerAddAction(t, RuYiBeiDong)
	t = nil
end
--家传剑法
function IsJiaChuanMaJia()
	return IsUnitAliveBJ(GetFilterUnit()) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, 10001, 10001)))
end
function JiaChuanMaJia_1()
	local u = LoadUnitHandle(YDHT, 10001, 10001)
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093677650) >= 1 then
		shxishu = shxishu + 1.0
	end
	if GetRandomInt(1, 4) == 1 then
		DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"))
	end
	shanghai = ShangHaiGongShi(u, uc, 12.0, 18.0, shxishu, 1093677643)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093677654) >= 1 and GetRandomInt(1, 100) <= 15 + fuyuan[i] // 5 then
		WanBuff(u, uc, 6)
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function JiaChuanMaJia()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local j = LoadInteger(YDHT, GetHandleId(t), 1)
	local range = 550.0
	local loc = GetUnitLoc(u)
	local jmax = 17
	if GetUnitAbilityLevel(u, 1093678897) >= 1 then
		range = range + 350.0
	end
	if GetUnitAbilityLevel(u, 1093678666) >= 1 then
		jmax = 25
	end
	if j < jmax then
		SaveInteger(YDHT, GetHandleId(t), 1, j + 1)
		SaveUnitHandle(YDHT, 10001, 10001, u)
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(range, loc, Condition(IsJiaChuanMaJia)), JiaChuanMaJia_1)
	else
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, GetHandleId(t))
	end
	RemoveLocation(loc)
	t = nil
	u = nil
	loc = nil
end
function IsJiaChuan()
	return GetSpellAbilityId() == 1093677643
end
function JiaChuanJian()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local t = CreateTimer()
	WuGongShengChong(GetTriggerUnit(), 1093677643, 140)
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093677644)
	if GetUnitAbilityLevel(u, 1093678897) >= 1 then
		SetUnitAbilityLevel(bj_lastCreatedUnit, 1093677644, 2)
	end
	if GetUnitAbilityLevel(u, 1093678666) >= 1 then
		SetUnitAbilityLevel(bj_lastCreatedUnit, 1093677644, 3)
	end
	if GetUnitAbilityLevel(u, 1093678666) >= 1 and GetUnitAbilityLevel(u, 1093678897) >= 1 then
		SetUnitAbilityLevel(bj_lastCreatedUnit, 1093677644, 4)
	end
	IssueTargetOrderById(bj_lastCreatedUnit, 852110, u)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	TimerStart(t, 1, true, JiaChuanMaJia)
	if GetUnitAbilityLevel(u, 1093678932) >= 1 then
		UnitAddAbility(u, 1093677636)
		YDWEPolledWaitNull(4.0)
		UnitRemoveAbility(u, 1093677636)
	end
	RemoveLocation(loc)
	u = nil
	loc = nil
	t = nil
end
--袖中指
function IsXiuZhong()
	return GetUnitAbilityLevel(GetAttacker(), 1093681987) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function XiuZhongZhi()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local loc = GetUnitLoc(uc)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678897) >= 1 then
		shxishu = shxishu + 0.8
	end
	shanghai = ShangHaiGongShi(u, uc, 40.0, 60.0, shxishu, 1093681987)
	if GetRandomInt(1, 100) <= 15 + fuyuan[i] // 6 + GetUnitAbilityLevel(u, 1093681987) * 2 then
		if GetUnitAbilityLevel(u, 1093678672) >= 1 then
			WanBuff(u, uc, 12)
		else
			WanBuff(u, uc, 11)
		end
		WuGongShangHai(u, uc, shanghai)
		WuGongShengChong(u, 1093681987, 600)
		SetUnitAnimation(u, "attack, slam")
		DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"))
		if GetUnitAbilityLevel(u, 1093677650) >= 1 then
			ModifyHeroStat(1, u, 0, 20 * GetUnitAbilityLevel(u, 1093681987))
			YDWEPolledWaitNull(15.0 + 2 * GetUnitAbilityLevel(u, 1093681987))
			ModifyHeroStat(1, u, 1, 20 * GetUnitAbilityLevel(u, 1093681987))
		end
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	p = nil
	loc = nil
end
--参合指
function IsCanHe()
	return GetSpellAbilityId() == 1093677645
end
function CanHeZhi()
	local u = GetTriggerUnit()
	local uc = GetSpellTargetUnit()
	local loc = GetUnitLoc(uc)
	WuGongShengChong(GetTriggerUnit(), 1093677645, 200)
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093677647)
	if GetUnitAbilityLevel(u, 1093678664) >= 1 then
		IncUnitAbilityLevel(bj_lastCreatedUnit, 1093677647)
	end
	IssueTargetOrderById(bj_lastCreatedUnit, 852119, uc)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function IsCanHeMaJia()
	return GetEventDamage() == 5.15
end
function CanHeMaJia()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local loc = GetUnitLoc(uc)
	local shxishu = 1.0
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 90.0, 50.0, shxishu, 1093677645)
	WuGongShangHai(u, uc, shanghai)
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093677648)
	if GetUnitAbilityLevel(u, 1093682254) >= 1 then
		IncUnitAbilityLevel(bj_lastCreatedUnit, 1093677648)
	end
	UnitAddAbility(bj_lastCreatedUnit, 1093677649)
	if GetUnitAbilityLevel(u, 1093678932) >= 1 then
		IncUnitAbilityLevel(bj_lastCreatedUnit, 1093677649)
	end
	IssueTargetOrderById(bj_lastCreatedUnit, 852189, uc)
	IssueTargetOrderById(bj_lastCreatedUnit, 852149, uc)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 4.0)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function IsCanHeBeiDong()
	return GetUnitAbilityLevel(GetAttacker(), 1093677654) >= 1 and GetUnitAbilityLevel(GetAttacker(), 1093677645) >= 1
end
function CanHeBeiDong()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local loc = GetUnitLoc(uc)
	if GetRandomInt(1, 100) <= 10 then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093677647)
		if GetUnitAbilityLevel(u, 1093678664) >= 1 then
			IncUnitAbilityLevel(bj_lastCreatedUnit, 1093677647)
		end
		IssueTargetOrderById(bj_lastCreatedUnit, 852119, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
--真·星移斗转
function IsXingYi()
	return GetSpellAbilityId() == 1093677650
end
function XingYiDouZhuan_1()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local uc = LoadUnitHandle(YDHT, GetHandleId(t), 1)
	local r = 5.0
	local percent = GetUnitLifePercent(uc)
	if GetUnitAbilityLevel(u, 1093678929) >= 1 then
		r = 10.0
	end
	if LoadBoolean(YDHT, GetHandleId(u), 10002) then
		if GetUnitLifePercent(u) <= percent - r then
			--call WuDi(uc)
			SetUnitLifePercentBJ(uc, percent - r)
		else
			if GetUnitLifePercent(u) <= percent then
				--call WuDi(uc)
				if percent > r / 2 then
					SetUnitLifePercentBJ(uc, RMinBJ(GetUnitLifePercent(u), percent - r / 2))
				else
					SetWidgetLife(uc, 1.0)
				end
			else
				--call WuDi(uc)
				if percent > 2.0 then
					SetUnitLifePercentBJ(uc, percent - 2.0)
				else
					SetWidgetLife(uc, 1.0)
				end
			end
		end
	else
		UnitRemoveAbility(u, 1093677652)
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, GetHandleId(t))
	end
	t = nil
	u = nil
	uc = nil
end
function XingYiDouZhuan()
	local t = CreateTimer()
	WuGongShengChong(GetTriggerUnit(), 1093677650, 120)
	SaveBoolean(YDHT, GetHandleId(GetTriggerUnit()), 10002, true)
	SaveUnitHandle(YDHT, GetHandleId(t), 0, GetTriggerUnit())
	SaveUnitHandle(YDHT, GetHandleId(t), 1, GetSpellTargetUnit())
	TimerStart(t, 0.3, true, XingYiDouZhuan_1)
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093678929) >= 1 then
		UnitAddAbilityBJ(1093677652, GetTriggerUnit())
		SetPlayerAbilityAvailableBJ(false, 1093677652, GetOwningPlayer(GetTriggerUnit()))
	end
	t = nil
end
function IsXingYi_2()
	return GetSpellAbilityId() == 1093677650
end
function XingYiDouZhuan_2()
	--call BJDebugMsg("到这了")
	SaveBoolean(YDHT, GetHandleId(GetTriggerUnit()), 10002, false)
end
function IsXingYiBeiDong()
	return LoadBoolean(YDHT, GetHandleId(GetTriggerUnit()), 10002)
end
function XingYiBeiDong()
	local u = GetTriggerUnit()
	local uc = GetAttacker()
	local loc = GetUnitLoc(uc)
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678935) >= 1 then
		AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl")
		DestroyEffect(bj_lastCreatedEffect)
		shanghai = ShangHaiGongShi(u, uc, 50.0, 50.0, shxishu, 1093677650)
		WuGongShangHai(u, uc, shanghai)
	end
	if GetUnitAbilityLevel(u, 1093678897) >= 1 then
		WanBuff(u, uc, 1)
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
--慕容家训
function IsJiaXun()
	return GetSpellAbilityId() == 1093677654
end
function JiaXun()
	WuGongShengChong(GetTriggerUnit(), 1093677654, 300)
end
function MuRongJia_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsJiaChuan))
	TriggerAddAction(t, JiaChuanJian)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsXiuZhong))
	TriggerAddAction(t, XiuZhongZhi)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsCanHe))
	TriggerAddAction(t, CanHeZhi)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsCanHeMaJia))
	TriggerAddAction(t, CanHeMaJia)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsCanHeBeiDong))
	TriggerAddAction(t, CanHeBeiDong)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsXingYi))
	TriggerAddAction(t, XingYiDouZhuan)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_ENDCAST)
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_FINISH)
	TriggerAddCondition(t, Condition(IsXingYi_2))
	TriggerAddAction(t, XingYiDouZhuan_2)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsXingYiBeiDong))
	TriggerAddAction(t, XingYiBeiDong)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsJiaXun))
	TriggerAddAction(t, JiaXun)
	t = nil
end
--鹰爪功 3级技
function IsYingZhao()
	return IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) and GetUnitAbilityLevel(GetAttacker(), 1093677872) >= 1
end
function YingZhao_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function YingZhaoShangHai()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local uc = LoadUnitHandle(YDHT, GetHandleId(t), 1)
	local shanghai = LoadReal(YDHT, GetHandleId(t), 2)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093677367) >= 1 and GetRandomInt(1, 5) == 1 then
		WanBuff(u, uc, 7)
	end
	PauseTimer(t)
	DestroyTimer(t)
	t = nil
	u = nil
	uc = nil
end
function YingZhao_Action()
	local u = GetAttacker()
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local loc = GetUnitLoc(u)
	local t = CreateTimer()
	local dist = SquareRoot((GetUnitX(u) - GetUnitX(uc)) * (GetUnitX(u) - GetUnitX(uc)) + (GetUnitY(u) - GetUnitY(uc)) * (GetUnitY(u) - GetUnitY(uc)))
	shxishu = 1.8 + 0.2 * dist * GetRandomReal(20.0, 50.0) / I2R(LoadInteger(YDHT, GetHandleId(u), StringHash("鹰爪"))) / I2R(LoadInteger(YDHT, GetHandleId(u), StringHash("鹰爪")))
	if GetUnitAbilityLevel(u, 1093677876) >= 1 or GetUnitAbilityLevel(u, 1093677877) >= 1 then
		shxishu = shxishu * 2
	end
	if GetUnitAbilityLevel(u, 1093678935) >= 1 then
		shxishu = shxishu * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 0.3, 0.4, shxishu, 1093677872)
	CreateNUnitsAtLoc(1, 1697657140, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	SetUnitVertexColorBJ(bj_lastCreatedUnit, 100, 100, 100, 100)
	UnitAddAbility(bj_lastCreatedUnit, 1097625443)
	--call ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093677873)
	IssueTargetOrderById(bj_lastCreatedUnit, 852480, uc)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 1.0)
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	SaveUnitHandle(YDHT, GetHandleId(t), 1, uc)
	SaveReal(YDHT, GetHandleId(t), 2, shanghai)
	TimerStart(t, 0.3, false, YingZhaoShangHai)
	RemoveLocation(loc)
	loc = nil
	u = nil
	uc = nil
	t = nil
end
function YingZhaoGong()
	local u = GetAttacker()
	local g = CreateGroup()
	local loc = GetUnitLoc(u)
	if GetRandomReal(1, 100) < 25 + fuyuan[1 + GetPlayerId(GetOwningPlayer(u))] // 3 + GetUnitAbilityLevel(u, 1093678668) * 8 then
		WuGongShengChong(u, 1093677872, 1000)
		GroupEnumUnitsInRangeOfLoc(g, loc, 420 + 80 * GetUnitAbilityLevel(u, 1093677872), Condition(YingZhao_Condition))
		SaveInteger(YDHT, GetHandleId(u), StringHash("鹰爪"), CountUnitsInGroup(g))
		ForGroupBJ(g, YingZhao_Action)
	end
	RemoveLocation(loc)
	DestroyGroup(g)
	loc = nil
	g = nil
	u = nil
end
function IsYingZhaoZhuDong()
	return GetSpellAbilityId() == 1093677872
end
function YingZhaoZhuDong_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit()) and GetUnitAbilityLevel(GetFilterUnit(), 1098282348) < 1 and GetUnitTypeId(GetFilterUnit()) ~= 1311780920
end
function YingZhaoZhuDong_Action()
	local u = GetTriggerUnit()
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local loc = GetUnitLoc(u)
	local t = CreateTimer()
	local dist = SquareRoot((GetUnitX(u) - GetUnitX(uc)) * (GetUnitX(u) - GetUnitX(uc)) + (GetUnitY(u) - GetUnitY(uc)) * (GetUnitY(u) - GetUnitY(uc)))
	shxishu = 1.8 + 0.2 * dist * GetRandomReal(20.0, 50.0) / I2R(LoadInteger(YDHT, GetHandleId(u), StringHash("鹰爪主动"))) / I2R(1 + LoadInteger(YDHT, GetHandleId(u), StringHash("鹰爪主动")))
	if GetUnitAbilityLevel(u, 1093677876) >= 1 or GetUnitAbilityLevel(u, 1093677877) >= 1 then
		shxishu = shxishu * 2
	end
	if GetUnitAbilityLevel(u, 1093678935) >= 1 then
		shxishu = shxishu * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 0.7, 0.9, shxishu, 1093677872)
	CreateNUnitsAtLoc(1, 1697657140, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093677873)
	IssueTargetOrderById(bj_lastCreatedUnit, 852480, uc)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 1.0)
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	SaveUnitHandle(YDHT, GetHandleId(t), 1, uc)
	SaveReal(YDHT, GetHandleId(t), 2, shanghai)
	TimerStart(t, 0.3, false, YingZhaoShangHai)
	RemoveLocation(loc)
	loc = nil
	u = nil
	uc = nil
	t = nil
end
function YingZhaoGongZhuDong()
	local u = GetTriggerUnit()
	local g = CreateGroup()
	local loc = GetUnitLoc(u)
	WuGongShengChong(u, 1093677872, 1000)
	GroupEnumUnitsInRangeOfLoc(g, loc, 420 + 80 * GetUnitAbilityLevel(u, 1093677872), Condition(YingZhaoZhuDong_Condition))
	SaveInteger(YDHT, GetHandleId(u), StringHash("鹰爪主动"), CountUnitsInGroup(g))
	ForGroupBJ(g, YingZhaoZhuDong_Action)
	RemoveLocation(loc)
	DestroyGroup(g)
	loc = nil
	g = nil
	u = nil
end
--蝠翼纵 8级技
function IsFuYi()
	return GetSpellAbilityId() == 1093677874
end
function FuYiZong_1()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local oldSpeed = LoadReal(YDHT, GetHandleId(t), 1)
	local oldSpeed2 = s__ModSpeed_getSpeed(u) - LoadReal(YDHT, GetHandleId(t), 2) -- INLINED!!
	h__SetUnitMoveSpeed(u, RMaxBJ(RMinBJ(oldSpeed, oldSpeed2), 350.0))
	UnitRemoveAbility(u, 1093677652)
	UnitRemoveAbility(u, 1093682242)
	PauseTimer(t)
	DestroyTimer(t)
	FlushChildHashtable(YDHT, GetHandleId(t))
	u = nil
	t = nil
end
function FuYiZong_2_Condition()
	return IsUnitAliveBJ(GetFilterUnit()) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0)))
end
function FuYiZong_2_Action()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0)
	local uc = GetEnumUnit()
	if GetRandomInt(1, 50) == 1 then
		WanBuff(u, uc, 12)
	end
	u = nil
	uc = nil
end
function FuYiZong_2()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local g = nil
	local loc = GetUnitLoc(u)
	local j = LoadInteger(YDHT, GetHandleId(t), 1)
	local jmax = 100
	if j <= jmax then
		g = CreateGroup()
		GroupEnumUnitsInRangeOfLoc(g, loc, 300, Condition(FuYiZong_2_Condition))
		ForGroupBJ(g, FuYiZong_2_Action)
		DestroyGroup(g)
		SaveInteger(YDHT, GetHandleId(t), 1, j + 1)
	else
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, GetHandleId(t))
	end
	RemoveLocation(loc)
	t = nil
	u = nil
	loc = nil
	g = nil
end
function FuYiZong()
	local u = GetTriggerUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local time = 5.0 + I2R(GetUnitAbilityLevel(u, 1093677874))
	local oldSpeed = s__ModSpeed_getSpeed(u) -- INLINED!!
	local t = CreateTimer()
	local tm = nil
	WuGongShengChong(u, 1093677874, 100)
	h__SetUnitMoveSpeed(u, oldSpeed + 700 + jingmai[i] * 10)
	if GetUnitAbilityLevel(u, 1093678935) >= 1 then
		UnitAddAbilityBJ(1093677652, u)
		SetPlayerAbilityAvailableBJ(false, 1093677652, GetOwningPlayer(u))
	end
	if GetUnitAbilityLevel(u, 1093682254) >= 1 then
		UnitAddAbility(u, 1093682242)
		SetUnitAbilityLevel(u, 1093682242, GetUnitAbilityLevel(u, 1093677874) + 1)
	end
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	SaveReal(YDHT, GetHandleId(t), 1, oldSpeed)
	SaveReal(YDHT, GetHandleId(t), 2, 700 + jingmai[i] * 10)
	TimerStart(t, time, false, FuYiZong_1)
	if GetUnitAbilityLevel(u, 1093677367) >= 1 then
		tm = CreateTimer()
		SaveUnitHandle(YDHT, GetHandleId(tm), 0, u)
		TimerStart(tm, time / 100, true, FuYiZong_2)
	end
	u = nil
	t = nil
	tm = nil
--local location loc = GetUnitLoc(u)
--local integer i = 0
--local integer num = 0
--local location array loc2
--local location loc3 = pu(loc, 400 + 80 * GetUnitAbilityLevel(u, 'A030'), GetRandomReal(0., 360.))
--local group g = CreateGroup()
--local group g2 = CreateGroup()
--local unit uc = null
--local lightning array light
--call YDWEPolledWaitNull(.15)
--call GroupEnumUnitsInRangeOfLoc(g, loc, 420 + 80 * GetUnitAbilityLevel(u, 'A030'), Condition(function YingZhaoZhuDong_Condition))
--if g != null then
--	set num = CountUnitsInGroup(g)
--endif
--if num >= 1 then
--	set i = 1
--	loop
--		exitwhen i > (num + 1)/2
--		set uc = GroupPickRandomUnit(g)
--		call GroupAddUnit(g2, uc)
--		call GroupRemoveUnit(g, uc)
--		set loc2[i] = GetUnitLoc(uc)
--		call SetUnitPositionLocFacingLocBJ(u,loc2[i],loc2[i])
--		call SetUnitAnimation(u,"ATTACK")
--		call YDWEPolledWaitNull(.15)
--		if i > 1 then
--			set light[i] = AddLightningLoc("FORK",loc2[i-1],loc2[i])
--			call DestroyLightning(light[i-1])
--			set light[i-1] = null
--		else
--			set light[i] = AddLightningLoc("FORK",loc,loc2[i])
--		endif
--		set uc = null
--		set i = i + 1
--	endloop
--endif
--if light[i-1] != null then
--	call YDWEPolledWaitNull(.15)
--	call DestroyLightning(light[i-1])
--	set light[i-1] = null
--endif
--if g2 != null and CountUnitsInGroup(g2)>=1 then
--	call SetUnitPositionLocFacingLocBJ(u,loc3,loc3)
--	set light[1] = AddLightningLoc("FORK",loc2[i-1],loc3)
--	set num = CountUnitsInGroup(g2)
--endif
--set i = 1
--if num >= 1 then
--	set i = 1
--	loop
--		exitwhen i >= num
--		set uc = GroupPickRandomUnit(g2)
--		call GroupRemoveUnit(g2, uc)
--		call SetUnitPositionLocFacingLocBJ(uc,loc3,loc3)
--		call SetUnitAnimation(uc,"ATTACK")
--		if GetUnitAbilityLevel(u,'A0DE')>=1 then
--			call WanBuff(u, uc, 12)
--		else
--			call WanBuff(u, uc, 11)
--		endif
--		set uc = null
--		set i = i + 1
--	endloop
--endif
--if light[1] != null then
--	call YDWEPolledWaitNull(.15)
--	call DestroyLightning(light[1])
--endif
--if num > 1 then
--	call SetUnitPositionLocFacingLocBJ(u,loc,loc)
--	set light[1] = AddLightningLoc("FORK",loc3,loc)
--	call YDWEPolledWaitNull(.15)
--	call DestroyLightning(light[1])
--endif
--if GetUnitAbilityLevel(u, 'A07W')>=1 then
--	call UnitAddAbilityBJ( 'A02T', u )
--   	call SetPlayerAbilityAvailableBJ( false, 'A02T', GetOwningPlayer(u) )
--   	call YDWEPolledWaitNull(4.)
--   	call UnitRemoveAbility(u, 'A02T')
--endif
--call RemoveLocation(loc)
--call RemoveLocation(loc3)
--call DestroyGroup(g)
--call DestroyGroup(g2)
--set u = null
--set uc = null
--set loc = null
--set loc3 = null
--set g = null
--set g2 = null
--set light[1] = null
end
--狮子吼 15级技
function IsShiZi()
	return GetSpellAbilityId() == 1093678674
end
function ShiZiHou_Action()
	local u = GetTriggerUnit()
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local dist = SquareRoot((GetUnitX(u) - GetUnitX(uc)) * (GetUnitX(u) - GetUnitX(uc)) + (GetUnitY(u) - GetUnitY(uc)) * (GetUnitY(u) - GetUnitY(uc)))
	if GetUnitAbilityLevel(u, 1093678935) >= 1 then
		shxishu = shxishu + 1.0
	end
	if GetUnitAbilityLevel(u, 1093678925) >= 1 then
		shxishu = shxishu + 0.7
	end
	shanghai = ShangHaiGongShi(u, uc, 100.0, 200.0, shxishu, 1093678674)
	knock_back(uc, Atan2(GetUnitY(uc) - GetUnitY(u), GetUnitX(uc) - GetUnitX(u)), GetRandomReal(320.0, 720.0) + 80 * GetUnitAbilityLevel(u, 1093677872) - dist, 1.0, 0.05, "Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", 0)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093682254) >= 1 and GetRandomInt(1, 3) == 2 then
		WanBuff(u, uc, 9)
	end
	u = nil
	uc = nil
end
function ShiZiHou()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local level = 0
	local g = CreateGroup()
	WuGongShengChong(u, 1093678674, 200)
	GroupEnumUnitsInRangeOfLoc(g, loc, 420 + 80 * GetUnitAbilityLevel(u, 1093677872), Condition(YingZhaoZhuDong_Condition))
	ForGroupBJ(g, ShiZiHou_Action)
	if (GetUnitAbilityLevel(u, 1093677876) > 0 or GetUnitAbilityLevel(u, 1093677877) >= 1) and GetRandomReal(0, 100) >= 30 then
		level = GetUnitAbilityLevel(u, 1093678674)
		UnitRemoveAbility(u, 1093678674)
		UnitAddAbility(u, 1093678674)
		SetUnitAbilityLevel(u, 1093678674, level)
	end
end
--圣火令神功 25级技1
function IsShengHuo()
	return GetSpellAbilityId() == 1093677876
end
--改进转圈函数
function ZhuanQuan_1()
	local t = GetExpiredTimer()
	local uc = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 1)
	local angle = LoadReal(YDHT, GetHandleId(t), 2)
	local dist = LoadReal(YDHT, GetHandleId(t), 3)
	local angle0 = LoadReal(YDHT, GetHandleId(t), 4)
	local dist0 = LoadReal(YDHT, GetHandleId(t), 5)
	local loc = GetUnitLoc(u)
	local x = 0.0
	local y = 0.0
	--call BJDebugMsg("转圈1执行了，angle0="+R2S(angle0))
	if IsUnitAliveBJ(u) == false then
		KillUnit(uc)
		RemoveUnit(uc)
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, GetHandleId(t))
	end
	if dist >= 0 and GetUnitState(uc, UNIT_STATE_LIFE) > 0 and GetUnitState(u, UNIT_STATE_LIFE) > 0 and (uc == shenghuoling_1 and ling1zhuan or uc == shenghuoling_2 and ling2zhuan or uc == shenghuoling_3 and ling3zhuan) then
		x = GetUnitX(u) + (dist + dist0) * Cos(angle + angle0)
		y = GetUnitY(u) + (dist + dist0) * Sin(angle + angle0)
		SaveReal(YDHT, GetHandleId(t), 4, angle + angle0)
		SaveReal(YDHT, GetHandleId(t), 5, dist + dist0)
		SetUnitX(uc, CheckX(x))
		SetUnitY(uc, CheckY(y))
		SetUnitFacing(uc, Atan2(GetUnitY(uc) - GetUnitY(u), GetUnitX(uc) - GetUnitX(u)))
	else
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, GetHandleId(t))
	end
	RemoveLocation(loc)
	t = nil
	u = nil
	uc = nil
	loc = nil
end
function ZhuanQuan(uc, u, angle, dist)
	local x1 = GetUnitX(uc)
	local y1 = GetUnitY(uc)
	local x2 = GetUnitX(u)
	local y2 = GetUnitY(u)
	local t = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(t), 0, uc)
	SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
	SaveReal(YDHT, GetHandleId(t), 2, angle * (3.14159 / 180.0))
	SaveReal(YDHT, GetHandleId(t), 3, dist)
	SaveReal(YDHT, GetHandleId(t), 4, Atan2(y2 - y1, x2 - x1))
	SaveReal(YDHT, GetHandleId(t), 5, SquareRoot((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1)))
	TimerStart(t, 0.01, true, ZhuanQuan_1)
	--call BJDebugMsg("转圈执行了")
	t = nil
end
function ShengHuoLing()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	WuGongShengChong(u, 1093677876, 100)
	SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 1093677876 * 5, GetUnitAbilityLevel(u, 1093677876))
	UnitRemoveAbility(u, 1093677876)
	UnitAddAbility(u, 1093677877)
	SetUnitAbilityLevel(u, 1093677877, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 1093677876 * 5))
	CreateNUnitsAtLoc(1, 1697657139, GetOwningPlayer(u), pu(loc, 325.0, 0), 90)
	shenghuoling_1 = bj_lastCreatedUnit
	IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
	ZhuanQuan(shenghuoling_1, u, 1.0, 0.0)
	ling1zhuan = true
	CreateNUnitsAtLoc(1, 1697657139, GetOwningPlayer(u), pu(loc, 325.0, 120.0), 210)
	shenghuoling_2 = bj_lastCreatedUnit
	IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
	ZhuanQuan(shenghuoling_2, u, 1.0, 0.0)
	ling2zhuan = true
	CreateNUnitsAtLoc(1, 1697657139, GetOwningPlayer(u), pu(loc, 325.0, 240.0), 330)
	shenghuoling_3 = bj_lastCreatedUnit
	IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
	ZhuanQuan(shenghuoling_3, u, 1.0, 0.0)
	ling3zhuan = true
end
function IsRengShengHuo()
	return GetSpellAbilityId() == 1093677877
end
function RengShengHuoLing_Action()
	local t = GetExpiredTimer()
	local p = GetHandleId(t)
	local u = LoadUnitHandle(YDHT, p, 0)
	local uc = LoadUnitHandle(YDHT, p, 1)
	local l__ut = LoadUnitHandle(YDHT, p, 2)
	local loc = LoadLocationHandle(YDHT, p, 3)
	local myX = GetLocationX(loc)
	local myY = GetLocationY(loc)
	local hisX = GetUnitX(uc)
	local hisY = GetUnitY(uc)
	local loc2 = nil
	local dist = 0.0
	local angle = 0.0
	local i = LoadInteger(YDHT, p, 4)
	local perc = 0.04
	local imax = 25
	local shxishu = 1.0
	local shanghai = 0
	shanghai = ShangHaiGongShi(u, uc, 400, 300, shxishu, 1093677877)
	if i <= imax then
		hisX = GetUnitX(uc)
		hisY = GetUnitY(uc)
		angle = Atan2(hisY - myY, hisX - myX)
		dist = SquareRoot((hisX - myX) * (hisX - myX) + (hisY - myY) * (hisY - myY))
		loc2 = Location(myX + perc * i * dist * Cos(angle), myY + perc * i * dist * Sin(angle))
		SetUnitPositionLoc(l__ut, loc2)
		SaveInteger(YDHT, p, 4, i + 1)
	else
		WuGongShangHai(u, uc, shanghai)
		DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", uc, "overhead"))
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, p)
		KillUnit(l__ut)
		RemoveUnit(l__ut)
		if GetUnitState(shenghuoling_1, UNIT_STATE_LIFE) < 1 and GetUnitState(shenghuoling_2, UNIT_STATE_LIFE) < 1 and GetUnitState(shenghuoling_3, UNIT_STATE_LIFE) < 1 then
			UnitRemoveAbility(u, 1093677877)
			UnitAddAbility(u, 1093677876)
			SetUnitAbilityLevel(u, 1093677876, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 1093677876 * 5))
		end
		RemoveLocation(loc)
	end
	RemoveLocation(loc2)
	t = nil
	u = nil
	uc = nil
	l__ut = nil
	loc = nil
	loc2 = nil
end
function RengShengHuoLing()
	local u = GetTriggerUnit()
	local uc = GetSpellTargetUnit()
	local loc = nil
	local t = CreateTimer()
	local p = GetHandleId(t)
	local l__ut = nil
	if GetUnitState(shenghuoling_1, UNIT_STATE_LIFE) > 0 then
		l__ut = shenghuoling_1
		ling1zhuan = false
	elseif GetUnitState(shenghuoling_2, UNIT_STATE_LIFE) > 0 then
		l__ut = shenghuoling_2
		ling2zhuan = false
	else
		l__ut = shenghuoling_3
		ling3zhuan = false
	end
	loc = GetUnitLoc(l__ut)
	SaveUnitHandle(YDHT, p, 0, u)
	SaveUnitHandle(YDHT, p, 1, uc)
	SaveUnitHandle(YDHT, p, 2, l__ut)
	SaveLocationHandle(YDHT, p, 3, loc)
	SaveInteger(YDHT, p, 4, 0)
	TimerStart(t, 0.03, true, RengShengHuoLing_Action)
	u = nil
	uc = nil
	l__ut = nil
	loc = nil
end
--乾坤大挪移 25级技2
function IsQianKunTan()
	return IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource())) and GetUnitAbilityLevel(GetTriggerUnit(), 1093678935) >= 2
end
function QianKunTan_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit()) and GetUnitAbilityLevel(GetFilterUnit(), 1098282348) < 1
end
function QianKunTan()
	local u = GetTriggerUnit()
	local uc = GetEventDamageSource()
	local l__ut = nil
	local g = CreateGroup()
	local loc = GetUnitLoc(u)
	local shanghai = GetEventDamage()
	if GetRandomInt(0, 100) < 10 + 5 * GetUnitAbilityLevel(u, 1093678935) then
		WuDi(u)
		GroupEnumUnitsInRangeOfLoc(g, loc, 1000, Condition(QianKunTan_Condition))
		if g ~= nil then
			l__ut = GroupPickRandomUnit(g)
			WuGongShangHai(u, l__ut, shanghai * 50 * GetUnitAbilityLevel(u, 1093678935))
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", l__ut, "overhead"))
		end
		WuGongShengChong(u, 1093678935, 8000)
	end
	RemoveLocation(loc)
	DestroyGroup(g)
	u = nil
	uc = nil
	l__ut = nil
	loc = nil
	g = nil
end
--事件
function VIPMingJiao_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsYingZhao))
	TriggerAddAction(t, YingZhaoGong)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsYingZhaoZhuDong))
	TriggerAddAction(t, YingZhaoGongZhuDong)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsFuYi))
	TriggerAddAction(t, FuYiZong)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsShiZi))
	TriggerAddAction(t, ShiZiHou)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsShengHuo))
	TriggerAddAction(t, ShengHuoLing)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsRengShengHuo))
	TriggerAddAction(t, RengShengHuoLing)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsQianKunTan))
	TriggerAddAction(t, QianKunTan)
	t = nil
end
--=================================================
--神龙教
--男性角色：子胥举鼎A04W、鲁达拔柳A04Z、狄青降龙A051
--女性角色：贵妃回眸A04X、飞燕回翔A054、小怜横陈A056
--内功：神龙八式A057、神龙心法A059
--=================================================
--子胥举鼎
function IsZiXuBeiDong()
	return IsUnitEnemy(GetAttacker(), GetOwningPlayer(GetTriggerUnit())) and GetUnitAbilityLevel(GetTriggerUnit(), 1093678167) >= 1
end
function ZiXuBeiDong()
	local i = GetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1
	if GetRandomReal(1, 300) < 15 + fuyuan[i] // 5 then
		maJiaUseAbilityAtEnemysLoc(GetTriggerUnit(), 1697656880, 1093678167, 852226, GetAttacker(), 15.0)
	end
end
function IsZiXuJuDing()
	return GetEventDamage() == 0.95
end
function ZiXuJuDing()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093678668) ~= 0 then --加化骨绵掌
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093677902) ~= 0 then --加神行百变
		shxishu = shxishu + 0.7
	end
	shanghai = ShangHaiGongShi(u, uc, 24, 40, shxishu, 1093678167)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678666) ~= 0 and GetRandomInt(1, 100) <= 30 and UnitHasBuffBJ(uc, 1111844210) == false then --加连城走火入魔
		WanBuff(u, uc, 2)
	end
	if GetUnitAbilityLevel(u, 1093678166) ~= 0 and GetRandomInt(1, 100) <= 30 and UnitHasBuffBJ(uc, 1110454323) == false then --加夫妻神经错乱
		WanBuff(u, uc, 10)
	end
	if GetUnitAbilityLevel(u, 1395666994) ~= 0 and GetRandomInt(1, 100) <= 25 and IsUnitAliveBJ(uc) then --加龙象几率连环爆裂
		YDWEPolledWaitNull(0.15)
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678167)
		IssueTargetOrderById(bj_lastCreatedUnit, 852226, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 15.0)
	end
	RemoveLocation(loc)
	WuGongShengChong(u, 1093678167, 2400.0)
	WuGongShengChong(u, 1093678393, 2500.0)
	u = nil
	uc = nil
	loc = nil
end
--小怜横陈
function IsXiaoLianHengChen()
	return GetUnitAbilityLevel(GetAttacker(), 1093678390) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function XiaoLian_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function XiaoLian_Action()
	local uc = GetEnumUnit()
	local u = GetAttacker()
	local x = GetUnitX(uc)
	local y = GetUnitY(uc)
	local loc = GetUnitLoc(uc)
	local shxishu = 1.0
	local shanghai = 0.0
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Polymorph\\PolyMorphDoneGround.mdl", x, y))
	shanghai = ShangHaiGongShi(u, uc, 8, 11, shxishu, 1093678390)
	if GetUnitAbilityLevel(u, 1093678393) ~= 0 and GetRandomReal(1, 100) <= 30 then --加美人心法
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678401)
		IssueTargetOrderById(bj_lastCreatedUnit, 852502, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 15.0)
	end
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 then --加九阴
		shxishu = shxishu + 0.7
	end
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	loc = nil
	u = nil
	uc = nil
end
function XiaoLianHengChen()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local loc1 = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	if GetRandomReal(0.0, 100.0) <= 22.0 + fuyuan[i] // 3 then
		--加双手加范围
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(500 + 300 * GetUnitAbilityLevel(u, 1093678933), loc1, Condition(XiaoLian_Condition)), XiaoLian_Action)
		WuGongShengChong(u, 1093678390, 900.0)
		WuGongShengChong(u, 1093678393, 2500.0)
		if GetUnitAbilityLevel(u, 1093678926) ~= 0 then --加九爪
			SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) + 0.2 * GetUnitState(u, UNIT_STATE_MAX_MANA))
		end
	end
	RemoveLocation(loc1)
	RemoveLocation(loc2)
end
--贵妃回眸
function IsGuiFeiHuiMou()
	return GetSpellAbilityId() == 1093678168
end
function XiaoLian_Condition_1()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEventDamageSource())) and IsUnitAliveBJ(GetFilterUnit())
end
function XiaoLian_Action_1()
	local uc = GetEnumUnit()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local x = GetUnitX(uc)
	local y = GetUnitY(uc)
	local loc = GetUnitLoc(uc)
	local shxishu = 1.0
	local shanghai = 0.0
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Polymorph\\PolyMorphDoneGround.mdl", x, y))
	shanghai = ShangHaiGongShi(u, uc, 8, 11, shxishu, 1093678390)
	if GetUnitAbilityLevel(u, 1093678393) ~= 0 and GetRandomReal(1, 100) <= 30 then --加神龙心法
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678401)
		IssueTargetOrderById(bj_lastCreatedUnit, 852502, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 15.0)
	end
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 then --加九阴
		shxishu = shxishu + 0.7
	end
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	loc = nil
	u = nil
	uc = nil
end
function GuiFeiHuiMou()
	local u = GetTriggerUnit()
	local l__ut = GetSpellTargetUnit()
	local p = GetOwningPlayer(u)
	local loc = GetUnitLoc(u)
	CreateNUnitsAtLoc(1, 1697656880, p, loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093678169)
	IssueTargetOrderById(bj_lastCreatedUnit, 852095, l__ut)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 10.0)
	RemoveLocation(loc)
	loc = nil
	u = nil
	l__ut = nil
	p = nil
end
function IsGuiFeiHuiMouSH()
	return GetEventDamage() == 0.96
end
function GuiFeiHuiMouSH()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local loc = GetUnitLoc(uc)
	local loc2 = GetUnitLoc(u)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = RMinBJ(DistanceBetweenPoints(loc, loc2) / 500, 4)
	local shanghai = 0.0
	WuGongShengChong(u, 1093678168, 500.0)
	WuGongShengChong(u, 1093678393, 2500.0)
	if GetUnitAbilityLevel(u, 1093677910) ~= 0 then --加擒龙
		shxishu = RMinBJ(DistanceBetweenPoints(loc, loc2) / 300, 10)
	end
	if GetUnitAbilityLevel(u, 1093682228) ~= 0 then --加医疗篇
		shxishu = shxishu + 1
	end
	if GetUnitAbilityLevel(u, 1093682226) ~= 0 then --加逆九阴
		shxishu = shxishu + 1.2
	end
	if GetUnitAbilityLevel(u, 1093678390) ~= 0 and GetRandomReal(0.0, 100.0) <= 22.0 + fuyuan[i] // 3 then --加小怜横陈
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(500 + 300 * GetUnitAbilityLevel(u, 1093678933), loc, Condition(XiaoLian_Condition_1)), XiaoLian_Action_1)
		WuGongShengChong(u, 1093678390, 900.0)
		WuGongShengChong(u, 1093678393, 2500.0)
		if GetUnitAbilityLevel(u, 1093678926) ~= 0 then --加九爪
			SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) + 0.2 * GetUnitState(u, UNIT_STATE_MAX_MANA))
		end
	end
	shanghai = ShangHaiGongShi(u, uc, 80, 90, shxishu, 1093678168)
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	RemoveLocation(loc2)
	u = nil
	uc = nil
	loc = nil
	loc2 = nil
end
--鲁达拔柳
function IsLuDaBaLiu()
	return UnitHasBuffBJ(GetAttacker(), 1110454582) and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function LuDaBaLiuYun()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local l__ut = LoadUnitHandle(YDHT, GetHandleId(t), 1)
	if GetUnitAbilityLevel(u, 1093678668) ~= 0 then --加化骨穴位全封
		WanBuff(u, l__ut, 12)
	else
		WanBuff(u, l__ut, 11)
	end
	FlushChildHashtable(YDHT, GetHandleId(t))
	DestroyTimer(t)
	t = nil
	u = nil
	l__ut = nil
end
function LuDaBaLiu()
	local u = GetAttacker()
	local l__ut = GetTriggerUnit()
	local t = CreateTimer()
	local shxishu = 1
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678391) ~= 0 then --加神龙八式
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093681989) ~= 0 then --加龟息功
		shxishu = shxishu + 1.0
	end
	shanghai = ShangHaiGongShi(u, l__ut, 80, 100, shxishu, 1093678170)
	WuGongShangHai(u, l__ut, shanghai)
	WuGongShengChong(u, 1093678170, 200.0)
	WuGongShengChong(u, 1093678393, 2500.0)
	if GetUnitAbilityLevel(u, 1093679154) >= 1 or GetUnitAbilityLevel(u, 1093678666) >= 1 and GetRandomInt(1, 100) <= 30 then --加北冥或连城几率，BUFF不消失
	else
		UnitRemoveBuffBJ(1110454582, u)
	end
	YDWEJumpTimer(l__ut, 0, 0.0, 1.0, 0.01, 500.0)
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	SaveUnitHandle(YDHT, GetHandleId(t), 1, l__ut)
	TimerStart(t, 1.0, false, LuDaBaLiuYun)
	u = nil
	l__ut = nil
	t = nil
end
--狄青降龙
function IsDiQingXiangLong()
	return GetSpellAbilityId() == 1093678385
end
function DiQingXiangLongCai()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local loc = GetUnitLoc(u)
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093678384)
	IssueImmediateOrderById(bj_lastCreatedUnit, 852096)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 10.0)
	FlushChildHashtable(YDHT, GetHandleId(t))
	DestroyTimer(t)
	t = nil
	u = nil
	ut = nil
end
function DiQingXiaoWu()
	local t = GetExpiredTimer()
	local i = LoadInteger(YDHT, GetHandleId(t), 0)
	udg_shanghaixishou[i] = udg_shanghaixishou[i] - 0.1
	FlushChildHashtable(YDHT, GetHandleId(t))
	DestroyTimer(t)
	t = nil
end
function DiQingXiangLong()
	local u = GetTriggerUnit()
	local l__ut = GetSpellTargetUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(u)
	local loc2 = GetUnitLoc(l__ut)
	local t = CreateTimer()
	local tm = CreateTimer()
	WuGongShengChong(u, 1093678385, 150.0)
	WuGongShengChong(u, 1093678393, 2500.0)
	if GetUnitAbilityLevel(u, 1093677903) ~= 0 and GetRandomInt(1, 100) <= 10 + GetUnitLevel(l__ut) // 2 then --妙手空空偷珍稀币
		AdjustPlayerStateBJ(GetRandomInt(1, 5), GetOwningPlayer(u), PLAYER_STATE_RESOURCE_LUMBER)
	end
	if GetUnitAbilityLevel(u, 1093678930) ~= 0 and GetRandomInt(1, 100) <= 10 + GetUnitLevel(l__ut) // 2 then --吸星大法加内力
		ModifyHeroStat(1, u, 0, GetRandomInt(1, 10))
	end
	if GetUnitAbilityLevel(u, 1093679155) ~= 0 and GetRandomInt(1, 100) <= 10 + GetUnitLevel(l__ut) // 2 then --小无相加伤害吸收
		udg_shanghaixishou[i] = udg_shanghaixishou[i] + 0.1
		SaveInteger(YDHT, GetHandleId(tm), 0, i)
		TimerStart(tm, 15, false, DiQingXiaoWu)
	end
	YDWEJumpTimer(u, AngleBetweenPoints(loc, loc2), DistanceBetweenPoints(loc, loc2), 0.7, 0.02, 500.0)
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	TimerStart(t, 0.7, false, DiQingXiangLongCai)
	RemoveLocation(loc)
	RemoveLocation(loc2)
	loc = nil
	loc2 = nil
	u = nil
	l__ut = nil
	p = nil
	t = nil
	tm = nil
end
function IsDiQingXiangLongSH()
	return GetEventDamage() == 0.97
end
function DiQingXiangLongSH()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local l__ut = GetTriggerUnit()
	local shxishu = 1
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678925) ~= 0 then --加七伤拳
		WanBuff(u, l__ut, GetRandomInt(1, 13))
	else
		WanBuff(u, l__ut, 9)
	end
	if GetUnitAbilityLevel(u, 1093677908) ~= 0 then --加须弥山掌
		shxishu = shxishu + 1.2
	end
	shanghai = ShangHaiGongShi(u, l__ut, 100, 140, shxishu, 1093678385)
	WuGongShangHai(u, l__ut, shanghai)
	u = nil
	l__ut = nil
end
-- //飞燕回翔
-- function IsFeiYanHuiXiang takes nothing returns boolean
-- return ((GetSpellAbilityId() == 'A054'))
-- endfunction
-- function Trig_Wild_Axes_aFunc026Func021002003 takes nothing returns boolean
-- return (((IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false) and ((IsUnitAliveBJ(GetFilterUnit()) == true) and ((IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0xB95F828C))) == true) and (IsUnitInGroup(GetFilterUnit(), YDTriggerGetEx(group, YDTriggerH2I(GetExpiredTimer()), 0x93FE3865)) == false)))))
-- endfunction
-- function Trig_Wild_Axes_aFunc026Func022002003 takes nothing returns boolean
-- return (((IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false) and ((IsUnitAliveBJ(GetFilterUnit()) == true) and ((IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0xB95F828C))) == true) and (IsUnitInGroup(GetFilterUnit(), YDTriggerGetEx(group, YDTriggerH2I(GetExpiredTimer()), 0xF3DA78D7)) == false)))))
-- endfunction
-- //function Trig_Wild_Axes_aFunc026Func023003 takes nothing returns nothing
-- //    if (((GetDestructableTypeId(GetEnumDestructable()) != 'YTlb') and (GetDestructableTypeId(GetEnumDestructable()) != 'Ytlc'))) then
-- //        call KillDestructable( GetEnumDestructable() )
-- //    else
-- //        call DoNothing(  )
-- //    endif
-- //endfunction
-- //function Trig_Wild_Axes_aFunc026Func024003 takes nothing returns nothing
-- //    if (((GetDestructableTypeId(GetEnumDestructable()) != 'YTlb') and (GetDestructableTypeId(GetEnumDestructable()) != 'Ytlc'))) then
-- //        call KillDestructable( GetEnumDestructable() )
-- //    else
-- //        call DoNothing(  )
-- //    endif
-- //endfunction
-- function Trig_Wild_Axes_aFunc026Func025A takes nothing returns nothing
-- local unit u = YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0xB95F828C)
-- local unit ut = GetEnumUnit()
-- local real shxishu= 1
-- local real shanghai=0.
-- if((GetUnitAbilityLevel(u,'A07P')!=0))then//加化功
-- set shxishu=shxishu+.7
-- endif
-- if((GetUnitAbilityLevel(u,'A0D6')!=0))then//加锻骨篇
-- set shxishu=shxishu+1.3
-- endif
-- if((GetUnitAbilityLevel(u,'A0D1')!=0))then//加摧坚神抓
-- call WanBuff(u, ut, 9)
-- endif
-- if((GetUnitAbilityLevel(u,'A0D3')!=0))then//加摧心掌
-- call WanBuff(u, ut, 7)
-- endif
-- set shanghai=ShangHaiGongShi(u,ut,60,40,shxishu,'A054')
-- call WuGongShangHai(u,ut,shanghai)
-- call GroupAddUnit( YDTriggerGetEx(group, YDTriggerH2I(GetExpiredTimer()), 0x93FE3865), GetEnumUnit() )
-- //call UnitDamageTarget( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0xB95F828C), GetEnumUnit(), ( ( I2R(GetUnitAbilityLevel(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0xB95F828C), 'AUcs')) * 30.00 ) + 60.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_METAL_MEDIUM_SLICE )
-- call DestroyEffect( AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", GetEnumUnit(), "overhead") )
-- endfunction
-- function Trig_Wild_Axes_aFunc026Func026A takes nothing returns nothing
-- local unit u = YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0xB95F828C)
-- local unit ut = GetEnumUnit()
-- local real shxishu= 1
-- local real shanghai=0.
-- set shanghai=ShangHaiGongShi(u,ut,120,80,shxishu,'A054')
-- call WuGongShangHai(u,ut,shanghai)
-- call GroupAddUnit( YDTriggerGetEx(group, YDTriggerH2I(GetExpiredTimer()), 0xF3DA78D7), GetEnumUnit() )
-- //call UnitDamageTarget( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0xB95F828C), GetEnumUnit(), ( ( I2R(GetUnitAbilityLevel(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0xB95F828C), 'AUcs')) * 30.00 ) + 60.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_METAL_MEDIUM_SLICE )
-- call DestroyEffect( AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", GetEnumUnit(), "overhead") )
-- endfunction
-- function Trig_Wild_Axes_aFunc026T takes nothing returns nothing
-- local group ydl_group
-- local unit ydl_unit
-- call YDWESetLocalVariableRealArray( "x", 0, YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0x324AE96A) )
-- call YDWESetLocalVariableRealArray( "y", 0, YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0x058682B9) )
-- call YDWESetLocalVariableRealArray( "x", 1, YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0x2392447A) )
-- call YDWESetLocalVariableRealArray( "y", 1, YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0xB0897302) )
-- call YDWESetLocalVariableRealArray( "x", 2, YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0x41713DA3) )
-- call YDWESetLocalVariableRealArray( "y", 2, YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0x71CA3531) )
-- call YDWESetLocalVariableRealArray( "x", 3, YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0xD310CF7A) )
-- call YDWESetLocalVariableRealArray( "y", 3, YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0x7D73FF94) )
-- call YDWESetLocalVariableReal( "a", YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0xD5CF2EF3) )
-- call YDWESetLocalVariableReal( "b", ( 1.00 - YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0xD5CF2EF3) ) )
-- call SetUnitX( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x5FB96E0B), ( ( YDWEGetLocalVariableRealArray("x", 0) * ( YDWEGetLocalVariableReal("a") * YDWEGetLocalVariableReal("a") ) ) + ( ( ( YDWEGetLocalVariableRealArray("x", 2) * 2.00 ) * ( YDWEGetLocalVariableReal("a") * YDWEGetLocalVariableReal("b") ) ) + ( YDWEGetLocalVariableRealArray("x", 1) * ( YDWEGetLocalVariableReal("b") * YDWEGetLocalVariableReal("b") ) ) ) ) )
-- call SetUnitY( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x5FB96E0B), ( ( YDWEGetLocalVariableRealArray("y", 0) * ( YDWEGetLocalVariableReal("a") * YDWEGetLocalVariableReal("a") ) ) + ( ( ( YDWEGetLocalVariableRealArray("y", 2) * 2.00 ) * ( YDWEGetLocalVariableReal("a") * YDWEGetLocalVariableReal("b") ) ) + ( YDWEGetLocalVariableRealArray("y", 1) * ( YDWEGetLocalVariableReal("b") * YDWEGetLocalVariableReal("b") ) ) ) ) )
-- call SetUnitX( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x3893EA54), ( ( YDWEGetLocalVariableRealArray("x", 0) * ( YDWEGetLocalVariableReal("a") * YDWEGetLocalVariableReal("a") ) ) + ( ( ( YDWEGetLocalVariableRealArray("x", 3) * 2.00 ) * ( YDWEGetLocalVariableReal("a") * YDWEGetLocalVariableReal("b") ) ) + ( YDWEGetLocalVariableRealArray("x", 1) * ( YDWEGetLocalVariableReal("b") * YDWEGetLocalVariableReal("b") ) ) ) ) )
-- call SetUnitY( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x3893EA54), ( ( YDWEGetLocalVariableRealArray("y", 0) * ( YDWEGetLocalVariableReal("a") * YDWEGetLocalVariableReal("a") ) ) + ( ( ( YDWEGetLocalVariableRealArray("y", 3) * 2.00 ) * ( YDWEGetLocalVariableReal("a") * YDWEGetLocalVariableReal("b") ) ) + ( YDWEGetLocalVariableRealArray("y", 1) * ( YDWEGetLocalVariableReal("b") * YDWEGetLocalVariableReal("b") ) ) ) ) )
-- if ((GetUnitX(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x5FB96E0B)) > ( GetRectMaxX(bj_mapInitialPlayableArea) - 50.00 ))) then
-- call SetUnitX( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x5FB96E0B), ( GetRectMaxX(bj_mapInitialPlayableArea) - 50.00 ) )
-- else
-- if ((GetUnitX(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x5FB96E0B)) < ( GetRectMinX(bj_mapInitialPlayableArea) + 50.00 ))) then
-- call SetUnitX( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x5FB96E0B), ( GetRectMinX(bj_mapInitialPlayableArea) + 50.00 ) )
-- else
-- call DoNothing(  )
-- endif
-- endif
-- if ((GetUnitY(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x5FB96E0B)) > ( GetRectMaxY(bj_mapInitialPlayableArea) - 50.00 ))) then
-- call SetUnitY( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x5FB96E0B), ( GetRectMaxY(bj_mapInitialPlayableArea) - 50.00 ) )
-- else
-- if ((GetUnitY(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x5FB96E0B)) < ( GetRectMinY(bj_mapInitialPlayableArea) + 50.00 ))) then
-- call SetUnitY( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x5FB96E0B), ( GetRectMinY(bj_mapInitialPlayableArea) + 50.00 ) )
-- else
-- call DoNothing(  )
-- endif
-- endif
-- if ((GetUnitX(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x3893EA54)) > ( GetRectMaxX(bj_mapInitialPlayableArea) - 50.00 ))) then
-- call SetUnitX( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x3893EA54), ( GetRectMaxX(bj_mapInitialPlayableArea) - 50.00 ) )
-- else
-- if ((GetUnitX(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x3893EA54)) < ( GetRectMinX(bj_mapInitialPlayableArea) + 50.00 ))) then
-- call SetUnitX( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x3893EA54), ( GetRectMinX(bj_mapInitialPlayableArea) + 50.00 ) )
-- else
-- call DoNothing(  )
-- endif
-- endif
-- if ((GetUnitY(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x3893EA54)) > ( GetRectMaxY(bj_mapInitialPlayableArea) - 50.00 ))) then
-- call SetUnitY( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x3893EA54), ( GetRectMaxY(bj_mapInitialPlayableArea) - 50.00 ) )
-- else
-- if ((GetUnitY(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x3893EA54)) < ( GetRectMinY(bj_mapInitialPlayableArea) + 50.00 ))) then
-- call SetUnitY( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x3893EA54), ( GetRectMinY(bj_mapInitialPlayableArea) + 50.00 ) )
-- else
-- call DoNothing(  )
-- endif
-- endif
-- call YDTriggerSetEx(location, YDTriggerH2I(GetExpiredTimer()), 0x247CC5E5, GetUnitLoc(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x5FB96E0B)))
-- call YDTriggerSetEx(location, YDTriggerH2I(GetExpiredTimer()), 0xF4C4BD37, GetUnitLoc(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x3893EA54)))
-- call YDWESetLocalVariableGroup( "L1", GetUnitsInRangeOfLocMatching(115.00, YDTriggerGetEx(location, YDTriggerH2I(GetExpiredTimer()), 0x247CC5E5), Condition(function Trig_Wild_Axes_aFunc026Func021002003)) )
-- call YDWESetLocalVariableGroup( "L1", GetUnitsInRangeOfLocMatching(115.00, YDTriggerGetEx(location, YDTriggerH2I(GetExpiredTimer()), 0xF4C4BD37), Condition(function Trig_Wild_Axes_aFunc026Func022002003)) )
-- //call EnumDestructablesInCircleBJ( 115.00, YDTriggerGetEx(location, YDTriggerH2I(GetExpiredTimer()), 0x247CC5E5), function Trig_Wild_Axes_aFunc026Func023003 )
-- //call EnumDestructablesInCircleBJ( 115.00, YDTriggerGetEx(location, YDTriggerH2I(GetExpiredTimer()), 0xF4C4BD37), function Trig_Wild_Axes_aFunc026Func024003 )
-- call ForGroupBJ( YDWEGetLocalVariableGroup("L1"), function Trig_Wild_Axes_aFunc026Func025A )
-- call ForGroupBJ( YDWEGetLocalVariableGroup("L2"), function Trig_Wild_Axes_aFunc026Func026A )
-- call DestroyGroup( YDWEGetLocalVariableGroup("L1") )
-- call DestroyGroup( YDWEGetLocalVariableGroup("L2") )
-- if ((YDTriggerGetEx(boolean, YDTriggerH2I(GetExpiredTimer()), 0xA32DA6CF) == true)) then
-- call YDTriggerSetEx(real, YDTriggerH2I(GetExpiredTimer()), 0xD5CF2EF3, ( YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0xD5CF2EF3) - 0.02 ))
-- else
-- call YDWESetLocalVariableRealArray( "x", 0, GetUnitX(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0xB95F828C)) )
-- call YDWESetLocalVariableRealArray( "y", 0, GetUnitY(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0xB95F828C)) )
-- call YDTriggerSetEx(real, YDTriggerH2I(GetExpiredTimer()), 0xD5CF2EF3, ( YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0xD5CF2EF3) + 0.02 ))
-- call YDTriggerSetEx(real, YDTriggerH2I(GetExpiredTimer()), 0x324AE96A, GetUnitX(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0xB95F828C)))
-- call YDTriggerSetEx(real, YDTriggerH2I(GetExpiredTimer()), 0x058682B9, GetUnitY(YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0xB95F828C)))
-- call YDWESetLocalVariableReal( "comp", Atan2(( YDWEGetLocalVariableRealArray("y", 1) - YDWEGetLocalVariableRealArray("y", 0) ), ( YDWEGetLocalVariableRealArray("x", 1) - YDWEGetLocalVariableRealArray("x", 0) )) )
-- call YDTriggerSetEx(real, YDTriggerH2I(GetExpiredTimer()), 0x236B99A8, YDWEGetLocalVariableReal("comp"))
-- endif
-- if (((YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0xD5CF2EF3) <= 0.00) and (YDTriggerGetEx(boolean, YDTriggerH2I(GetExpiredTimer()), 0xA32DA6CF) == true))) then
-- call YDTriggerSetEx(boolean, YDTriggerH2I(GetExpiredTimer()), 0xA32DA6CF, false)
-- call YDWESetLocalVariableRealArray( "x", 2, ( YDWEGetLocalVariableRealArray("x", 0) + ( 300.00 * Cos(( YDWEGetLocalVariableReal("comp") - 45.00 )) ) ) )
-- call YDWESetLocalVariableRealArray( "y", 2, ( YDWEGetLocalVariableRealArray("y", 0) + ( 300.00 * Sin(( YDWEGetLocalVariableReal("comp") - 45.00 )) ) ) )
-- call YDWESetLocalVariableRealArray( "x", 3, ( YDWEGetLocalVariableRealArray("x", 0) + ( 300.00 * Cos(( YDWEGetLocalVariableReal("comp") + 45.00 )) ) ) )
-- call YDWESetLocalVariableRealArray( "y", 3, ( YDWEGetLocalVariableRealArray("y", 0) + ( 300.00 * Sin(( YDWEGetLocalVariableReal("comp") + 45.00 )) ) ) )
-- call YDTriggerSetEx(real, YDTriggerH2I(GetExpiredTimer()), 0x41713DA3, YDWEGetLocalVariableRealArray("x", 2))
-- call YDTriggerSetEx(real, YDTriggerH2I(GetExpiredTimer()), 0x71CA3531, YDWEGetLocalVariableRealArray("y", 2))
-- call YDTriggerSetEx(real, YDTriggerH2I(GetExpiredTimer()), 0xD310CF7A, YDWEGetLocalVariableRealArray("x", 3))
-- call YDTriggerSetEx(real, YDTriggerH2I(GetExpiredTimer()), 0x7D73FF94, YDWEGetLocalVariableRealArray("y", 3))
-- else
-- endif
-- if (((YDTriggerGetEx(real, YDTriggerH2I(GetExpiredTimer()), 0xD5CF2EF3) >= 1.00) and (YDTriggerGetEx(boolean, YDTriggerH2I(GetExpiredTimer()), 0xA32DA6CF) == false))) then
-- call RemoveLocation( YDWEGetLocalVariableLocation("point3") )
-- call RemoveLocation( YDWEGetLocalVariableLocation("point4") )
-- call RemoveUnit( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x5FB96E0B) )
-- call RemoveUnit( YDTriggerGetEx(unit, YDTriggerH2I(GetExpiredTimer()), 0x3893EA54) )
-- call DestroyGroup( YDTriggerGetEx(group, YDTriggerH2I(GetExpiredTimer()), 0x93FE3865) )
-- call DestroyGroup( YDTriggerGetEx(group, YDTriggerH2I(GetExpiredTimer()), 0xF3DA78D7) )
-- call YDTriggerClearTable(YDTriggerH2I(GetExpiredTimer()))
-- call DestroyTimer(GetExpiredTimer())
-- else
-- endif
-- set ydl_group = null
-- set ydl_unit = null
-- endfunction
-- function FeiYanHuiXiang takes nothing returns nothing
-- local timer ydl_timer
-- local integer ydl_localvar_step = YDTriggerGetEx(integer, YDTriggerH2I(GetTriggeringTrigger()), 0xCFDE6C76)
-- call WuGongShengChong(GetTriggerUnit(),'A054',300.)
-- call WuGongShengChong(GetTriggerUnit(),'A059',1500.)
-- set ydl_localvar_step = ydl_localvar_step + 3
-- call YDTriggerSetEx(integer, YDTriggerH2I(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
-- call YDTriggerSetEx(integer, YDTriggerH2I(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
-- call YDWESetLocalVariableRealArray( "x", 0, GetUnitX(GetTriggerUnit()) )
-- call YDWESetLocalVariableRealArray( "y", 0, GetUnitY(GetTriggerUnit()) )
-- call YDWESetLocalVariableRealArray( "x", 1, GetSpellTargetX() )
-- call YDWESetLocalVariableRealArray( "y", 1, GetSpellTargetY() )
-- call YDTriggerSetEx(unit, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xB95F828C, GetTriggerUnit())
-- call YDTriggerSetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x324AE96A, GetUnitX(GetTriggerUnit()))
-- call YDTriggerSetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x058682B9, GetUnitY(GetTriggerUnit()))
-- call YDTriggerSetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x2392447A, GetSpellTargetX())
-- call YDTriggerSetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xB0897302, GetSpellTargetY())
-- call YDWESetLocalVariableReal( "comp", Atan2(( YDWEGetLocalVariableRealArray("y", 1) - YDWEGetLocalVariableRealArray("y", 0) ), ( YDWEGetLocalVariableRealArray("x", 1) - YDWEGetLocalVariableRealArray("x", 0) )) )
-- call YDTriggerSetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x236B99A8, YDWEGetLocalVariableReal("comp"))
-- call YDWESetLocalVariableRealArray( "x", 2, ( YDWEGetLocalVariableRealArray("x", 0) + ( 300.00 * Cos(( YDWEGetLocalVariableReal("comp") + 45.00 )) ) ) )
-- call YDWESetLocalVariableRealArray( "y", 2, ( YDWEGetLocalVariableRealArray("y", 0) + ( 300.00 * Sin(( YDWEGetLocalVariableReal("comp") + 45.00 )) ) ) )
-- call YDWESetLocalVariableRealArray( "x", 3, ( YDWEGetLocalVariableRealArray("x", 0) + ( 300.00 * Cos(( YDWEGetLocalVariableReal("comp") - 45.00 )) ) ) )
-- call YDWESetLocalVariableRealArray( "y", 3, ( YDWEGetLocalVariableRealArray("y", 0) + ( 300.00 * Sin(( YDWEGetLocalVariableReal("comp") - 45.00 )) ) ) )
-- call YDTriggerSetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x41713DA3, YDWEGetLocalVariableRealArray("x", 2))
-- call YDTriggerSetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x71CA3531, YDWEGetLocalVariableRealArray("y", 2))
-- call YDTriggerSetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xD310CF7A, YDWEGetLocalVariableRealArray("x", 3))
-- call YDTriggerSetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x7D73FF94, YDWEGetLocalVariableRealArray("y", 3))
-- call YDTriggerSetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xD5CF2EF3, 1.00)
-- call YDTriggerSetEx(boolean, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xA32DA6CF, true)
-- call YDTriggerSetEx(unit, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x5FB96E0B, CreateUnit(GetTriggerPlayer(), 'h00L', YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x324AE96A), YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x058682B9), 270.00))
-- call YDTriggerSetEx(unit, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x3893EA54, CreateUnit(GetTriggerPlayer(), 'h00L', YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x324AE96A), YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x058682B9), 270.00))
-- call YDTriggerSetEx(group, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x93FE3865, CreateGroup())
-- call YDTriggerSetEx(group, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xF3DA78D7, CreateGroup())
-- set ydl_timer = CreateTimer()
-- call YDTriggerSetEx(boolean, YDTriggerH2I(ydl_timer), 0xA32DA6CF, YDTriggerGetEx(boolean, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xA32DA6CF))
-- call YDTriggerSetEx(unit, YDTriggerH2I(ydl_timer), 0xB95F828C, YDTriggerGetEx(unit, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xB95F828C))
-- call YDTriggerSetEx(group, YDTriggerH2I(ydl_timer), 0x93FE3865, YDTriggerGetEx(group, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x93FE3865))
-- call YDTriggerSetEx(group, YDTriggerH2I(ydl_timer), 0xF3DA78D7, YDTriggerGetEx(group, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xF3DA78D7))
-- call YDTriggerSetEx(real, YDTriggerH2I(ydl_timer), 0xD5CF2EF3, YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xD5CF2EF3))
-- call YDTriggerSetEx(unit, YDTriggerH2I(ydl_timer), 0x5FB96E0B, YDTriggerGetEx(unit, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x5FB96E0B))
-- call YDTriggerSetEx(unit, YDTriggerH2I(ydl_timer), 0x3893EA54, YDTriggerGetEx(unit, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x3893EA54))
-- call YDTriggerSetEx(location, YDTriggerH2I(ydl_timer), 0x247CC5E5, YDTriggerGetEx(location, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x247CC5E5))
-- call YDTriggerSetEx(location, YDTriggerH2I(ydl_timer), 0xF4C4BD37, YDTriggerGetEx(location, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xF4C4BD37))
-- call YDTriggerSetEx(real, YDTriggerH2I(ydl_timer), 0x324AE96A, YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x324AE96A))
-- call YDTriggerSetEx(real, YDTriggerH2I(ydl_timer), 0x2392447A, YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x2392447A))
-- call YDTriggerSetEx(real, YDTriggerH2I(ydl_timer), 0x41713DA3, YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x41713DA3))
-- call YDTriggerSetEx(real, YDTriggerH2I(ydl_timer), 0xD310CF7A, YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xD310CF7A))
-- call YDTriggerSetEx(real, YDTriggerH2I(ydl_timer), 0x058682B9, YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x058682B9))
-- call YDTriggerSetEx(real, YDTriggerH2I(ydl_timer), 0xB0897302, YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xB0897302))
-- call YDTriggerSetEx(real, YDTriggerH2I(ydl_timer), 0x71CA3531, YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x71CA3531))
-- call YDTriggerSetEx(real, YDTriggerH2I(ydl_timer), 0x7D73FF94, YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0x7D73FF94))
-- call TimerStart(ydl_timer, ( 0.25 / 10.00 ), true, function Trig_Wild_Axes_aFunc026T)
-- call YDTriggerClearTable(YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step)
-- set ydl_timer = null
-- endfunction
--神龙八式
function Trig_ciZhenSaoSheConditions()
	return GetSpellAbilityId() == 1093678391
end
function Trig_ciZhenSaoSheFunc007Func001Func002Func007T()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0)
	if LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000) > 0 then
		SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000, LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000) - 1)
	--call BJDebugMsg(I2S(LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000)))
	end
	DestroyTimer(GetExpiredTimer())
end
function Trig_ciZhenSaoSheFunc007Conditions()
	local ydl_timer
	local u = LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()), 0)
	local l__ut = GetTriggerUnit()
	local i = LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000)
	local shxishu = 1.0
	local shanghai = 0.0
	if EVENT_UNIT_DAMAGED == GetTriggerEventId() == false then
		--call BJDebugMsg("123")
		FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()))
		DestroyTrigger(GetTriggeringTrigger())
		SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000, 0)
	else
		if GetEventDamage() == 0.98 and GetEventDamageSource() == u then
			--call BJDebugMsg("456")
			shxishu = 1 + I2R(i) * 0.1
			shanghai = ShangHaiGongShi(u, l__ut, 15, 18, shxishu, 1093678391)
			WuGongShangHai(u, l__ut, shanghai)
			if GetUnitAbilityLevel(u, 1093677900) ~= 0 then --加寒冰真气昏迷
				WanBuff(u, l__ut, 5)
			end
			if GetUnitAbilityLevel(u, 1093678935) ~= 0 then --加乾坤
				shxishu = shxishu + 0.6
			end
			if GetUnitAbilityLevel(u, 1093678930) ~= 0 then --加吸星
				shxishu = shxishu + 0.7
			end
			if GetUnitAbilityLevel(u, 1093679156) ~= 0 then --加蛤蟆
				shxishu = shxishu + 1.2
			end
			SaveInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000, i + 1)
			ydl_timer = CreateTimer()
			SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0, u)
			TimerStart(ydl_timer, 14.0, false, Trig_ciZhenSaoSheFunc007Func001Func002Func007T)
		else
		end
	end
	ydl_timer = nil
	return false
end
function Trig_ciZhenSaoSheActions()
	local ydl_trigger
	local u = GetTriggerUnit()
	WuGongShengChong(u, 1093678391, 900.0)
	if LoadInteger(YDHT, GetHandleId(GetOwningPlayer(u)), 20000) <= 0 then
		ydl_trigger = CreateTrigger()
		SaveUnitHandle(YDHT, GetHandleId(ydl_trigger), 0, GetTriggerUnit())
		Ov(ydl_trigger)
		TriggerRegisterTimerEventSingle(ydl_trigger, 30.0)
		TriggerAddCondition(ydl_trigger, Condition(Trig_ciZhenSaoSheFunc007Conditions))
	end
	ydl_trigger = nil
end
--function IsShenLongBaShiSH takes nothing returns boolean
--	return((GetEventDamage()==.98))
--endfunction
--function ShenLongBaShiSH takes nothing returns nothing
--	local unit u=udg_hero[(1+GetPlayerId(GetOwningPlayer(GetEventDamageSource())))]
--    local unit ut=GetTriggerUnit()
--    local real shxishu= 1
--    local real shanghai=0.
--    set shanghai=ShangHaiGongShi(u,ut,7.2,8.9,shxishu,'A057')
--    call WuGongShangHai(u,ut,shanghai)
--    set u=null
--    set ut=null
--endfunction
function ShenLong_Trigger()
	local t = CreateTrigger()
	--子胥举鼎
	Ov(t)
	TriggerAddCondition(t, Condition(IsZiXuJuDing))
	TriggerAddAction(t, ZiXuJuDing)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsZiXuBeiDong))
	TriggerAddAction(t, ZiXuBeiDong)
	--贵妃回眸
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsGuiFeiHuiMou))
	TriggerAddAction(t, GuiFeiHuiMou)
	t = CreateTrigger()
	Ov(t)
	TriggerAddCondition(t, Condition(IsGuiFeiHuiMouSH))
	TriggerAddAction(t, GuiFeiHuiMouSH)
	--鲁达拔柳
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsLuDaBaLiu))
	TriggerAddAction(t, LuDaBaLiu)
	--狄青降龙
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsDiQingXiangLong))
	TriggerAddAction(t, DiQingXiangLong)
	t = CreateTrigger()
	Ov(t)
	TriggerAddCondition(t, Condition(IsDiQingXiangLongSH))
	TriggerAddAction(t, DiQingXiangLongSH)
	-- //飞燕回翔
	-- set t = CreateTrigger()
	-- call TriggerRegisterAnyUnitEventBJ( t, EVENT_PLAYER_UNIT_SPELL_EFFECT )
	-- call TriggerAddCondition(t, Condition(function IsFeiYanHuiXiang))
	-- call TriggerAddAction(t, function FeiYanHuiXiang)
	--小怜横陈
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsXiaoLianHengChen))
	TriggerAddAction(t, XiaoLianHengChen)
	--神龙八式
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(Trig_ciZhenSaoSheConditions))
	TriggerAddAction(t, Trig_ciZhenSaoSheActions)
	--    set t= CreateTrigger()
	--   call Ov(t)
	--call TriggerAddCondition(t,Condition(function IsShenLongBaShiSH))
	--   call TriggerAddAction(t,function ShenLongBaShiSH)
	--神龙心法
	t = nil
end
--全真剑法 3级技
function IsQuanZhen()
	return IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) and GetUnitAbilityLevel(GetAttacker(), 1093681990) >= 1
end
function QuanZhen_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function QuanZhen_Action()
	local u = GetAttacker()
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local loc = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	shxishu = 1 + jingmai[i] // 20
	shanghai = ShangHaiGongShi(u, uc, 12.0, 21.0, shxishu, 1093681990)
	WuGongShangHai(u, uc, shanghai)
	DestroyEffect(AddSpecialEffectTarget("Units\\NightElf\\Wisp\\WispExplode.mdl", uc, "overhead"))
	if GetUnitAbilityLevel(u, 1093678931) >= 1 and GetRandomReal(1.0, 100) <= 20 then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
		UnitAddAbility(bj_lastCreatedUnit, 1093678412)
		IssueTargetOrderById(bj_lastCreatedUnit, 852095, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		ShowUnitHide(bj_lastCreatedUnit)
		CreateTextTagLocBJ("封穴", loc2, 0, 12.0, 65.0, 55.0, 42.0, 0)
		Nw(3.0, bj_lastCreatedTextTag)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
	end
	if GetUnitAbilityLevel(u, 1093678934) >= 1 then
		SetWidgetLife(u, GetUnitState(u, UNIT_STATE_LIFE) + GetUnitAbilityLevel(u, 1093681990) * yishu[i] * 20)
	end
	RemoveLocation(loc)
	RemoveLocation(loc2)
	loc2 = nil
	loc = nil
	u = nil
	uc = nil
end
function QuanZhenJian()
	local uc = GetTriggerUnit()
	local u = GetAttacker()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local loc = GetUnitLoc(u)
	local g = CreateGroup()
	local chance = fuyuan[i]
	if GetUnitAbilityLevel(u, 1093678935) >= 1 then
		chance = chance * 4
	end
	if GetRandomReal(0, 100) <= 20 + chance / 5 then
		WuGongShengChong(u, 1093681990, 1100.0)
		if danpo[i] >= 15 then
			GroupEnumUnitsInRangeOfLoc(g, loc, danpo[i] * 20, Condition(QuanZhen_Condition))
		else
			GroupAddUnit(g, uc)
		end
		ForGroupBJ(g, QuanZhen_Action)
		GroupClear(g)
		DestroyGroup(g)
		RemoveLocation(loc)
	end
	g = nil
	loc = nil
	p = nil
	u = nil
	uc = nil
end
--昊天掌 15级技
function IsXianTianYiYang()
	return GetSpellAbilityId() == 1093681997 and (IsUnitEnemy(GetSpellTargetUnit(), GetOwningPlayer(GetTriggerUnit())) or GetSpellTargetUnit() == GetTriggerUnit())
end
function XianTianYiYang_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit())
end
function XianTianYiYang_Action()
	local u = GetTriggerUnit()
	local uc = GetEnumUnit()
	local l__ut = nil
	local loc1 = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	local shxishu = 1.0
	local shanghai = 0.0
	local level = 0
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	CreateNUnitsAtLoc(1, 1697656920, GetOwningPlayer(u), loc1, bj_UNIT_FACING)
	l__ut = bj_lastCreatedUnit
	UnitAddAbility(l__ut, 1093682250)
	IssueTargetOrderById(l__ut, 852119, uc)
	UnitApplyTimedLife(l__ut, 1112045413, 2.0)
	ShowUnitHide(l__ut)
	if GetUnitAbilityLevel(u, 1093682245) >= 1 then
		shxishu = shxishu * 2
	end
	if GetUnitAbilityLevel(u, 1093678933) >= 1 then
		shxishu = shxishu / 2
	end
	shanghai = ShangHaiGongShi(u, uc, 250, 700, shxishu, 1093681997)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678672) >= 1 and GetRandomReal(1.0, 200) <= fuyuan[i] then
		--call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+80)
		level = GetUnitAbilityLevel(u, 1093678672)
		--call UnitRemoveAbility(u,'A06P')
		--call UnitAddAbility(u,'A06P')
		--call SetUnitAbilityLevel(u,'A06P',level)
		IssuePointOrderByIdLoc(u, 852125, loc2)
		UnitRemoveAbility(u, 1093678672)
		UnitAddAbility(u, 1093678672)
		SetUnitAbilityLevel(u, 1093678672, level)
	end
	if fuyuan[i] >= 20 and jingmai[i] >= 20 and GetRandomReal(1.0, 200) <= fuyuan[i] then
		level = GetUnitAbilityLevel(u, 1093681997)
		UnitRemoveAbility(u, 1093681997)
		UnitAddAbility(u, 1093681997)
		SetUnitAbilityLevel(u, 1093681997, level)
	end
	if GetUnitAbilityLevel(u, 1093678934) >= 1 then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678903)
		IssueTargetOrderById(bj_lastCreatedUnit, 852111, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		CreateTextTagLocBJ("内伤", loc2, 60.0, 12.0, 65.0, 55.0, 42.0, 0)
		Nw(3.0, bj_lastCreatedTextTag)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
	end
	RemoveLocation(loc1)
	RemoveLocation(loc2)
	u = nil
	uc = nil
	l__ut = nil
	loc1 = nil
	loc2 = nil
end
function XianTianYiYang()
	local u = GetTriggerUnit()
	local uc = GetSpellTargetUnit()
	local loc = GetUnitLoc(uc)
	local g = CreateGroup()
	WuGongShengChong(u, 1093681997, 250)
	if u == uc then
		SetWidgetLife(u, 1.0)
		WuGongShangHai(u, u, 299999)
	end
	if GetUnitAbilityLevel(u, 1093678933) >= 1 then
		GroupEnumUnitsInRangeOfLoc(g, loc, 500, Condition(XianTianYiYang_Condition))
	else
		GroupAddUnit(g, uc)
	end
	ForGroupBJ(g, XianTianYiYang_Action)
	GroupClear(g)
	DestroyGroup(g)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
	g = nil
end
--金雁功 8级技
function IsJinYanKai()
	return GetIssuedOrderId() == 852177 and GetUnitAbilityLevel(GetTriggerUnit(), 1093682241) >= 1
end
--没蓝自动关闭金雁功
function JinYanMeiLan()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	if UnitHasBuffBJ(u, 1110454359) == false then
		UnitRemoveAbility(u, 1093682242)
		UnitRemoveAbility(u, 1093682243)
		UnitRemoveAbility(u, 1098084450)
		FlushChildHashtable(YDHT, GetHandleId(t))
		PauseTimer(t)
		DestroyTimer(t)
	end
	u = nil
	t = nil
end
--开启金雁功
function JinYanKai()
	local u = GetTriggerUnit()
	local level = GetUnitAbilityLevel(u, 1093682241)
	local t = CreateTimer()
	UnitAddAbility(u, 1093682242)
	UnitAddAbility(u, 1093682243)
	UnitAddAbilityBJ(1098084450, u)
	SetPlayerAbilityAvailableBJ(false, 1098084450, GetOwningPlayer(u))
	if GetUnitAbilityLevel(u, 1093678932) >= 1 then
		SetUnitAbilityLevel(u, 1093682242, level + 1)
	else
		SetUnitAbilityLevel(u, 1093682242, level)
	end
	if GetUnitAbilityLevel(u, 1093681992) >= 1 then
		SetUnitAbilityLevel(u, 1093682243, level + 1)
	else
		SetUnitAbilityLevel(u, 1093682243, level)
	end
	if GetUnitAbilityLevel(u, 1093682245) >= 1 then
		SetUnitAbilityLevel(u, 1093682244, level + 1)
	else
		SetUnitAbilityLevel(u, 1093682244, level)
	end
	--set fuyuan[1+GetPlayerId(GetOwningPlayer(u))]=fuyuan[1+GetPlayerId(GetOwningPlayer(u))]+10
	WuGongShengChong(u, 1093682241, 150.0)
	--call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,I2S(GetUnitAbilityLevel(u,'A0DD')))
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	TimerStart(t, 0.5, true, JinYanMeiLan)
	t = nil
	u = nil
end
--关闭金雁功
function IsJinYanGuan()
	return GetIssuedOrderId() == 852178 and GetUnitAbilityLevel(GetTriggerUnit(), 1093682241) >= 1
end
function JinYanGuan()
	local u = GetTriggerUnit()
	UnitRemoveAbility(u, 1093682242)
	UnitRemoveAbility(u, 1093682243)
	UnitRemoveAbility(u, 1098084450)
	--set fuyuan[1+GetPlayerId(GetOwningPlayer(u))]=fuyuan[1+GetPlayerId(GetOwningPlayer(u))]-10
	u = nil
end
--金雁功被动
function IsJinYan()
	return IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) and UnitHasBuffBJ(GetAttacker(), 1110454359)
end
function JinYanFanWei()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function JinYanGong()
	local u = GetAttacker()
	local l__ut = GetTriggerUnit()
	local g = CreateGroup()
	local loc = GetUnitLoc(u)
	local uc = nil
	local loc2 = GetUnitLoc(l__ut)
	local level = 0
	GroupEnumUnitsInRangeOfLoc(g, loc, 1000, Condition(JinYanFanWei))
	uc = GroupPickRandomUnit(g)
	if GetRandomReal(1.0, 100) <= fuyuan[1 + GetPlayerId(GetOwningPlayer(u))] then
		if GetUnitAbilityLevel(u, 1093678932) >= 1 then
			CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
			ShowUnitHide(bj_lastCreatedUnit)
			UnitAddAbility(bj_lastCreatedUnit, 1093678903)
			IssueTargetOrderById(bj_lastCreatedUnit, 852111, l__ut)
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
			CreateTextTagLocBJ("内伤", loc2, 60.0, 12.0, 65.0, 55.0, 42.0, 0)
			Nw(3.0, bj_lastCreatedTextTag)
			SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
		end
		if GetUnitAbilityLevel(u, 1093681992) >= 1 then
			CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
			UnitAddAbility(bj_lastCreatedUnit, 1093678900)
			IssueTargetOrderById(bj_lastCreatedUnit, 852527, l__ut)
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
			ShowUnitHide(bj_lastCreatedUnit)
			CreateTextTagLocBJ("中毒", loc2, 0, 12.0, 65.0, 55.0, 42.0, 0)
			Nw(3.0, bj_lastCreatedTextTag)
			SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
		end
		if GetUnitAbilityLevel(u, 1093682245) >= 1 then
			CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
			ShowUnitHide(bj_lastCreatedUnit)
			UnitAddAbility(bj_lastCreatedUnit, 1093681498)
			IssueTargetOrderById(bj_lastCreatedUnit, 852075, l__ut)
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
			CreateTextTagLocBJ("昏迷", loc2, 60.0, 12.0, 65.0, 55.0, 42.0, 0)
			Nw(3.0, bj_lastCreatedTextTag)
			SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
		end
		if uc ~= nil and GetUnitAbilityLevel(u, 1093681997) >= 1 and GetRandomInt(1, 10) == 1 then
			SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) + 70)
			level = GetUnitAbilityLevel(u, 1093681997)
			UnitRemoveAbility(u, 1093681997)
			UnitAddAbility(u, 1093681997)
			SetUnitAbilityLevel(u, 1093681997, level)
		end
	end
	GroupClear(g)
	DestroyGroup(g)
	RemoveLocation(loc)
	u = nil
	uc = nil
	g = nil
	loc = nil
end
--先天功
function IsXianTian()
	return GetUnitAbilityLevel(GetTriggerUnit(), 1093681992) >= 1 and GetEventDamage() >= GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE)
end
function XianTian_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_xiantiandanwei)) and IsUnitAliveBJ(GetFilterUnit())
end
function XianTian_Action()
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	shanghai = ShangHaiGongShi(udg_xiantiandanwei, uc, 2000, 800, shxishu, 1093681992)
	WuGongShangHai(udg_xiantiandanwei, uc, shanghai)
	if GetUnitAbilityLevel(udg_xiantiandanwei, 1093678934) >= 1 then
		shxishu = shxishu + 1.0
	end
	if GetUnitAbilityLevel(udg_xiantiandanwei, 1093678672) >= 1 then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(udg_xiantiandanwei), loc, bj_UNIT_FACING)
		UnitAddAbility(bj_lastCreatedUnit, 1093678412)
		IssueTargetOrderById(bj_lastCreatedUnit, 852095, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		ShowUnitHide(bj_lastCreatedUnit)
		CreateTextTagLocBJ("封穴", loc, 0, 12.0, 65.0, 55.0, 42.0, 0)
		Nw(3.0, bj_lastCreatedTextTag)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
	end
	if GetUnitAbilityLevel(udg_xiantiandanwei, 1093678927) >= 1 then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(udg_xiantiandanwei), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093682246)
		IssueTargetOrderById(bj_lastCreatedUnit, 852066, udg_xiantiandanwei)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 3.0)
	end
	RemoveLocation(loc)
	loc = nil
	uc = nil
end
function XianTian2()
	local t = GetExpiredTimer()
	local p = GetHandleId(t)
	local u = LoadUnitHandle(YDHT, p, 0)
	local g = CreateGroup()
	local loc = GetUnitLoc(u)
	local range = 800
	udg_xiantiandanwei = u
	if GetUnitAbilityLevel(u, 1093678935) >= 0 then
		range = range + 700
	end
	GroupEnumUnitsInRangeOfLoc(g, loc, range, Condition(XianTian_Condition))
	ForGroupBJ(g, XianTian_Action)
	GroupClear(g)
	DestroyGroup(g)
	PauseTimer(t)
	DestroyTimer(t)
	RemoveLocation(loc)
	u = nil
	t = nil
	g = nil
	loc = nil
end
--捕捉重生事件
function XianTian1()
	local t = GetExpiredTimer()
	local tm = nil
	local p = GetHandleId(t)
	local u = LoadUnitHandle(YDHT, p, 0)
	if GetPlayerState(GetOwningPlayer(u), PLAYER_STATE_RESOURCE_FOOD_USED) == LoadInteger(YDHT, p, 1) then
		--call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "捕捉成功" )
		WuGongShengChong(u, 1093681992, 40.0)
		tm = CreateTimer()
		SaveUnitHandle(YDHT, GetHandleId(tm), 0, u)
		SaveInteger(YDHT, GetHandleId(tm), 1, LoadInteger(YDHT, p, 1))
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, p)
		TimerStart(tm, 3.01, false, XianTian2)
	else
	end
	t = nil
	tm = nil
	u = nil
end
function XianTianGong()
	local t = CreateTimer()
	local p = GetHandleId(t)
	local u = GetTriggerUnit()
	SaveUnitHandle(YDHT, p, 0, u)
	SaveInteger(YDHT, p, 1, GetPlayerState(GetOwningPlayer(u), PLAYER_STATE_RESOURCE_FOOD_USED))
	TimerStart(t, 0.0, false, XianTian1)
	t = nil
	u = nil
end
--三花聚顶
function IsSanHua()
	return GetSpellAbilityId() == 1093682245
end
function SanHua_Condition()
	return GetUnitTypeId(GetEventDamageSource()) == 1697656921
end
function SanHua_Action()
	local p = GetOwningPlayer(GetEventDamageSource())
	local i = 1 + GetPlayerId(p)
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local loc = GetUnitLoc(uc)
	local shxishu = 1.0
	local shanghai = 0
	if GetUnitAbilityLevel(u, 1093678930) >= 1 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093678913) >= 1 then
		WanBuff(u, uc, 5)
	end
	shanghai = ShangHaiGongShi(u, uc, 250, 180, shxishu, 1093682245)
	if IsUnitEnemy(uc, GetOwningPlayer(u)) then
		WuGongShangHai(u, uc, shanghai)
	else
		SetWidgetLife(uc, GetUnitState(uc, UNIT_STATE_LIFE) + shanghai / 10)
		SetUnitState(uc, UNIT_STATE_MANA, GetUnitState(uc, UNIT_STATE_MANA) + 200)
	end
	RemoveLocation(loc)
	p = nil
	u = nil
	uc = nil
	loc = nil
end
function SanHua_1()
	return IsUnitAliveBJ(GetFilterUnit())
end
function SanHua()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local loc2 = nil
	local g = nil
	local l__ut = nil
	local uc = GetSpellTargetUnit()
	local i = 0
	local imax = 10
	if GetUnitAbilityLevel(u, 1093678664) >= 1 then
		imax = imax + 3
	end
	if GetUnitAbilityLevel(u, 1093678934) >= 1 then
		imax = imax + 3
	end
	if GetUnitAbilityLevel(u, 1093682228) >= 1 then
		imax = imax + 50
	end
	WuGongShengChong(u, 1093682245, 150.0)
	CreateNUnitsAtLoc(1, 1697656921, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	l__ut = bj_lastCreatedUnit
	UnitAddAbility(l__ut, 1093682247)
	UnitApplyTimedLife(l__ut, 1112045413, 2.0)
	ShowUnitHide(l__ut)
	IssueTargetOrderById(l__ut, 852119, uc)
	RemoveLocation(loc)
	for _ in _loop_() do
		if i > imax then break end
		loc2 = GetUnitLoc(uc)
		g = CreateGroup()
		GroupEnumUnitsInRangeOfLoc(g, loc2, 800, Condition(SanHua_1))
		if g ~= nil then
			CreateNUnitsAtLoc(1, 1697656921, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
			l__ut = bj_lastCreatedUnit
			UnitAddAbility(l__ut, 1093682247)
			UnitApplyTimedLife(l__ut, 1112045413, 2.0)
			ShowUnitHide(l__ut)
			uc = GroupPickRandomUnit(g)
			IssueTargetOrderById(l__ut, 852119, uc)
			DestroyGroup(g)
			RemoveLocation(loc2)
			YDWEPolledWaitNull(0.15)
		else
			DestroyGroup(g)
			RemoveLocation(loc2)
			if true then break end
		end
		i = i + 1
	end
	u = nil
	loc = nil
	loc2 = nil
	uc = nil
	l__ut = nil
	g = nil
end
--事件
function QuanZhen_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsQuanZhen))
	TriggerAddAction(t, QuanZhenJian)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsXianTianYiYang))
	TriggerAddAction(t, XianTianYiYang)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_ORDER)
	TriggerAddCondition(t, Condition(IsJinYanKai))
	TriggerAddAction(t, JinYanKai)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_ORDER)
	TriggerAddCondition(t, Condition(IsJinYanGuan))
	TriggerAddAction(t, JinYanGuan)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsJinYan))
	TriggerAddAction(t, JinYanGong)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsXianTian))
	TriggerAddAction(t, XianTianGong)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsSanHua))
	TriggerAddAction(t, SanHua)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(SanHua_Condition))
	TriggerAddAction(t, SanHua_Action)
	t = nil
end

function IsTieShaZhang()
	return PassiveWuGongCondition(GetAttacker(), GetTriggerUnit(), 1093678681)
end
function TieSha_Condition()
	return DamageFilter(GetAttacker(), GetFilterUnit())
end
function TieSha_Action()
	local shxishu = 1 + DamageCoefficientByAbility(GetAttacker(), 1093678935, 0.8)
	if UnitHasBuffBJ(GetEnumUnit(), 1111847784) or UnitHasBuffBJ(GetEnumUnit(), 1110454602) then
		shxishu = shxishu + DamageCoefficientByAbility(GetAttacker(), 1093678933, 1.5)
	end
	if UnitHasBuffBJ(GetEnumUnit(), 1110454602) then
		shxishu = shxishu + DamageCoefficientByAbility(GetAttacker(), 1093678931, 2.0)
	end
	if (GetUnitAbilityLevel(GetAttacker(), 1093678672) >= 1 or GetUnitAbilityLevel(GetAttacker(), 1093682227) >= 1) and GetRandomInt(1, 100) <= 30 then
		if UnitHasBuffBJ(GetEnumUnit(), 1111847784) == false and UnitHasBuffBJ(GetEnumUnit(), 1110454602) == false then
			WanBuff(GetAttacker(), GetEnumUnit(), 13)
		end
	end
	if GetUnitAbilityLevel(GetAttacker(), 1093678926) >= 1 and UnitHasBuffBJ(GetEnumUnit(), 1111847784) and GetRandomInt(1, 100) <= 30 then
		if UnitHasBuffBJ(GetEnumUnit(), 1110454602) == false then
			WanBuff(GetAttacker(), GetEnumUnit(), 14)
		end
	end
	PassiveWuGongEffectAndDamage(GetAttacker(), GetEnumUnit(), "Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl", 7.2, 8.9, shxishu, 1093678681)
end
function TieShaZhang()
	PassiveWuGongAction(GetAttacker(), GetTriggerUnit(), 15, 500, Condition(TieSha_Condition), TieSha_Action, 1093678681, 1200.0)
end

function IsDuSheShenZhang()
	return GetSpellAbilityId() == 1093678682 and IsUnitEnemy(GetSpellTargetUnit(), GetOwningPlayer(GetTriggerUnit()))
end
function IsDuSheEnemy()
	--不是玩家的单位且不无敌
	return GetPlayerController(GetOwningPlayer(GetFilterUnit())) ~= MAP_CONTROL_USER and GetUnitAbilityLevel(GetFilterUnit(), 1098282348) == 0 and IsUnitAliveBJ(GetFilterUnit())
end
function DuSheMove()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local l__ut = LoadUnitHandle(YDHT, GetHandleId(t), 1)
	local source = LoadLocationHandle(YDHT, GetHandleId(t), 2)
	local destination = LoadLocationHandle(YDHT, GetHandleId(t), 3)
	local majia = LoadUnitHandle(YDHT, GetHandleId(t), 4)
	local counter = LoadInteger(YDHT, GetHandleId(t), 5)
	local maxCount = 15 + GetUnitAbilityLevel(u, 1093678933) * 10 + GetUnitAbilityLevel(u, 1093678664) * 3
	local angle = AngleBetweenPoints(source, destination)
	local g = nil
	local shxishu = 1 + DamageCoefficientByItem(u, 1227897154, 3.0)
	if UnitHasBuffBJ(l__ut, 1111847784) or UnitHasBuffBJ(l__ut, 1110454602) then
		shxishu = shxishu + 1.0
	end
	if counter >= maxCount then
		FlushChildHashtable(YDHT, GetHandleId(t))
		PauseTimer(t)
		DestroyTimer(t)
		RemoveUnit(majia)
	else
		--距离小于15则移动到目标位置并造成伤害，然后获取下一个伤害目标
		if DistanceBetweenPoints(source, destination) < 15 then
			SetUnitPositionLoc(majia, destination)
			--设置下一个源地点
			SaveLocationHandle(YDHT, GetHandleId(t), 2, destination)
			--造成伤害 伤害单位个数加1
			PassiveWuGongEffectAndDamage(u, l__ut, "Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl", 15, 15, shxishu, 1093678682)
			if (UnitHasBuffBJ(l__ut, 1111847784) or UnitHasBuffBJ(l__ut, 1110454602)) and GetUnitAbilityLevel(u, 1093678931) >= 1 then
				WanBuff(u, l__ut, 7)
			end
			SaveInteger(YDHT, GetHandleId(t), 5, counter + 1)
			--获取下一个伤害目标
			g = YDWEGetUnitsInRangeOfLocMatchingNull(500, destination, Condition(IsDuSheEnemy))
			if CountUnitsInGroup(g) > 0 then
				l__ut = GroupPickRandomUnit(g)
				SaveUnitHandle(YDHT, GetHandleId(t), 1, l__ut)
				--设置下一个目标地点
				SaveLocationHandle(YDHT, GetHandleId(t), 3, GetUnitLoc(l__ut))
			--call RemoveLocation(destination)
			else
				FlushChildHashtable(YDHT, GetHandleId(t))
				PauseTimer(t)
				DestroyTimer(t)
				RemoveUnit(majia)
			end
		else
			--毒蛇马甲向目标移动
			SetUnitPositionLoc(majia, PolarProjectionBJ(source, 15, angle))
			SaveLocationHandle(YDHT, GetHandleId(t), 2, PolarProjectionBJ(source, 15, angle))
			SaveLocationHandle(YDHT, GetHandleId(t), 3, GetUnitLoc(l__ut))
		end
	end
	RemoveLocation(source)
	source = nil
	destination = nil
	t = nil
	l__ut = nil
	majia = nil
	u = nil
	g = nil
end
function DuSheShenZhang()
	local t = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(t), 0, GetTriggerUnit())
	SaveUnitHandle(YDHT, GetHandleId(t), 1, GetSpellTargetUnit())
	SaveLocationHandle(YDHT, GetHandleId(t), 2, GetUnitLoc(GetTriggerUnit()))
	SaveLocationHandle(YDHT, GetHandleId(t), 3, GetUnitLoc(GetSpellTargetUnit()))
	CreateNUnitsAtLocFacingLocBJ(1, 1697657157, GetOwningPlayer(GetTriggerUnit()), GetUnitLoc(GetTriggerUnit()), GetUnitLoc(GetSpellTargetUnit()))
	SaveUnitHandle(YDHT, GetHandleId(t), 4, bj_lastCreatedUnit)
	WuGongShengChong(GetTriggerUnit(), 1093678682, 200)
	TimerStart(t, 0.02, true, DuSheMove)
	t = nil
end

function IsTongBeiQuan()
	return PassiveWuGongCondition(GetAttacker(), GetTriggerUnit(), 1093678896)
end
function TongBeiQuan()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))]
	local l__ut = GetTriggerUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local loc = GetUnitLoc(l__ut)
	local shxishu = 1.0 + DamageCoefficientByAbility(u, 1093678935, 0.7) + DamageCoefficientByAbility(u, 1093682227, 0.9)
	local coefficient = 0.5
	if GetUnitAbilityLevel(u, 1093679161) >= 1 then
		coefficient = 1
	end
	if GetRandomInt(1, 100) <= fuyuan[i] // 5 + 15 then
		--+蛤蟆功 A084 召唤一个会通背拳的铁掌帮长老协助战斗 此处概率有待平衡 TODO
		if GetUnitAbilityLevel(u, 1093679156) >= 1 and GetRandomInt(1, 100) <= 7 then
			CreateNUnitsAtLoc(1, 1865429583, GetOwningPlayer(u), loc, bj_UNIT_FACING)
			UnitAddAbility(bj_lastCreatedUnit, 1093678896)
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 15.0)
		end
		WuGongShengChong(u, 1093678896, 800)
		if UnitHasBuffBJ(l__ut, 1111847784) then --已中毒则使之中毒加深
			SaveReal(YDHT, GetHandleId(l__ut), StringHash("TongBei"), 0.0)
			WanBuff(u, l__ut, 14)
		elseif UnitHasBuffBJ(l__ut, 1110454602) then --已深度中毒则造成额外伤害
			SaveReal(YDHT, GetHandleId(l__ut), StringHash("TongBei"), LoadReal(YDHT, GetHandleId(l__ut), StringHash("TongBei")) + coefficient)
			shxishu = shxishu + LoadReal(YDHT, GetHandleId(l__ut), StringHash("TongBei"))
			FontFloat("+" .. (I2S(R2I(shxishu)) or ""), loc, 60.0, 14, 100.0, 100.0, 0.0, 0, 2.0)
		else --未中毒则使之中毒
			SaveReal(YDHT, GetHandleId(l__ut), StringHash("TongBei"), 0.0)
			WanBuff(u, l__ut, 13)
		end
		PassiveWuGongEffectAndDamage(u, l__ut, "Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl", 75, 75, shxishu, 1093678896)
	end
	RemoveLocation(loc)
	u = nil
	l__ut = nil
	loc = nil
end

function IsShuiShangPiao()
	return GetSpellAbilityId() == 1093678937
end
function XYInMap(x, y)
	if x < GetRectMinX(GetEntireMapRect()) then
		return false
	end
	if x > GetRectMaxX(GetEntireMapRect()) then
		return false
	end
	if y < GetRectMinY(GetEntireMapRect()) then
		return false
	end
	if y > GetRectMaxY(GetEntireMapRect()) then
		return false
	end
	return true
end
function saveVarsInTimer(tm, u, x, y, n, distance, angle, a, b, m)
	SaveUnitHandle(YDHT, GetHandleId(tm), 0, u)
	SaveReal(YDHT, GetHandleId(tm), 1, x)
	SaveReal(YDHT, GetHandleId(tm), 2, y)
	SaveReal(YDHT, GetHandleId(tm), 3, n)
	SaveReal(YDHT, GetHandleId(tm), 4, distance)
	SaveReal(YDHT, GetHandleId(tm), 5, angle)
	SaveReal(YDHT, GetHandleId(tm), 6, a)
	SaveReal(YDHT, GetHandleId(tm), 7, b)
	SaveReal(YDHT, GetHandleId(tm), 8, m)
end
function Fly_tm()
	local tm = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(tm), 0)
	local x = LoadReal(YDHT, GetHandleId(tm), 1)
	local y = LoadReal(YDHT, GetHandleId(tm), 2)
	local n = LoadReal(YDHT, GetHandleId(tm), 3)
	local dis = LoadReal(YDHT, GetHandleId(tm), 4)
	local ang = LoadReal(YDHT, GetHandleId(tm), 5)
	local a = LoadReal(YDHT, GetHandleId(tm), 6)
	local b = LoadReal(YDHT, GetHandleId(tm), 7)
	local m = LoadReal(YDHT, GetHandleId(tm), 8) + 1
	local h = a * m * m + b * m
	if m <= n then
		SaveReal(YDHT, GetHandleId(tm), 8, m)
		PauseUnit(u, true)
		SetUnitFlyHeight(u, h, 0)
		if XYInMap(x + m * dis * Cos(ang * bj_DEGTORAD), y + m * dis * Sin(ang * bj_DEGTORAD)) then
			x = x + m * dis * Cos(ang * bj_DEGTORAD)
			y = y + m * dis * Sin(ang * bj_DEGTORAD)
			SetUnitX(u, x)
			SetUnitY(u, y)
		else
			SetUnitFlyHeight(u, 0, 0)
			PauseUnit(u, false)
			clearTimer(tm)
		end
	else
		PauseUnit(u, false)
		clearTimer(tm)
	end
	u = nil
	tm = nil
end
function Fly(u, speed, height, angle, time)
	local tm = CreateTimer()
	local x = GetUnitX(u)
	local y = GetUnitY(u)
	local n = time * 100
	local distance = speed / n
	local a = -4 * height / (n * n)
	local b = 4 * height / n
	if height > 0 then
		UnitAddAbility(u, 1098015094)
		UnitRemoveAbility(u, 1098015094)
	end
	saveVarsInTimer(tm, u, x, y, n, distance, angle, a, b, 0)
	TimerStart(tm, 0.01, true, Fly_tm)
	tm = nil
end
function FlyEnd()
	local tm = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(tm), 0)
	DestroyEffect(udg_JTX[GetPlayerId(GetOwningPlayer(u)) + 1])
	clearTimer(tm)
	u = nil
	tm = nil
end
function ShuiShangPiao()
	local source = GetUnitLoc(GetTriggerUnit())
	local destination = GetSpellTargetLoc()
	local angle = AngleBetweenPoints(source, destination)
	local speed = 500.0
	local height = 200.0
	local t = CreateTimer()
	local lastTime = RMinBJ(DistanceBetweenPoints(source, destination) / speed, 2.0)
	WuGongShengChong(GetTriggerUnit(), 1093678937, 200)
	SetUnitFacing(GetTriggerUnit(), angle)
	DestroyEffect(AddSpecialEffectTargetUnitBJ("origin", GetTriggerUnit(), "Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl"))
	udg_JTX[GetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1] = AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", GetTriggerUnit(), "origin")
	SetUnitAnimation(GetTriggerUnit(), "walk")
	Fly(GetTriggerUnit(), speed, height, angle, lastTime)
	--call YDWEJumpTimer(GetTriggerUnit(),angle,speed*lastTime,lastTime,0.03,height)
	SaveUnitHandle(YDHT, GetHandleId(t), 0, GetTriggerUnit())
	TimerStart(t, lastTime, false, FlyEnd)
	RemoveLocation(source)
	RemoveLocation(destination)
	source = nil
	destination = nil
end

function TieZhang_Trigger()

	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsTieShaZhang))
	TriggerAddAction(t, TieShaZhang)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsDuSheShenZhang))
	TriggerAddAction(t, DuSheShenZhang)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsTongBeiQuan))
	TriggerAddAction(t, TongBeiQuan)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsShuiShangPiao))
	TriggerAddAction(t, ShuiShangPiao)
	t = nil
end


-- 触发器条件
function IsQiXingLuo()
	return GetSpellAbilityId() == 1093679169
end

function QiXingLuo_Condition()
	return DamageFilter(LoadUnitHandle(YDHT, 398890, 0), GetFilterUnit())
end

function QiXingLuo_Action()
	local t = GetExpiredTimer()
	local iMax = LoadInteger(YDHT, GetHandleId(t), 0)
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 1)
	local range = LoadReal(YDHT, GetHandleId(t), 2)
	local i = LoadInteger(YDHT, GetHandleId(t), 3)
	local loc = GetUnitLoc(u)
	local shxishu = 1 + DamageCoefficientByAbility(u, 1093678935, 0.6) + DamageCoefficientByAbility(u, 1093678932, 1)
	local shanghai = 0.0
	local g = nil
	local l__ut = nil
	if i <= iMax then
		g = CreateGroup()
		SaveUnitHandle(YDHT, 398890, 0, u)
		GroupEnumUnitsInRangeOfLoc(g, loc, range, Condition(QiXingLuo_Condition))
		l__ut = GroupPickRandomUnit(g)
		--添加特效
		DestroyEffect(AddSpecialEffectTargetUnitBJ("origin", l__ut, "Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl"))
		--u对ut造成伤害
		shanghai = ShangHaiGongShi(u, l__ut, 30 * (0.8 + i * 0.2), 30 * (0.8 + i * 0.2), shxishu, 1093679169)
		WuGongShangHai(u, l__ut, shanghai)
		if GetUnitAbilityLevel(u, 1093678930) >= 1 then -- +吸星大法
			if GetRandomInt(0, 100) <= 50 then
				WanBuff(u, l__ut, 4) --混乱
			else
				WanBuff(u, l__ut, 11) --封穴
			end
		end
		DestroyGroup(g)
		SaveInteger(YDHT, GetHandleId(t), 3, i + 1)
	else
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, GetHandleId(t))
	end
	RemoveLocation(loc)
	t = nil
	u = nil
	loc = nil
end


function QiXingLuoChangKong()
	local t = CreateTimer()
	local i = 0
	local u = GetTriggerUnit()
	local range = 800
	if GetUnitAbilityLevel(u, 1093678929) >= 1 then -- +斗转星移
		range = range / 2
	end
	if GetUnitAbilityLevel(u, 1093677910) >= 1 then -- +擒龙控鹤
		range = range / 2
	end
	WuGongShengChong(u, 1093679169, 200) --武功升重
	SaveInteger(YDHT, GetHandleId(t), 0, 7 * (1 + GetUnitAbilityLevel(u, 1093678929)) * (1 + GetUnitAbilityLevel(u, 1093677910)))
	SaveUnitHandle(YDHT, GetHandleId(t), 1, u)
	SaveReal(YDHT, GetHandleId(t), 2, range)
	TimerStart(t, 0.3, true, QiXingLuo_Action)
	t = nil
	u = nil
end

-- 触发器条件
function IsDaiZongRuHe()
	return GetSpellAbilityId() == 1093679170
end
-- 移除岱宗如何的BUFF
function removeDaiZongBuff()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local extraHit = LoadReal(YDHT, GetHandleId(t), 1)
	local i = LoadInteger(YDHT, GetHandleId(t), 2)
	-- call BJDebugMsg("t:"+I2S(GetHandleId(t))+", i:"+I2S(i))
	--减少暴击倍数
	udg_baojishanghai[i] = udg_baojishanghai[i] - extraHit
	--停止计时器
	clearTimer(t)
	t = nil
end
-- 向目标施放岱宗如何
function issueTargetDaiZong(u, i, t, extraHit)
	-- 马甲对英雄施放雷击
	maJiaUseAbilityAtEnemysLoc(u, 1697657158, 1093679171, 852119, u, 3)
	-- 另一马甲对英雄施放增益技能，英雄获得BUFF
	maJiaUseAbilityAtEnemysLoc(u, 1697656880, 1093679172, 852066, u, 3)
	-- 英雄暴击倍数增加
	udg_baojishanghai[i] = udg_baojishanghai[i] + extraHit
	-- 1秒触发1次的定时器，如果英雄失去BUFF，则失去暴击倍数
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	SaveReal(YDHT, GetHandleId(t), 1, extraHit)
	SaveInteger(YDHT, GetHandleId(t), 2, i)
	TimerStart(t, 10, false, removeDaiZongBuff)
end
function IsDaiZongBeiDong()
	return UnitHasBuffBJ(GetAttacker(), 1110454603) and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function DaiZongBeiDongDamageFilter()
	return DamageFilter(GetAttacker(), GetFilterUnit())
end
function DaiZongBeiDong_Action()
	local u = GetAttacker()
	local l__ut = GetEnumUnit()
	local modelName = "Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathTargetArt.mdl"
	local shxishu = 1
	if GetRandomInt(0, 100) <= 15 then
		PassiveWuGongEffectAndDamage(u, l__ut, modelName, 20, 20, shxishu, 1093679170)
	end
	u = nil
	l__ut = nil
end
function DaiZongBeiDong()
	local loc = GetUnitLoc(GetAttacker())
	local i = 1 + GetPlayerId(GetOwningPlayer(GetAttacker()))
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(700, loc, Condition(DaiZongBeiDongDamageFilter)), DaiZongBeiDong_Action)
	RemoveLocation(loc)
	loc = nil
end

function DaiZongRuHe()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	local extraHit = (0.5 + 0.2 * GetUnitAbilityLevel(GetTriggerUnit(), 1093678932) + 0.2 * GetUnitAbilityLevel(GetTriggerUnit(), 1093678933)) * GetUnitAbilityLevel(GetTriggerUnit(), 1093679170)
	WuGongShengChong(GetTriggerUnit(), 1093679170, 100) --武功升重
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093679155) >= 1 then -- 小无相功
		issueTargetDaiZong(udg_hero[1], 1, CreateTimer(), extraHit)
		issueTargetDaiZong(udg_hero[2], 2, CreateTimer(), extraHit)
		issueTargetDaiZong(udg_hero[3], 3, CreateTimer(), extraHit)
		issueTargetDaiZong(udg_hero[4], 4, CreateTimer(), extraHit)
		issueTargetDaiZong(udg_hero[5], 5, CreateTimer(), extraHit)
	else
		issueTargetDaiZong(GetTriggerUnit(), i, CreateTimer(), extraHit)
	end
end

-- 触发器条件
function IsShiBaPan()
	return PassiveWuGongCondition(GetAttacker(), GetTriggerUnit(), 1093679173)
end
-- 触发器动作
function ShiBaPan()
	local u = GetAttacker()
	local l__ut = GetTriggerUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local abilityLevel = IMinBJ(1 + GetUnitAbilityLevel(u, 1093678932) + GetUnitAbilityLevel(u, 1093678930) + GetUnitAbilityLevel(u, 1093678935), 4)
	if GetRandomInt(1, 100) <= 15 + GetUnitAbilityLevel(u, 1093679174) + fuyuan[i] // 5 and not UnitHasBuffBJ(u, 1110454604) then
		WuGongShengChong(u, 1093679173, 500)
		if GetUnitAbilityLevel(u, 1093679155) >= 1 then
			maJiaUseLeveldAbilityAtTargetLoc(udg_hero[1], 1697656880, 1093679174, abilityLevel, 852101, udg_hero[1], 3)
			maJiaUseLeveldAbilityAtTargetLoc(udg_hero[2], 1697656880, 1093679174, abilityLevel, 852101, udg_hero[2], 3)
			maJiaUseLeveldAbilityAtTargetLoc(udg_hero[3], 1697656880, 1093679174, abilityLevel, 852101, udg_hero[3], 3)
			maJiaUseLeveldAbilityAtTargetLoc(udg_hero[4], 1697656880, 1093679174, abilityLevel, 852101, udg_hero[4], 3)
			maJiaUseLeveldAbilityAtTargetLoc(udg_hero[5], 1697656880, 1093679174, abilityLevel, 852101, udg_hero[5], 3)
		else
			maJiaUseLeveldAbilityAtTargetLoc(u, 1697656880, 1093679174, abilityLevel, 852101, u, 3)
		end
	end
	u = nil
	l__ut = nil
end

-- 触发器条件
function IsWuDaFu()
	return PassiveWuGongCondition(GetAttacker(), GetTriggerUnit(), 1093679175)
end
function WuDaFuJianDamageFilter()
	return DamageFilter(GetAttacker(), GetFilterUnit())
end
function WuDaFuJian_Action()
	local u = GetAttacker()
	local l__ut = GetEnumUnit()
	local modelName1 = "Abilities\\Spells\\Other\\Tornado\\TornadoElementalSmall.mdl"
	local modelName2 = "Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget.mdl"
	local modelName3 = "Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl"
	local modelName4 = "Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl"
	local modelName5 = "Abilities\\Spells\\Human\\Blizzard\\BlizzardTarget.mdl"
	local shxishu = 1 + DamageCoefficientByAbility(u, 1093678928, 1.0) + DamageCoefficientByAbility(u, 1093678932, 1.0) + DamageCoefficientByItem(u, 1227894850, 3.0)
	local i = GetRandomInt(0, 100)
	if i <= 20 then
		PassiveWuGongEffectAndDamage(u, l__ut, modelName1, 20, 100, shxishu, 1093679175)
		if GetRandomInt(0, 100) < 20 and GetUnitAbilityLevel(u, 1093678933) >= 1 then
			WanBuff(u, l__ut, 4)
		end
	elseif i <= 40 then
		PassiveWuGongEffectAndDamage(u, l__ut, modelName2, 40, 80, shxishu, 1093679175)
		if GetRandomInt(0, 100) < 20 and GetUnitAbilityLevel(u, 1093678933) >= 1 then
			WanBuff(u, l__ut, 5)
		end
	elseif i <= 60 then
		PassiveWuGongEffectAndDamage(u, l__ut, modelName3, 60, 60, shxishu, 1093679175)
		if GetRandomInt(0, 100) < 20 and GetUnitAbilityLevel(u, 1093678933) >= 1 then
			WanBuff(u, l__ut, 3)
		end
	elseif i <= 80 then
		PassiveWuGongEffectAndDamage(u, l__ut, modelName4, 80, 40, shxishu, 1093679175)
		if GetRandomInt(0, 100) < 20 and GetUnitAbilityLevel(u, 1093678933) >= 1 then
			WanBuff(u, l__ut, 13)
		end
	else
		PassiveWuGongEffectAndDamage(u, l__ut, modelName5, 100, 20, shxishu, 1093679175)
		if GetRandomInt(0, 100) < 20 and GetUnitAbilityLevel(u, 1093678933) >= 1 then
			WanBuff(u, l__ut, 9)
		end
	end

	u = nil
	l__ut = nil
end
-- 触发器动作
function WuDaFuJian()
	PassiveWuGongAction(GetAttacker(), GetTriggerUnit(), 15, 700, Condition(WuDaFuJianDamageFilter), WuDaFuJian_Action, 1093679175, 500)
end

-- 触发器条件
function IsKuaiHuoSan()
	return PassiveWuGongCondition(GetAttacker(), GetTriggerUnit(), 1093679176)
end
-- 触发器动作
function KuaiHuoSanJian()
	local caster = GetAttacker()
	local angle = 270
	local missile = nil
	local originspeed = 500
	local maxspeed = 800
	local accel = 56
	local distance = 2000
	local arc = 0
	local range = 300
	local damage = 0
	local loc = GetUnitLoc(caster)
	local target = nil
	local height = 50
	local l__hp = 400
	local Effect = "Abilities\\Weapons\\Dryadmissile\\Dryadmissile.mdl"
	local gravity = false
	local i = 1 + GetPlayerId(GetOwningPlayer(caster))
	local j = 0
	local jmax = 2
	local shxishu = 1 + DamageCoefficientByAbility(GetTriggerUnit(), 1093678930, 1) + DamageCoefficientByAbility(GetTriggerUnit(), 1093678933, 0.8) + DamageCoefficientByAbility(GetTriggerUnit(), 1093679155, 1.5)
	if GetUnitAbilityLevel(caster, 1093678932) >= 1 then
		range = range + 200
	end
	-- if (GetUnitAbilityLevel(caster, 'A07U') >= 1) then
	-- set jmax = jmax + 2
	-- endif
	-- if (GetUnitAbilityLevel(caster, 'A083') >= 1) then
	-- set jmax = jmax + 6
	-- endif
	damage = ShangHaiGongShi(caster, nil, 16, 16, shxishu, 1093679176)
	if GetRandomInt(0, 100) <= 15 + fuyuan[i] then
		WuGongShengChong(caster, 1093679176, 700 - GetUnitAbilityLevel(caster, 1093677910) * 350)
		for _ in _loop_() do
			if j >= jmax then break end
			angle = GetUnitFacing(caster) + 360 // jmax * j + GetRandomReal(-90, 90)
			missile = CreateUnit(GetOwningPlayer(caster), 1747988557, GetUnitX(caster), GetUnitY(caster), angle) --弹幕单位
			MissileCast(caster, missile, originspeed, maxspeed, accel, angle, distance, arc, range, damage, loc, target, height, l__hp, Effect, gravity)
			j = j + 1
		end
	--call MissileCast(caster, missile, originspeed, maxspeed, accel, angle, distance, arc, range, damage, loc, target, height, hp, Effect, gravity)
	end
	-- 排泄
	RemoveLocation(loc)
	caster = nil
	missile = nil
	target = nil
	loc = nil
end

function TaiShan_Trigger()

	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsQiXingLuo))
	TriggerAddAction(t, QiXingLuoChangKong)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsDaiZongRuHe))
	TriggerAddAction(t, DaiZongRuHe)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsDaiZongBeiDong))
	TriggerAddAction(t, DaiZongBeiDong)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsShiBaPan))
	TriggerAddAction(t, ShiBaPan)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsWuDaFu))
	TriggerAddAction(t, WuDaFuJian)

	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsKuaiHuoSan))
	TriggerAddAction(t, KuaiHuoSanJian)
	t = nil
end
--------------江湖武功开始------------
--弹指神通
function IsTanZhi()
	return GetSpellAbilityId() == 1093678664 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function TanZhi_Condition()
	return IsUnitAliveBJ(GetFilterUnit()) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit()))
end
function TanZhiShenTong()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local loc = GetUnitLoc(u)
	local loc2 = GetUnitLoc(GetSpellTargetUnit())
	local i = 1 + GetPlayerId(p)
	if GetUnitAbilityLevel(u, 1093678933) >= 1 then
		CreateNUnitsAtLoc(1, 1697656880, p, loc, bj_UNIT_FACING)
		UnitAddAbility(bj_lastCreatedUnit, 1093678664)
		SetUnitAbilityLevel(bj_lastCreatedUnit, 1093678664, GetUnitAbilityLevel(u, 1093678664))
		IssueTargetOrderById(bj_lastCreatedUnit, 852119, GroupPickRandomUnit(YDWEGetUnitsInRangeOfLocMatchingNull(300, loc2, Condition(TanZhi_Condition))))
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		ShowUnitHide(bj_lastCreatedUnit)
	end
	WuGongShengChong(GetTriggerUnit(), 1093678664, 350.0)
	RemoveLocation(loc)
	RemoveLocation(loc2)
	u = nil
	p = nil
	loc = nil
	loc2 = nil
end
function IsTanZhiBeiDong()
	return GetUnitAbilityLevel(GetAttacker(), 1093678664) >= 1 and GetUnitAbilityLevel(GetAttacker(), 1093678931) >= 1
end
function TanZhiBeiDong()
	local u = GetAttacker()
	local l__ut = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local p = GetOwningPlayer(u)
	if GetRandomReal(0, 100) <= 8 then
		CreateNUnitsAtLoc(1, 1697656880, p, loc, bj_UNIT_FACING)
		UnitAddAbility(bj_lastCreatedUnit, 1093678664)
		SetUnitAbilityLevel(bj_lastCreatedUnit, 1093678664, GetUnitAbilityLevel(u, 1093678664))
		IssueTargetOrderById(bj_lastCreatedUnit, 852119, l__ut)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		ShowUnitHide(bj_lastCreatedUnit)
	end
	RemoveLocation(loc)
	u = nil
	l__ut = nil
	p = nil
end
function IsTanZhiShangHai()
	return GetEventDamage() == 0.21
end
function TanZhiShangHai_Conditiom()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEventDamageSource())) and IsUnitAliveBJ(GetFilterUnit())
end
function TanZhiShangHai_Action()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 30.8, 30.8, shxishu, 1093678664)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function TanZhiShangHai()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093678672) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093679157) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093679157) ~= 0 and GetUnitAbilityLevel(u, 1093678672) ~= 0 and GetUnitAbilityLevel(u, 1093679152) ~= 0 and GetUnitAbilityLevel(u, 1093679152) ~= 0 and GetUnitAbilityLevel(u, 1395666994) ~= 0 and GetUnitAbilityLevel(u, 1093678933) ~= 0 then
		shxishu = shxishu * 6 * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 30.8, 30.8, shxishu, 1093678664)
	WuGongShangHai(u, uc, shanghai)
	if danpo[i] >= 23 and GetRandomReal(0.0, 100.0) <= 30.0 and UnitHasBuffBJ(uc, 1110454328) == false then
		WanBuff(u, uc, 11)
	end
	if GetUnitAbilityLevel(u, 1093679152) ~= 0 and UnitHasBuffBJ(uc, 1113813609) == false then
		WanBuff(u, uc, 4)
	end
	if GetUnitAbilityLevel(u, 1395666994) ~= 0 then
		DestroyEffect(AddSpecialEffectLocBJ(loc2, "war3mapImported\\PsiWave.mdx"))
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(100.0, loc2, Condition(TanZhiShangHai_Conditiom)), TanZhiShangHai_Action)
	end
	RemoveLocation(loc)
	RemoveLocation(loc2)
	u = nil
	uc = nil
	loc = nil
	loc2 = nil
end
--冰魄银针
function dF()
	return GetSpellAbilityId() == 1093678913 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function eF()
	local uc = GetTriggerUnit()
	local loc = GetUnitLoc(uc)
	local loc_bp = _array_()
	local level = 0
	WuGongShengChong(GetTriggerUnit(), 1093678913, 260.0)
	H7 = 1
	for _ in _loop_() do
		if H7 > 12 then break end
		loc_bp[H7] = pu(loc, 256, 30.0 * I2R(H7))
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678914)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, loc_bp[H7])
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		RemoveLocation(loc_bp[H7])
		loc_bp[H7] = nil
		H7 = H7 + 1
	end
	level = GetUnitAbilityLevel(uc, 1093678913)
	YDWEPolledWaitNull(5.0)
	if chilian[1 + GetPlayerId(GetOwningPlayer(uc))] == true then
		UnitRemoveAbility(uc, 1093678913)
		UnitAddAbility(uc, 1093678913)
		SetUnitAbilityLevel(uc, 1093678913, level)
	end
	RemoveLocation(loc)
	uc = nil
	loc = nil
end
function gF()
	return GetEventDamage() == 0.24
end
function hF()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093679155) ~= 0 then
		shxishu = shxishu + 2.0
	end
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 and GetUnitAbilityLevel(u, 1093679155) ~= 0 and GetUnitAbilityLevel(u, 1093678931) ~= 0 and GetUnitAbilityLevel(u, 1093679154) ~= 0 then
		shxishu = shxishu * 4 * 2
	end
	if chilian[i] then
		shxishu = shxishu * 5
	end
	shanghai = ShangHaiGongShi(u, uc, 26, 26, shxishu, 1093678913)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678915)
		IssueTargetOrderById(bj_lastCreatedUnit, 852226, GetTriggerUnit())
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	end
	if GetUnitAbilityLevel(u, 1093679154) ~= 0 or chilian[i] then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678916)
		IssueTargetOrderById(bj_lastCreatedUnit, 852209, GetTriggerUnit())
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function jF()
	return GetEventDamage() == 0.25
end
function kF()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093679155) ~= 0 then
		shxishu = shxishu + 2.0
	end
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 and GetUnitAbilityLevel(u, 1093679155) ~= 0 and GetUnitAbilityLevel(u, 1093678931) ~= 0 and GetUnitAbilityLevel(u, 1093679154) ~= 0 then
		shxishu = shxishu * 4 * 2
	end
	if chilian[i] then
		shxishu = shxishu * 5
	end
	shanghai = ShangHaiGongShi(u, uc, 6, 6, shxishu, 1093678913)
	if chilian[i] then
		shanghai = ShangHaiGongShi(u, uc, 26, 26, shxishu, 1093678913)
	end
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--连城剑法
function nF()
	return GetSpellAbilityId() == 1093678666 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function oF()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveInteger(YDHT, id * cx, -708948899, 1093678666)
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(GetTriggerUnit()))
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetSpellTargetLoc())
	SaveReal(YDHT, id * cx, -1613012308, AngleBetweenPoints(LoadLocationHandle(YDHT, id * cx, -1925439584), LoadLocationHandle(YDHT, id * cx, 1585647951)))
	SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 200.0, LoadReal(YDHT, id * cx, -1613012308) + 120.0))
	SaveLocationHandle(YDHT, id * cx, 612156901, pu(LoadLocationHandle(YDHT, id * cx, -860413970), 150.0, LoadReal(YDHT, id * cx, -1613012308) + 0.0))
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899))
	SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)))
	IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, LoadLocationHandle(YDHT, id * cx, 612156901))
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 612156901))
	SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 200.0, LoadReal(YDHT, id * cx, -1613012308) + 240.0))
	SaveLocationHandle(YDHT, id * cx, 612156901, pu(LoadLocationHandle(YDHT, id * cx, -860413970), 150.0, LoadReal(YDHT, id * cx, -1613012308) + 0.0))
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899))
	SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)))
	IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, LoadLocationHandle(YDHT, id * cx, 612156901))
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 612156901))
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678932) ~= 0 and GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678918) ~= 0 then
		SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 550.0, LoadReal(YDHT, id * cx, -1613012308) + 120.0))
		SaveLocationHandle(YDHT, id * cx, 612156901, pu(LoadLocationHandle(YDHT, id * cx, -860413970), 150.0, LoadReal(YDHT, id * cx, -1613012308) + 0.0))
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899))
		SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)))
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, LoadLocationHandle(YDHT, id * cx, 612156901))
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 612156901))
		SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 550.0, LoadReal(YDHT, id * cx, -1613012308) + 240.0))
		SaveLocationHandle(YDHT, id * cx, 612156901, pu(LoadLocationHandle(YDHT, id * cx, -860413970), 150.0, LoadReal(YDHT, id * cx, -1613012308) + 0.0))
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899))
		SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)))
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, LoadLocationHandle(YDHT, id * cx, 612156901))
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 612156901))
		SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 400.0, LoadReal(YDHT, id * cx, -1613012308) + 120.0))
		SaveLocationHandle(YDHT, id * cx, 612156901, pu(LoadLocationHandle(YDHT, id * cx, -860413970), 150.0, LoadReal(YDHT, id * cx, -1613012308) + 0.0))
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899))
		SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)))
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, LoadLocationHandle(YDHT, id * cx, 612156901))
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 612156901))
		SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 400.0, LoadReal(YDHT, id * cx, -1613012308) + 240.0))
		SaveLocationHandle(YDHT, id * cx, 612156901, pu(LoadLocationHandle(YDHT, id * cx, -860413970), 150.0, LoadReal(YDHT, id * cx, -1613012308) + 0.0))
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899))
		SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)))
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, LoadLocationHandle(YDHT, id * cx, 612156901))
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, 612156901))
	else
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678932) ~= 0 or GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678918) ~= 0 then
			SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 400.0, LoadReal(YDHT, id * cx, -1613012308) + 120.0))
			SaveLocationHandle(YDHT, id * cx, 612156901, pu(LoadLocationHandle(YDHT, id * cx, -860413970), 150.0, LoadReal(YDHT, id * cx, -1613012308) + 0.0))
			CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
			ShowUnitHide(bj_lastCreatedUnit)
			UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899))
			SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)))
			IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, LoadLocationHandle(YDHT, id * cx, 612156901))
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 612156901))
			SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 400.0, LoadReal(YDHT, id * cx, -1613012308) + 240.0))
			SaveLocationHandle(YDHT, id * cx, 612156901, pu(LoadLocationHandle(YDHT, id * cx, -860413970), 150.0, LoadReal(YDHT, id * cx, -1613012308) + 0.0))
			CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
			ShowUnitHide(bj_lastCreatedUnit)
			UnitAddAbility(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899))
			SetUnitAbilityLevel(bj_lastCreatedUnit, LoadInteger(YDHT, id * cx, -708948899), GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)))
			IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, LoadLocationHandle(YDHT, id * cx, 612156901))
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, 612156901))
		end
	end
	WuGongShengChong(GetTriggerUnit(), 1093678666, 350)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
function qF()
	return GetEventDamage() == 0.23
end
function rF()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678922) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093678936) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678922) ~= 0 and GetUnitAbilityLevel(u, 1093678936) ~= 0 and GetUnitAbilityLevel(u, 1093678932) ~= 0 and GetUnitAbilityLevel(u, 1093678918) ~= 0 then
		shxishu = shxishu * 4 * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 53, 53, shxishu, 1093678666)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--化骨绵掌
function tF()
	return GetSpellAbilityId() == 1093678668 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function uF()
	local id = GetHandleId(GetTriggeringTrigger())
	return UnitHasBuffBJ(GetFilterUnit(), 1114467444) == false and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))
end
--化骨搭配
function HuaGuWuDi()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local j = LoadInteger(YDHT, GetHandleId(t), 1)
	local jmax = 40
	if UnitHasBuffBJ(u, 1114467427) and j < jmax then
		SaveInteger(YDHT, GetHandleId(t), 1, j + 1)
	else
		UnitRemoveAbility(u, 1093677139)
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, GetHandleId(t))
	end
	t = nil
	u = nil
end
function yF()
	local u = GetTriggerUnit()
	local uc = GetSpellTargetUnit()
	local l__ut
	local loc = GetUnitLoc(u)
	local p = GetOwningPlayer(u)
	local loc2
	local t = nil
	if GetUnitAbilityLevel(u, 1093678929) ~= 0 then
		loc2 = GetUnitLoc(uc)
		l__ut = GroupPickRandomUnit(YDWEGetUnitsInRangeOfLocMatchingNull(1000.0, loc2, Condition(uF)))
		CreateNUnitsAtLoc(1, 1697656880, p, loc2, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678668)
		SetUnitAbilityLevel(bj_lastCreatedUnit, 1093678668, GetUnitAbilityLevel(u, 1093678668))
		IssueTargetOrderById(bj_lastCreatedUnit, 852480, l__ut)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 10.0)
		RemoveLocation(loc2)
		loc2 = GetUnitLoc(l__ut)
		l__ut = GroupPickRandomUnit(YDWEGetUnitsInRangeOfLocMatchingNull(1000.0, loc2, Condition(uF)))
		CreateNUnitsAtLoc(1, 1697656880, p, loc2, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678668)
		SetUnitAbilityLevel(bj_lastCreatedUnit, 1093678668, GetUnitAbilityLevel(u, 1093678668))
		IssueTargetOrderById(bj_lastCreatedUnit, 852480, l__ut)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 10.0)
		RemoveLocation(loc2)
		loc2 = GetUnitLoc(l__ut)
		l__ut = GroupPickRandomUnit(YDWEGetUnitsInRangeOfLocMatchingNull(1000.0, loc2, Condition(uF)))
		CreateNUnitsAtLoc(1, 1697656880, p, loc2, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678668)
		SetUnitAbilityLevel(bj_lastCreatedUnit, 1093678668, GetUnitAbilityLevel(u, 1093678668))
		IssueTargetOrderById(bj_lastCreatedUnit, 852480, l__ut)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 10.0)
		RemoveLocation(loc2)
		loc2 = GetUnitLoc(l__ut)
		l__ut = GroupPickRandomUnit(YDWEGetUnitsInRangeOfLocMatchingNull(1000.0, loc2, Condition(uF)))
		CreateNUnitsAtLoc(1, 1697656880, p, loc2, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678668)
		SetUnitAbilityLevel(bj_lastCreatedUnit, 1093678668, GetUnitAbilityLevel(u, 1093678668))
		IssueTargetOrderById(bj_lastCreatedUnit, 852480, l__ut)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 10.0)
		RemoveLocation(loc2)
	end
	if GetUnitAbilityLevel(u, 1093678936) ~= 0 then
		t = CreateTimer()
		SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		UnitAddAbility(u, 1093677139)
		TimerStart(t, 0.5, true, HuaGuWuDi)
	end
	WuGongShengChong(u, 1093678668, 200.0)
	RemoveLocation(loc)
	u = nil
	uc = nil
	l__ut = nil
	p = nil
	loc = nil
	loc2 = nil
end
--化骨伤害
function AF()
	return GetEventDamage() == 0.26
end
function aF()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = 1.0 + jingmai[i] // 20
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678928) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093678919) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093679156) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678928) ~= 0 and GetUnitAbilityLevel(u, 1093678919) ~= 0 and GetUnitAbilityLevel(u, 1093679156) ~= 0 and GetUnitAbilityLevel(u, 1093678929) ~= 0 and GetUnitAbilityLevel(u, 1093678936) ~= 0 and GetUnitAbilityLevel(u, 1093678930) ~= 0 then
		shxishu = shxishu * 6 * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 80.0, 80.0, shxishu, 1093678668)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--四门刀法
function bF()
	return GetSpellAbilityId() == 1093678669 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function CF()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveInteger(YDHT, id * cx, -708948899, 1093678669)
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(GetTriggerUnit()))
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678920) ~= 0 then
		H7 = 1
		for _ in _loop_() do
			if H7 > 4 then break end
			SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 300.0, 90.0 * I2R(H7)))
			CreateNUnitsAtLoc(1, 1697656883, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
			IssueImmediateOrderById(bj_lastCreatedUnit, 852128)
			Gw(20.0, bj_lastCreatedUnit)
			CreateNUnitsAtLoc(1, 1697656884, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
			Gw(20.0, bj_lastCreatedUnit)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
			H7 = H7 + 1
		end
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093679158) ~= 0 and GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678936) ~= 0 then
			H7 = 1
			for _ in _loop_() do
				if H7 > 8 then break end
				SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 650.0, 45.0 * I2R(H7)))
				CreateNUnitsAtLoc(1, 1697656883, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
				IssueImmediateOrderById(bj_lastCreatedUnit, 852128)
				Gw(20.0, bj_lastCreatedUnit)
				CreateNUnitsAtLoc(1, 1697656884, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
				Gw(20.0, bj_lastCreatedUnit)
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
				H7 = H7 + 1
			end
		end
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678935) ~= 0 then
			CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -1925439584), bj_UNIT_FACING)
			UnitAddAbility(bj_lastCreatedUnit, 1093678670)
			Gw(20.0, bj_lastCreatedUnit)
			ShowUnit(bj_lastCreatedUnit, false)
		end
	else
		H7 = 1
		for _ in _loop_() do
			if H7 > 4 then break end
			SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 300.0, 90.0 * I2R(H7)))
			CreateNUnitsAtLoc(1, 1697656883, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
			IssueImmediateOrderById(bj_lastCreatedUnit, 852128)
			Gw(10.0, bj_lastCreatedUnit)
			CreateNUnitsAtLoc(1, 1697656884, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
			Gw(10.0, bj_lastCreatedUnit)
			RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
			H7 = H7 + 1
		end
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093679158) ~= 0 and GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678936) ~= 0 then
			H7 = 1
			for _ in _loop_() do
				if H7 > 8 then break end
				SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 650.0, 45.0 * I2R(H7)))
				CreateNUnitsAtLoc(1, 1697656883, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
				IssueImmediateOrderById(bj_lastCreatedUnit, 852128)
				Gw(10.0, bj_lastCreatedUnit)
				CreateNUnitsAtLoc(1, 1697656884, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
				Gw(10.0, bj_lastCreatedUnit)
				RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
				H7 = H7 + 1
			end
		end
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), 1093678935) ~= 0 then
			CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -1925439584), bj_UNIT_FACING)
			UnitAddAbility(bj_lastCreatedUnit, 1093678670)
			Gw(10.0, bj_lastCreatedUnit)
			ShowUnit(bj_lastCreatedUnit, false)
		end
	end
	WuGongShengChong(GetTriggerUnit(), 1093678669, 250.0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
function DF()
	return GetEventDamage() == 0.27
end
function EF()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678928) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093679158) ~= 0 and GetUnitAbilityLevel(u, 1093678936) ~= 0 then
		shxishu = shxishu + 1.5
	end
	if GetUnitAbilityLevel(u, 1093678928) ~= 0 and GetUnitAbilityLevel(u, 1093679158) ~= 0 and GetUnitAbilityLevel(u, 1093678936) ~= 0 and GetUnitAbilityLevel(u, 1093678935) ~= 0 and GetUnitAbilityLevel(u, 1093678920) ~= 0 then
		shxishu = shxishu * 5 * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 7.2, 7.2, shxishu, 1093678669)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--一阳指
function GF()
	return GetSpellAbilityId() == 1093678672 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function HF()
	local loc = GetUnitLoc(GetTriggerUnit())
	local loc2 = nil
	local i = 1
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093679152) ~= 0 and GetRandomInt(1, 100) <= 40 then
		SetUnitManaBJ(GetTriggerUnit(), GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA) + 80.0)
	end
	WuGongShengChong(GetTriggerUnit(), 1093678672, 250.0)
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093679428) ~= 0 and GetUnitAbilityLevel(GetTriggerUnit(), 1093679157) ~= 0 then
		for _ in _loop_() do
			if i >= 6 then break end
			loc2 = pu(loc, 200.0, 60.0 * i)
			CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
			ShowUnitHide(bj_lastCreatedUnit)
			UnitAddAbility(bj_lastCreatedUnit, 1093678672)
			IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852125, loc2)
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
			RemoveLocation(loc2)
			i = i + 1
		end
	end
	RemoveLocation(loc)
	loc = nil
	loc2 = nil
end
--一阳指伤害
function lF()
	return GetEventDamage() == 0.29 and IsUnitAliveBJ(GetTriggerUnit())
end
function JF()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	local loc2 = nil
	if GetUnitAbilityLevel(u, 1093678927) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093682254) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093678927) ~= 0 and GetUnitAbilityLevel(u, 1093682254) ~= 0 and GetUnitAbilityLevel(u, 1093678933) ~= 0 and GetUnitAbilityLevel(u, 1093679428) ~= 0 and GetUnitAbilityLevel(u, 1093679157) ~= 0 and GetUnitAbilityLevel(u, 1093679152) ~= 0 then
		shxishu = shxishu * 6 * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 40.0, 40.0, shxishu, 1093678672)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678933) ~= 0 and IsUnitType(u, UNIT_TYPE_HERO) ~= nil and IsUnitMonster(uc) == false then -- INLINED!!
		if GetUnitState(uc, UNIT_STATE_LIFE) <= 0.05 * (1.0 * GetUnitState(uc, UNIT_STATE_MAX_LIFE)) then
			WuDi(uc)
			SetWidgetLife(uc, 1.0)
		else
			SetWidgetLife(uc, GetUnitState(uc, UNIT_STATE_LIFE) - 0.05 * (1.0 * GetUnitState(uc, UNIT_STATE_MAX_LIFE)))
		end
	end
	if gengu[1 + GetPlayerId(GetOwningPlayer(u))] >= 30 and IsUnitType(GetEventDamageSource(), UNIT_TYPE_HERO) ~= nil then -- INLINED!!
		WanBuff(u, uc, 12)
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
	loc2 = nil
end
--唐诗剑法
function LF()
	return GetEventDamage() == 0.31
end
function MF()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093678666) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093678918) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678936) ~= 0 then
		shxishu = shxishu + 1.0
	end
	if GetUnitAbilityLevel(u, 1093678666) ~= 0 and GetUnitAbilityLevel(u, 1093678918) ~= 0 and GetUnitAbilityLevel(u, 1093678936) ~= 0 and GetUnitAbilityLevel(u, 1093678669) ~= 0 and GetUnitAbilityLevel(u, 1093678935) ~= 0 and GetUnitAbilityLevel(u, 1093679156) ~= 0 and GetUnitAbilityLevel(u, 1093678930) ~= 0 then
		shxishu = shxishu * 7 * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 75, 75, shxishu, 1093678897)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678669) ~= 0 and GetRandomInt(1, 10) < 5 and UnitHasBuffBJ(uc, 1110454323) == false then
		WanBuff(u, uc, 3)
	end
	if GetUnitAbilityLevel(u, 1093678935) ~= 0 and GetRandomInt(1, 10) < 5 and UnitHasBuffBJ(uc, 1113813609) == false then
		WanBuff(u, uc, 4)
	end
	if GetUnitAbilityLevel(u, 1093679156) ~= 0 and GetRandomInt(1, 10) < 5 and UnitHasBuffBJ(uc, 1110454324) == false then
		WanBuff(u, uc, 7)
	end
	if GetUnitAbilityLevel(u, 1093678930) ~= 0 then
		SetWidgetLife(u, GetUnitState(u, UNIT_STATE_LIFE) + shanghai * 0.02)
	end
	WuGongShengChong(GetEventDamageSource(), 1093678897, 950.0)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
--七伤拳
function OF()
	return GetUnitAbilityLevel(GetAttacker(), 1093678925) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function PF()
	local id = GetHandleId(GetTriggeringTrigger())
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function QF()
	local u = GetAttacker()
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = 1.0
	local shanghai = 0.0
	DestroyEffect(AddSpecialEffectLocBJ(loc, "war3mapImported\\PhoenixAttack.mdx"))
	if GetUnitAbilityLevel(u, 1093678928) ~= 0 and GetUnitAbilityLevel(u, 1093678919) ~= 0 and GetUnitAbilityLevel(u, 1093679156) ~= 0 and GetUnitAbilityLevel(u, 1093678936) ~= 0 and GetUnitAbilityLevel(u, 1093678933) ~= 0 and GetUnitAbilityLevel(u, 1395666994) ~= 0 and GetUnitAbilityLevel(u, 1093678672) ~= 0 then
		shxishu = shxishu * 7 * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 12.0, 16.0, shxishu, 1093678925)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678928) ~= 0 and GetRandomReal(0.0, 100.0) <= 5.0 and UnitHasBuffBJ(uc, 1110454322) == false then
		WanBuff(u, uc, 1)
	end
	if GetUnitAbilityLevel(u, 1093678919) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1111844210) == false then
		WanBuff(u, uc, 8)
	end
	if GetUnitAbilityLevel(u, 1093679156) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1111847784) == false then
		WanBuff(u, uc, 13)
	end
	if GetUnitAbilityLevel(u, 1093678936) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1110454323) == false then
		WanBuff(u, uc, 3)
	end
	if GetUnitAbilityLevel(u, 1093678933) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1113813609) == false then
		WanBuff(u, uc, 4)
	end
	if GetUnitAbilityLevel(u, 1395666994) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1110454326) == false then
		WanBuff(u, uc, 6)
	end
	if GetUnitAbilityLevel(u, 1093678672) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1110454328) == false then
		WanBuff(u, uc, 11)
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function RF()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	YDWELocalVariableInitiliation()
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetAttacker())
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(GetTriggerUnit()))
	SaveLocationHandle(YDHT, id * cx, -860413970, GetUnitLoc(GetAttacker()))
	SaveInteger(YDHT, id * cx, -708948899, 1093678925)
	SaveReal(YDHT, id * cx, 596788346, 25.0)
	SaveReal(YDHT, id * cx, 1097940387, 500.0)
	SaveReal(YDHT, id * cx, -753873030, 3.0 + I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899))) / 2.0 + I2R(danpo[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) * 0.06)
	SaveReal(YDHT, id * cx, 426308609, 1.5 + udg_shanghaijiacheng[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))])
	SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * LoadReal(YDHT, id * cx, 426308609))
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)) == 9 then
		SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * 10.0)
	end
	if GetRandomReal(0.0, 100.0) <= LoadReal(YDHT, id * cx, 596788346) then
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(LoadReal(YDHT, id * cx, 1097940387), LoadLocationHandle(YDHT, id * cx, -1925439584), Condition(PF)), QF)
		WuGongShengChong(GetAttacker(), 1093678925, 2000.0)
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
--九阴白骨爪
function TF()
	return GetEventDamage() == 0.35
end
function UF()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678930) ~= 0 then
		shxishu = shxishu + 0.5
	end
	if GetUnitAbilityLevel(u, 1093678664) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093679161) ~= 0 then
		shxishu = shxishu + 0.7
	end
	if GetUnitAbilityLevel(u, 1093678931) ~= 0 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093679154) ~= 0 then
		shxishu = shxishu + 0.6
	end
	if udg_whichzhangmen[1 + GetPlayerId(GetOwningPlayer(u))] == 11 then
		shxishu = shxishu * 20
	end
	if GetUnitAbilityLevel(u, 1093678930) ~= 0 and GetUnitAbilityLevel(u, 1093678664) ~= 0 and GetUnitAbilityLevel(u, 1093679161) ~= 0 and GetUnitAbilityLevel(u, 1093678931) ~= 0 and GetUnitAbilityLevel(u, 1093679154) ~= 0 then
		shxishu = shxishu * 5 * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 36, 36, shxishu, 1093678926)
	WuGongShangHai(u, uc, shanghai)
	WuGongShengChong(GetEventDamageSource(), 1093678926, 3000.0)
	u = nil
	uc = nil
end
---------空明拳开始-------//
function IsKongMing()
	return GetUnitAbilityLevel(GetAttacker(), 1093677367) >= 1 and GetRandomReal(0.0, 100.0) <= 15.0 + I2R(fuyuan[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))]) / 5.0
end
function KongMing_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function KongMing_Action()
	local u = GetAttacker()
	local uc = GetEnumUnit()
	local hujia = GetUnitState(uc, ConvertUnitState(32))
	local shengming = GetUnitState(uc, UNIT_STATE_MAX_LIFE)
	local shxishu = 1.0 + shengming / 500000000 + hujia / 2000
	local shanghai = 0.0
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local loc = GetUnitLoc(uc)
	if GetUnitAbilityLevel(u, 1093678931) >= 1 then
		shxishu = shxishu + 0.6
	end
	if GetUnitAbilityLevel(u, 1093682225) >= 1 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678931) >= 1 and GetUnitAbilityLevel(u, 1093682225) >= 1 and GetUnitAbilityLevel(u, 1093678672) ~= 0 and GetUnitAbilityLevel(u, 1093678933) ~= 0 and GetUnitAbilityLevel(GetTriggerUnit(), 1093677368) ~= 0 then
		shxishu = shxishu * 5 * 2
	end
	shanghai = ShangHaiGongShi(u, uc, 10, 8, shxishu, 1093677367)
	WuGongShangHai(u, uc, shanghai)
	DestroyEffect(AddSpecialEffectTarget("Units\\NightElf\\Wisp\\WispExplode.mdl", uc, "overhead"))
	if GetUnitAbilityLevel(u, 1093678672) ~= 0 and GetRandomInt(1, 10) < 5 and UnitHasBuffBJ(uc, 1113813609) == false then
		WanBuff(u, uc, 4)
	end
	RemoveLocation(loc)
	loc = nil
	u = nil
	uc = nil
end
function KongMingQuan()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local loc = GetUnitLoc(uc)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local g = CreateGroup()
	WuGongShengChong(u, 1093677367, 1200.0)
	if GetUnitAbilityLevel(u, 1093678933) ~= 0 then
		GroupEnumUnitsInRangeOfLoc(g, loc, 400, Condition(KongMing_Condition))
	else
		GroupAddUnit(g, uc)
	end
	ForGroupBJ(g, KongMing_Action)
	GroupClear(g)
	DestroyGroup(g)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
	p = nil
	g = nil
end
function IsKongMingBeiDa()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetUnitAbilityLevel(GetTriggerUnit(), 1093677367) >= 1 and GetUnitAbilityLevel(GetTriggerUnit(), 1093677368) >= 1 -- INLINED!!
end
function KongMingBeiDa()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if aidacishu[i] >= 100 then
		aidacishu[i] = 0
		unitadditembyidswapped(1920168051, GetTriggerUnit())
	else
		aidacishu[i] = aidacishu[i] + 1
	end
end
---------空明拳结束-------//
---------碧海潮生曲开始-------//
function IsBiHai()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetSpellAbilityId() == 1093677368 -- INLINED!!
end
function BiHai_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit())
end
function BiHai_Action()
	local u = GetTriggerUnit()
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local i = GetRandomInt(1, 5)
	local j = 5
	local shxishu = 1.0
	local shanghai = 0.0
	local yinlv = _array_()
	yinlv[1] = "宫!"
	yinlv[2] = "商!"
	yinlv[3] = "角!"
	yinlv[4] = "徵!"
	yinlv[5] = "羽!"
	if GetUnitAbilityLevel(u, 1093678664) >= 1 then
		j = 3
	end
	if GetUnitAbilityLevel(u, 1093682227) >= 1 then
		j = GetRandomInt(2, 5)
	end
	if GetUnitAbilityLevel(u, 1093678926) >= 1 then
		shxishu = shxishu + 1
	end
	if GetUnitAbilityLevel(u, 1093678664) >= 1 and GetUnitAbilityLevel(u, 1093682227) >= 1 and GetUnitAbilityLevel(u, 1093678926) >= 1 and GetUnitAbilityLevel(u, 1093679156) >= 1 then
		shxishu = shxishu * 4 * 2
	end
	if UnitHaveItem(u, 1227897156) then
		shxishu = shxishu * 8
	end
	if GetUnitAbilityLevel(u, 1093679156) >= 1 and UnitHasBuffBJ(u, 1110454361) then
		i = 5
	end
	CreateTextTagLocBJ(yinlv[i], loc, 40.0, 14.0, 10.0, 60.0, 30.0, 0)
	Nw(1.5, bj_lastCreatedTextTag)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
	if i == 1 then
		WanBuff(u, uc, 1)
	elseif i == 2 then
		WanBuff(u, uc, 9)
	elseif i == 3 then
		shanghai = ShangHaiGongShi(u, uc, 20, 30, shxishu, 1093677368)
		WuGongShangHai(u, uc, shanghai)
		DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl"))
	elseif i == 4 then
		WanBuff(u, uc, 4)
	elseif i == 5 then
		if UnitHasBuffBJ(u, 1110454361) == false then
			bihai[1 + GetPlayerId(GetOwningPlayer(u))] = 1
			CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
			ShowUnitHide(bj_lastCreatedUnit)
			UnitAddAbility(bj_lastCreatedUnit, 1093677377)
			IssueTargetOrderById(bj_lastCreatedUnit, 852075, uc)
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		else
			bihai[1 + GetPlayerId(GetOwningPlayer(u))] = bihai[1 + GetPlayerId(GetOwningPlayer(u))] + 1
			UnitRemoveBuffBJ(1110454361, u)
			CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
			ShowUnitHide(bj_lastCreatedUnit)
			UnitAddAbility(bj_lastCreatedUnit, 1093677377)
			IssueTargetOrderById(bj_lastCreatedUnit, 852075, uc)
			UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		end
		if bihai[1 + GetPlayerId(GetOwningPlayer(u))] >= j then
			UnitRemoveBuffBJ(1110454361, u)
			DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl"))
			shanghai = ShangHaiGongShi(u, uc, 800, 1600, shxishu, 1093677368)
			WuGongShangHai(u, uc, shanghai)
		end
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function BiHaiChaoSheng()
	local g = CreateGroup()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local sd = CreateSound("Sound\\Music\\mp3Music\\UndeadVictory.mp3", false, false, false, 10, 10, "DefaultEAXON")
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Human\\Brilliance\\Brilliance.mdl"))
	--call PlaySoundOnUnitBJ(sd,100,u)
	WuGongShengChong(u, 1093677368, 700.0)
	GroupEnumUnitsInRangeOfLoc(g, loc, 500, Condition(BiHai_Condition))
	ForGroupBJ(g, BiHai_Action)
	GroupClear(g)
	DestroyGroup(g)
	RemoveLocation(loc)
	u = nil
	g = nil
	loc = nil
end
---------碧海潮生曲结束-------//
--------------江湖武功结束------------
function JiangHuWuGong_Trigger()
	local t = CreateTrigger()
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsTanZhi))
	TriggerAddAction(t, TanZhiShenTong)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsTanZhiBeiDong))
	TriggerAddAction(t, TanZhiBeiDong)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsTanZhiShangHai))
	TriggerAddAction(t, TanZhiShangHai)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(dF))
	TriggerAddAction(t, eF)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(gF))
	TriggerAddAction(t, hF)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(jF))
	TriggerAddAction(t, kF)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(nF))
	TriggerAddAction(t, oF)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(qF))
	TriggerAddAction(t, rF)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(tF))
	TriggerAddAction(t, yF)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(AF))
	TriggerAddAction(t, aF)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(bF))
	TriggerAddAction(t, CF)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(DF))
	TriggerAddAction(t, EF)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(GF))
	TriggerAddAction(t, HF)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(lF))
	TriggerAddAction(t, JF)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(LF))
	TriggerAddAction(t, MF)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(OF))
	TriggerAddAction(t, RF)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(TF))
	TriggerAddAction(t, UF)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsKongMingBeiDa))
	TriggerAddAction(t, KongMingBeiDa)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsKongMing))
	TriggerAddAction(t, KongMingQuan)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsBiHai))
	TriggerAddAction(t, BiHaiChaoSheng)
	t = nil
end
--------------绝世武功开始------------
--降龙十八掌
function WF()
	return GetSpellAbilityId() == 1093678917 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function XF()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveInteger(YDHT, id * cx, -708948899, 1093678917)
	GroupAddUnit(j9, LoadUnitHandle(YDHT, id * cx, 1505665227))
	WuGongShengChong(GetTriggerUnit(), 1093678917, 100.0)
	YDWEWaitForLocalVariable(29.0)
	GroupRemoveUnit(j9, LoadUnitHandle(YDHT, id * cx, 1505665227))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
function ZF()
	return CountUnitsInGroup(j9) > 0
end
function dG()
	local id = GetHandleId(GetTriggeringTrigger())
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function eG()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), -320330265), 1505665227)
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl"))
	shanghai = ShangHaiGongShi(u, uc, 60.0, 60.0, shxishu, 1093678917)
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function fG()
	local id = GetHandleId(GetTriggeringTrigger())
	if IsUnitDeadBJ(GetEnumUnit()) then
	else
		SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227, GetEnumUnit())
		SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584, GetUnitLoc(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))
		SaveInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -708948899, 1093678917)
		SaveReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030, 3.0 + I2R(juexuelingwu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))]) + I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227), LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -708948899))) / 2.0 + I2R(gengu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))]) * 0.06)
		SaveReal(YDHT, id * LoadInteger(YDHT, id, -320330265), 426308609, 10.0 + udg_shanghaijiacheng[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))])
		SaveReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030, LoadReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030) * (LoadReal(YDHT, id * LoadInteger(YDHT, id, -320330265), 426308609) * 2.5))
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227), LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -708948899)) == 9 then
			SaveReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030, LoadReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030) * 10.0)
		end
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(700.0, LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584), Condition(dG)), eG)
		RemoveLocation(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584))
		RemoveLocation(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -860413970))
		YDWELocalVariableEnd()
	end
end
function gG()
	ForGroupBJ(j9, fG)
end
--独孤九剑
function IsDuGuJiuJian()
	return GetSpellAbilityId() == 1093678918 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function DuGuJiuJian()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	GroupAddUnit(k9, u)
	m9 = 0.0
	n9 = 0.0
	o9[0] = GetUnitLoc(u)
	p9 = 1
	for _ in _loop_() do
		if p9 > 20 then break end
		m9 = m9 + 18.0
		o9[1] = pu(o9[0], 300.0, I2R(p9) * 28.0)
		CreateNUnitsAtLoc(1, 1747988531, p, o9[1], bj_UNIT_FACING)
		q9[p9] = bj_lastCreatedUnit
		RemoveLocation(o9[1])
		SetUnitAnimation(q9[p9], "birth")
		SetUnitFlyHeight(q9[p9], m9, 100.0)
		p9 = p9 + 1
	end
	RemoveLocation(o9[0])
	WuGongShengChong(GetTriggerUnit(), 1093678918, 120.0)
	YDWEPolledWaitNull(10.0)
	GroupRemoveUnit(k9, u)
	u = nil
	p = nil
end
function mG()
	return CountUnitsInGroup(k9) > 0
end
function nG()
	local id = GetHandleId(GetTriggeringTrigger())
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function oG()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), -320330265), 1505665227)
	local uc = GetEnumUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 9.0, 9.0, shxishu, 1093678918)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function pG()
	local id = GetHandleId(GetTriggeringTrigger())
	if IsUnitDeadBJ(GetEnumUnit()) then
	else
		SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227, GetEnumUnit())
		SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584, GetUnitLoc(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))
		n9 = n9 + 12.0
		p9 = 1
		for _ in _loop_() do
			if p9 > 48 then break end
			o9[2] = pu(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584), 300.0, I2R(p9) * 16.0 + n9)
			SetUnitPositionLoc(q9[p9], o9[2])
			RemoveLocation(o9[2])
			p9 = p9 + 1
		end
		SaveInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -708948899, 1093678918)
		SaveReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030, 1.0 + I2R(juexuelingwu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))]) + I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227), LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -708948899))) / 2.0 + I2R(wuxing[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))]) * 0.06)
		SaveReal(YDHT, id * LoadInteger(YDHT, id, -320330265), 426308609, 0.2 + udg_shanghaijiacheng[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))])
		SaveReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030, LoadReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030) * LoadReal(YDHT, id * LoadInteger(YDHT, id, -320330265), 426308609))
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227), LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -708948899)) == 9 then
			SaveReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030, LoadReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030) * 10.0)
		end
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(450.0, LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584), Condition(nG)), oG)
		RemoveLocation(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584))
		YDWELocalVariableEnd()
	end
end
function qG()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	YDWELocalVariableInitiliation()
	ForGroupBJ(k9, pG)
	FlushChildHashtable(YDHT, id * cx)
end
--黯然销魂掌
function sG()
	return GetSpellAbilityId() == 1093678919 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function tG()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveInteger(YDHT, id * cx, -708948899, 1093678919)
	WuGongShengChong(GetTriggerUnit(), 1093678919, 90.0)
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
function vG()
	return GetEventDamage() == 4.21
end
function wG()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	shanghai = ShangHaiGongShi(u, uc, 33.0, 33.0, shxishu, 1093678919)
	WuGongShangHai(u, uc, shanghai)
	if GetRandomInt(1, 50) >= 20 and UnitHasBuffBJ(uc, 1110454328) == false then
		WanBuff(u, uc, 11)
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
--反两仪刀法
function yG()
	return GetSpellAbilityId() == 1093678920 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function zG()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, 1505665227)))
	SaveInteger(YDHT, id * cx, -708948899, 1093678920)
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
	UnitAddAbility(bj_lastCreatedUnit, 1093681495)
	IssueTargetOrderById(bj_lastCreatedUnit, 852066, LoadUnitHandle(YDHT, id * cx, 1505665227))
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
	ShowUnitHide(bj_lastCreatedUnit)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	WuGongShengChong(GetTriggerUnit(), 1093678920, 90.0)
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
function aG()
	return GetEventDamage() == 4.13
end
function BG()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 50.0, 50.0, shxishu, 1093678920)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--野球拳
function CG()
	return GetSpellAbilityId() == 1093678921 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function cG()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveInteger(YDHT, id * cx, -708948899, 1093678921)
	CreateNUnitsAtLoc(1, 1697656904, GetOwningPlayer(GetTriggerUnit()), pu(GetUnitLoc(GetTriggerUnit()), 325.0, 0), bj_UNIT_FACING)
	Yv(bj_lastCreatedUnit, GetTriggerUnit(), 6.0, 0.0, 0, 20.0, 0.03)
	Gw(20.0, bj_lastCreatedUnit)
	CreateNUnitsAtLoc(1, 1697656904, GetOwningPlayer(GetTriggerUnit()), pu(GetUnitLoc(GetTriggerUnit()), 325.0, 120.0), bj_UNIT_FACING)
	Yv(bj_lastCreatedUnit, GetTriggerUnit(), 6.0, 0.0, 0, 20.0, 0.03)
	Gw(20.0, bj_lastCreatedUnit)
	CreateNUnitsAtLoc(1, 1697656904, GetOwningPlayer(GetTriggerUnit()), pu(GetUnitLoc(GetTriggerUnit()), 325.0, 240.0), bj_UNIT_FACING)
	Yv(bj_lastCreatedUnit, GetTriggerUnit(), 6.0, 0.0, 0, 20.0, 0.03)
	Gw(20.0, bj_lastCreatedUnit)
	WuGongShengChong(GetTriggerUnit(), 1093678921, 90.0)
	GroupAddUnit(r9, LoadUnitHandle(YDHT, id * cx, 1505665227))
	YDWEWaitForLocalVariable(19.0)
	GroupRemoveUnit(r9, LoadUnitHandle(YDHT, id * cx, 1505665227))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
function EG()
	return CountUnitsInGroup(r9) > 0
end
function FG()
	local id = GetHandleId(GetTriggeringTrigger())
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function GG()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), -320330265), 1505665227)
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	DestroyEffect(AddSpecialEffectLocBJ(loc, "war3mapImported\\CrimsonWake.mdx"))
	shanghai = ShangHaiGongShi(u, uc, 30, 30, shxishu, 1093678921)
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function HG()
	local id = GetHandleId(GetTriggeringTrigger())
	SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227, udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEnumUnit()))])
	SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584, GetUnitLoc(GetEnumUnit()))
	SaveInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -708948899, 1093678921)
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(650.0, LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584), Condition(FG)), GG)
	RemoveLocation(LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584))
end
function IG()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	YDWELocalVariableInitiliation()
	ForGroupBJ(r9, HG)
	FlushChildHashtable(YDHT, id * cx)
end
--辟邪剑法
function JG()
	return GetSpellAbilityId() == 1093678922 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function KG()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
	t9[LoadInteger(YDHT, id * cx, -1587459251)] = GetSpellTargetLoc()
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveInteger(YDHT, id * cx, -708948899, 1093678922)
	WuGongShengChong(GetTriggerUnit(), 1093678922, 80.0)
	GroupAddUnit(s9, LoadUnitHandle(YDHT, id * cx, 1505665227))
	YDWEWaitForLocalVariable(20.0)
	GroupRemoveUnit(s9, LoadUnitHandle(YDHT, id * cx, 1505665227))
	RemoveLocation(t9[LoadInteger(YDHT, id * cx, -1587459251)])
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
function MG()
	return CountUnitsInGroup(s9) > 0
end
function NG()
	local id = GetHandleId(GetTriggeringTrigger())
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function OG()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), -320330265), 1505665227)
	local uc = GetEnumUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 43, 43, shxishu, 1093678922)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function PG()
	local id = GetHandleId(GetTriggeringTrigger())
	if IsUnitDeadBJ(GetEnumUnit()) then
	else
		SaveUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227, udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEnumUnit()))])
		SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584, t9[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))])
		SaveInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -708948899, 1093678922)
		SaveReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030, 1.7 + I2R(juexuelingwu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))]) + I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227), LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -708948899))) / 2.0 + I2R(jingmai[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))]) * 0.05)
		SaveReal(YDHT, id * LoadInteger(YDHT, id, -320330265), 426308609, 8.5 + udg_shanghaijiacheng[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227)))])
		SaveReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030, LoadReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030) * LoadReal(YDHT, id * LoadInteger(YDHT, id, -320330265), 426308609))
		if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227), LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), -708948899)) == 9 then
			SaveReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030, LoadReal(YDHT, id * LoadInteger(YDHT, id, -320330265), -753873030) * 10.0)
		end
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600.0, LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584), Condition(NG)), OG)
		YDWELocalVariableEnd()
	end
end
function QG()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	YDWELocalVariableInitiliation()
	ForGroupBJ(s9, PG)
	FlushChildHashtable(YDHT, id * cx)
end
--胡家刀法
function SG()
	return GetSpellAbilityId() == 1093679158
end
function TG()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function UG()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)
	local uc = GetEnumUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 20, 20, shxishu, 1093679158)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function VG()
	if LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) >= 500.0 then
		FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		DestroyTimer(GetExpiredTimer())
	else
		SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) + 10.0)
		SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951, pu(GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)), GetRandomReal(100.0, 350.0), GetRandomReal(0, 360.0)))
		CreateNUnitsAtLoc(1, 1697656908, GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951), bj_UNIT_FACING)
		Gw(2.0, bj_lastCreatedUnit)
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(350.0, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951), Condition(TG)), UG)
	end
end
function WG()
	local ky
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveInteger(YDHT, id * cx, -708948899, 1093679158)
	SaveReal(YDHT, id * cx, -753873030, 2.0 + I2R(juexuelingwu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) + I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899))) / 2.0 + I2R(gengu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) * 0.07)
	SaveReal(YDHT, id * cx, 426308609, 8.3 + udg_shanghaijiacheng[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))])
	SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * LoadReal(YDHT, id * cx, 426308609))
	SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * 1.8)
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)) == 9 then
		SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * 10.0)
	end
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, 1505665227)))
	WuGongShengChong(GetTriggerUnit(), 1093679158, 100.0)
	H7 = 1
	for _ in _loop_() do
		if H7 > 18 then break end
		SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 256, 20.0 * I2R(H7)))
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, -1925439584), bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093679159)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, LoadLocationHandle(YDHT, id * cx, -860413970))
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
		H7 = H7 + 1
	end
	ky = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(ky), 1505665227, LoadUnitHandle(YDHT, id * cx, 1505665227))
	SaveReal(YDHT, GetHandleId(ky), -753873030, LoadReal(YDHT, id * cx, -753873030))
	TimerStart(ky, 0.3, true, VG)
	FlushChildHashtable(YDHT, id * cx)
	ky = nil
end
function YG()
	return GetEventDamage() == 4.22
end
function ZG()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 16.6, 16.6, shxishu, 1093679158)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--西毒杖法
function e6()
	return GetSpellAbilityId() == 1093679161 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function f6()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	CreateNUnitsAtLoc(1, 1697656909, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	UnitAddAbility(bj_lastCreatedUnit, 1093679160)
	IssueImmediateOrderById(bj_lastCreatedUnit, 852183)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 31.0)
	RemoveLocation(loc)
	WuGongShengChong(GetTriggerUnit(), 1093679161, 100.0)
	u = nil
	loc = nil
end
function h6()
	return GetEventDamage() == 4.35
end
function i6()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	if UnitHaveItem(u, 1227897154) then
		shxishu = shxishu * 8
	end
	shanghai = ShangHaiGongShi(u, uc, 45.0, 45.0, shxishu, 1093679161)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--六脉神剑
function k6()
	return GetSpellAbilityId() == 1093679157
end
function m6()
	return IsUnitAliveBJ(GetFilterUnit()) and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1)))
end
function o6()
	GroupRemoveUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 6), GetEnumUnit())
end
function p6()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1)
	local uc = GetEnumUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	local loc = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	local loc3 = pu(loc2, GetRandomReal(5.0, 15.0), AngleBetweenPoints(loc, loc2))
	PauseUnit(uc, true)
	SetUnitPositionLoc(uc, loc3)
	Jw(1.0, AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", uc, "chest"))
	shanghai = ShangHaiGongShi(u, uc, 19.0, 19.0, shxishu, 1093679157)
	WuGongShangHai(u, uc, shanghai)
	PauseUnit(uc, false)
	RemoveLocation(loc)
	RemoveLocation(loc2)
	RemoveLocation(loc3)
	u = nil
	uc = nil
	loc = nil
	loc2 = nil
	loc3 = nil
end
function q6()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local loc = GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(t), 1))
	local r = LoadReal(YDHT, GetHandleId(t), 4)
	if r >= 500.0 then
		KillUnit(u)
		RemoveLocation(loc)
		FlushChildHashtable(YDHT, GetHandleId(t))
		PauseTimer(t)
		DestroyTimer(t)
	else
		SaveReal(YDHT, GetHandleId(t), 4, r + 10.0)
		SetUnitPositionLoc(u, loc)
		SaveGroupHandle(YDHT, GetHandleId(t), 5, YDWEGetUnitsInRangeOfLocMatchingNull(r + 20.0, loc, Condition(m6)))
		SaveGroupHandle(YDHT, GetHandleId(t), 6, YDWEGetUnitsInRangeOfLocMatchingNull(r + 40.0, loc, Condition(m6)))
		SetUnitScalePercent(u, r + 10, r + 10, r + 10)
		ForGroupBJ(LoadGroupHandle(YDHT, GetHandleId(t), 5), o6)
		ForGroupBJ(LoadGroupHandle(YDHT, GetHandleId(t), 6), p6)
		DestroyGroup(LoadGroupHandle(YDHT, GetHandleId(t), 5))
		DestroyGroup(LoadGroupHandle(YDHT, GetHandleId(t), 6))
		RemoveLocation(loc)
	end
	u = nil
	t = nil
	loc = nil
end
function MM6()
	local ky
	local i = 1
	local loc
	WuGongShengChong(GetTriggerUnit(), 1093679157, 100.0)
	for _ in _loop_() do
		if i > 6 then break end
		loc = GetUnitLoc(GetTriggerUnit())
		Jw(1.0, AddSpecialEffectLoc("war3mapImported\\DarkNova.mdx", loc))
		CreateNUnitsAtLoc(1, 1697656907, GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 1.0)
		SetUnitTimeScalePercent(bj_lastCreatedUnit, 200.0)
		ky = CreateTimer()
		SaveUnitHandle(YDHT, GetHandleId(ky), 0, bj_lastCreatedUnit)
		SaveUnitHandle(YDHT, GetHandleId(ky), 1, GetTriggerUnit())
		TimerStart(ky, 0.02, true, q6)
		TriggerSleepAction(1.5)
		RemoveLocation(loc)
		i = i + 1
	end
	ky = nil
	loc = nil
end
--打狗棒法
function O6()
	return GetSpellAbilityId() == 1093678924
end
function P6()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(C9)) and IsUnitAliveBJ(GetFilterUnit())
end
function Q6()
	local u = C9
	local uc = GetEnumUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	if UnitHaveItem(u, 1227897143) then
		shxishu = shxishu * 8
	end
	shanghai = ShangHaiGongShi(u, uc, 35.0, 35.0, shxishu, 1093678924)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function R6()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	DisableTrigger(GetTriggeringTrigger())
	C9 = GetTriggerUnit()
	c9 = GetUnitLoc(GetTriggerUnit())
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveInteger(YDHT, id * cx, -708948899, 1093678924)
	SaveReal(YDHT, id * cx, -753873030, 1.8 + I2R(juexuelingwu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) + I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899))) / 2.0 + I2R(gengu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) * 0.06)
	SaveReal(YDHT, id * cx, 426308609, 9.0 + udg_shanghaijiacheng[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))])
	SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * LoadReal(YDHT, id * cx, 426308609))
	SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * 1.5)
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)) == 9 then
		SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * 10.0)
	end
	WuGongShengChong(GetTriggerUnit(), 1093678924, 70.0)
	TriggerSleepAction(0.2)
	SaveInteger(YDHT, id, -320330265, cx)
	PauseUnit(C9, true)
	CreateNUnitsAtLoc(1, 1747988532, GetOwningPlayer(C9), c9, bj_UNIT_FACING)
	D9 = bj_lastCreatedUnit
	SetUnitPositionLocFacingLocBJ(C9, pu(c9, 800.0, 135.0), c9)
	SetUnitAnimation(C9, "ATTACK")
	SetUnitPositionLocFacingLocBJ(D9, GetUnitLoc(C9), GetUnitLoc(C9))
	TriggerSleepAction(0.15)
	SaveInteger(YDHT, id, -320330265, cx)
	SetUnitPositionLocFacingLocBJ(C9, pu(c9, 800.0, 45.0), c9)
	SetUnitAnimation(C9, "ATTACK")
	SetUnitPositionLocFacingLocBJ(D9, GetUnitLoc(C9), GetUnitLoc(C9))
	TriggerSleepAction(0.15)
	SaveInteger(YDHT, id, -320330265, cx)
	SetUnitPositionLocFacingLocBJ(C9, pu(c9, 600.0, 225.0), c9)
	SetUnitAnimation(C9, "ATTACK")
	SetUnitPositionLocFacingLocBJ(D9, GetUnitLoc(C9), GetUnitLoc(C9))
	TriggerSleepAction(0.15)
	SaveInteger(YDHT, id, -320330265, cx)
	SetUnitPositionLocFacingLocBJ(C9, pu(c9, 900.0, 90.0), c9)
	SetUnitAnimation(C9, "ATTACK")
	SetUnitPositionLocFacingLocBJ(D9, GetUnitLoc(C9), GetUnitLoc(C9))
	TriggerSleepAction(0.15)
	SaveInteger(YDHT, id, -320330265, cx)
	SetUnitPositionLocFacingLocBJ(C9, pu(c9, 600.0, 315.0), c9)
	SetUnitAnimation(C9, "ATTACK")
	SetUnitPositionLocFacingLocBJ(D9, GetUnitLoc(C9), GetUnitLoc(C9))
	TriggerSleepAction(0.15)
	SaveInteger(YDHT, id, -320330265, cx)
	SetUnitPositionLocFacingLocBJ(GetTriggerUnit(), pu(c9, 800.0, 135.0), c9)
	SetUnitAnimation(C9, "ATTACK")
	SetUnitPositionLocFacingLocBJ(D9, GetUnitLoc(C9), GetUnitLoc(C9))
	TriggerSleepAction(0.15)
	SaveInteger(YDHT, id, -320330265, cx)
	AddLightningLoc("FORK", pu(c9, 800.0, 135.0), pu(c9, 800.0, 45.0))
	E9[1] = bj_lastCreatedLightning
	AddLightningLoc("FORK", pu(c9, 800.0, 45.0), pu(c9, 600.0, 225.0))
	E9[2] = bj_lastCreatedLightning
	AddLightningLoc("FORK", pu(c9, 600.0, 225.0), pu(c9, 900.0, 90.0))
	E9[3] = bj_lastCreatedLightning
	AddLightningLoc("FORK", pu(c9, 900.0, 90.0), pu(c9, 600.0, 315.0))
	E9[4] = bj_lastCreatedLightning
	AddLightningLoc("FORK", pu(c9, 600.0, 315.0), pu(c9, 800.0, 135.0))
	E9[5] = bj_lastCreatedLightning
	SetUnitPositionLocFacingLocBJ(C9, c9, c9)
	RemoveUnit(D9)
	F9 = 1
	for _ in _loop_() do
		if F9 > 12 then break end
		AddSpecialEffectLocBJ(pu(c9, 100.0, 30.0 * I2R(F9)), "Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
		DestroyEffect(bj_lastCreatedEffect)
		AddSpecialEffectLocBJ(pu(c9, 300.0, 30.0 * I2R(F9)), "Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
		DestroyEffect(bj_lastCreatedEffect)
		AddSpecialEffectLocBJ(pu(c9, 500.0, 30.0 * I2R(F9)), "Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
		DestroyEffect(bj_lastCreatedEffect)
		F9 = F9 + 1
	end
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600.0, c9, Condition(P6)), Q6)
	TriggerSleepAction(1.0)
	SaveInteger(YDHT, id, -320330265, cx)
	DestroyLightning(E9[1])
	DestroyLightning(E9[2])
	DestroyLightning(E9[3])
	DestroyLightning(E9[4])
	DestroyLightning(E9[5])
	PauseUnit(C9, false)
	ResetUnitAnimation(C9)
	EnableTrigger(jn)
	TriggerSleepAction(6.0)
	SaveInteger(YDHT, id, -320330265, cx)
	DisableTrigger(jn)
	RemoveLocation(c9)
	EnableTrigger(in_)
	FlushChildHashtable(YDHT, id * cx)
end
function T6()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(C9)) and IsUnitAliveBJ(GetFilterUnit())
end
function U6()
	local u = C9
	local uc = GetEnumUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 18.0, 18.0, shxishu, 1093678924)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function V6()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, C9)
	SaveInteger(YDHT, id * cx, -708948899, 1093678924)
	SaveLocationHandle(YDHT, id * cx, 1585647951, pu(GetUnitLoc(LoadUnitHandle(YDHT, id * cx, 1505665227)), GetRandomReal(100.0, 350.0), GetRandomReal(0, 360.0)))
	CreateNUnitsAtLoc(1, 1697656905, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
	Gw(2.0, bj_lastCreatedUnit)
	SaveReal(YDHT, id * cx, -753873030, 1.8 + I2R(juexuelingwu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) + I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899))) / 2.0 + I2R(gengu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) * 0.06)
	SaveReal(YDHT, id * cx, 426308609, 9.0 * udg_shanghaijiacheng[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))])
	SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * LoadReal(YDHT, id * cx, 426308609))
	SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * 1.5)
	if GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899)) == 9 then
		SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * 10.0)
	end
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(400.0, LoadLocationHandle(YDHT, id * cx, 1585647951), Condition(T6)), U6)
	FlushChildHashtable(YDHT, id * cx)
end
--残章：辟邪剑法之流星赶月
function X6()
	return GetUnitAbilityLevel(GetAttacker(), 1093678922) >= 1 and GetRandomReal(0.0, 100.0) <= 5.0 and Kd[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function Y6()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function Z6()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"))
	shanghai = ShangHaiGongShi(u, uc, 18.0, 18.0, shxishu, 1093678922)
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function dH()
	if LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) >= 400.0 then
		FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		DestroyTimer(GetExpiredTimer())
	else
		SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) + 11.0)
		SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), -784714656)))
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(200.0, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951), Condition(Y6)), Z6)
		RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951))
	end
end
function eH()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function fH()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"))
	shanghai = ShangHaiGongShi(u, uc, 18.0, 18.0, shxishu, 1093678922)
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function gH()
	if LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) >= 400.0 then
		FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		DestroyTimer(GetExpiredTimer())
	else
		SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) + 11.0)
		SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), -784714656)))
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(200.0, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951), Condition(eH)), fH)
		RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -860413970))
	end
end
function hH()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function iH()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"))
	shanghai = ShangHaiGongShi(u, uc, 18.0, 18.0, shxishu, 1093678922)
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function jH()
	if LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) >= 400.0 then
		FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		DestroyTimer(GetExpiredTimer())
	else
		SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) + 11.0)
		SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), -784714656)))
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(200.0, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951), Condition(hH)), iH)
		RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -860413970))
	end
end
function kH()
	local ky
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	YDWELocalVariableInitiliation()
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetAttacker())
	SaveInteger(YDHT, id * cx, -708948899, 1093678922)
	SaveReal(YDHT, id * cx, -753873030, 1.6 + I2R(juexuelingwu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) + I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899))) / 2.0 + I2R(gengu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) * 0.07)
	SaveReal(YDHT, id * cx, 426308609, 8.3 + udg_shanghaijiacheng[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))])
	SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * (LoadReal(YDHT, id * cx, 426308609) * 3.0))
	SaveLocationHandle(YDHT, id * cx, -1763945863, GetUnitLoc(GetAttacker()))
	CreateTextTagLocBJ("辟邪剑法之流星赶月", LoadLocationHandle(YDHT, id * cx, -1763945863), 0, 14.0, 90.0, 21.0, 15.0, 0.0)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
	Nw(4.0, bj_lastCreatedTextTag)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1763945863))
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(GetTriggerUnit()))
	CreateNUnitsAtLoc(1, 1697656910, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -1925439584), bj_UNIT_FACING)
	SaveUnitHandle(YDHT, id * cx, -784714656, bj_lastCreatedUnit)
	zw(bj_lastCreatedUnit, GetAttacker(), 0.5, 600.0, 1500.0, 2000.0, 100)
	Gw(20.0, bj_lastCreatedUnit)
	ky = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(ky), 1505665227, LoadUnitHandle(YDHT, id * cx, 1505665227))
	SaveUnitHandle(YDHT, GetHandleId(ky), -784714656, LoadUnitHandle(YDHT, id * cx, -784714656))
	SaveReal(YDHT, GetHandleId(ky), -753873030, LoadReal(YDHT, id * cx, -753873030))
	TimerStart(ky, 0.5, true, dH)
	YDWEPolledWaitNull(1.0)
	SaveInteger(YDHT, id, -320330265, cx)
	CreateNUnitsAtLoc(1, 1697656910, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -1925439584), bj_UNIT_FACING)
	SaveUnitHandle(YDHT, id * cx, -784714656, bj_lastCreatedUnit)
	zw(bj_lastCreatedUnit, GetAttacker(), 0.5, 600.0, 1500.0, 2000.0, 100)
	Gw(25.0, bj_lastCreatedUnit)
	ky = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(ky), 1505665227, LoadUnitHandle(YDHT, id * cx, 1505665227))
	SaveUnitHandle(YDHT, GetHandleId(ky), -784714656, LoadUnitHandle(YDHT, id * cx, -784714656))
	SaveReal(YDHT, GetHandleId(ky), -753873030, LoadReal(YDHT, id * cx, -753873030))
	TimerStart(ky, 0.5, true, gH)
	YDWEPolledWaitNull(1.0)
	SaveInteger(YDHT, id, -320330265, cx)
	CreateNUnitsAtLoc(1, 1697656910, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -1925439584), bj_UNIT_FACING)
	SaveUnitHandle(YDHT, id * cx, -784714656, bj_lastCreatedUnit)
	zw(bj_lastCreatedUnit, GetAttacker(), 0.5, 600.0, 1500.0, 2000.0, 100)
	Gw(25.0, bj_lastCreatedUnit)
	ky = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(ky), 1505665227, LoadUnitHandle(YDHT, id * cx, 1505665227))
	SaveUnitHandle(YDHT, GetHandleId(ky), -784714656, LoadUnitHandle(YDHT, id * cx, -784714656))
	SaveReal(YDHT, GetHandleId(ky), -753873030, LoadReal(YDHT, id * cx, -753873030))
	TimerStart(ky, 0.5, true, jH)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
	ky = nil
end
--残章：打狗棒法之恶狗拦路
function nH()
	return GetUnitAbilityLevel(GetAttacker(), 1093678924) >= 1 and GetRandomReal(0.0, 100.0) <= 6.0 and Qd[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function oH()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, -1763945863, GetUnitLoc(GetAttacker()))
	CreateTextTagLocBJ("打狗棒法之恶狗拦路", LoadLocationHandle(YDHT, id * cx, -1763945863), 0, 14.0, 90.0, 21.0, 15.0, 0.0)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
	Nw(4.0, bj_lastCreatedTextTag)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1763945863))
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(GetTriggerUnit()))
	SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1925439584), 256, GetUnitPropWindowBJ(GetTriggerUnit()) + 90.0))
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetAttacker()), LoadLocationHandle(YDHT, id * cx, -1925439584), bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093678938)
	IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852593, LoadLocationHandle(YDHT, id * cx, -860413970))
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 12.0)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1925439584))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
	FlushChildHashtable(YDHT, id * cx)
end
function qH()
	return GetEventDamage() == 4.51
end
function rH()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 35.0, 35.0, shxishu, 1093678924)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--残章：降龙第一式、第二式
function tH()
	return GetUnitAbilityLevel(GetAttacker(), 1093678917) >= 1 and GetRandomReal(0.0, 100.0) <= 8.0 and Nd[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function uH()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function vH()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)
	local uc = GetEnumUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 70.0, 70.0, shxishu, 1093678917)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function wH()
	local t = GetExpiredTimer()
	local p = GetHandleId(t)
	local loc = GetUnitLoc(LoadUnitHandle(YDHT, p, 1505665227))
	if LoadReal(YDHT, p, -1302744471) >= 600.0 then
		FlushChildHashtable(YDHT, p)
		PauseTimer(t)
		DestroyTimer(t)
	else
		SaveReal(YDHT, p, -1302744471, LoadReal(YDHT, p, -1302744471) + 10.0)
		SaveLocationHandle(YDHT, p, 1347575036, GetUnitLoc(LoadUnitHandle(YDHT, p, 1505665227)))
		SaveLocationHandle(YDHT, p, -553893888, pu(loc, GetRandomReal(50.0, 600.0), GetRandomReal(0, 360.0)))
		AddSpecialEffectLocBJ(LoadLocationHandle(YDHT, p, -553893888), "war3mapImported\\FireStomp.mdx")
		DestroyEffect(bj_lastCreatedEffect)
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(300.0, LoadLocationHandle(YDHT, p, -553893888), Condition(uH)), vH)
		RemoveLocation(LoadLocationHandle(YDHT, p, 1347575036))
		RemoveLocation(LoadLocationHandle(YDHT, p, -553893888))
	end
	RemoveLocation(loc)
	loc = nil
	t = nil
end
function XLES_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0))) and IsUnitAliveBJ(GetFilterUnit())
end
function XLES_Action()
	local u = LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0)
	local uc = GetEnumUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 80.0, 80.0, shxishu, 1093678917)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function XiangLongErShi()
	local t = GetExpiredTimer()
	local p = GetHandleId(t)
	local u = LoadUnitHandle(YDHT, p, 0)
	local loc = GetUnitLoc(u)
	local loc2 = pu(loc, GetRandomReal(50.0, 600.0), GetRandomReal(0, 360.0))
	if LoadReal(YDHT, p, 1) >= 600.0 then
		FlushChildHashtable(YDHT, p)
		PauseTimer(t)
		DestroyTimer(t)
	else
		SaveReal(YDHT, p, 1, LoadReal(YDHT, p, 1) + 10.0)
		DestroyEffect(AddSpecialEffectLocBJ(loc2, "war3mapImported\\ChaosExplosion.mdl"))
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(300.0, loc2, Condition(XLES_Condition)), XLES_Action)
	end
	RemoveLocation(loc)
	RemoveLocation(loc2)
	t = nil
	u = nil
	loc = nil
	loc2 = nil
end
function xH()
	local t = nil
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local loc2 = GetUnitLoc(uc)
	if Nd[1 + GetPlayerId(GetOwningPlayer(u))] == 2 and GetRandomInt(1, 3) == 1 then
		t = CreateTimer()
		CreateTextTagLocBJ("降龙十八掌之亢龙有悔", loc, 0, 14.0, 21.0, 15.0, 90.0, 0.0)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
		Nw(4.0, bj_lastCreatedTextTag)
		SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		TimerStart(t, 0.3, true, XiangLongErShi)
	else
		t = CreateTimer()
		CreateTextTagLocBJ("降龙十八掌之神龙摆尾", loc, 0, 14.0, 90.0, 21.0, 15.0, 0.0)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
		Nw(4.0, bj_lastCreatedTextTag)
		SaveUnitHandle(YDHT, GetHandleId(t), 1505665227, u)
		TimerStart(t, 0.3, true, wH)
	end
	RemoveLocation(loc)
	RemoveLocation(loc2)
	t = nil
	u = nil
	uc = nil
	loc = nil
	loc2 = nil
end
--残章：胡家刀法之八方藏刀式
function zH()
	return GetUnitAbilityLevel(GetAttacker(), 1093679158) >= 1 and GetRandomReal(0.0, 100.0) <= 8.0 and Od[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function IsKongJun()
	return IsUnitType(GetFilterUnit(), UNIT_TYPE_FLYING)
end
function HuJiaKongJun()
	WuGongShangHai(GetAttacker(), GetEnumUnit(), 4.53)
end
function AH()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	local u = GetAttacker()
	local g = CreateGroup()
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	YDWELocalVariableInitiliation()
	SaveLocationHandle(YDHT, id * cx, -1763945863, GetUnitLoc(GetAttacker()))
	CreateTextTagLocBJ("胡家刀法之八方藏刀式", LoadLocationHandle(YDHT, id * cx, -1763945863), 0, 14.0, 90.0, 21.0, 15.0, 0.0)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
	Nw(4.0, bj_lastCreatedTextTag)
	H7 = 1
	for _ in _loop_() do
		if H7 > 8 then break end
		SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1763945863), 256, 45.0 * I2R(H7)))
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetAttacker()), LoadLocationHandle(YDHT, id * cx, -1763945863), bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093679430)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852555, LoadLocationHandle(YDHT, id * cx, -860413970))
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
		H7 = H7 + 1
	end
	GroupEnumUnitsInRangeOfLoc(g, LoadLocationHandle(YDHT, id * cx, -1763945863), 700, Condition(IsKongJun))
	ForGroupBJ(g, HuJiaKongJun)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1763945863))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
	DestroyGroup(g)
	u = nil
	g = nil
end
--八方藏刀式伤害
function BH()
	return GetEventDamage() == 4.53
end
function bH()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"))
	shanghai = ShangHaiGongShi(u, uc, 500.0, 500.0, shxishu, 1093679158)
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
--残章：西毒棍法之蛇盘青竹
function cH()
	return GetUnitAbilityLevel(GetAttacker(), 1093679161) >= 1 and GetRandomReal(0.0, 100.0) <= 5.0 and Pd[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function DH()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	YDWELocalVariableInitiliation()
	SaveLocationHandle(YDHT, id * cx, -1763945863, GetUnitLoc(GetAttacker()))
	CreateTextTagLocBJ("西毒棍法之蛇盘青竹", LoadLocationHandle(YDHT, id * cx, -1763945863), 0, 14.0, 90.0, 21.0, 15.0, 0.0)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
	Nw(4.0, bj_lastCreatedTextTag)
	H7 = 1
	for _ in _loop_() do
		if H7 > 12 then break end
		SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1763945863), 350.0, 30.0 * I2R(H7)))
		CreateNUnitsAtLoc(1, 1869836340, GetOwningPlayer(GetAttacker()), LoadLocationHandle(YDHT, id * cx, -860413970), bj_UNIT_FACING)
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
		H7 = H7 + 1
	end
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1763945863))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
function FH()
	return GetEventDamage() == 4.54
end
function GH()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 42.0, 42.0, shxishu, 1093679161)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--残章：反两仪刀法之行气如虹
function IH()
	return GetUnitAbilityLevel(GetAttacker(), 1093678920) >= 1 and GetRandomReal(0.0, 100.0) <= 10.0 and Jd[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function lH()
	local id = GetHandleId(GetTriggeringTrigger())
	SetUnitFlyHeight(GetEnumUnit(), 600.0, 200.0)
	IssuePointOrderByIdLoc(GetEnumUnit(), 851986, LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1763945863))
end
function JH()
	RemoveUnit(GetEnumUnit())
end
function KH()
	local id = GetHandleId(GetTriggeringTrigger())
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function LH()
	local u = GetAttacker()
	local uc = GetEnumUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 40.0, 40.0, shxishu, 1093678920)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
function MH()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	YDWELocalVariableInitiliation()
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetAttacker())
	SaveInteger(YDHT, id * cx, -708948899, 1093678920)
	SaveLocationHandle(YDHT, id * cx, -1763945863, GetUnitLoc(GetAttacker()))
	CreateTextTagLocBJ("反两仪刀法之行气如虹", LoadLocationHandle(YDHT, id * cx, -1763945863), 0, 14.0, 90.0, 21.0, 15.0, 0.0)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
	Nw(4.0, bj_lastCreatedTextTag)
	SaveGroupHandle(YDHT, id * cx, 824983937, CreateGroup())
	H7 = 1
	for _ in _loop_() do
		if H7 > 9 then break end
		SaveReal(YDHT, id * cx, -1663695754, LoadReal(YDHT, id * cx, -1663695754) + 45.0)
		SaveLocationHandle(YDHT, id * cx, -860413970, pu(LoadLocationHandle(YDHT, id * cx, -1763945863), 700.0, LoadReal(YDHT, id * cx, -1663695754)))
		CreateNUnitsAtLoc(1, 1747988528, GetOwningPlayer(GetAttacker()), LoadLocationHandle(YDHT, id * cx, -1763945863), bj_UNIT_FACING)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 851986, LoadLocationHandle(YDHT, id * cx, -860413970))
		RemoveLocation(LoadLocationHandle(YDHT, id * cx, -860413970))
		GroupAddUnit(LoadGroupHandle(YDHT, id * cx, 824983937), bj_lastCreatedUnit)
		H7 = H7 + 1
	end
	TriggerSleepAction(3.0)
	SaveInteger(YDHT, id, -320330265, cx)
	ForGroupBJ(LoadGroupHandle(YDHT, id * cx, 824983937), lH)
	TriggerSleepAction(3.0)
	SaveInteger(YDHT, id, -320330265, cx)
	ForGroupBJ(LoadGroupHandle(YDHT, id * cx, 824983937), JH)
	CreateNUnitsAtLoc(1, 1747988529, GetOwningPlayer(GetAttacker()), LoadLocationHandle(YDHT, id * cx, -1763945863), bj_UNIT_FACING)
	SaveUnitHandle(YDHT, id * cx, 427441757, bj_lastCreatedUnit)
	DestroyGroup(LoadGroupHandle(YDHT, id * cx, 824983937))
	TriggerSleepAction(0.5)
	SaveInteger(YDHT, id, -320330265, cx)
	AddSpecialEffectLocBJ(LoadLocationHandle(YDHT, id * cx, -1763945863), "war3mapImported\\LightningWrath.mdx")
	DestroyEffect(bj_lastCreatedEffect)
	TriggerSleepAction(0.3)
	SaveInteger(YDHT, id, -320330265, cx)
	RemoveUnit(LoadUnitHandle(YDHT, id * cx, 427441757))
	AddSpecialEffectLocBJ(LoadLocationHandle(YDHT, id * cx, -1763945863), "war3mapImported\\FrostNova.mdx")
	DestroyEffect(bj_lastCreatedEffect)
	SaveReal(YDHT, id * cx, -753873030, 2.5 + I2R(juexuelingwu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) + I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899))) / 2.0 + I2R(jingmai[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) * 0.05)
	SaveReal(YDHT, id * cx, 426308609, 8.0 + udg_shanghaijiacheng[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))])
	SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * (LoadReal(YDHT, id * cx, 426308609) * 6.0))
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(800.0, LoadLocationHandle(YDHT, id * cx, -1763945863), Condition(KH)), LH)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1763945863))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
function OH()
	return GetEventDamage() == 4.55
end
function PH()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 20.0, 20.0, shxishu, 1093678920)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--残章：黯然销魂掌之无中生有
function RH()
	return GetUnitAbilityLevel(GetAttacker(), 1093678919) >= 1 and GetRandomReal(0.0, 100.0) <= 6.0 and Md[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function SH()
	if LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) >= 2400.0 then
		FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		DestroyTimer(GetExpiredTimer())
	else
		SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) + 20.0)
		SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1347575036, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)))
		SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -860413970, pu(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1347575036), 256, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471)))
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227)), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1347575036), bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093677131)
		IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852218, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -860413970))
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1347575036))
		RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), -860413970))
	end
end
function TH()
	local ky
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	YDWELocalVariableInitiliation()
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetAttacker())
	SaveInteger(YDHT, id * cx, -708948899, 1093678919)
	SaveLocationHandle(YDHT, id * cx, -1763945863, GetUnitLoc(GetAttacker()))
	CreateTextTagLocBJ("黯然销魂掌之无中生有", LoadLocationHandle(YDHT, id * cx, -1763945863), 0, 14.0, 90.0, 21.0, 15.0, 0.0)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
	Nw(4.0, bj_lastCreatedTextTag)
	ky = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(ky), 1505665227, LoadUnitHandle(YDHT, id * cx, 1505665227))
	TimerStart(ky, 0.1, true, SH)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1763945863))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
	ky = nil
end
function VH()
	return GetEventDamage() == 4.56
end
function WH()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 36.0, 36.0, shxishu, 1093678919)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--残章：独孤九剑奥义之破剑式
function YH()
	return GetUnitAbilityLevel(GetAttacker(), 1093678918) >= 1 and GetRandomReal(0.0, 100.0) <= 10.0 and ld[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function ZH()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	YDWELocalVariableInitiliation()
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetAttacker())
	SaveInteger(YDHT, id * cx, -708948899, 1093678918)
	SaveLocationHandle(YDHT, id * cx, -1763945863, GetUnitLoc(GetAttacker()))
	CreateTextTagLocBJ("独孤九剑奥义之破剑式", LoadLocationHandle(YDHT, id * cx, -1763945863), 0, 14.0, 90.0, 21.0, 15.0, 0.0)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
	Nw(4.0, bj_lastCreatedTextTag)
	SaveLocationHandle(YDHT, id * cx, 1585647951, pu(LoadLocationHandle(YDHT, id * cx, -1763945863), 500.0, GetUnitFacing(GetAttacker()) + 180.0))
	CreateNUnitsAtLoc(1, 1747988530, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, 1585647951), GetUnitFacing(GetAttacker()))
	Gw(4.0, bj_lastCreatedUnit)
	IssuePointOrderByIdLoc(bj_lastCreatedUnit, 852652, LoadLocationHandle(YDHT, id * cx, -1763945863))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1763945863))
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, 1585647951))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
function eI()
	return GetEventDamage() == 4.57
end
function fI()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 44.0, 44.0, shxishu, 1093678918)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--残章：六脉神剑之少商剑
function hI()
	return GetUnitAbilityLevel(GetAttacker(), 1093679157) >= 1 and GetRandomReal(0.0, 100.0) <= 10.0 and Id[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function iI()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	YDWELocalVariableInitiliation()
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetAttacker())
	SaveInteger(YDHT, id * cx, -708948899, 1093679157)
	SaveLocationHandle(YDHT, id * cx, -1763945863, GetUnitLoc(GetAttacker()))
	CreateTextTagLocBJ("六脉神剑之少商剑", LoadLocationHandle(YDHT, id * cx, -1763945863), 0, 14.0, 90.0, 21.0, 15.0, 0.0)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
	Nw(4.0, bj_lastCreatedTextTag)
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -1763945863), GetUnitFacing(GetAttacker()))
	ShowUnitHide(bj_lastCreatedUnit)
	Gw(4.0, bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093679439)
	IssueTargetOrderById(bj_lastCreatedUnit, 852119, GetTriggerUnit())
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1763945863))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
function kI()
	return GetEventDamage() == 4.58
end
function mI()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 300.0, 300.0, shxishu, 1093679157)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--残章：野球拳第一式
function oI()
	return GetUnitAbilityLevel(GetAttacker(), 1093678921) >= 1 and GetRandomReal(0.0, 100.0) <= 10.0 and Ld[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function pI()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function qI()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 1505665227)
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i)
	local shanghai = 0.0
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))
	shanghai = ShangHaiGongShi(u, uc, 44.0, 44.0, shxishu, 1093678921)
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	t = nil
	u = nil
	uc = nil
	loc = nil
end
function rI()
	if LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) >= 420.0 then
		FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
		DestroyTimer(GetExpiredTimer())
	else
		SaveReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), -1302744471) + 11.0)
		SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), -784714656)))
		ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(250.0, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951), Condition(pI)), qI)
		RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 1585647951))
	end
end
function sI()
	local ky
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetAttacker())
	SaveInteger(YDHT, id * cx, -708948899, 1093678921)
	SaveLocationHandle(YDHT, id * cx, -1763945863, GetUnitLoc(GetAttacker()))
	CreateTextTagLocBJ("野球拳之翻肘裂捶", LoadLocationHandle(YDHT, id * cx, -1763945863), 0, 14.0, 90.0, 21.0, 15.0, 0.0)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
	Nw(4.0, bj_lastCreatedTextTag)
	RemoveLocation(LoadLocationHandle(YDHT, id * cx, -1763945863))
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(GetTriggerUnit()))
	CreateNUnitsAtLoc(1, 1697656912, GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), LoadLocationHandle(YDHT, id * cx, -1925439584), bj_UNIT_FACING)
	zw(bj_lastCreatedUnit, GetAttacker(), 0.5, 600.0, 1500.0, 2000.0, 100)
	Gw(20.0, bj_lastCreatedUnit)
	SaveUnitHandle(YDHT, id * cx, -784714656, bj_lastCreatedUnit)
	CreateNUnitsAtLoc(1, 1697656913, GetOwningPlayer(GetAttacker()), pu(GetUnitLoc(LoadUnitHandle(YDHT, id * cx, -784714656)), 250.0, 0), bj_UNIT_FACING)
	Yv(bj_lastCreatedUnit, LoadUnitHandle(YDHT, id * cx, -784714656), 6.0, 0.0, 0, 20.0, 0.03)
	Gw(20.0, bj_lastCreatedUnit)
	CreateNUnitsAtLoc(1, 1697656913, GetOwningPlayer(GetAttacker()), pu(GetUnitLoc(LoadUnitHandle(YDHT, id * cx, -784714656)), 250.0, 90.0), bj_UNIT_FACING)
	Yv(bj_lastCreatedUnit, LoadUnitHandle(YDHT, id * cx, -784714656), 6.0, 0.0, 0, 20.0, 0.03)
	Gw(20.0, bj_lastCreatedUnit)
	CreateNUnitsAtLoc(1, 1697656913, GetOwningPlayer(GetAttacker()), pu(GetUnitLoc(LoadUnitHandle(YDHT, id * cx, -784714656)), 250.0, 180.0), bj_UNIT_FACING)
	Yv(bj_lastCreatedUnit, LoadUnitHandle(YDHT, id * cx, -784714656), 6.0, 0.0, 0, 20.0, 0.03)
	Gw(20.0, bj_lastCreatedUnit)
	CreateNUnitsAtLoc(1, 1697656913, GetOwningPlayer(GetAttacker()), pu(GetUnitLoc(LoadUnitHandle(YDHT, id * cx, -784714656)), 250.0, 270.0), bj_UNIT_FACING)
	Yv(bj_lastCreatedUnit, LoadUnitHandle(YDHT, id * cx, -784714656), 6.0, 0.0, 0, 20.0, 0.03)
	Gw(20.0, bj_lastCreatedUnit)
	SaveReal(YDHT, id * cx, -753873030, 3.0 + I2R(juexuelingwu[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) + I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, id * cx, 1505665227), LoadInteger(YDHT, id * cx, -708948899))) / 2.0 + I2R(danpo[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))]) * 0.07)
	SaveReal(YDHT, id * cx, 426308609, 11.0 + udg_shanghaijiacheng[1 + GetPlayerId(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)))])
	SaveReal(YDHT, id * cx, -753873030, LoadReal(YDHT, id * cx, -753873030) * (LoadReal(YDHT, id * cx, 426308609) * 3.0))
	ky = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(ky), 1505665227, LoadUnitHandle(YDHT, id * cx, 1505665227))
	SaveUnitHandle(YDHT, GetHandleId(ky), -784714656, LoadUnitHandle(YDHT, id * cx, -784714656))
	SaveReal(YDHT, GetHandleId(ky), -753873030, LoadReal(YDHT, id * cx, -753873030))
	TimerStart(ky, 0.5, true, rI)
	FlushChildHashtable(YDHT, id * cx)
	ky = nil
end
--九阳真经残卷
function isJiuYangCanJuanAct()
	return GetUnitAbilityLevel(GetAttacker(), 1093682254) >= 1 and GetRandomReal(0.0, 100.0) <= 10.0 and JYd[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function isJiuYangEnemy()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function jiuYangCanJuanAction()
	local u = GetAttacker()
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = jueXueXiShu(i) + 5 * GetUnitAbilityLevel(u, 1093678675)
	local shanghai = 0.0
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"))
	shanghai = ShangHaiGongShi(u, uc, 132.0, 132.0, shxishu, 1093682254)
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
end
function jiuYangCanJuanAct()
	local u = GetAttacker()
	local loc = GetUnitLoc(u)
	local i = 0
	local j = 0
	local loc1 = nil
	local loc2 = nil
	local g = nil
	CreateTextTagLocBJ("九阳真经残卷", loc, 0, 14.0, 90.0, 21.0, 15.0, 0.0)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
	Nw(4.0, bj_lastCreatedTextTag)
	j = 0
	for _ in _loop_() do
		if j >= 5 then break end
		loc2 = PolarProjectionBJ(loc, GetRandomReal(300, 1000), GetRandomReal(0, 360))
		DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", loc2))
		i = 0
		for _ in _loop_() do
			if i >= 8 then break end
			loc1 = PolarProjectionBJ(loc2, 400, 45 * i)
			DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", loc1))
			RemoveLocation(loc1)
			i = i + 1
		end
		g = CreateGroup()
		GroupEnumUnitsInRangeOfLoc(g, loc2, 575, Condition(isJiuYangEnemy))
		ForGroupBJ(g, jiuYangCanJuanAction)
		DestroyGroup(g)
		RemoveLocation(loc2)
		YDWEPolledWaitNull(0.8)
		j = j + 1
	end
	RemoveLocation(loc)
	g = nil
	u = nil
	loc = nil
	loc1 = nil
	loc2 = nil
end
--------------绝世武功结束------------
function JueShiWuGong_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(WF))
	TriggerAddAction(t, XF)
	t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 1.0)
	TriggerAddCondition(t, Condition(ZF))
	TriggerAddAction(t, gG)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsDuGuJiuJian))
	TriggerAddAction(t, DuGuJiuJian)
	t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 0.03)
	TriggerAddCondition(t, Condition(mG))
	TriggerAddAction(t, qG)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(sG))
	TriggerAddAction(t, tG)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(vG))
	TriggerAddAction(t, wG)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(yG))
	TriggerAddAction(t, zG)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(aG))
	TriggerAddAction(t, BG)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(CG))
	TriggerAddAction(t, cG)
	t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 0.3)
	TriggerAddCondition(t, Condition(EG))
	TriggerAddAction(t, IG)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(JG))
	TriggerAddAction(t, KG)
	t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 1.0)
	TriggerAddCondition(t, Condition(MG))
	TriggerAddAction(t, QG)
	--胡家刀法
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(SG))
	TriggerAddAction(t, WG)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(YG))
	TriggerAddAction(t, ZG)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(e6))
	TriggerAddAction(t, f6)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(h6))
	TriggerAddAction(t, i6)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(k6))
	TriggerAddAction(t, MM6)
	in_ = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(in_, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(in_, Condition(O6))
	TriggerAddAction(in_, R6)
	jn = CreateTrigger()
	DisableTrigger(jn)
	TriggerRegisterTimerEventPeriodic(jn, 0.3)
	TriggerAddAction(jn, V6)

	--残章开始
	--辟邪剑法之流星赶月
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(X6))
	TriggerAddAction(t, kH)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(nH))
	TriggerAddAction(t, oH)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(qH))
	TriggerAddAction(t, rH)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(tH))
	TriggerAddAction(t, xH)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(zH))
	TriggerAddAction(t, AH)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(BH))
	TriggerAddAction(t, bH)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(cH))
	TriggerAddAction(t, DH)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(FH))
	TriggerAddAction(t, GH)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IH))
	TriggerAddAction(t, MH)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(OH))
	TriggerAddAction(t, PH)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(RH))
	TriggerAddAction(t, TH)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(VH))
	TriggerAddAction(t, WH)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(YH))
	TriggerAddAction(t, ZH)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(eI))
	TriggerAddAction(t, fI)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(hI))
	TriggerAddAction(t, iI)
	an = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(an)
	TriggerAddCondition(an, Condition(kI))
	TriggerAddAction(an, mI)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(oI))
	TriggerAddAction(t, sI)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(isJiuYangCanJuanAct))
	TriggerAddAction(t, jiuYangCanJuanAct)
	t = nil
end
-------------江湖内功和九阴武功开始-----------
--使用罗汉伏魔功
function uI()
	return GetKillingUnit() ~= nil and GetUnitAbilityLevel(GetKillingUnit(), 1093678927) > 0
end
function vI()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	G9[LoadInteger(YDHT, id * cx, -1587459251)] = G9[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	if G9[LoadInteger(YDHT, id * cx, -1587459251)] >= 100 then
		G9[LoadInteger(YDHT, id * cx, -1587459251)] = 0
		YDWEGeneralBounsSystemUnitSetBonus(GetKillingUnit(), 2, 0, 10)
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "防御+10")
	end
	FlushChildHashtable(YDHT, id * cx)
end
--使用化功大法
function xI()
	return GetSpellAbilityId() == 1093678928 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function yI()
	local id = GetHandleId(GetTriggeringTrigger())
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(LoadUnitHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), 1505665227))) and IsUnitAliveBJ(GetFilterUnit())
end
function zI()
	local id = GetHandleId(GetTriggeringTrigger())
	SaveLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -860413970, GetUnitLoc(GetEnumUnit()))
	AddLightningLoc("DRAM", LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -1925439584), LoadLocationHandle(YDHT, id * LoadInteger(YDHT, id, -320330265), -860413970))
	Lw(2, bj_lastCreatedLightning)
	SaveInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), 1163137285, LoadInteger(YDHT, id * LoadInteger(YDHT, id, -320330265), 1163137285) + 1)
end
function AI()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	local i = GetUnitAbilityLevel(GetTriggerUnit(), 1093678928)
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093681745) >= 1 then
		if UnitHaveItem(GetTriggerUnit(), 1227899213) then
			WuGongShengChong(GetTriggerUnit(), 1093678928, 150)
		else
			WuGongShengChong(GetTriggerUnit(), 1093678928, 300)
		end
	end
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveUnitHandle(YDHT, id * cx, 1505665227, GetTriggerUnit())
	SaveLocationHandle(YDHT, id * cx, -1925439584, GetUnitLoc(LoadUnitHandle(YDHT, id * cx, 1505665227)))
	SaveInteger(YDHT, id * cx, 1163137285, 0)
	ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(1000.0, LoadLocationHandle(YDHT, id * cx, -1925439584), Condition(yI)), zI)
	ModifyHeroStat(1, LoadUnitHandle(YDHT, id * cx, 1505665227), 0, i * 50 * LoadInteger(YDHT, id * cx, 1163137285))
	DisplayTimedTextToPlayer(GetOwningPlayer(LoadUnitHandle(YDHT, id * cx, 1505665227)), 0, 0, 5.0, "内力提升 ： " .. (I2S(i * 50 * LoadInteger(YDHT, id * cx, 1163137285)) or ""))
	YDWEWaitForLocalVariable(20.0)
	ModifyHeroStat(1, LoadUnitHandle(YDHT, id * cx, 1505665227), 1, i * 50 * LoadInteger(YDHT, id * cx, 1163137285))
	YDWELocalVariableEnd()
	FlushChildHashtable(YDHT, id * cx)
end
--使用吸星大法
function BI()
	return GetKillingUnit() ~= nil and GetUnitAbilityLevel(GetKillingUnit(), 1093678930) > 0
end
function bI()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	H9[LoadInteger(YDHT, id * cx, -1587459251)] = H9[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	if H9[LoadInteger(YDHT, id * cx, -1587459251)] >= 200 then
		H9[LoadInteger(YDHT, id * cx, -1587459251)] = 0
		ModifyHeroStat(1, GetKillingUnit(), 0, 10)
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "内力+10")
	end
	FlushChildHashtable(YDHT, id * cx)
end
--==================九阴真经系统开始==================//
--摧坚神抓和摧心掌
function JiuYin_Condition()
	return (GetUnitAbilityLevel(GetAttacker(), 1093682225) >= 1 or GetUnitAbilityLevel(GetAttacker(), 1093682227) >= 1) and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function CuiJian_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function CuiJian_Action()
	local u = GetAttacker()
	local uc = GetEnumUnit()
	local loc = GetUnitLoc(uc)
	local shxishu = 1.0
	local shanghai = 0.0
	DestroyEffect(AddSpecialEffectLocBJ(loc, "Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl"))
	if GetUnitAbilityLevel(GetAttacker(), 1093678931) >= 1 then
		shxishu = shxishu + 1.0
	end
	if udg_whichzhangmen[1 + GetPlayerId(GetOwningPlayer(u))] == 11 then
		shxishu = shxishu * 20
	end
	shanghai = ShangHaiGongShi(u, uc, 30.0, 30.0, shxishu, 1093682225)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678926) ~= 0 and GetRandomReal(0.0, 100.0) <= 10.0 and UnitHasBuffBJ(uc, 1110454328) == false then
		WanBuff(u, uc, 11)
	end
	RemoveLocation(loc)
	loc = nil
	u = nil
	uc = nil
end
function JiuYin_Action()
	local u = GetAttacker()
	local uc = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local shanghai = 0.0
	local shxishu = 1.0
	--摧坚神抓
	if GetUnitAbilityLevel(GetAttacker(), 1093682225) >= 1 then
		if GetRandomReal(0.0, 100.0) <= 15.0 + I2R(fuyuan[i]) / 5.0 then
			ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(500.0, loc, Condition(CuiJian_Condition)), CuiJian_Action)
			WuGongShengChong(GetAttacker(), 1093682225, 700.0)
		end
	end
	--摧心掌
	if GetUnitAbilityLevel(GetAttacker(), 1093682227) >= 1 then
		if GetRandomReal(0.0, 100.0) <= 15.0 + I2R(fuyuan[i]) / 5.0 then
			if GetUnitAbilityLevel(u, 1093678931) >= 1 then
				shxishu = shxishu + 1.0
			end
			if udg_whichzhangmen[1 + GetPlayerId(GetOwningPlayer(u))] == 11 then
				shxishu = shxishu * 20
			end
			if GetUnitAbilityLevel(u, 1093682226) ~= 0 and GetRandomInt(1, 10) < 5 and UnitHasBuffBJ(uc, 1113813609) == false then
				WanBuff(u, uc, 4)
			end
			if GetUnitAbilityLevel(u, 1093682230) ~= 0 and GetRandomInt(1, 10) < 5 and UnitHasBuffBJ(uc, 1110454324) == false then
				WanBuff(u, uc, 7)
			end
			shanghai = ShangHaiGongShi(u, uc, 80, 64, shxishu, 1093682227)
			AddSpecialEffectTargetUnitBJ("overhead", GetTriggerUnit(), "Abilities\\Spells\\Items\\OrbDarkness\\OrbDarkness.mdl")
			DestroyEffect(GetLastCreatedEffectBJ())
			WuGongShangHai(u, uc, shanghai)
			WuGongShengChong(u, 1093682227, 1050.0)
		end
	end
	RemoveLocation(loc)
	u = nil
	uc = nil
	loc = nil
	p = nil
end
function cI()
	return GetUnitAbilityLevel(GetKillingUnit(), 1093678931) > 0 or GetUnitAbilityLevel(GetKillingUnit(), 1093682226) > 0 or GetUnitAbilityLevel(GetKillingUnit(), 1093682230) > 0
end
--九阴真经杀100怪
function DI()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	local i = 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	I9[LoadInteger(YDHT, id * cx, -1587459251)] = I9[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	if I9[LoadInteger(YDHT, id * cx, -1587459251)] >= 100 then
		I9[LoadInteger(YDHT, id * cx, -1587459251)] = 0
		if GetUnitAbilityLevel(GetKillingUnit(), 1093678931) > 0 then
			ModifyHeroStat(0, GetKillingUnit(), 0, 10)
			DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "招式伤害+10")
		end
		if GetUnitAbilityLevel(GetKillingUnit(), 1093682226) > 0 then
			if GetRandomInt(1, 2) == 1 then
				ModifyHeroStat(0, GetKillingUnit(), 1, 10)
				ModifyHeroStat(1, GetKillingUnit(), 0, 30)
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "招式伤害-10")
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "内力+30")
			else
				ModifyHeroStat(2, GetKillingUnit(), 0, 10)
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "真实伤害+10")
			end
		end
		if GetUnitAbilityLevel(GetKillingUnit(), 1093682230) > 0 then
			if GetRandomInt(1, 6) == 1 then
				wuxing[i] = wuxing[i] + 1
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "悟性+1")
			elseif GetRandomInt(1, 5) == 1 then
				gengu[i] = gengu[i] + 1
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "根骨+1")
			elseif GetRandomInt(1, 4) == 1 then
				danpo[i] = danpo[i] + 1
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "胆魄+1")
			elseif GetRandomInt(1, 3) == 1 then
				yishu[i] = yishu[i] + 1
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "医术+1")
			elseif GetRandomInt(1, 2) == 1 then
				jingmai[i] = jingmai[i] + 1
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "经脉+1")
			else
				fuyuan[i] = fuyuan[i] + 1
				DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "福缘+1")
			end
			if GetRandomInt(1, 5) <= 3 then
				if GetRandomInt(1, 6) == 1 then
					wuxing[i] = wuxing[i] - 1
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "悟性-1")
				elseif GetRandomInt(1, 5) == 1 then
					gengu[i] = gengu[i] - 1
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "根骨-1")
				elseif GetRandomInt(1, 4) == 1 then
					danpo[i] = danpo[i] - 1
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "胆魄-1")
				elseif GetRandomInt(1, 3) == 1 then
					yishu[i] = yishu[i] - 1
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "医术-1")
				elseif GetRandomInt(1, 2) == 1 then
					jingmai[i] = jingmai[i] - 1
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "经脉-1")
				else
					fuyuan[i] = fuyuan[i] - 1
					DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "福缘-1")
				end
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
end
--==================九阴真经系统结束==================//
--双手互搏
function FI()
	return GetSpellAbilityId() == 1093678933 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function GI()
	UnitResetCooldown(GetTriggerUnit())
end
--使用九阳神功
function II()
	return GetKillingUnit() ~= nil and GetUnitAbilityLevel(GetKillingUnit(), 1093682254) > 0
end
function lI()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, 1 + GetPlayerId(GetOwningPlayer(GetKillingUnit())))
	l9[LoadInteger(YDHT, id * cx, -1587459251)] = l9[LoadInteger(YDHT, id * cx, -1587459251)] + 1
	if l9[LoadInteger(YDHT, id * cx, -1587459251)] >= 100 then
		l9[LoadInteger(YDHT, id * cx, -1587459251)] = 0
		DisplayTextToPlayer(Player(-1 + LoadInteger(YDHT, id * cx, -1587459251)), 0, 0, "生命值提高2000")
		unitadditembyidswapped(1227895892, GetKillingUnit())
	end
	FlushChildHashtable(YDHT, id * cx)
end
-------------江湖内功和九阴武功结束-----------
--模拟九阳神功
function IsJiuYang()
	return GetSpellAbilityId() == 1093682254 or GetSpellAbilityId() == 1093677378 or GetSpellAbilityId() == 1093677379 or GetSpellAbilityId() == 1093677380
end
function JiuYang_End()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	UnitRemoveAbility(u, 1093682252)
	UnitRemoveAbility(u, 1093682253)
	UnitRemoveAbility(u, 1093681999)
	UnitRemoveAbility(u, 1093682001)
	FlushChildHashtable(YDHT, GetHandleId(t))
	PauseTimer(t)
	DestroyTimer(t)
	t = nil
	u = nil
end
function JiuYang()
	local u = GetTriggerUnit()
	local t = CreateTimer()
	local r = 0.0
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	UnitAddAbility(u, 1093682252)
	UnitAddAbility(u, 1093682253)
	UnitAddAbility(u, 1093681999)
	UnitAddAbilityBJ(1093682001, u)
	SetPlayerAbilityAvailableBJ(false, 1093682001, GetOwningPlayer(u))
	if GetSpellAbilityId() == 1093682254 then
		r = 30
	elseif GetSpellAbilityId() == 1093677378 then
		r = 12
	elseif GetSpellAbilityId() == 1093677379 then
		r = 20
	elseif GetSpellAbilityId() == 1093677380 then
		r = 30
	end
	TimerStart(t, r, false, JiuYang_End)
	t = nil
	u = nil
end
--医疗篇
function IsYiLiao()
	return GetSpellAbilityId() == 1093682228
end
function YiLiaoPian()
	local u = GetTriggerUnit()
	local uc = GetSpellTargetUnit()
	SetWidgetLife(uc, GetWidgetLife(u) + 20000)
	if udg_whichzhangmen[1 + GetPlayerId(GetOwningPlayer(u))] == 11 then
		SetWidgetLife(uc, GetWidgetLife(u) + 380000)
	end
end
--使用洗髓经
function QI()
	return GetSpellAbilityId() == 1093679152 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function RI()
	local id = GetHandleId(GetTriggeringTrigger())
	local cx = LoadInteger(YDHT, id, -807506826)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveLocationHandle(YDHT, id * cx, 1585647951, GetUnitLoc(GetTriggerUnit()))
	CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetTriggerUnit()), LoadLocationHandle(YDHT, id * cx, 1585647951), bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093679153)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 26.0)
	IssueImmediateOrderById(bj_lastCreatedUnit, 852184)
	FlushChildHashtable(YDHT, id * cx)
end
function JiangHuNeiGong_Trigger()
	local t = nil
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(JiuYin_Condition))
	TriggerAddAction(t, JiuYin_Action)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsJiuYang))
	TriggerAddAction(t, JiuYang)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsYiLiao))
	TriggerAddAction(t, YiLiaoPian)
	bn = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(bn, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(bn, Condition(uI))
	TriggerAddAction(bn, vI)
	Cn = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Cn, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(Cn, Condition(xI))
	TriggerAddAction(Cn, AI)
	cn = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(cn, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(cn, Condition(BI))
	TriggerAddAction(cn, bI)
	Dn = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Dn, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Dn, Condition(cI))
	TriggerAddAction(Dn, DI)
	En = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(En, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(En, Condition(FI))
	TriggerAddAction(En, GI)
	Fn = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(Fn, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(Fn, Condition(II))
	TriggerAddAction(Fn, lI)
	In = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(In, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(In, Condition(QI))
	TriggerAddAction(In, RI)
	-- 特殊事件——辽国进攻
	t = CreateTrigger()
	TriggerRegisterTimerEventSingle(t, 2100.0)
	TriggerAddAction(t, LiaoGuoJinGong)
	-- 特殊事件——灵鹫宫进攻
	t = CreateTrigger()
	TriggerRegisterTimerEventSingle(t, 3000.0)
	TriggerAddAction(t, LingJiuGongJinGong)
	t = nil
end
function IsTiaoZhan()
	local p = GetOwningPlayer(GetTriggerUnit())
	local i = 1 + GetPlayerId(p)
	if GetItemTypeId(GetManipulatedItem()) == 1227897167 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) then
		return true
	end
	return false
end
function TiaoZhan()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if udg_tiaozhanguai ~= nil then
		DisplayTimedTextToPlayer(p, 0, 0, 15, "|cFFFFFF00挑战场正在使用中，请耐心等待")
		AdjustPlayerStateBJ(100000, p, PLAYER_STATE_RESOURCE_GOLD)
	else
		if GetPlayerController(p) == MAP_CONTROL_USER and GetPlayerSlotState(p) == PLAYER_SLOT_STATE_PLAYING then
			DialogClear(tiaozhanwho)
			DialogSetMessage(tiaozhanwho, "请选择要挑战的对象")
			if udg_tiaodugu[i] == false and GetUnitLevel(u) >= 90 then
				b_dugu = DialogAddButtonBJ(tiaozhanwho, "|cFF00CC00独孤求败")
			end
			if udg_tiaoxuedao[i] == false and GetUnitLevel(u) >= 90 then
				b_xuedaozu = DialogAddButtonBJ(tiaozhanwho, "|cFFCC0066血刀老祖")
			end
			if udg_tiaodamo[i] == false and GetUnitLevel(u) >= 90 then
				b_damozushi = DialogAddButtonBJ(tiaozhanwho, "|cFFCC0066达摩祖师")
			end
			b_ronglianlaozu = DialogAddButtonBJ(tiaozhanwho, "|cFFFF6600冯默风")
			if GetUnitLevel(u) >= 90 then
				b_zhucong = DialogAddButtonBJ(tiaozhanwho, "|cFFFF0000朱聪")
			end
			b_cancel = DialogAddButtonBJ(tiaozhanwho, "|cFFFFFF00取消")
			DialogDisplayBJ(true, tiaozhanwho, p)
		end
	end
	u = nil
	p = nil
end
function TiaoZhan_Action()
	local loc = Location(12156, -12021)
	local p = GetTriggerPlayer()
	local u = udg_hero[1 + GetPlayerId(p)]
	if GetClickedButton() == b_dugu then
		CreateNUnitsAtLoc(1, 1848651829, Player(12), loc, bj_UNIT_FACING)
		udg_tiaozhanguai = bj_lastCreatedUnit
		SetUnitPosition(u, 11459, -12021)
		PanCameraToTimedForPlayer(p, 11459, -12021, 0)
	end
	if GetClickedButton() == b_xuedaozu then
		CreateNUnitsAtLoc(1, 1865429335, Player(12), loc, bj_UNIT_FACING)
		udg_tiaozhanguai = bj_lastCreatedUnit
		SetUnitPosition(u, 11459, -12021)
		PanCameraToTimedForPlayer(p, 11459, -12021, 0)
	end
	if GetClickedButton() == b_damozushi then
		CreateNUnitsAtLoc(1, 1865429556, Player(12), loc, bj_UNIT_FACING)
		udg_tiaozhanguai = bj_lastCreatedUnit
		SetUnitPosition(u, 11459, -12021)
		PanCameraToTimedForPlayer(p, 11459, -12021, 0)
	end
	if GetClickedButton() == b_ronglianlaozu then
		CreateNUnitsAtLoc(1, 1865429334, Player(12), loc, bj_UNIT_FACING)
		udg_tiaozhanguai = bj_lastCreatedUnit
		SetUnitPosition(u, 11459, -12021)
		PanCameraToTimedForPlayer(p, 11459, -12021, 0)
	end
	if GetClickedButton() == b_zhucong then
		CreateNUnitsAtLoc(1, 1848651830, Player(12), loc, bj_UNIT_FACING)
		udg_tiaozhanguai = bj_lastCreatedUnit
		SetUnitPosition(u, 11459, -12021)
		PanCameraToTimedForPlayer(p, 11459, -12021, 0)
	end
	if GetClickedButton() == b_cancel then
		AdjustPlayerStateBJ(100000, p, PLAYER_STATE_RESOURCE_GOLD)
	end
	RemoveLocation(loc)
	loc = nil
	u = nil
	p = nil
end
function DiaoLuo()
	return IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetKillingUnit())) and (GetUnitTypeId(GetTriggerUnit()) == 1848651829 or GetUnitTypeId(GetTriggerUnit()) == 1865429335 or GetUnitTypeId(GetTriggerUnit()) == 1865429334 or GetUnitTypeId(GetTriggerUnit()) == 1848651830 or GetUnitTypeId(GetTriggerUnit()) == 1865429556)
end
function DiaoLuo_Action()
	local loc = GetUnitLoc(GetTriggerUnit())
	local i = 0
	if GetUnitTypeId(GetTriggerUnit()) == 1848651829 then
		CreateItemLoc(1227897169, loc)
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFF00CC00" .. (GetPlayerName(GetOwningPlayer(GetKillingUnit())) or "") .. "杀死了独孤求败，获得了武魂石")
		--call SaveInteger(YDHT,GetHandleId(bj_lastCreatedItem),0,25000)
		i = 1
		for _ in _loop_() do
			if i >= 6 then break end
			udg_tiaodugu[i] = true
			i = i + 1
		end
		udg_tiaozhanguai = nil
	elseif GetUnitTypeId(GetTriggerUnit()) == 1865429335 then
		CreateItemLoc(1227897144, loc)
		SaveInteger(YDHT, GetHandleId(bj_lastCreatedItem), 0, 25000)
		udg_tiaoxuedao[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] = true
		udg_tiaozhanguai = nil
	elseif GetUnitTypeId(GetTriggerUnit()) == 1865429556 then
		CreateItemLoc(1227899212, loc)
		udg_tiaodamo[1 + GetPlayerId(GetOwningPlayer(GetKillingUnit()))] = true
		udg_tiaozhanguai = nil
	elseif GetUnitTypeId(GetTriggerUnit()) == 1865429334 then
		CreateItemLoc(1227897168, loc)
		udg_tiaozhanguai = nil
	elseif GetUnitTypeId(GetTriggerUnit()) == 1848651830 then
		if GetRandomInt(0, 100) <= 30 then
			CreateItemLoc(1227897178, loc)
		else
			CreateItemLoc(1227896395, loc)
		end
		udg_tiaozhanguai = nil
	end
	RemoveLocation(loc)
	loc = nil
end
--离开挑战区域挑战失败
function TiaoZhanShiBai()
	return IsUnitType(GetLeavingUnit(), UNIT_TYPE_HERO) and GetPlayerController(GetOwningPlayer(GetLeavingUnit())) == MAP_CONTROL_USER and udg_tiaozhanguai ~= nil
end
function TiaoZhanShiBai_Action()
	local u = GetLeavingUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	DisplayTimedTextToPlayer(p, 0, 0, 15, "|cFFFFFF00离开区域，挑战失败")
	if GetUnitTypeId(udg_tiaozhanguai) == 1848651829 then
		udg_tiaodugu[i] = true
	end
	if GetUnitTypeId(udg_tiaozhanguai) == 1865429335 then
		udg_tiaoxuedao[i] = true
	end
	RemoveUnit(udg_tiaozhanguai)
	udg_tiaozhanguai = nil
	u = nil
	p = nil
end
function TiaoZhan_Trigger()
	local t = CreateTrigger()
	local i = 0
	i = 1
	for _ in _loop_() do
		if i >= 6 then break end
		udg_tiaoxuedao[i] = false
		udg_tiaodugu[i] = false
		udg_tiaodamo[i] = false
		i = i + 1
	end
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsTiaoZhan))
	TriggerAddAction(t, TiaoZhan)
	t = CreateTrigger()
	TriggerRegisterDialogEvent(t, tiaozhanwho)
	TriggerAddAction(t, TiaoZhan_Action)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(DiaoLuo))
	TriggerAddAction(t, DiaoLuo_Action)
	-- 离开挑战区挑战失败
	t = CreateTrigger()
	YDWETriggerRegisterLeaveRectSimpleNull(t, udg_tiaozhanqu)
	TriggerAddCondition(t, Condition(TiaoZhanShiBai))
	TriggerAddAction(t, TiaoZhanShiBai_Action)
	t = nil
end
function s__DaPei_create(wugongid, dapeixiaoguo)
	local dpi
	dpi = s__DaPei__allocate()
	s__DaPei_wugongid[dpi] = wugongid
	s__DaPei_dapeixiaoguo[dpi] = dapeixiaoguo
	if dapeixiaoguo == 1 then
		s__DaPei_r[dpi] = GetRandomReal(0.7, 1.1)
	elseif dapeixiaoguo == 2 then
		s__DaPei_r[dpi] = I2R(GetRandomInt(1, 13))
	elseif dapeixiaoguo == 3 then
		s__DaPei_r[dpi] = GetRandomReal(0.9, 1.3)
	elseif dapeixiaoguo == 4 then
		s__DaPei_r[dpi] = GetRandomReal(1.3, 2.0)
	end
	return dpi
end
function s__DaPei_onDestroy(this)
	s__DaPei_wugongid[this] = 0
	s__DaPei_dapeixiaoguo[this] = 0
	s__DaPei_shxishu[this] = 0
end

--Generated destructor of DaPei
function s__DaPei_deallocate(this)
	if this == nil then
		return
	elseif si__DaPei_V[this] ~= -1 then
		return
	end
	s__DaPei_onDestroy(this)
	si__DaPei_V[this] = si__DaPei_F
	si__DaPei_F = this
end
function s__DaPei_XiaoGuo(this, u, uc)
	if s__DaPei_dapeixiaoguo[this] ~= 2 then
		s__DaPei_shxishu[this] = s__DaPei_r[this]
	else
		if GetRandomReal(1, 100) <= 13 then
			WanBuff(u, uc, R2I(s__DaPei_r[this]))
		end
	end
end
function s__DaPei_XiaoGuoShuoMing(this)
	local s = ""
	s = (s or "") .. "+" .. (GetAbilityName(s__DaPei_wugongid[this]) or "") .. "："
	if s__DaPei_dapeixiaoguo[this] ~= 2 then
		s = (s or "") .. "伤害+" .. (I2S(R2I(s__DaPei_r[this] * 100)) or "") .. "%"
	else
		if R2I(s__DaPei_r[this]) == 1 then
			s = (s or "") .. "几率造成内伤"
		elseif R2I(s__DaPei_r[this]) == 2 then
			s = (s or "") .. "几率造成走火入魔"
		elseif R2I(s__DaPei_r[this]) == 3 then
			s = (s or "") .. "几率造成流血"
		elseif R2I(s__DaPei_r[this]) == 4 then
			s = (s or "") .. "几率造成混乱"
		elseif R2I(s__DaPei_r[this]) == 5 then
			s = (s or "") .. "几率造成昏迷"
		elseif R2I(s__DaPei_r[this]) == 6 then
			s = (s or "") .. "几率造成重伤"
		elseif R2I(s__DaPei_r[this]) == 7 then
			s = (s or "") .. "几率造成血流不止"
		elseif R2I(s__DaPei_r[this]) == 8 then
			s = (s or "") .. "几率造成麻痹"
		elseif R2I(s__DaPei_r[this]) == 9 then
			s = (s or "") .. "几率造成破防"
		elseif R2I(s__DaPei_r[this]) == 10 then
			s = (s or "") .. "几率造成神经错乱"
		elseif R2I(s__DaPei_r[this]) == 11 then
			s = (s or "") .. "几率造成封穴"
		elseif R2I(s__DaPei_r[this]) == 12 then
			s = (s or "") .. "几率造成穴位全封"
		elseif R2I(s__DaPei_r[this]) == 13 then
			s = (s or "") .. "几率造成中毒"
		end
	end
	return s
end
function s__ZiZhiWuGong_create(xishu, range, texiao, dapeishu, scrate)
	local zz
	zz = s__ZiZhiWuGong__allocate()
	s__ZiZhiWuGong_xishu[zz] = xishu
	s__ZiZhiWuGong_range[zz] = range
	s__ZiZhiWuGong_texiao[zz] = texiao
	s__ZiZhiWuGong_dapeishu[zz] = dapeishu
	s__ZiZhiWuGong_scrate[zz] = scrate
	return zz
end
function s__ZiZhiWuGong_onDestroy(this)
	s__ZiZhiWuGong_xishu[this] = 0
	s__ZiZhiWuGong_range[this] = 0
	s__ZiZhiWuGong_texiao[this] = 0
	s__ZiZhiWuGong_dapeishu[this] = 0
	s__ZiZhiWuGong_scrate[this] = 0
end

--Generated destructor of ZiZhiWuGong
function s__ZiZhiWuGong_deallocate(this)
	if this == nil then
		return
	elseif si__ZiZhiWuGong_V[this] ~= -1 then
		return
	end
	s__ZiZhiWuGong_onDestroy(this)
	si__ZiZhiWuGong_V[this] = si__ZiZhiWuGong_F
	si__ZiZhiWuGong_F = this
end
function IsZiZhi()
	return GetRandomReal(0.0, 100) < 15 + fuyuan[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] // 5 and GetUnitAbilityLevel(GetAttacker(), 1093677878) >= 1 and IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker()))
end
function ZiZhiShangHai_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function ZiZhiShangHai_Action()
	local u = GetAttacker()
	local uc = GetEnumUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local j = 1
	local loc = GetUnitLoc(u)
	local shxishu = 1.0 + I2R(juexuelingwu[i]) / 3
	local shanghai = 0.0
	for _ in _loop_() do
		if j > s__ZiZhiWuGong_dapeishu[zizhiwugong[i]] then break end
		if GetUnitAbilityLevel(u, s__DaPei_wugongid[dapei[i * 20 + j]]) >= 1 then
			s__DaPei_XiaoGuo(dapei[i * 20 + j], u, uc)
			--call BJDebugMsg(R2S(dapei[i*10+j].shxishu))
			shxishu = shxishu + s__DaPei_shxishu[dapei[i * 20 + j]]
		end
		j = j + 1
	end
	shxishu = shxishu * (1.0 + 0.5 * I2R(s__ZiZhiWuGong_xishu[zizhiwugong[i]]))
	shanghai = ShangHaiGongShi(u, uc, 25.0, 25.0, shxishu, 1093677878)
	CreateTextTagLocBJ(s__ZiZhiWuGong_name[zizhiwugong[i]], loc, 0, 14.0, GetRandomReal(0.0, 100), GetRandomReal(0.0, 100), GetRandomReal(0.0, 100), 0.0)
	Nw(3, bj_lastCreatedTextTag)
	SetTextTagVelocityBJ(bj_lastCreatedTextTag, 50.0, 90)
	AddSpecialEffectTargetUnitBJ("overhead", uc, lh_texiao[s__ZiZhiWuGong_texiao[zizhiwugong[i]]])
	DestroyEffect(GetLastCreatedEffectBJ())
	WuGongShangHai(u, uc, shanghai)
	RemoveLocation(loc)
	loc = nil
	uc = nil
	u = nil
	p = nil
end
function ZiZhi()
	local g = CreateGroup()
	local u = GetAttacker()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local zz = zizhiwugong[i]
	WuGongShengChong(u, 1093677878, 1000.0 - I2R(s__ZiZhiWuGong_scrate[zz]) * 100.0)
	GroupEnumUnitsInRange(g, GetUnitX(u), GetUnitY(u), 400.0 + 100.0 * I2R(s__ZiZhiWuGong_range[zz]), Condition(ZiZhiShangHai_Condition))
	ForGroupBJ(g, ZiZhiShangHai_Action)
	GroupClear(g)
	DestroyGroup(g)
	g = nil
end
function IsAllocateWuXueDian()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and (GetItemTypeId(GetManipulatedItem()) == 1227899470 or GetItemTypeId(GetManipulatedItem()) == 1227899465 or GetItemTypeId(GetManipulatedItem()) == 1227899466 or GetItemTypeId(GetManipulatedItem()) == 1227899467 or GetItemTypeId(GetManipulatedItem()) == 1227899468) -- INLINED!!
end
function AllocateWuXueDian()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetItemTypeId(GetManipulatedItem()) == 1227899470 then
		if zizhibool[i] then
			DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC少侠已有自创武功|r\n")
		else
			if xiuxing[i] < 6 then
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC少侠等级到历练6之后再来吧|r\n")
			else
				L7[i] = 1
				for _ in _loop_() do
					if L7[i] >= wugongshu[i] + 1 then break end
					if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
						if L7[i] == wugongshu[i] then
							DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC少侠，你学的武功太多了，遗忘一些再来自创吧|r\n")
							if true then break end
						end
					else
						UnitAddAbility(u, 1093677878)
						I7[(i - 1) * 20 + L7[i]] = 1093677878
						DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|CFFFF0033恭喜" .. (GetPlayerName(p) or "") .. "自创武功成功")
						zizhibool[i] = true
						if true then break end
					end
					L7[i] = L7[i] + 1
				end
			end
		end
	else
		if wuxuedian[i] >= 1 then
			wuxuedian[i] = wuxuedian[i] - 1
			if GetItemTypeId(GetManipulatedItem()) == 1227899465 then
				s__ZiZhiWuGong_xishu[zizhiwugong[i]] = s__ZiZhiWuGong_xishu[zizhiwugong[i]] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC分配一点至伤害系数|r\n")
			end
			if GetItemTypeId(GetManipulatedItem()) == 1227899466 then
				s__ZiZhiWuGong_range[zizhiwugong[i]] = s__ZiZhiWuGong_range[zizhiwugong[i]] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC分配一点至伤害范围|r\n")
			end
			if GetItemTypeId(GetManipulatedItem()) == 1227899467 then
				s__ZiZhiWuGong_dapeishu[zizhiwugong[i]] = s__ZiZhiWuGong_dapeishu[zizhiwugong[i]] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC分配一点至武学搭配|r\n")
				if GetRandomInt(1, 10) <= 7 then
					dapei[i * 20 + s__ZiZhiWuGong_dapeishu[zizhiwugong[i]]] = s__DaPei_create(LoadInteger(YDHT, StringHash("武学") + GetRandomInt(1, 18), 2), GetRandomInt(1, 2))
				else
					if GetRandomInt(1, 3) <= 2 then
						dapei[i * 20 + s__ZiZhiWuGong_dapeishu[zizhiwugong[i]]] = s__DaPei_create(LoadInteger(YDHT, StringHash("武学") + GetRandomInt(19, 28), 2), 3)
					else
						dapei[i * 20 + s__ZiZhiWuGong_dapeishu[zizhiwugong[i]]] = s__DaPei_create(LoadInteger(YDHT, StringHash("武学") + GetRandomInt(29, 41), 2), 4)
					end
				end
			end
			if GetItemTypeId(GetManipulatedItem()) == 1227899468 then
				s__ZiZhiWuGong_scrate[zizhiwugong[i]] = s__ZiZhiWuGong_scrate[zizhiwugong[i]] + 1
				DisplayTextToPlayer(p, 0, 0, "|cFFFFCC00游坦之：|r |cFF99FFCC分配一点至升重速率|r\n")
			end
		else
			DisplayTimedTextToPlayer(p, 0, 0, 30.0, "|cff66ff00自创武学点不足")
		end
	end
	u = nil
	p = nil
end
function ZiZhi_Trigger()
	local t = CreateTrigger()
	lh_texiao[1] = "Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget.mdl"
	lh_texiao[2] = "Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"
	lh_texiao[3] = "Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl"
	lh_texiao[4] = "Abilities\\Spells\\Items\\OrbDarkness\\OrbDarkness.mdl"
	lh_texiao[5] = "Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl"
	lh_texiao[6] = "Abilities\\Spells\\Human\\Brilliance\\Brilliance.mdl"
	lh_texiao[7] = "Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl"
	lh_texiao[8] = "Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl"
	lh_texiao[9] = "Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl"
	lh_texiao[10] = "Abilities\\Spells\\Other\\Transmute\\GoldBottleMissile.mdl"
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsZiZhi))
	TriggerAddAction(t, ZiZhi)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsAllocateWuXueDian))
	TriggerAddAction(t, AllocateWuXueDian)
	t = nil
end
--金刚伏魔圈
function IsJinGangFuMo()
	return GetSpellAbilityId() == 1093677881
end
function IsFuMoEnemy()
	return IsUnitEnemy(GetFilterUnit(), Player(0)) and UnitHasBuffBJ(GetFilterUnit(), 1112040563) == false and GetUnitAbilityLevel(GetFilterUnit(), 1098282348) < 1
end
----渡劫鞭法
function JinGang_DuJie()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local i = LoadInteger(YDHT, GetHandleId(t), 2)
	local loc = LoadLocationHandle(YDHT, GetHandleId(t), 3)
	local l__ut = nil
	local g = CreateGroup()
	GroupEnumUnitsInRangeOfLoc(g, loc, 325, Condition(IsFuMoEnemy))
	l__ut = GroupPickRandomUnit(g)
	if i - i // 3 * 3 == 0 then
		ShowUnitShow(u)
		IssueTargetOrderById(u, 852480, l__ut)
		AddSpecialEffectLocBJ(GetUnitLoc(l__ut), "war3mapImported\\ChaosExplosion.mdl")
	else
		ShowUnitHide(u)
	end
	SaveInteger(YDHT, GetHandleId(t), 2, i + 1)
	if i > 15 then
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, GetHandleId(t))
		RemoveLocation(loc)
	end
	DestroyGroup(g)
	u = nil
	t = nil
	l__ut = nil
	loc = nil
	g = nil
end
----渡厄鞭法
function JinGang_DuE()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local i = LoadInteger(YDHT, GetHandleId(t), 2)
	local loc = LoadLocationHandle(YDHT, GetHandleId(t), 3)
	local l__ut = nil
	local g = CreateGroup()
	GroupEnumUnitsInRangeOfLoc(g, loc, 325, Condition(IsFuMoEnemy))
	l__ut = GroupPickRandomUnit(g)
	if i - i // 3 * 3 == 1 then
		ShowUnitShow(u)
		IssueTargetOrderById(u, 852480, l__ut)
		AddSpecialEffectLocBJ(GetUnitLoc(l__ut), "war3mapImported\\FireStomp.mdx")
	else
		ShowUnitHide(u)
	end
	SaveInteger(YDHT, GetHandleId(t), 2, i + 1)
	if i > 15 then
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, GetHandleId(t))
		RemoveLocation(loc)
	end
	DestroyGroup(g)
	u = nil
	t = nil
	l__ut = nil
	loc = nil
	g = nil
end
----渡难鞭法
function JinGang_DuNan()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local i = LoadInteger(YDHT, GetHandleId(t), 2)
	local loc = LoadLocationHandle(YDHT, GetHandleId(t), 3)
	local l__ut = nil
	local g = CreateGroup()
	GroupEnumUnitsInRangeOfLoc(g, loc, 350, Condition(IsFuMoEnemy))
	l__ut = GroupPickRandomUnit(g)
	if i - i // 3 * 3 == 2 then
		ShowUnitShow(u)
		IssueTargetOrderById(u, 852480, l__ut)
		AddSpecialEffectLocBJ(GetUnitLoc(l__ut), "war3mapImported\\FireStomp.mdx")
	else
		ShowUnitHide(u)
	end
	SaveInteger(YDHT, GetHandleId(t), 2, i + 1)
	if i > 15 then
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, GetHandleId(t))
		RemoveLocation(loc)
	end
	DestroyGroup(g)
	u = nil
	t = nil
	l__ut = nil
	loc = nil
	g = nil
end
--不能出伏魔圈
function FuMoBuNengChu()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local loc = LoadLocationHandle(YDHT, GetHandleId(t), 1)
	local i = LoadInteger(YDHT, GetHandleId(t), 2)
	local loc2 = GetUnitLoc(u)
	if i < 500 then
		if DistanceBetweenPoints(loc2, loc) > 250 then
			SetUnitX(u, GetLocationX(loc) + GetRandomReal(-250.0, 250.0) * CosBJ(AngleBetweenPoints(loc, loc2)))
			SetUnitY(u, GetLocationY(loc) + GetRandomReal(-250.0, 250.0) * SinBJ(AngleBetweenPoints(loc, loc2)))
			if ModuloInteger(GetUnitPointValue(u), 100) == 0 then
				SetWidgetLife(u, GetWidgetLife(u) * 0.5)
			else
				SetWidgetLife(u, GetWidgetLife(u) * 0.85)
			end
		end
		SaveInteger(YDHT, GetHandleId(t), 2, i + 1)
	else
		RemoveLocation(loc)
		PauseTimer(t)
		DestroyTimer(t)
		FlushChildHashtable(YDHT, GetHandleId(t))
	end
	t = nil
	u = nil
	loc = nil
	loc2 = nil
end
function FuMoQuan()
	local l__ut = GetEnumUnit()
	local u = GetTriggerUnit()
	local loc = LoadLocationHandle(YDHT, GetHandleId(u), StringHash("伏魔"))
	local t = CreateTimer()
	SaveUnitHandle(YDHT, GetHandleId(t), 0, l__ut)
	SaveLocationHandle(YDHT, GetHandleId(t), 1, loc)
	TimerStart(t, 0.03, true, FuMoBuNengChu)
	t = nil
	u = nil
	l__ut = nil
	loc = nil
end
function FuMoTeXiao()
	local t = GetExpiredTimer()
	local loc = LoadLocationHandle(YDHT, GetHandleId(t), 0)
	YDWETimerDestroyEffect(15.0, AddSpecialEffectLoc("war3mapImported\\kineticfield_fx_stand.mdx", loc))
	t = nil
	loc = nil
end
function JinGangFuMo()
	local u = GetTriggerUnit()
	local uc = GetSpellTargetUnit()
	local loc = GetUnitLoc(uc)
	local loc1 = pu(loc, 325, 90)
	local loc2 = pu(loc, 325, 210)
	local loc3 = pu(loc, 325, 330)
	local g = CreateGroup()
	local tt1 = CreateTimer()
	local tt2 = CreateTimer()
	local tt3 = CreateTimer()
	local tt4 = CreateTimer()
	--伏魔圈
	GroupEnumUnitsInRangeOfLoc(g, loc, 325, Condition(IsFuMoEnemy))
	SaveLocationHandle(YDHT, GetHandleId(u), StringHash("伏魔"), loc)
	YDWETimerDestroyEffect(1.2, AddSpecialEffectLoc("war3mapImported\\kineticfield_fx_start.mdx", loc))
	SaveLocationHandle(YDHT, GetHandleId(tt4), 0, loc)
	TimerStart(tt4, 1.2, false, FuMoTeXiao)
	ForGroupBJ(g, FuMoQuan)
	--渡劫
	CreateNUnitsAtLoc(1, 1697657143, GetOwningPlayer(u), loc1, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093677889)
	SaveUnitHandle(YDHT, GetHandleId(tt1), 0, bj_lastCreatedUnit)
	SaveUnitHandle(YDHT, GetHandleId(tt1), 1, uc)
	SaveLocationHandle(YDHT, GetHandleId(tt1), 3, loc)
	TimerStart(tt1, 1, true, JinGang_DuJie)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 15.0)
	--渡厄
	CreateNUnitsAtLoc(1, 1697657142, GetOwningPlayer(u), loc2, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093677890)
	SaveUnitHandle(YDHT, GetHandleId(tt2), 0, bj_lastCreatedUnit)
	SaveUnitHandle(YDHT, GetHandleId(tt2), 1, uc)
	SaveLocationHandle(YDHT, GetHandleId(tt2), 3, loc)
	TimerStart(tt2, 1, true, JinGang_DuE)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 15.0)
	--渡难
	CreateNUnitsAtLoc(1, 1697657144, GetOwningPlayer(u), loc3, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093677891)
	SaveUnitHandle(YDHT, GetHandleId(tt3), 0, bj_lastCreatedUnit)
	SaveUnitHandle(YDHT, GetHandleId(tt3), 1, uc)
	SaveLocationHandle(YDHT, GetHandleId(tt3), 3, loc)
	TimerStart(tt3, 1, true, JinGang_DuNan)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 15.0)
	RemoveLocation(loc1)
	RemoveLocation(loc2)
	RemoveLocation(loc3)
	u = nil
	uc = nil
	loc = nil
	loc1 = nil
	loc2 = nil
	loc3 = nil
	tt1 = nil
	tt2 = nil
	tt3 = nil
end
--伏魔圈伤害
function IsFuMoShangHai()
	return GetUnitTypeId(GetEventDamageSource()) == 1697657143 or GetUnitTypeId(GetEventDamageSource()) == 1697657142 or GetUnitTypeId(GetEventDamageSource()) == 1697657144
end
function FuMoShangHai()
	local uc = GetTriggerUnit()
	if GetUnitState(uc, UNIT_STATE_LIFE) <= 0.1 * GetUnitState(uc, UNIT_STATE_MAX_LIFE) then
		WuDi(uc)
		SetWidgetLife(uc, 1.0)
	else
		SetWidgetLife(uc, GetUnitState(uc, UNIT_STATE_LIFE) - 0.1 * GetUnitState(uc, UNIT_STATE_MAX_LIFE))
	end
	uc = nil
end
--十八罗汉阵
--真武七截阵
function IsZhenWuQiJie()
	return GetSpellAbilityId() == 1093677898
end
function ZhenWuQiJieZhen()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local tianji = GetUnitLoc(u)
	local tianxuan = Location(GetUnitX(u) - 500, GetUnitY(u) - 100)
	local tianshu = Location(GetUnitX(u) + 500, GetUnitY(u) + 100)
	local tianquan = Location(GetUnitX(u), GetUnitY(u) + 300)
	local yuheng = Location(GetUnitX(u), GetUnitY(u) - 500)
	local kaiyang = Location(GetUnitX(u) + 500, GetUnitY(u) - 500)
	local yaoguang = Location(GetUnitX(u) + 500, GetUnitY(u) - 300)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429575, p, tianji, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677899)
	Gw(10.0, bj_lastCreatedUnit)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429575, p, tianxuan, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677899)
	Gw(10.0, bj_lastCreatedUnit)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429575, p, tianshu, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677899)
	Gw(10.0, bj_lastCreatedUnit)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429575, p, tianquan, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677899)
	Gw(10.0, bj_lastCreatedUnit)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429575, p, yuheng, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677899)
	Gw(10.0, bj_lastCreatedUnit)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429575, p, kaiyang, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677899)
	Gw(10.0, bj_lastCreatedUnit)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429575, p, yaoguang, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677899)
	Gw(10.0, bj_lastCreatedUnit)
	YDWETimerDestroyLightning(10.0, AddLightningLoc("SPLK", kaiyang, yaoguang))
	YDWETimerDestroyLightning(10.0, AddLightningLoc("SPLK", yuheng, kaiyang))
	YDWETimerDestroyLightning(10.0, AddLightningLoc("SPLK", tianji, yuheng))
	YDWETimerDestroyLightning(10.0, AddLightningLoc("SPLK", tianquan, tianji))
	YDWETimerDestroyLightning(10.0, AddLightningLoc("SPLK", tianxuan, tianji))
	YDWETimerDestroyLightning(10.0, AddLightningLoc("SPLK", tianji, tianshu))
	YDWETimerDestroyEffect(7.0, AddSpecialEffectLoc("war3mapImported\\divinering.mdx", tianji))
	YDWETimerDestroyEffect(7.0, AddSpecialEffectLoc("war3mapImported\\divinering.mdx", tianxuan))
	YDWETimerDestroyEffect(7.0, AddSpecialEffectLoc("war3mapImported\\divinering.mdx", tianquan))
	YDWETimerDestroyEffect(7.0, AddSpecialEffectLoc("war3mapImported\\divinering.mdx", tianshu))
	YDWETimerDestroyEffect(7.0, AddSpecialEffectLoc("war3mapImported\\divinering.mdx", yuheng))
	YDWETimerDestroyEffect(7.0, AddSpecialEffectLoc("war3mapImported\\divinering.mdx", kaiyang))
	YDWETimerDestroyEffect(7.0, AddSpecialEffectLoc("war3mapImported\\divinering.mdx", yaoguang))
	RemoveLocation(tianji)
	RemoveLocation(tianxuan)
	RemoveLocation(tianquan)
	RemoveLocation(tianshu)
	RemoveLocation(yuheng)
	RemoveLocation(kaiyang)
	RemoveLocation(yaoguang)
	u = nil
	p = nil
	tianji = nil
	tianxuan = nil
	tianshu = nil
	tianquan = nil
	yuheng = nil
	kaiyang = nil
	yaoguang = nil
end
function IsZhenWuShangHai()
	return GetUnitTypeId(GetEventDamageSource()) == 1865429575
end
function ZhenWuShangHai()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = 1.0 + I2R(juexuelingwu[i])
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 3000.0, 3000.0, shxishu, 1093677898)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--天罡北斗阵
function IsTianGangBeiDou()
	return GetSpellAbilityId() == 1093677895
end
function TianGangBeiDouZhen()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local tianji = GetUnitLoc(u)
	local tianxuan = Location(GetUnitX(u) + 300, GetUnitY(u) - 50)
	local tianshu = Location(GetUnitX(u) + 500, GetUnitY(u) + 250)
	local tianquan = Location(GetUnitX(u) - 50, GetUnitY(u) + 300)
	local yuheng = Location(GetUnitX(u) - 300, GetUnitY(u) + 500)
	local kaiyang = Location(GetUnitX(u) - 500, GetUnitY(u) + 700)
	local yaoguang = Location(GetUnitX(u) - 800, GetUnitY(u) + 700)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429574, p, tianji, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677897)
	Gw(10.0, bj_lastCreatedUnit)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429574, p, tianxuan, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677897)
	Gw(10.0, bj_lastCreatedUnit)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429574, p, tianshu, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677897)
	Gw(10.0, bj_lastCreatedUnit)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429574, p, tianquan, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677897)
	Gw(10.0, bj_lastCreatedUnit)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429574, p, yuheng, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677897)
	Gw(10.0, bj_lastCreatedUnit)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429574, p, kaiyang, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677897)
	Gw(10.0, bj_lastCreatedUnit)
	CreateNUnitsAtLocFacingLocBJ(1, 1865429574, p, yaoguang, tianji)
	UnitAddAbility(bj_lastCreatedUnit, 1093677897)
	Gw(10.0, bj_lastCreatedUnit)
	YDWETimerDestroyLightning(10.0, AddLightningLoc("SPLK", yaoguang, kaiyang))
	YDWETimerDestroyLightning(10.0, AddLightningLoc("SPLK", kaiyang, yuheng))
	YDWETimerDestroyLightning(10.0, AddLightningLoc("SPLK", yuheng, tianquan))
	YDWETimerDestroyLightning(10.0, AddLightningLoc("SPLK", tianquan, tianji))
	YDWETimerDestroyLightning(10.0, AddLightningLoc("SPLK", tianji, tianxuan))
	YDWETimerDestroyLightning(10.0, AddLightningLoc("SPLK", tianxuan, tianshu))
	RemoveLocation(tianji)
	RemoveLocation(tianxuan)
	RemoveLocation(tianquan)
	RemoveLocation(tianshu)
	RemoveLocation(yuheng)
	RemoveLocation(kaiyang)
	RemoveLocation(yaoguang)
	u = nil
	p = nil
	tianji = nil
	tianxuan = nil
	tianshu = nil
	tianquan = nil
	yuheng = nil
	kaiyang = nil
	yaoguang = nil
end
function TianGangEnemy()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) and IsUnitAliveBJ(GetFilterUnit())
end
function TianGangSha()
	local u = GetAttacker()
	local loc = GetUnitLoc(u)
	local g = CreateGroup()
	local gg2 = CreateGroup()
	local l__ut = nil
	local i = 1
	local imax = 0
	GroupEnumUnitsInRangeOfLoc(g, loc, 600, Condition(TianGangEnemy))
	imax = CountUnitsInGroup(g)
	if imax >= 1 then
		i = 1
		for _ in _loop_() do
			if i > imax then break end
			l__ut = FirstOfGroup(g)
			if GetUnitAbilityLevel(l__ut, 1093677897) ~= 0 then
				GroupAddUnit(gg2, l__ut)
			end
			GroupRemoveUnit(g, l__ut)
			i = i + 1
		end
	end
	imax = CountUnitsInGroup(gg2)
	if imax >= 1 then
		i = 1
		for _ in _loop_() do
			if i > imax then break end
			l__ut = FirstOfGroup(gg2)
			IssueTargetOrderById(l__ut, 852119, u)
			GroupRemoveUnit(gg2, l__ut)
			i = i + 1
		end
	end
	RemoveLocation(loc)
	DestroyGroup(g)
	DestroyGroup(gg2)
	u = nil
	l__ut = nil
	loc = nil
	g = nil
	gg2 = nil
end
function IsTianGangShangHai()
	return GetUnitTypeId(GetEventDamageSource()) == 1865429574
end
function TianGangShangHai()
	local i = 1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
	local u = udg_hero[i]
	local uc = GetTriggerUnit()
	local shxishu = 1.0 + I2R(juexuelingwu[i])
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 3000.0, 3000.0, shxishu, 1093677895)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--打狗阵
--杀狗阵
--二十八星宿阵
--六脉剑阵
--天罗地网阵
--修习阵法
function IsXueZhenFa()
	return GetItemTypeId(GetManipulatedItem()) == 1227899481 or GetItemTypeId(GetManipulatedItem()) == 1227899482 or GetItemTypeId(GetManipulatedItem()) == 1227899696 or GetItemTypeId(GetManipulatedItem()) == 1227899697
end
function XueZhenFa()
	local id = GetItemTypeId(GetManipulatedItem())
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local j = 0
	if IsUnitType(u, UNIT_TYPE_HERO) ~= nil == false then -- INLINED!!
		DisplayTextToPlayer(p, 0, 0, "|cff00FF66侠侣不能修行阵法")
	else
		if id == 1227899697 then
			if GetUnitAbilityLevel(u, 1093677898) ~= 0 then
				DisplayTextToPlayer(p, 0, 0, "|cff00FF66您已经修行过该阵法")
			else
				if udg_whichzhangmen[i] == 7 and GetUnitAbilityLevel(u, 1093679186) == 9 then
					j = 1
					for _ in _loop_() do
						if j > wugongshu[i] then break end
						if I7[(i - 1) * 20 + j] ~= 1095067243 then
							if j == wugongshu[i] then
								DisplayTextToPlayer(p, 0, 0, "|CFF34FF00学习技能已达上限，请先遗忘部分技能")
							end
						else
							UnitAddAbility(u, 1093677898)
							DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" .. (GetObjectName(1093677898) or ""))
							L7[i] = 1
							for _ in _loop_() do
								if L7[i] > wugongshu[i] then break end
								if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
								else
									I7[(i - 1) * 20 + L7[i]] = 1093677898
									if true then break end
								end
								L7[i] = L7[i] + 1
							end
							if true then break end
						end
						j = j + 1
					end
				else
					DisplayTextToPlayer(p, 0, 0, "|cff00FF66条件不足，无法修行此阵法")
				end
			end
		elseif id == 1227899482 then
			if GetUnitAbilityLevel(u, 1093677881) ~= 0 then
				DisplayTextToPlayer(p, 0, 0, "|cff00FF66您已经修行过该阵法")
			else
				if udg_whichzhangmen[i] == 6 and GetUnitAbilityLevel(u, 1093678411) == 9 then
					j = 1
					for _ in _loop_() do
						if j > wugongshu[i] then break end
						if I7[(i - 1) * 20 + j] ~= 1095067243 then
							if j == wugongshu[i] then
								DisplayTextToPlayer(p, 0, 0, "|CFF34FF00学习技能已达上限，请先遗忘部分技能")
							end
						else
							UnitAddAbility(u, 1093677881)
							DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" .. (GetObjectName(1093677881) or ""))
							L7[i] = 1
							for _ in _loop_() do
								if L7[i] > wugongshu[i] then break end
								if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
								else
									I7[(i - 1) * 20 + L7[i]] = 1093677881
									if true then break end
								end
								L7[i] = L7[i] + 1
							end
							if true then break end
						end
						j = j + 1
					end
				else
					DisplayTextToPlayer(p, 0, 0, "|cff00FF66条件不足，无法修行此阵法")
				end
			end
		elseif id == 1227899696 then
			if GetUnitAbilityLevel(u, 1093677894) ~= 0 then
				DisplayTextToPlayer(p, 0, 0, "|cff00FF66您已经修行过该阵法")
			else
				if udg_whichzhangmen[i] == 5 and GetUnitAbilityLevel(u, 1093679437) == 9 then
					j = 1
					for _ in _loop_() do
						if j > wugongshu[i] then break end
						if I7[(i - 1) * 20 + j] ~= 1095067243 then
							if j == wugongshu[i] then
								DisplayTextToPlayer(p, 0, 0, "|CFF34FF00学习技能已达上限，请先遗忘部分技能")
							end
						else
							UnitAddAbility(u, 1093677894)
							DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" .. (GetObjectName(1093677894) or ""))
							L7[i] = 1
							for _ in _loop_() do
								if L7[i] > wugongshu[i] then break end
								if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
								else
									I7[(i - 1) * 20 + L7[i]] = 1093677894
									if true then break end
								end
								L7[i] = L7[i] + 1
							end
							if true then break end
						end
						j = j + 1
					end
				else
					DisplayTextToPlayer(p, 0, 0, "|cff00FF66条件不足，无法修行此阵法")
				end
			end
		elseif id == 1227899481 then
			if GetUnitAbilityLevel(u, 1093677895) ~= 0 then
				DisplayTextToPlayer(p, 0, 0, "|cff00FF66您已经修行过该阵法")
			else
				if udg_whichzhangmen[i] == 3 and GetUnitAbilityLevel(u, 1093681997) == 9 then
					j = 1
					for _ in _loop_() do
						if j > wugongshu[i] then break end
						if I7[(i - 1) * 20 + j] ~= 1095067243 then
							if j == wugongshu[i] then
								DisplayTextToPlayer(p, 0, 0, "|CFF34FF00学习技能已达上限，请先遗忘部分技能")
							end
						else
							UnitAddAbility(u, 1093677895)
							DisplayTextToPlayer(p, 0, 0, "|cff00FF66恭喜领悟技能：" .. (GetObjectName(1093677895) or ""))
							L7[i] = 1
							for _ in _loop_() do
								if L7[i] > wugongshu[i] then break end
								if I7[(i - 1) * 20 + L7[i]] ~= 1095067243 then
								else
									I7[(i - 1) * 20 + L7[i]] = 1093677895
									if true then break end
								end
								L7[i] = L7[i] + 1
							end
							if true then break end
						end
						j = j + 1
					end
				else
					DisplayTextToPlayer(p, 0, 0, "|cff00FF66条件不足，无法修行此阵法")
				end
			end
		end
	end
	u = nil
	p = nil
end
--事件
function ZhenFa_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsJinGangFuMo))
	TriggerAddAction(t, JinGangFuMo)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsFuMoShangHai))
	TriggerAddAction(t, FuMoShangHai)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsTianGangBeiDou))
	TriggerAddAction(t, TianGangBeiDouZhen)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	--call TriggerAddCondition(t,Condition(function HaveTianGang))
	TriggerAddAction(t, TianGangSha)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsTianGangShangHai))
	TriggerAddAction(t, TianGangShangHai)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsZhenWuQiJie))
	TriggerAddAction(t, ZhenWuQiJieZhen)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsZhenWuShangHai))
	TriggerAddAction(t, ZhenWuShangHai)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsXueZhenFa))
	TriggerAddAction(t, XueZhenFa)
	t = nil
end
--===================================================
--决战江湖1.4之大辽金匠
--===================================================
--购买商店武器
function RemoveWeapon()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local it = LoadItemHandle(YDHT, GetHandleId(t), 1)
	UnitRemoveItem(u, it)
	FlushChildHashtable(YDHT, GetHandleId(t))
	DestroyTimer(t)
	t = nil
	u = nil
	it = nil
end
function s__ShopWeapon_create(id, min_xiuxing)
	local l__wp
	l__wp = s__ShopWeapon__allocate()
	s__ShopWeapon_min_xiuxing[l__wp] = min_xiuxing
	s__ShopWeapon_id[l__wp] = id
	return l__wp
end
function s__ShopWeapon_onDestroy(this)
	s__ShopWeapon_min_xiuxing[this] = 0
	s__ShopWeapon_id[this] = 0
end

--Generated destructor of ShopWeapon
function s__ShopWeapon_deallocate(this)
	if this == nil then
		return
	elseif si__ShopWeapon_V[this] ~= -1 then
		return
	end
	s__ShopWeapon_onDestroy(this)
	si__ShopWeapon_V[this] = si__ShopWeapon_F
	si__ShopWeapon_F = this
end
function s__ShopWeapon_CanYeLianWeapon(this, u, it)
	if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 2 and GetItemTypeId(it) == 1227897155 then
		s__ShopWeapon_zhuanshu[this] = true
	end
	if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 3 and GetItemTypeId(it) == 1227897143 then
		s__ShopWeapon_zhuanshu[this] = true
	end
	if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 6 and GetItemTypeId(it) == 1227897144 then
		s__ShopWeapon_zhuanshu[this] = true
	end
	if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 11 and (GetItemTypeId(it) == 1227897154 or GetItemTypeId(it) == 1227897156) then
		s__ShopWeapon_zhuanshu[this] = true
	end
	if xiuxing[1 + GetPlayerId(GetOwningPlayer(u))] < s__ShopWeapon_min_xiuxing[this] and s__ShopWeapon_zhuanshu[this] == false and Ce[1 + GetPlayerId(GetOwningPlayer(u))] ~= 3 then
		DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "需历练" .. (I2S(s__ShopWeapon_min_xiuxing[this]) or "") .. "以上方可冶炼该武器")
		AdjustPlayerStateBJ(60000, GetOwningPlayer(u), PLAYER_STATE_RESOURCE_GOLD)
		return false
	end
	return true
end
function s__ShopWeapon_PickUpWeapon(this, u, it)
	local t = CreateTimer()
	if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 2 and GetItemTypeId(it) == 1227897155 then
		s__ShopWeapon_zhuanshu[this] = true
	end
	if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 3 and GetItemTypeId(it) == 1227897143 then
		s__ShopWeapon_zhuanshu[this] = true
	end
	if udg_runamen[1 + GetPlayerId(GetOwningPlayer(u))] == 6 and GetItemTypeId(it) == 1227897144 then
		s__ShopWeapon_zhuanshu[this] = true
	end
	if GetItemTypeId(it) == 1227897154 or GetItemTypeId(it) == 1227897156 then
		s__ShopWeapon_zhuanshu[this] = true
	end
	if xiuxing[1 + GetPlayerId(GetOwningPlayer(u))] < s__ShopWeapon_min_xiuxing[this] - 1 and s__ShopWeapon_zhuanshu[this] == false and Ce[1 + GetPlayerId(GetOwningPlayer(u))] ~= 3 then
		DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "需历练" .. (I2S(s__ShopWeapon_min_xiuxing[this] - 1) or "") .. "以上方可使用该武器")
		SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		SaveItemHandle(YDHT, GetHandleId(t), 1, it)
		TimerStart(t, 0.0, false, RemoveWeapon)
	end
	t = nil
end
function IsYeLianWuQi()
	local j = 1
	if GetItemTypeId(GetManipulatedItem()) == 1227899463 then
		if GetItemType(UnitItemInSlotBJ(GetTriggerUnit(), 1)) ~= ITEM_TYPE_ARTIFACT then
			DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10, "|cffff0000装备栏第一格不是武器")
			AdjustPlayerStateBJ(60000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
			return false
		else
			for _ in _loop_() do
				if j >= 30 then break end
				if GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), 1)) == s__ShopWeapon_id[shopweapon[j]] then
					if s__ShopWeapon_CanYeLianWeapon(shopweapon[j], GetTriggerUnit(), UnitItemInSlotBJ(GetTriggerUnit(), 1)) then
						return true
					else
						return false
					end
				end
				j = j + 1
			end
			return true
		end
	end
	return false
end
function YeLianWuQi()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local it = UnitItemInSlotBJ(u, 1)
	local id = GetItemTypeId(it)
	local zssh = LoadReal(YDHT, id, StringHash("招式伤害"))
	local wdnl = LoadReal(YDHT, id, StringHash("内力"))
	local zhssh = LoadReal(YDHT, id, StringHash("真实伤害"))
	local bjsh = LoadReal(YDHT, id, StringHash("暴击伤害"))
	local bjl = LoadReal(YDHT, id, StringHash("暴击率"))
	local jxlw = LoadReal(YDHT, id, StringHash("绝学领悟"))
	local wdgg = LoadReal(YDHT, id, StringHash("根骨")) + LoadReal(YDHT, id, StringHash("全属性"))
	local wddp = LoadReal(YDHT, id, StringHash("胆魄")) + LoadReal(YDHT, id, StringHash("全属性"))
	local wdwx = LoadReal(YDHT, id, StringHash("悟性")) + LoadReal(YDHT, id, StringHash("全属性"))
	local wdys = LoadReal(YDHT, id, StringHash("医术")) + LoadReal(YDHT, id, StringHash("全属性"))
	local wdjm = LoadReal(YDHT, id, StringHash("经脉")) + LoadReal(YDHT, id, StringHash("全属性"))
	local wdfy = LoadReal(YDHT, id, StringHash("福缘")) + LoadReal(YDHT, id, StringHash("全属性"))
	local shhf = LoadReal(YDHT, id, StringHash("伤害回复"))
	local sghf = LoadReal(YDHT, id, StringHash("杀怪回复"))
	local smhf = LoadReal(YDHT, id, StringHash("生命回复"))
	local flhf = LoadReal(YDHT, id, StringHash("法力回复"))
	local sjgl = LoadReal(YDHT, id, StringHash("升级概率")) + LoadReal(YDHT, GetHandleId(it), StringHash("升级概率"))
	--local real wdxx=LoadReal(YDHT,id,StringHash("吸血"))
	--local real gjsd=LoadReal(YDHT,id,StringHash("攻击速度"))
	if shengwang[i] <= 2000 then
		DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000声望不足2000不可以冶炼武器")
		AdjustPlayerStateBJ(60000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
	elseif sjgl <= 0.0 then
		DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000该武器已不可继续冶炼")
		AdjustPlayerStateBJ(60000, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
	else
		if GetRandomReal(0.0, 100.0) < sjgl then
			DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000恭喜你，冶炼成功")
			if udg_bqdsbool[i] == false and Ce[i] == 3 then
				udg_bqds[i] = udg_bqds[i] + 1
				DisplayTextToPlayer(p, 0, 0, "|CFF66FF00恭喜您冶炼成功第" .. (I2S(udg_bqds[i]) or "") .. "次，您需要冶炼成功5次才能获得兵器大师哦")
			end
			if udg_bqds[i] >= 5 and udg_bqdsbool[i] == false and Ce[i] == 3 then
				udg_bqdsbool[i] = true
				if udg_zhangmen[i] == true then
				else
					SaveStr(YDHT, GetHandleId(p), GetHandleId(p), "〓兵器大师〓" .. (LoadStr(YDHT, GetHandleId(p), GetHandleId(p)) or ""))
				end
				DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15, "|CFF66FF00恭喜" .. (GetPlayerName(p) or "") .. "获得兵器大师")
				SetPlayerName(p, "〓兵器大师〓" .. (GetPlayerName(p) or ""))
			end
			if id ~= 1227899464 then
				RemoveItem(FetchUnitItem(u, id))
				it = UnitAddItemById(u, 1227899464)
			else
				zssh = LoadReal(YDHT, GetHandleId(it), StringHash("招式伤害"))
				wdnl = LoadReal(YDHT, GetHandleId(it), StringHash("内力"))
				zhssh = LoadReal(YDHT, GetHandleId(it), StringHash("真实伤害"))
				bjsh = LoadReal(YDHT, GetHandleId(it), StringHash("暴击伤害"))
				bjl = LoadReal(YDHT, GetHandleId(it), StringHash("暴击率"))
				jxlw = LoadReal(YDHT, GetHandleId(it), StringHash("绝学领悟"))
				wdgg = LoadReal(YDHT, GetHandleId(it), StringHash("根骨"))
				wddp = LoadReal(YDHT, GetHandleId(it), StringHash("胆魄"))
				wdwx = LoadReal(YDHT, GetHandleId(it), StringHash("悟性"))
				wdys = LoadReal(YDHT, GetHandleId(it), StringHash("医术"))
				wdjm = LoadReal(YDHT, GetHandleId(it), StringHash("经脉"))
				wdfy = LoadReal(YDHT, GetHandleId(it), StringHash("福缘"))
				shhf = LoadReal(YDHT, GetHandleId(it), StringHash("伤害回复"))
				sghf = LoadReal(YDHT, GetHandleId(it), StringHash("杀怪回复"))
				smhf = LoadReal(YDHT, GetHandleId(it), StringHash("生命回复"))
				flhf = LoadReal(YDHT, GetHandleId(it), StringHash("法力回复"))
			--set wdxx=LoadReal(YDHT,GetHandleId(it),StringHash("吸血"))
			--set gjsd=LoadReal(YDHT,GetHandleId(it),StringHash("攻击速度"))
			end
			if udg_bqdsbool[i] then
				sjgl = sjgl * GetGeoNormRandomReal(0.78, 0.95)
			else
				sjgl = sjgl * GetGeoNormRandomReal(0.68, 0.95)
			end
			if sjgl < 3.0 then
				sjgl = 0.0
			end
			sjgl = RMinBJ(sjgl * GetRandomReal(1.0, 1.04), 100.0)
			SaveReal(YDHT, GetHandleId(it), StringHash("升级概率"), sjgl)
			UnitRemoveItem(u, it)
			SaveReal(YDHT, GetHandleId(it), StringHash("招式伤害"), (GetGeoNormRandomReal(0.0, 100.0) + zssh) * GetGeoNormRandomReal(1.0, 1.3))
			SaveReal(YDHT, GetHandleId(it), StringHash("内力"), (GetGeoNormRandomReal(0.0, 100.0) + wdnl) * GetGeoNormRandomReal(1.0, 1.3))
			SaveReal(YDHT, GetHandleId(it), StringHash("真实伤害"), (GetGeoNormRandomReal(0.0, 100.0) + zhssh) * GetGeoNormRandomReal(1.0, 1.3))
			SaveReal(YDHT, GetHandleId(it), StringHash("暴击伤害"), bjsh * GetGeoNormRandomReal(1.0, 1.1))
			SaveReal(YDHT, GetHandleId(it), StringHash("暴击率"), bjl * GetGeoNormRandomReal(1.0, 1.05))
			SaveReal(YDHT, GetHandleId(it), StringHash("绝学领悟"), jxlw * GetGeoNormRandomReal(1.0, 1.25))
			SaveReal(YDHT, GetHandleId(it), StringHash("根骨"), (GetRandomReal(0.0, 0.4) + wdgg) * GetGeoNormRandomReal(1.0, 1.15))
			SaveReal(YDHT, GetHandleId(it), StringHash("胆魄"), (GetRandomReal(0.0, 0.4) + wddp) * GetGeoNormRandomReal(1.0, 1.15))
			SaveReal(YDHT, GetHandleId(it), StringHash("悟性"), (GetRandomReal(0.0, 0.4) + wdwx) * GetGeoNormRandomReal(1.0, 1.15))
			SaveReal(YDHT, GetHandleId(it), StringHash("医术"), (GetRandomReal(0.0, 0.4) + wdys) * GetGeoNormRandomReal(1.0, 1.15))
			SaveReal(YDHT, GetHandleId(it), StringHash("经脉"), (GetRandomReal(0.0, 0.4) + wdjm) * GetGeoNormRandomReal(1.0, 1.15))
			SaveReal(YDHT, GetHandleId(it), StringHash("福缘"), (GetRandomReal(0.0, 0.4) + wdfy) * GetGeoNormRandomReal(1.0, 1.15))
			SaveReal(YDHT, GetHandleId(it), StringHash("伤害回复"), shhf * GetGeoNormRandomReal(1.0, 1.3))
			SaveReal(YDHT, GetHandleId(it), StringHash("杀怪回复"), sghf * GetGeoNormRandomReal(1.0, 1.3))
			SaveReal(YDHT, GetHandleId(it), StringHash("生命回复"), smhf * GetGeoNormRandomReal(1.0, 1.3))
			SaveReal(YDHT, GetHandleId(it), StringHash("法力回复"), flhf * GetGeoNormRandomReal(1.0, 1.3))
		--call SaveReal(YDHT, GetHandleId(it), StringHash("吸血"), I2R(wdxx)*GetRandomReal(1.0, 1.5)))
		--call SaveReal(YDHT, GetHandleId(it), StringHash("攻击速度"), I2R(gjsd)*GetRandomReal(1.0, 1.5)))
		else
			DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000很遗憾，冶炼失败")
			sjgl = sjgl * GetGeoNormRandomReal(0.95, 0.99)
			if sjgl < 3.0 then
				sjgl = 0.0
			end
			SaveReal(YDHT, GetHandleId(it), StringHash("升级概率"), sjgl)
		--set shengwang[i] = shengwang[i]-100
		end
	end
	u = nil
	p = nil
	it = nil
end
function InitShopWeapon()
	shopweapon[1] = s__ShopWeapon_create(1227895109, 0)
	shopweapon[2] = s__ShopWeapon_create(1227895110, 0)
	shopweapon[3] = s__ShopWeapon_create(1227895123, 0)
	shopweapon[4] = s__ShopWeapon_create(1227895344, 0)
	shopweapon[5] = s__ShopWeapon_create(1227895345, 0)
	shopweapon[6] = s__ShopWeapon_create(1227895094, 1)
	shopweapon[7] = s__ShopWeapon_create(1227895116, 1)
	shopweapon[8] = s__ShopWeapon_create(1227895118, 1)
	shopweapon[9] = s__ShopWeapon_create(1227895091, 2)
	shopweapon[10] = s__ShopWeapon_create(1227895878, 2)
	shopweapon[11] = s__ShopWeapon_create(1227894872, 3)
	shopweapon[12] = s__ShopWeapon_create(1227897145, 3)
	shopweapon[13] = s__ShopWeapon_create(1227897153, 3)
	shopweapon[14] = s__ShopWeapon_create(1227894864, 4)
	shopweapon[15] = s__ShopWeapon_create(1227894865, 4)
	shopweapon[16] = s__ShopWeapon_create(1227894850, 5)
	shopweapon[17] = s__ShopWeapon_create(1227894851, 5)
	shopweapon[18] = s__ShopWeapon_create(1227894852, 5)
	shopweapon[19] = s__ShopWeapon_create(1227896918, 5)
	shopweapon[20] = s__ShopWeapon_create(1227897143, 6)
	shopweapon[21] = s__ShopWeapon_create(1227897144, 6)
	shopweapon[22] = s__ShopWeapon_create(1227897154, 6)
	shopweapon[23] = s__ShopWeapon_create(1227897155, 6)
	shopweapon[24] = s__ShopWeapon_create(1227897156, 6)
end
function SmeltingWeaponSystem()
	local t = CreateTrigger()
	InitShopWeapon()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsYeLianWuQi))
	TriggerAddAction(t, YeLianWuQi)
	t = nil
end
--寒冰真气
function IsHanBingZhenQi()
	return GetSpellAbilityId() == 1093677900
end
function HanBingZhenQi()
	local u = GetTriggerUnit()
	local l__ut = GetSpellTargetUnit()
	local p = GetOwningPlayer(u)
	local loc = GetUnitLoc(l__ut)
	CreateNUnitsAtLoc(1, 1697656880, p, loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093677880)
	if GetUnitAbilityLevel(u, 1093678932) ~= 0 or GetUnitAbilityLevel(u, 1093678929) ~= 0 then
		SetUnitAbilityLevel(bj_lastCreatedUnit, 1093677880, 3)
	end
	if GetUnitAbilityLevel(u, 1093682254) ~= 0 or GetUnitAbilityLevel(u, 1093678927) ~= 0 then
		IncUnitAbilityLevel(bj_lastCreatedUnit, 1093677880)
	end
	IssueTargetOrderById(bj_lastCreatedUnit, 852225, l__ut)
end
--百步神拳
--无相劫指
function IsWuXiangJieZhi()
	return GetSpellAbilityId() == 1093677904
end
function WuXiangTimeOut()
	local t = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	UnitRemoveAbility(u, 1093677901)
	PauseTimer(t)
	DestroyTimer(t)
	FlushChildHashtable(YDHT, GetHandleId(t))
	u = nil
	t = nil
end
function WuXiangJieZhi()
	local u = GetTriggerUnit()
	local t = CreateTimer()
	UnitAddAbility(u, 1093677901)
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	TimerStart(t, 3600, false, WuXiangTimeOut)
	u = nil
	t = nil
end
function IsWuXiangShangHai()
	return GetEventDamage() == 1.58
end
function WuXiangShangHai()
	local l__ut = GetEventDamageSource()
	local uc = GetTriggerUnit()
	local i = 1 + GetPlayerId(GetOwningPlayer(l__ut))
	local u = udg_hero[i]
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678664) >= 1 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093678927) >= 1 then
		shxishu = shxishu + 0.6
	end
	if UnitHasBuffBJ(uc, 1114010223) then
		shxishu = shxishu * 3
	end
	shxishu = shxishu * (1.0 + I2R(danpo[i]) / 20 + I2R(juexuelingwu[i]))
	shanghai = ShangHaiGongShi(u, uc, 14.0, 19.0, shxishu, 1093677904)
	WuGongShangHai(u, uc, shanghai)
	if GetUnitAbilityLevel(u, 1093678672) >= 1 and GetRandomInt(1, 100) <= 8 then
		WanBuff(u, uc, 11)
	end
	u = nil
	uc = nil
end
--神行百变
function IsShenXingBaiBian()
	return GetSpellAbilityId() == 1093677902
end
function ShenXingBaiBian_2()
	local t = GetTriggeringTrigger()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local r = LoadReal(YDHT, GetHandleId(t), 1)
	if EVENT_UNIT_SPELL_EFFECT == GetTriggerEventId() == true then
		udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(u))] = 0.0
		DestroyTrigger(t)
	else
		if udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(u))] <= 0.0 then
			DestroyTrigger(t)
		else
			udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(u))] = udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(u))] - 0.01
		end
	end
end
function ShenXingBaiBian_1()
	local tm = GetExpiredTimer()
	local u = LoadUnitHandle(YDHT, GetHandleId(tm), 0)
	local t = CreateTrigger()
	udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(u))] = 19.5
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	TriggerRegisterUnitEvent(t, u, EVENT_UNIT_SPELL_EFFECT)
	TriggerRegisterTimerEventPeriodic(t, 0.01)
	TriggerAddCondition(t, Condition(ShenXingBaiBian_2))
	DestroyTimer(tm)
	t = nil
	tm = nil
	u = nil
end
function ShenXingBaiBian()
	local t = CreateTimer()
	local u = GetTriggerUnit()
	SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
	TimerStart(t, 0.5, false, ShenXingBaiBian_1)
	t = nil
	u = nil
end
function IsShenXingShangHai()
	return IsUnitAlly(GetAttackedUnitBJ(), GetOwningPlayer(GetAttacker())) == false and IsUnitType(GetAttackedUnitBJ(), UNIT_TYPE_STRUCTURE) == false and udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] > 0.0
end
function ShenXingShaRen()
	local u = GetKillingUnit()
	local level = 0
	--call BJDebugMsg("到这了吗2？")
	if GetUnitAbilityLevel(u, 1093678668) ~= 0 then
		level = GetUnitAbilityLevel(u, 1093677902)
		UnitRemoveAbility(u, 1093677902)
		UnitAddAbility(u, 1093677902)
		SetUnitAbilityLevel(u, 1093677902, level)
	end
	u = nil
end
function ShenXingShangHai_1()
	local t = GetTriggeringTrigger()
	local t2 = nil
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local uc = LoadUnitHandle(YDHT, GetHandleId(t), 1)
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local shxishu = 1 + udg_lilianxishu[i]
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678932) >= 1 then
		shxishu = shxishu + 1.0
	end
	if GetUnitAbilityLevel(u, 1093678936) >= 1 then
		shxishu = shxishu + 1.6
	end
	t2 = CreateTrigger()
	TriggerRegisterUnitEvent(t2, uc, EVENT_UNIT_DEATH)
	TriggerAddAction(t2, ShenXingShaRen)
	if EVENT_UNIT_DAMAGED == GetTriggerEventId() == true then
		if u == GetEventDamageSource() then
			DisableTrigger(t)
			shanghai = ShangHaiGongShi(u, uc, 140.0, 190.0, shxishu, 1093677902)
			WuGongShangHai(u, uc, shanghai)
			EnableTrigger(t)
			udg_shenxingfuzhu[i] = u
			DestroyTrigger(t)
		end
	else
		udg_shenxingfuzhu[i] = u
		DestroyTrigger(t)
	end
	t = nil
	t2 = nil
	u = nil
	uc = nil
end
function ShenXingShangHai()
	local t = CreateTrigger()
	local u = GetAttacker()
	local uc = GetAttackedUnitBJ()
	udg_shenxingpoyin[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] = 0.0
	UnitRemoveAbility(GetAttacker(), 1112504171)
	if udg_shenxingfuzhu[1 + GetPlayerId(GetOwningPlayer(u))] ~= GetAttackedUnitBJ() then
		SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
		SaveUnitHandle(YDHT, GetHandleId(t), 1, uc)
		TriggerRegisterUnitEvent(t, uc, EVENT_UNIT_DAMAGED)
		TriggerRegisterTimerEventSingle(t, 1.0)
		TriggerAddCondition(t, Condition(ShenXingShangHai_1))
	end
	t = nil
	u = nil
	uc = nil
end
function IsShenXingMianShang()
	return IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource())) and GetUnitAbilityLevel(GetTriggerUnit(), 1093677902) >= 1
end
function ShenXingMianShang()
	local u = GetTriggerUnit()
	local uc = GetEventDamageSource()
	local loc = GetUnitLoc(u)
	if GetRandomInt(0, 100) < 15 * GetUnitAbilityLevel(u, 1093678929) then
		WuDi(u)
		CreateTextTagLocBJ("MISS", loc, 0, 14.0, GetRandomReal(0.0, 100), GetRandomReal(0.0, 100), GetRandomReal(0.0, 100), 0.0)
		Nw(3, bj_lastCreatedTextTag)
	end
	RemoveLocation(loc)
	loc = nil
	u = nil
	uc = nil
end
--妙手空空
function IsMiaoShouKongKong()
	return IsUnitAlly(GetAttackedUnitBJ(), GetOwningPlayer(GetAttacker())) == false and IsUnitType(GetAttackedUnitBJ(), UNIT_TYPE_STRUCTURE) == false and GetUnitAbilityLevel(GetAttacker(), 1093677903) ~= 0
end
function MiaoShouKongKong_1()
	local t = GetTriggeringTrigger()
	local u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
	local uc = LoadUnitHandle(YDHT, GetHandleId(t), 1)
	local shxishu = GetPlayerState(GetOwningPlayer(u), PLAYER_STATE_RESOURCE_GOLD)
	local shanghai = 0.0
	if EVENT_UNIT_DAMAGED == GetTriggerEventId() then
		AdjustPlayerStateBJ(5 * GetUnitLevel(uc), GetOwningPlayer(u), PLAYER_STATE_RESOURCE_GOLD)
		if GetUnitAbilityLevel(u, 1093677902) ~= 0 then
			AdjustPlayerStateBJ(5 * GetUnitLevel(uc), GetOwningPlayer(u), PLAYER_STATE_RESOURCE_GOLD)
		end
		if UnitHaveItem(udg_hero[1 + GetPlayerId(GetOwningPlayer(u))], 1227897178) then
			AdjustPlayerStateBJ(5 * GetUnitLevel(uc), GetOwningPlayer(u), PLAYER_STATE_RESOURCE_GOLD)
			shxishu = shxishu * 2
		end
		if GetUnitAbilityLevel(u, 1093677905) ~= 0 then
			DisableTrigger(t)
			shanghai = ShangHaiGongShi(u, uc, 0.001, 0.002, shxishu, 1093677903)
			WuGongShangHai(u, uc, shanghai)
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl", uc, "overhead"))
			EnableTrigger(t)
		end
		if GetUnitAbilityLevel(u, 1395666994) ~= 0 and GetRandomInt(1, 100) <= 15 then
			AdjustPlayerStateBJ(2, GetOwningPlayer(u), PLAYER_STATE_RESOURCE_LUMBER)
		end
		udg_miaoshoufuzhu[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] = u
		DestroyTrigger(t)
	else
		udg_miaoshoufuzhu[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] = u
		DestroyTrigger(t)
	end
	t = nil
	u = nil
	uc = nil
end
function MiaoShouKongKong()
	local t = CreateTrigger()
	local u = GetAttacker()
	if udg_miaoshoufuzhu[1 + GetPlayerId(GetOwningPlayer(GetAttacker()))] ~= GetAttackedUnitBJ() then
		SaveUnitHandle(YDHT, GetHandleId(t), 0, udg_hero[1 + GetPlayerId(GetOwningPlayer(u))])
		SaveUnitHandle(YDHT, GetHandleId(t), 1, GetAttackedUnitBJ())
		TriggerRegisterUnitEvent(t, GetAttackedUnitBJ(), EVENT_UNIT_DAMAGED)
		TriggerRegisterTimerEventSingle(t, 1.0)
		TriggerAddCondition(t, Condition(MiaoShouKongKong_1))
	end
	t = nil
end
--龟息功
function IsGuiXiGong()
	return GetUnitAbilityLevel(GetTriggerUnit(), 1093681989) ~= 0 and GetEventDamage() >= GetWidgetLife(GetTriggerUnit())
end
--function GuiXiGong_1 takes nothing returns nothing
--	local timer t = GetExpiredTimer()
--	local unit u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
--	local integer j = LoadInteger(YDHT, GetHandleId(t), 1)
--	if j <=10 then
--endfunction
function GuiXiXianTian_Condition()
	return IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) and IsUnitAliveBJ(GetFilterUnit())
end
function GuiXiXianTian_Action()
	local uc = GetEnumUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	local loc = GetUnitLoc(uc)
	shanghai = ShangHaiGongShi(GetTriggerUnit(), uc, 800, 320, shxishu, 1093681992)
	WuGongShangHai(GetTriggerUnit(), uc, shanghai)
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093678934) >= 1 then
		shxishu = shxishu + 1.0
	end
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093678672) >= 1 then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
		UnitAddAbility(bj_lastCreatedUnit, 1093678412)
		IssueTargetOrderById(bj_lastCreatedUnit, 852095, uc)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 2.0)
		ShowUnitHide(bj_lastCreatedUnit)
		CreateTextTagLocBJ("封穴", loc, 0, 12.0, 65.0, 55.0, 42.0, 0)
		Nw(3.0, bj_lastCreatedTextTag)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, 90)
	end
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093678927) >= 1 then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(GetTriggerUnit()), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093682246)
		IssueTargetOrderById(bj_lastCreatedUnit, 852066, GetTriggerUnit())
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 3.0)
	end
	RemoveLocation(loc)
	loc = nil
	uc = nil
end
function GuiXiGong()
	local u = GetTriggerUnit()
	local g = CreateGroup()
	local loc = GetUnitLoc(u)
	local range = 800.0
	--local timer t = null
	if GetUnitState(u, UNIT_STATE_LIFE) >= 0.99 * GetUnitState(u, UNIT_STATE_MAX_LIFE) or GetRandomReal(1, 100) <= 40 or GetRandomReal(1, 100) <= 40 and GetUnitAbilityLevel(u, 1093682254) ~= 0 then
		WuDi(u)
		SetWidgetLife(u, 1.0)
		if GetUnitAbilityLevel(u, 1093681992) ~= 0 then
			if GetUnitAbilityLevel(u, 1093678935) >= 0 then
				range = range + 700
			end
			GroupEnumUnitsInRangeOfLoc(g, loc, range, Condition(GuiXiXianTian_Condition))
			ForGroupBJ(g, GuiXiXianTian_Action)
		end
		if GetUnitAbilityLevel(u, 1093679152) ~= 0 then
			guixihuixie[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = 20.0
			YDWEPolledWaitNull(2.0)
			guixihuixie[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = 0.0
		end
	end
	GroupClear(g)
	RemoveLocation(loc)
	loc = nil
	g = nil
	u = nil
--set t = null
end
function GuiXiJiaFang()
	local i = 1
	i = 1
	for _ in _loop_() do
		if i >= 6 then break end
		if GetUnitAbilityLevel(udg_hero[i], 1093681989) ~= 0 then
			if GetUnitMoveSpeed(udg_hero[i]) <= 200 then
				UnitAddAbility(udg_hero[i], 1093677907)
				UnitAddAbility(udg_hero[i], 1093677906)
			elseif GetUnitMoveSpeed(udg_hero[i]) <= 300 then
				UnitRemoveAbility(udg_hero[i], 1093677907)
				UnitAddAbility(udg_hero[i], 1093677906)
			else
				UnitRemoveAbility(udg_hero[i], 1093677906)
				UnitRemoveAbility(udg_hero[i], 1093677907)
			end
		end
		i = i + 1
	end
	return false
end
--须弥山掌
function IsXuMiKai()
	return GetIssuedOrderId() == 852055 and GetUnitAbilityLevel(GetTriggerUnit(), 1093677908) >= 1
end
--开启须弥山掌
function XuMiKai()
	local u = GetTriggerUnit()
	local level = GetUnitAbilityLevel(u, 1093677908)
	UnitAddAbility(u, 1093682242)
	if GetUnitAbilityLevel(u, 1093679428) >= 1 then
		SetUnitAbilityLevel(u, 1093682242, level + 1)
	else
		SetUnitAbilityLevel(u, 1093682242, level)
	end
	u = nil
end
--关闭须弥山掌
function IsXuMiGuan()
	return GetIssuedOrderId() == 852056 and GetUnitAbilityLevel(GetTriggerUnit(), 1093677908) >= 1
end
function XuMiGuan()
	local u = GetTriggerUnit()
	UnitRemoveAbility(u, 1093682242)
	u = nil
end
--夫妻刀法
function IsYuanYangDaoFa()
	return GetSpellAbilityId() == 1093678166
end
function YuanYangDaoFa()
	local u = GetTriggerUnit()
	local l__ut = GetSpellTargetUnit()
	local loc = GetUnitLoc(u)
	local loc2 = GetUnitLoc(l__ut)
	local time = 0.5
	local i = 1 + GetPlayerId(GetOwningPlayer(u))
	local j = 1
	local lasttime = 5.0
	YDWEJumpTimer(u, AngleBetweenPoints(loc, loc2), DistanceBetweenPoints(loc, loc2), time, 0.01, 0.0)
	YDWEPolledWaitNull(time)
	UnitAddAbility(u, 1093678163)
	SetPlayerAbilityAvailableBJ(false, 1093678163, GetOwningPlayer(u))
	if IsUnitAlly(l__ut, GetOwningPlayer(u)) then
		UnitAddAbility(l__ut, 1093678163)
		SetPlayerAbilityAvailableBJ(false, 1093678163, GetOwningPlayer(l__ut))
	end
	for _ in _loop_() do
		if j > 6 then break end
		if udg_hero[i] == bd[j] then
			if ModuloInteger(j, 2) == 0 then
				if bd[j - 1] ~= nil and bd[j - 1] == l__ut then
					SetUnitAbilityLevel(u, 1093678164, 3)
					SetUnitAbilityLevel(u, 1093678165, 3)
					if IsUnitAlly(l__ut, GetOwningPlayer(u)) then
						SetUnitAbilityLevel(l__ut, 1093678164, 3)
						SetUnitAbilityLevel(l__ut, 1093678165, 3)
					end
				end
			else
				if bd[j + 1] ~= nil and bd[j + 1] == l__ut then
					SetUnitAbilityLevel(u, 1093678164, 3)
					SetUnitAbilityLevel(u, 1093678165, 3)
					if IsUnitAlly(l__ut, GetOwningPlayer(u)) then
						SetUnitAbilityLevel(l__ut, 1093678164, 3)
						SetUnitAbilityLevel(l__ut, 1093678165, 3)
					end
				end
			end
		end
		j = j + 1
	end
	if GetUnitAbilityLevel(u, 1093679428) >= 1 then
		lasttime = 10.0
	end
	YDWEPolledWaitNull(lasttime)
	UnitRemoveAbility(u, 1093678163)
	if GetUnitAbilityLevel(u, 1093678163) >= 1 then
		UnitRemoveAbility(l__ut, 1093678163)
	end
	RemoveLocation(loc)
	RemoveLocation(loc2)
	u = nil
	l__ut = nil
	loc = nil
	loc2 = nil
end
--寿木长生功
function isShouMu()
	return GetSpellAbilityId() == 1093678657
end
function shouMu()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local loc = GetUnitLoc(u)
	--马甲施放防御最大化
	CreateNUnitsAtLoc(1, 1697656880, p, loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093678678)
	IssueTargetOrderById(bj_lastCreatedUnit, 852066, u)
	--马甲施放残废
	CreateNUnitsAtLoc(1, 1697656880, p, loc, bj_UNIT_FACING)
	ShowUnitHide(bj_lastCreatedUnit)
	UnitAddAbility(bj_lastCreatedUnit, 1093678677)
	IssueTargetOrderById(bj_lastCreatedUnit, 852189, u)
end
--黄沙万里鞭法
function isHuangSha()
	return GetSpellAbilityId() == 1093678658
end
function huangSha()
	local u = GetTriggerUnit()
	local loc = GetUnitLoc(u)
	local i = 0
	local loc1 = nil
	CreateNUnitsAtLoc(1, 1697657156, GetOwningPlayer(u), loc, bj_UNIT_FACING)
	IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
	UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 10.0)
	i = 0
	for _ in _loop_() do
		if i >= 8 then break end
		loc1 = PolarProjectionBJ(loc, 200, 45 * i)
		CreateNUnitsAtLoc(1, 1697657156, GetOwningPlayer(u), loc1, bj_UNIT_FACING)
		IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 10.0)
		RemoveLocation(loc1)
		i = i + 1
	end
	i = 0
	for _ in _loop_() do
		if i >= 18 then break end
		loc1 = PolarProjectionBJ(loc, 350, 20 * i)
		CreateNUnitsAtLoc(1, 1697657156, GetOwningPlayer(u), loc1, bj_UNIT_FACING)
		IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 10.0)
		RemoveLocation(loc1)
		i = i + 1
	end
	RemoveLocation(loc)
	u = nil
	loc = nil
	loc1 = nil
end
function isHuangShaSH()
	return GetEventDamage() == 6.09 and GetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))], 1093678658) >= 1
end
function huangShaSH()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	if GetUnitAbilityLevel(u, 1093678657) >= 1 then
		shxishu = shxishu + 0.8
	end
	if GetUnitAbilityLevel(u, 1093682254) >= 1 then
		shxishu = shxishu + 0.6
	end
	shanghai = ShangHaiGongShi(u, uc, 130, 150, shxishu, 1093678658)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--珍珑棋局
--function IsZhenLongQiJu takes nothing returns boolean
--	return GetSpellAbilityId()=='A03U'
--endfunction
--function ZhenLong_Condition takes nothing returns boolean
--	return IsUnitAlly(GetFilterUnit(),Player(0)) and IsUnitAliveBJ(GetFilterUnit()) and GetFilterUnit()!=udg_hero[1] and GetFilterUnit()!=udg_hero[2] and GetFilterUnit()!=udg_hero[3] and GetFilterUnit()!=udg_hero[4] and GetFilterUnit()!=udg_hero[5]
--endfunction
--function ZhenLongQiJu_2 takes nothing returns nothing
--	local unit u = GetTriggerUnit()
--	call WuDi(u)
--	call DestroyTrigger(GetTriggeringTrigger())
--	set u = null
--endfunction
--function ZhenLong_Action takes nothing returns nothing
--	local trigger t = CreateTrigger()
--	//call BJDebugMsg("到这了吗2")
--	call YDWETimerDestroyEffect(0.5, AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Voodoo\\VoodooAuraTarget.mdl",GetEnumUnit(),"origin"))
--	call TriggerRegisterUnitEvent(t, GetEnumUnit(), EVENT_UNIT_DAMAGED)
--	call TriggerAddAction(t, function ZhenLongQiJu_2)
--	set t = null
--endfunction
--function ZhenLongQiJu_1 takes nothing returns nothing
--	local timer t = GetExpiredTimer()
--	local unit u = LoadUnitHandle(YDHT, GetHandleId(t), 0)
--	local group g = CreateGroup()
--	local integer j = LoadInteger(YDHT, GetHandleId(t), 1)
--	local location loc = GetUnitLoc(u)
--	if j < 24 then
--		//call BJDebugMsg("到这了吗1")
--		call ForGroupBJ(YDWEGetUnitsInRangeOfLocMatchingNull(600., loc, Condition(function ZhenLong_Condition)),function ZhenLong_Action)
--		call SaveInteger(YDHT, GetHandleId(t), 1, j+1)
--	else
--		call PauseTimer(t)
--		call DestroyTimer(t)
--		call FlushChildHashtable(YDHT, GetHandleId(t))
--	endif
--	call DestroyGroup(g)
--	call RemoveLocation(loc)
--	set t = null
--	set u = null
--	set g = null
--	set loc = null
--endfunction
--function ZhenLongQiJu takes nothing returns nothing
--	local unit u = GetTriggerUnit()
--	local timer t = CreateTimer()
--	call SaveUnitHandle(YDHT, GetHandleId(t), 0, u)
--	call TimerStart(t, 0.5, true, function ZhenLongQiJu_1)
--	set u = null
--	set t = null
--endfunction
--药王神篇
--擒龙控鹤
--枯荣禅功
--function IsXuMiShanZhang takes nothing returns boolean
--	return UnitHasBuffBJ(GetTriggerUnit(),'B013')
--endfunction
--function XuMiShanZhang takes nothing returns nothing
--	local real percent = 25.
--	local real damage = GetEventDamage()
--	local location loc = GetUnitLoc(GetEventDamageSource())
--	local real r = GetRandomReal(1., 10.)
--	if GetUnitAbilityLevel(GetTriggerUnit(), 'A0D8')!=0 then
--		set percent = 50.
--	endif
--	if damage>GetWidgetLife(GetTriggerUnit()) then
--		call WuDi(GetTriggerUnit())
--		call SetWidgetLife(GetTriggerUnit(), GetWidgetLife(GetTriggerUnit())-(100-percent)/100*damage)
--	else
--		call SetWidgetLife(GetTriggerUnit(), GetWidgetLife(GetTriggerUnit())+percent/100*damage)
--	endif
--	if GetUnitAbilityLevel(GetTriggerUnit(), 'A0CE')!=0 then
--		if r*damage>GetWidgetLife(GetEventDamageSource()) then
--			call WuDi(GetEventDamageSource())
--			call SetWidgetLife(GetEventDamageSource(), 1.)
--		else
--			call SetWidgetLife(GetEventDamageSource(), GetWidgetLife(GetEventDamageSource())-r*damage)
--		endif
--		call AddSpecialEffectLocBJ(loc,"Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl")
--	endif
--	call RemoveLocation(loc)
--	set loc = null
--endfunction
--事件
function QiWu_Trigger()
	local t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsHanBingZhenQi))
	TriggerAddAction(t, HanBingZhenQi)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsWuXiangShangHai))
	TriggerAddAction(t, WuXiangShangHai)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsWuXiangJieZhi))
	TriggerAddAction(t, WuXiangJieZhi)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsShenXingBaiBian))
	TriggerAddAction(t, ShenXingBaiBian)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsShenXingShangHai))
	TriggerAddAction(t, ShenXingShangHai)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsShenXingMianShang))
	TriggerAddAction(t, ShenXingMianShang)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsMiaoShouKongKong))
	TriggerAddAction(t, MiaoShouKongKong)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(IsGuiXiGong))
	TriggerAddAction(t, GuiXiGong)
	t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 0.1)
	TriggerAddCondition(t, Condition(GuiXiJiaFang))
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_ORDER)
	TriggerAddCondition(t, Condition(IsXuMiKai))
	TriggerAddAction(t, XuMiKai)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_ORDER)
	TriggerAddCondition(t, Condition(IsXuMiGuan))
	TriggerAddAction(t, XuMiGuan)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(IsYuanYangDaoFa))
	TriggerAddAction(t, YuanYangDaoFa)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(isShouMu))
	TriggerAddAction(t, shouMu)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(t, Condition(isHuangSha))
	TriggerAddAction(t, huangSha)
	t = CreateTrigger()
	YDWESyStemAnyUnitDamagedRegistTrigger(t)
	TriggerAddCondition(t, Condition(isHuangShaSH))
	TriggerAddAction(t, huangShaSH)
	--   set t=CreateTrigger()
	--call YDWESyStemAnyUnitDamagedRegistTrigger( t )
	--call TriggerAddCondition(t,Condition(function IsXuMiShanZhang))
	--   call TriggerAddAction(t,function XuMiShanZhang)
	--set t = CreateTrigger()
	--   call YDWESyStemAnyUnitDamagedRegistTrigger( t )
	--   call TriggerAddCondition(t, Condition(function IsTianGangShangHai))
	--   call TriggerAddAction(t, function TianGangShangHai)
	--   set t = CreateTrigger()
	--   call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
	--call TriggerAddCondition(t,Condition(function IsZhenLongQiJu))
	--   call TriggerAddAction(t,function ZhenLongQiJu)
	--   set t = CreateTrigger()
	--   call YDWESyStemAnyUnitDamagedRegistTrigger( t )
	--   call TriggerAddCondition(t, Condition(function IsZhenWuShangHai))
	--   call TriggerAddAction(t, function ZhenWuShangHai)
	--   set t=CreateTrigger()
	--call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
	--call TriggerAddCondition(t,Condition(function IsXueZhenFa))
	--call TriggerAddAction(t,function XueZhenFa)
	t = nil
end


--����ϵͳ
function c5()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER -- INLINED!!
end
function D5()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetItemType(UnitItemInSlotBJ(u, 1)) ~= ITEM_TYPE_ARTIFACT and GetItemType(UnitItemInSlotBJ(u, 2)) ~= ITEM_TYPE_ARTIFACT and GetItemType(UnitItemInSlotBJ(u, 3)) ~= ITEM_TYPE_ARTIFACT and GetItemType(UnitItemInSlotBJ(u, 4)) ~= ITEM_TYPE_ARTIFACT and GetItemType(UnitItemInSlotBJ(u, 5)) ~= ITEM_TYPE_ARTIFACT and GetItemType(UnitItemInSlotBJ(u, 6)) ~= ITEM_TYPE_ARTIFACT then
		SetUnitPosition(u, -10510, -9660)
		PanCameraToTimedForPlayer(p, -10510, -9660, 0)
	else
		DisplayTextToPlayer(p, 0, 0, "|CFF34FF00������ܣ������ˣ����ɱ��̫���ˣ�����������Ե��")
	end
	u = nil
	p = nil
end
function XiuWei(u, num, id, s)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if wugongxiuwei[i] >= num then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000���Ѿ���������Ϊ��")
	elseif wugongxiuwei[i] < num - 1 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000�㻹��Ҫ�����һ����Ϊ")
	elseif xiuxing[i] < num or UnitHaveItem(u, id) == false then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000��������")
	else
		RemoveItem(FetchUnitItem(u, id))
		udg_shanghaijiacheng[i] = udg_shanghaijiacheng[i] + 0.05
		wugongxiuwei[i] = num
		DisplayTextToPlayer(p, 0, 0, "|cFF00FF00���гɹ�����ѧ��Ϊ�ﵽ��" .. (s or "") .. "�㣬�书����5%")
	end
	p = nil
end
function F5()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896136 -- INLINED!!
end
function G5()
	XiuWei(GetTriggerUnit(), 1, 1227895116, "һ")
end
function I5()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896137 -- INLINED!!
end
function l5()
	XiuWei(GetTriggerUnit(), 2, 1227895094, "��")
end
function K5()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896135 -- INLINED!!
end
function L5()
	XiuWei(GetTriggerUnit(), 3, 1227895091, "��")
end
function N5()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896134 -- INLINED!!
end
function O5()
	XiuWei(GetTriggerUnit(), 4, 1227895379, "��")
end
function Q5()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil and GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896138 -- INLINED!!
end
function R5()
	XiuWei(GetTriggerUnit(), 5, 1227894864, "��")
end
function LingWuJY_Conditions()
	return GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER and GetItemTypeId(GetManipulatedItem()) == 1227896914
end
function LingWuJY()
	local t = GetTriggeringTrigger()
	local id = GetHandleId(t)
	local cx = LoadInteger(YDHT, id, -807506826)
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	cx = cx + 3
	SaveInteger(YDHT, id, -807506826, cx)
	SaveInteger(YDHT, id, -320330265, cx)
	SaveInteger(YDHT, id * cx, -1587459251, i)
	SaveUnitHandle(YDHT, id * cx, -784714656, u)
	if IsUnitType(u, UNIT_TYPE_HERO) ~= nil == false then -- INLINED!!
		AdjustPlayerStateBJ(5, p, PLAYER_STATE_RESOURCE_LUMBER)
		DisplayTextToPlayer(Player(-1 + i), 0, 0, "|cFFFF0000��Ҫ���ǲ�������")
	else
		if wugongxiuwei[i] < 1 then
			AdjustPlayerStateBJ(5, p, PLAYER_STATE_RESOURCE_LUMBER)
			DisplayTextToPlayer(Player(-1 + i), 0, 0, "|cFFFF0000����书��Ϊ����")
		else
			if yd[i] == 1 then
				wuxing[i] = wuxing[i] - xd[i]
			elseif yd[i] == 2 then
				gengu[i] = gengu[i] - xd[i]
			elseif yd[i] == 3 then
				danpo[i] = danpo[i] - xd[i]
			elseif yd[i] == 4 then
				yishu[i] = yishu[i] - xd[i]
			elseif yd[i] == 5 then
				fuyuan[i] = fuyuan[i] - xd[i]
			elseif yd[i] == 6 then
				jingmai[i] = jingmai[i] - xd[i]
			end
			if wugongxiuwei[i] == 1 then
				xd[i] = GetRandomInt(xd[i], 2)
			elseif wugongxiuwei[i] == 2 then
				xd[i] = GetRandomInt(xd[i], 4)
			elseif wugongxiuwei[i] == 3 then
				xd[i] = GetRandomInt(xd[i], 6)
			elseif wugongxiuwei[i] == 4 then
				xd[i] = GetRandomInt(xd[i], 8)
			elseif wugongxiuwei[i] == 5 then
				xd[i] = GetRandomInt(xd[i], 10)
			end
			yd[i] = 0
			DisplayTimedTextToPlayer(Player(-1 + i), 0, 0, 20.0, "|cff00ff00��ϲ���򵽵�" .. (I2S(xd[i]) or "") .. "�㽣��")
			DisplayTimedTextToPlayer(Player(-1 + i), 0, 0, 20.0, "|cffffff00����������Ϣ��jy�����԰ѽ���ת��Ϊһ���Ը����ԣ�����ÿ��ת����Ҫ����5����ϡ��")
			if xd[i] == 2 then
				DestroyEffect(vd[i])
				AddSpecialEffectTargetUnitBJ("chest", u, "war3mapImported\\fairywing.MDX")
				vd[i] = bj_lastCreatedEffect
			elseif xd[i] == 4 then
				DestroyEffect(vd[i])
				AddSpecialEffectTargetUnitBJ("chest", u, "war3mapImported\\fenlie.MDX")
				vd[i] = bj_lastCreatedEffect
			elseif xd[i] == 6 then
				DestroyEffect(vd[i])
				AddSpecialEffectTargetUnitBJ("chest", u, "war3mapImported\\HeroByakuyaWing.MDX")
				vd[i] = bj_lastCreatedEffect
			elseif xd[i] == 8 then
				DestroyEffect(vd[i])
				AddSpecialEffectTargetUnitBJ("chest", u, "war3mapImported\\AWING.MDX")
				vd[i] = bj_lastCreatedEffect
			elseif xd[i] == 10 then
				DestroyEffect(vd[i])
				AddSpecialEffectTargetUnitBJ("chest", u, "war3mapImported\\FWIND.MDX")
				vd[i] = bj_lastCreatedEffect
			end
		end
	end
	FlushChildHashtable(YDHT, id * cx)
	t = nil
	u = nil
	p = nil
end
--ת������
function ZhuanHuaJY_Conditions()
	return Ad[1 + GetPlayerId(GetTriggerPlayer())]
end
function ZhuanHuaJY()
	local p = GetTriggerPlayer()
	local i = 1 + GetPlayerId(p)
	Ad[i] = false
	if GetClickedButton() == B8[i] then
		DialogClear(v8[i])
	else
		if yd[i] == 1 then
			wuxing[i] = wuxing[i] - xd[i]
		elseif yd[i] == 2 then
			gengu[i] = gengu[i] - xd[i]
		elseif yd[i] == 3 then
			danpo[i] = danpo[i] - xd[i]
		elseif yd[i] == 4 then
			yishu[i] = yishu[i] - xd[i]
		elseif yd[i] == 5 then
			fuyuan[i] = fuyuan[i] - xd[i]
		elseif yd[i] == 6 then
			jingmai[i] = jingmai[i] - xd[i]
		end
		if GetClickedButton() == w8[i] then
			gengu[i] = gengu[i] + xd[i]
			yd[i] = 2
		elseif GetClickedButton() == y8[i] then
			wuxing[i] = wuxing[i] + xd[i]
			yd[i] = 1
		elseif GetClickedButton() == z8[i] then
			fuyuan[i] = fuyuan[i] + xd[i]
			yd[i] = 5
		elseif GetClickedButton() == A8[i] then
			danpo[i] = danpo[i] + xd[i]
			yd[i] = 3
		elseif GetClickedButton() == a8[i] then
			yishu[i] = yishu[i] + xd[i]
			yd[i] = 4
		elseif GetClickedButton() == x8[i] then
			jingmai[i] = jingmai[i] + xd[i]
			yd[i] = 6
		end
		AdjustPlayerStateBJ(-5, p, PLAYER_STATE_RESOURCE_LUMBER)
		DisplayTextToPlayer(p, 0, 0, "|cFF99FFCCת���ɹ�|r")
		DialogClear(v8[i])
	end
	p = nil
end
function JianYi_Trigger()
	local t = nil
	-- ���뽣��ϵͳ
	t = CreateTrigger()
	TriggerAddRect(t, Sg)
	TriggerAddCondition(t, Condition(c5))
	TriggerAddAction(t, D5)

	-- �ﵽ�ڼ�����Ϊ
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(F5))
	TriggerAddAction(t, G5)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(I5))
	TriggerAddAction(t, l5)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(K5))
	TriggerAddAction(t, L5)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(N5))
	TriggerAddAction(t, O5)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(Q5))
	TriggerAddAction(t, R5)
	-- ������
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(LingWuJY_Conditions))
	TriggerAddAction(t, LingWuJY)
	-- ѡ��ת������
	t = CreateTrigger()
	TriggerRegisterDialogEvent(t, v8[1])
	TriggerRegisterDialogEvent(t, v8[2])
	TriggerRegisterDialogEvent(t, v8[3])
	TriggerRegisterDialogEvent(t, v8[4])
	TriggerRegisterDialogEvent(t, v8[5])
	TriggerAddCondition(t, Condition(ZhuanHuaJY_Conditions))
	TriggerAddAction(t, ZhuanHuaJY)
	t = nil
end
--===========================================================
--决战江湖1.6之圣兽来了
--===========================================================
function qinglongjie_condition()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if udg_qlover == true then
		return false
	end
	if udg_ql == true or IsUnitType(u, UNIT_TYPE_HERO) == false then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000青龙圣兽正在安睡")
		u = nil
		p = nil
		return false
	end
	u = nil
	p = nil
	return true
end
function qinglongjie()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if fuyuan[i] < 30 or GetRandomInt(1, 3) ~= 1 then
		udg_ql = true
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000汝等凡夫俗子与圣兽无缘")
		YDWEPolledWaitNull(2.0)
		udg_ql = false
	elseif fuyuan[i] >= 40 and GetRandomInt(1, 5) == 1 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000少侠为有缘人，青龙圣兽愿助尔一臂之力")
		UnitRemoveAbility(udg_qinglong, 1098282348)
		SetUnitOwner(udg_qinglong, p, true)
		ShowUnitShow(udg_qinglong)
		udg_qlover = true
	else
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000青龙圣兽现世，你能打败它吗？")
		UnitRemoveAbility(udg_qinglong, 1098282348)
		SetUnitOwner(udg_qinglong, Player(12), true)
		ShowUnitShow(udg_qinglong)
		udg_qlover = true
	end
	u = nil
	p = nil
end
function baihujie_condition()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if udg_bhover == true then
		return false
	end
	if udg_bh == true or IsUnitType(u, UNIT_TYPE_HERO) == false then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000白虎圣兽正在安睡")
		u = nil
		p = nil
		return false
	end
	u = nil
	p = nil
	return true
end
function baihujie()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if fuyuan[i] < 20 or GetRandomInt(1, 3) ~= 1 then
		udg_bh = true
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000汝等凡夫俗子与圣兽无缘")
		YDWEPolledWaitNull(2.0)
		udg_bh = false
	elseif fuyuan[i] >= 30 and GetRandomInt(1, 5) == 1 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000少侠为有缘人，白虎圣兽愿助尔一臂之力")
		UnitRemoveAbility(udg_baihu, 1098282348)
		SetUnitOwner(udg_baihu, p, true)
		ShowUnitShow(udg_baihu)
		udg_bhover = true
	else
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000白虎圣兽现世，你能打败它吗？")
		UnitRemoveAbility(udg_baihu, 1098282348)
		SetUnitOwner(udg_baihu, Player(12), true)
		ShowUnitShow(udg_baihu)
		udg_bhover = true
	end
	u = nil
	p = nil
end
function xuanwujie_condition()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if udg_xwover == true then
		return false
	end
	if udg_xw == true or IsUnitType(u, UNIT_TYPE_HERO) == false then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000玄武圣兽正在安睡")
		u = nil
		p = nil
		return false
	end
	u = nil
	p = nil
	return true
end
function xuanwujie()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if fuyuan[i] < 15 or GetRandomInt(1, 3) ~= 1 then
		udg_xw = true
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000汝等凡夫俗子与圣兽无缘")
		YDWEPolledWaitNull(2.0)
		udg_xw = false
	elseif fuyuan[i] >= 25 and GetRandomInt(1, 5) == 1 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000少侠为有缘人，玄武圣兽愿助尔一臂之力")
		UnitRemoveAbility(udg_xuanwu, 1098282348)
		SetUnitOwner(udg_xuanwu, p, true)
		ShowUnitShow(udg_xuanwu)
		udg_xwover = true
	else
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000玄武圣兽现世，你能打败它吗？")
		UnitRemoveAbility(udg_xuanwu, 1098282348)
		SetUnitOwner(udg_xuanwu, Player(12), true)
		ShowUnitShow(udg_xuanwu)
		udg_xwover = true
	end
	u = nil
	p = nil
end
function zhuquejie_condition()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if udg_zqover == true then
		return false
	end
	if udg_zq == true or IsUnitType(u, UNIT_TYPE_HERO) == false then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000朱雀圣兽正在安睡")
		u = nil
		p = nil
		return false
	end
	u = nil
	p = nil
	return true
end
function zhuquejie()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if fuyuan[i] < 25 or GetRandomInt(1, 3) ~= 1 then
		udg_zq = true
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000汝等凡夫俗子与圣兽无缘")
		YDWEPolledWaitNull(2.0)
		udg_zq = false
	elseif fuyuan[i] >= 35 and GetRandomInt(1, 5) == 1 then
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000少侠为有缘人，朱雀圣兽愿助尔一臂之力")
		UnitRemoveAbility(udg_zhuque, 1098282348)
		SetUnitOwner(udg_zhuque, p, true)
		ShowUnitShow(udg_zhuque)
		udg_zqover = true
	else
		DisplayTextToPlayer(p, 0, 0, "|cFFFF0000朱雀圣兽现世，你能打败它吗？")
		UnitRemoveAbility(udg_zhuque, 1098282348)
		SetUnitOwner(udg_zhuque, Player(12), true)
		ShowUnitShow(udg_zhuque)
		udg_zqover = true
	end
	u = nil
	p = nil
end
function IsMonsterAttack()
	return IsUnitEnemy(GetAttackedUnitBJ(), GetOwningPlayer(GetAttacker())) and IsUnitType(GetAttackedUnitBJ(), UNIT_TYPE_STRUCTURE) == false
end
function MonsterAttack()
	local u = GetAttacker()
	local loc = GetUnitLoc(u)
	--龙之分身：每次攻击有20%概率创造一个分身，持续5秒，分身可继承分身。
	if GetRandomInt(1, 100) <= 20 and GetUnitAbilityLevel(u, 1395666996) ~= 0 and u == udg_qinglong then
		CreateNUnitsAtLoc(1, 1697656880, GetOwningPlayer(u), loc, bj_UNIT_FACING)
		ShowUnitHide(bj_lastCreatedUnit)
		UnitAddAbility(bj_lastCreatedUnit, 1093678403)
		UnitApplyTimedLife(bj_lastCreatedUnit, 1112045413, 3.0)
		IssueTargetOrderById(bj_lastCreatedUnit, 852274, u)
		CreateTextTagLocBJ("龙之分身", loc, 0, 14.0, 90.0, 21.0, 15.0, 0.0)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
		Nw(4.0, bj_lastCreatedTextTag)
	end
	--圣兽之击：1%概率击杀攻击者
	if GetRandomInt(1, 100) == 1 and GetUnitAbilityLevel(GetAttacker(), 1093678149) ~= 0 then
		KillUnit(GetAttackedUnitBJ())
		CreateTextTagLocBJ("圣兽之击", loc, 0, 14.0, 90.0, 21.0, 15.0, 0.0)
		SetTextTagVelocityBJ(bj_lastCreatedTextTag, 100.0, GetRandomReal(80.0, 100.0))
		Nw(4.0, bj_lastCreatedTextTag)
	end
end
--青龙逆鳞：血量低于50%后攻速加快
--@id 'A05D' 加速手套：1级攻速0%，逐级递增50%
function QingLongNiLin()
	if GetUnitLifePercent(udg_qinglong) <= 50.0 then
		SetUnitAbilityLevel(udg_qinglong, 1093678404, 70 - R2I(GetUnitLifePercent(udg_qinglong)) // 10)
	else
		SetUnitAbilityLevel(udg_qinglong, 1093678404, 1)
	end
end
--挑战四圣兽团队副本
function IsTiaoZhanSiShengShou()
	return IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) and xiuxing[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] >= 6 and (GetItemTypeId(GetManipulatedItem()) == 1227899724 or GetItemTypeId(GetManipulatedItem()) == 1227899725 or GetItemTypeId(GetManipulatedItem()) == 1227899726 or GetItemTypeId(GetManipulatedItem()) == 1227899727)
end
--挑战四圣是否成功
function IsSiShengChallengeSuccess()
	local t = LoadTimerHandle(YDHT, GetHandleId(GetTriggeringTrigger()), 0)
	local tmd = LoadTimerDialogHandle(YDHT, GetHandleId(GetTriggeringTrigger()), 1)
	local u = LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()), 2)
	local name = LoadStr(YDHT, GetHandleId(GetTriggeringTrigger()), 3)
	local loc = GetUnitLoc(u)
	if EVENT_PLAYER_UNIT_DEATH == GetTriggerEventId() == false then
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFFF00玩家在十分钟之内挑战" .. (name or "") .. "圣兽失败，" .. (name or "") .. "圣兽将进攻基地")
		SetUnitPositionLocFacingLocBJ(u, v7[GetRandomInt(5, 7)], v7[4])
		SetUnitOwner(u, Player(6), true)
		SetUnitLifePercentBJ(u, 100.0)
		GroupAddUnit(w7, u)
		IssuePointOrderByIdLoc(u, 851983, v7[4])
		PauseTimer(t)
		DestroyTimer(t)
		DestroyTimerDialog(tmd)
		DestroyTrigger(GetTriggeringTrigger())
	else
		if GetTriggerUnit() == u then
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFFF00恭喜成功打败" .. (name or "") .. "圣兽！！")
			CreateItemLoc(1227899728, loc)
			--call CreateItemLoc('I0CQ', loc)
			if GetRandomInt(1, 100) <= 20 then
				CreateItemLoc(1227899729, loc)
			end
			PauseTimer(t)
			DestroyTimer(t)
			DestroyTimerDialog(tmd)
			DestroyTrigger(GetTriggeringTrigger())
		end
	end
	RemoveLocation(loc)
	loc = nil
	t = nil
	return false
end
function ChallengeSiSheng(item_id, unit_id, unit_name, it)
	local loc = Location(1000, -10750)
	local j = 0
	local t = CreateTrigger()
	local tm = CreateTimer()
	local tmd = CreateTimerDialog(tm)
	if GetItemTypeId(it) == item_id then
		CreateNUnitsAtLoc(1, unit_id, Player(12), loc, bj_UNIT_FACING)
		SaveUnitHandle(YDHT, GetHandleId(t), 2, bj_lastCreatedUnit)
		SaveStr(YDHT, GetHandleId(t), 3, unit_name)
		x7 = x7 + 10 --停怪10分钟
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFFFF00有玩家作死挑战" .. (unit_name or "") .. "圣兽，下波怪进攻前将停怪10分钟，请在10分钟内杀死" .. (unit_name or "") .. "圣兽，否则10分钟后它将进攻基地！！！")
		if unit_id == 1865429316 then
			udg_qinglong = bj_lastCreatedUnit
		elseif unit_id == 1865429317 then
			udg_baihu = bj_lastCreatedUnit
		elseif unit_id == 1865429318 then
			udg_xuanwu = bj_lastCreatedUnit
		elseif unit_id == 1865429319 then
			udg_zhuque = bj_lastCreatedUnit
		end
		--集体传送过去
		j = 1
		for _ in _loop_() do
			if j > GetNumPlayer() then break end
			SetUnitPosition(udg_hero[j], 2000, -10750)
			PanCameraToTimedForPlayer(Player(j - 1), 2000, -10750, 0)
			j = j + 1
		end
		StartTimerBJ(tm, false, 600)
		TimerDialogDisplay(tmd, true)
		SaveTimerHandle(YDHT, GetHandleId(t), 0, tm)
		SaveTimerDialogHandle(YDHT, GetHandleId(t), 1, tmd)
		TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
		TriggerRegisterTimerExpireEvent(t, tm)
		TriggerAddCondition(t, Condition(IsSiShengChallengeSuccess))
	end
	RemoveLocation(loc)
	loc = nil
	t = nil
	tmd = nil
	tm = nil
end
function TiaoZhanSiShengShou()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	if GetNumPlayer() < 2 then
		--if GetNumPlayer() < 2 then
		DisplayTimedTextToPlayer(p, 0, 0, 15, "|cFFFFFF00游戏人数不少于2人方可使用团队副本")
		AdjustPlayerStateBJ(50000, p, PLAYER_STATE_RESOURCE_GOLD)
	else
		ChallengeSiSheng(1227899726, 1865429316, "青龙", GetManipulatedItem())
		ChallengeSiSheng(1227899725, 1865429317, "白虎", GetManipulatedItem())
		ChallengeSiSheng(1227899727, 1865429318, "玄武", GetManipulatedItem())
		ChallengeSiSheng(1227899724, 1865429319, "朱雀", GetManipulatedItem())
	end
	u = nil
	p = nil
end
--捡起青龙之戒
function IsPickUpQingLong()
	return GetItemTypeId(GetManipulatedItem()) == 1227899729 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function PickUpQingLong()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local it = GetManipulatedItem()
	for _ in _loop_() do
		if E8 > 6 then break end
		if GetItemTypeId(UnitItemInSlotBJ(u, E8)) == GetItemTypeId(GetManipulatedItem()) and UnitItemInSlotBJ(u, E8) ~= GetManipulatedItem() then
			UnitRemoveItemSwapped(UnitItemInSlotBJ(u, E8), u)
			DisplayTimedTextToPlayer(p, 0, 0, 30, "|cffff0000只能携带一个青龙之戒")
		end
		E8 = E8 + 1
	end
	ModifyHeroStat(0, u, 0, LoadInteger(YDHT, GetHandleId(it), StringHash("招式伤害")))
	ModifyHeroStat(1, u, 0, LoadInteger(YDHT, GetHandleId(it), StringHash("内力")))
	ModifyHeroStat(2, u, 0, LoadInteger(YDHT, GetHandleId(it), StringHash("真实伤害")))
	gengu[i] = gengu[i] + LoadInteger(YDHT, GetHandleId(it), StringHash("根骨"))
	wuxing[i] = wuxing[i] + LoadInteger(YDHT, GetHandleId(it), StringHash("悟性"))
	jingmai[i] = jingmai[i] + LoadInteger(YDHT, GetHandleId(it), StringHash("经脉"))
	fuyuan[i] = fuyuan[i] + LoadInteger(YDHT, GetHandleId(it), StringHash("福缘"))
	danpo[i] = danpo[i] + LoadInteger(YDHT, GetHandleId(it), StringHash("胆魄"))
	yishu[i] = yishu[i] + LoadInteger(YDHT, GetHandleId(it), StringHash("医术"))
	udg_baojishanghai[i] = udg_baojishanghai[i] + I2R(LoadInteger(YDHT, GetHandleId(it), StringHash("暴击伤害"))) / 100.0
	juexuelingwu[i] = juexuelingwu[i] + LoadInteger(YDHT, GetHandleId(it), StringHash("绝学领悟"))
	u = nil
	p = nil
	it = nil
end
--扔下青龙之戒
function IsDropQingLong()
	return GetItemTypeId(GetManipulatedItem()) == 1227899729 and IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) ~= nil -- INLINED!!
end
function DropQingLong()
	local u = GetTriggerUnit()
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local it = GetManipulatedItem()
	ModifyHeroStat(0, u, 1, LoadInteger(YDHT, GetHandleId(it), StringHash("招式伤害")))
	ModifyHeroStat(1, u, 1, LoadInteger(YDHT, GetHandleId(it), StringHash("内力")))
	ModifyHeroStat(2, u, 1, LoadInteger(YDHT, GetHandleId(it), StringHash("真实伤害")))
	gengu[i] = gengu[i] - LoadInteger(YDHT, GetHandleId(it), StringHash("根骨"))
	wuxing[i] = wuxing[i] - LoadInteger(YDHT, GetHandleId(it), StringHash("悟性"))
	jingmai[i] = jingmai[i] - LoadInteger(YDHT, GetHandleId(it), StringHash("经脉"))
	fuyuan[i] = fuyuan[i] - LoadInteger(YDHT, GetHandleId(it), StringHash("福缘"))
	danpo[i] = danpo[i] - LoadInteger(YDHT, GetHandleId(it), StringHash("胆魄"))
	yishu[i] = yishu[i] - LoadInteger(YDHT, GetHandleId(it), StringHash("医术"))
	udg_baojishanghai[i] = udg_baojishanghai[i] - I2R(LoadInteger(YDHT, GetHandleId(it), StringHash("暴击伤害"))) / 100.0
	juexuelingwu[i] = juexuelingwu[i] - LoadInteger(YDHT, GetHandleId(it), StringHash("绝学领悟"))
	u = nil
	p = nil
	it = nil
end
--青龙戒成长
function IsQingLongGrowup()
	return UnitHaveItem(GetKillingUnit(), 1227899729)
end
function QingLongGrowup()
	local u = GetKillingUnit()
	local it = FetchUnitItem(u, 1227899729)
	local p = GetOwningPlayer(u)
	local i = 1 + GetPlayerId(p)
	local j = 0
	SaveInteger(YDHT, GetHandleId(it), StringHash("杀人数"), LoadInteger(YDHT, GetHandleId(it), StringHash("杀人数")) + 1)
	if LoadInteger(YDHT, GetHandleId(it), StringHash("杀人数")) >= 10000 then
		SaveInteger(YDHT, GetHandleId(it), StringHash("杀人数"), 0)
		if GetRandomInt(1, 11) == 1 then
			j = GetRandomInt(1, 2)
			wuxing[i] = wuxing[i] + j
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00青龙之戒获得属性成长：悟性+" .. (I2S(j) or ""))
			SaveInteger(YDHT, GetHandleId(it), StringHash("悟性"), LoadInteger(YDHT, GetHandleId(it), StringHash("悟性")) + j)
		elseif GetRandomInt(1, 10) == 1 then
			j = GetRandomInt(1, 2)
			gengu[i] = gengu[i] + j
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00青龙之戒获得属性成长：根骨+" .. (I2S(j) or ""))
			SaveInteger(YDHT, GetHandleId(it), StringHash("根骨"), LoadInteger(YDHT, GetHandleId(it), StringHash("根骨")) + j)
		elseif GetRandomInt(1, 9) == 1 then
			j = GetRandomInt(1, 2)
			danpo[i] = danpo[i] + j
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00青龙之戒获得属性成长：胆魄+" .. (I2S(j) or ""))
			SaveInteger(YDHT, GetHandleId(it), StringHash("胆魄"), LoadInteger(YDHT, GetHandleId(it), StringHash("胆魄")) + j)
		elseif GetRandomInt(1, 8) == 1 then
			j = GetRandomInt(1, 2)
			yishu[i] = yishu[i] + j
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00青龙之戒获得属性成长：医术+" .. (I2S(j) or ""))
			SaveInteger(YDHT, GetHandleId(it), StringHash("医术"), LoadInteger(YDHT, GetHandleId(it), StringHash("医术")) + j)
		elseif GetRandomInt(1, 7) == 1 then
			j = GetRandomInt(1, 2)
			jingmai[i] = jingmai[i] + j
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00青龙之戒获得属性成长：经脉+" .. (I2S(j) or ""))
			SaveInteger(YDHT, GetHandleId(it), StringHash("经脉"), LoadInteger(YDHT, GetHandleId(it), StringHash("经脉")) + j)
		elseif GetRandomInt(1, 6) == 1 then
			j = GetRandomInt(1, 2)
			fuyuan[i] = fuyuan[i] + j
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00青龙之戒获得属性成长：福缘+" .. (I2S(j) or ""))
			SaveInteger(YDHT, GetHandleId(it), StringHash("福缘"), LoadInteger(YDHT, GetHandleId(it), StringHash("福缘")) + j)
		elseif GetRandomInt(1, 5) == 1 then
			j = GetRandomInt(1, 50)
			ModifyHeroStat(0, u, 0, j)
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00青龙之戒获得属性成长：招式伤害+" .. (I2S(j) or ""))
			SaveInteger(YDHT, GetHandleId(it), StringHash("招式伤害"), LoadInteger(YDHT, GetHandleId(it), StringHash("招式伤害")) + j)
		elseif GetRandomInt(1, 4) == 1 then
			j = GetRandomInt(1, 50)
			ModifyHeroStat(1, u, 0, j)
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00青龙之戒获得属性成长：内力+" .. (I2S(j) or ""))
			SaveInteger(YDHT, GetHandleId(it), StringHash("内力"), LoadInteger(YDHT, GetHandleId(it), StringHash("内力")) + j)
		elseif GetRandomInt(1, 3) == 1 then
			j = GetRandomInt(1, 50)
			ModifyHeroStat(2, u, 0, j)
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00青龙之戒获得属性成长：真实伤害+" .. (I2S(j) or ""))
			SaveInteger(YDHT, GetHandleId(it), StringHash("真实伤害"), LoadInteger(YDHT, GetHandleId(it), StringHash("真实伤害")) + j)
		elseif GetRandomInt(1, 2) == 1 then
			j = 1
			juexuelingwu[i] = juexuelingwu[i] + j
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00青龙之戒获得属性成长：绝学领悟力+" .. (I2S(j) or ""))
			SaveInteger(YDHT, GetHandleId(it), StringHash("绝学领悟"), LoadInteger(YDHT, GetHandleId(it), StringHash("绝学领悟")) + j)
		else
			j = GetRandomInt(1, 10)
			udg_baojishanghai[i] = udg_baojishanghai[i] + R2I(j) // 100
			DisplayTextToPlayer(p, 0, 0, "|cff00ff00青龙之戒获得属性成长：暴击伤害+" .. (I2S(j) or "") .. "%")
			SaveInteger(YDHT, GetHandleId(it), StringHash("暴击伤害"), LoadInteger(YDHT, GetHandleId(it), StringHash("暴击伤害")) + j)
		end
	end
	u = nil
	it = nil
end
function MonsterCome()
	local t = CreateTrigger()
	--set udg_qinglong=CreateUnit(Player(15),'o01D',920.,-10149.,276.63)
	--set udg_baihu=CreateUnit(Player(15),'o01E',1850.1,-10171.1,270.564)
	--set udg_xuanwu=CreateUnit(Player(15),'o01F',947.7,-11312.4,93.469)
	--set udg_zhuque=CreateUnit(Player(15),'o01G',1816.8,-11288.6,96.447)
	--call ShowUnitHide(udg_qinglong)
	--call ShowUnitHide(udg_baihu)
	--call ShowUnitHide(udg_xuanwu)
	--call ShowUnitHide(udg_zhuque)
	--call TriggerRegisterUnitInRangeSimple(t,256,udg_qinglong)
	--call TriggerAddCondition(t,Condition(function qinglongjie_condition))
	--call TriggerAddAction(t,function qinglongjie)
	--set t=CreateTrigger()
	--call TriggerRegisterUnitInRangeSimple (t,256,udg_baihu)
	--call TriggerAddCondition(t,Condition(function baihujie_condition))
	--call TriggerAddAction(t,function baihujie)
	--set t=CreateTrigger()
	--call TriggerRegisterUnitInRangeSimple (t,256,udg_xuanwu)
	--call TriggerAddCondition(t,Condition(function xuanwujie_condition))
	--call TriggerAddAction(t,function xuanwujie)
	--set t=CreateTrigger()
	--call TriggerRegisterUnitInRangeSimple (t,256,udg_zhuque)
	--call TriggerAddCondition(t,Condition(function zhuquejie_condition))
	--call TriggerAddAction(t,function zhuquejie)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsMonsterAttack))
	TriggerAddAction(t, MonsterAttack)
	t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 0.5)
	TriggerAddAction(t, QingLongNiLin)
	--挑战圣兽
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsTiaoZhanSiShengShou))
	TriggerAddAction(t, TiaoZhanSiShengShou)
	--拾起青龙戒
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	TriggerAddCondition(t, Condition(IsPickUpQingLong))
	TriggerAddAction(t, PickUpQingLong)
	--放下青龙戒
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DROP_ITEM)
	TriggerAddCondition(t, Condition(IsDropQingLong))
	TriggerAddAction(t, DropQingLong)
	--青龙戒成长
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(t, Condition(IsQingLongGrowup))
	TriggerAddAction(t, QingLongGrowup)
	t = nil
end
--------四圣兽任务结束------//
--===================================================
--决战江湖1.6之掌门传奇
--===================================================
--少林：如来神掌
function RuLaiShenZhang_Conditions()
	return GetUnitAbilityLevel(GetAttacker(), 1093678156) >= 1
end
function RuLaiShenZhang_Actions()
	local p = _array_()
	local r
	local r1
	local r2
	local a
	local b
	local i = 0
	local u = GetAttacker()
	local l__ut = nil
	local uuu = _array_()
	local ppl = GetOwningPlayer(u)
	local id = 0
	local dist = RMinBJ(GetCameraField(CAMERA_FIELD_TARGET_DISTANCE), 2500)
	if GetUnitTypeId(GetAttacker()) == 1328558132 then
		id = 1747988533
	elseif GetUnitTypeId(GetAttacker()) == 1328558129 then
		id = 1747988535
	elseif GetUnitTypeId(GetAttacker()) == 1328558130 then
		id = 1747988536
	elseif GetUnitTypeId(GetAttacker()) == 1328558131 then
		id = 1747988537
	elseif GetUnitTypeId(GetAttacker()) == 1328558128 then
		id = 1747988534
	elseif GetUnitTypeId(GetAttacker()) == 1328558643 or GetUnitTypeId(GetAttacker()) == 1328558664 or GetUnitTypeId(GetAttacker()) == 1328558665 then
		id = 1747988553
	elseif GetUnitTypeId(GetAttacker()) == 1328558666 then
		id = 1747988555
	end
	p[0] = GetUnitLoc(u)
	CreateNUnitsAtLoc(1, id, ppl, p[0], GetUnitFacing(u))
	l__ut = bj_lastCreatedUnit
	p[17] = PolarProjectionBJ(p[0], 300, GetUnitFacing(u))
	r = GetUnitFacing(u) + 270
	p[0] = p[17]
	p[1] = PolarProjectionBJ(p[0], 241.96, -47.89 + r)
	p[2] = PolarProjectionBJ(p[0], 258.87, -66.01 + r)
	p[3] = PolarProjectionBJ(p[0], 263.73, -82.54 + r)
	p[4] = PolarProjectionBJ(p[0], 238.72, -111.24 + r)
	p[5] = PolarProjectionBJ(p[0], 219.18, -139.53 + r)
	p[6] = PolarProjectionBJ(p[0], 220.88, -170.75 + r)
	p[7] = PolarProjectionBJ(p[0], 237.01, 159.5 + r)
	p[8] = PolarProjectionBJ(p[0], 432.59, 159.71 + r)
	p[9] = PolarProjectionBJ(p[0], 257.35, 133.15 + r)
	p[10] = PolarProjectionBJ(p[0], 639.01, 117.27 + r)
	p[11] = PolarProjectionBJ(p[0], 238.57, 104.94 + r)
	p[12] = PolarProjectionBJ(p[0], 775.44, 102.34 + r)
	p[13] = PolarProjectionBJ(p[0], 208.18, 67.62 + r)
	p[14] = PolarProjectionBJ(p[0], 687.95, 87.44 + r)
	p[15] = PolarProjectionBJ(p[0], 208.61, -29.12 + r)
	p[16] = PolarProjectionBJ(p[0], 521.16, 65.24 + r)
	UnitAddAbilityBJ(1097625443, l__ut)
	SetCameraFieldForPlayer(ppl, CAMERA_FIELD_TARGET_DISTANCE, 4000.0, 2.0)
	SetUnitFlyHeight(l__ut, 2000.0, 400.0)
	IssuePointOrderLoc(l__ut, "move", p[0])
	YDWEPolledWaitNull(2.0)
	SetUnitFlyHeight(l__ut, 0.0, 800.0)
	a = 1
	b = 6
	for _ in _loop_() do
		if a > b then break end
		p[18] = PolarProjectionBJ(p[0], 110.0, 60.0 * I2R(a))
		CreateNUnitsAtLoc(1, 1697657145, ppl, p[18], 0)
		IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
		a = a + 1
		uuu[i] = bj_lastCreatedUnit
		i = i + 1
		RemoveLocation(p[18])
	end
	a = 0
	b = 16
	for _ in _loop_() do
		if a > b then break end
		CreateNUnitsAtLoc(1, 1697657145, ppl, p[a], 0)
		IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
		uuu[i] = bj_lastCreatedUnit
		i = i + 1
		a = a + 1
	end
	a = 1
	b = 3
	for _ in _loop_() do
		if a > b then break end
		r1 = DistanceBetweenPoints(p[9], p[10]) * (I2R(a) / 4.0)
		r2 = AngleBetweenPoints(p[9], p[10])
		p[18] = PolarProjectionBJ(p[9], r1, r2)
		CreateNUnitsAtLoc(1, 1697657145, ppl, p[18], 0)
		IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
		uuu[i] = bj_lastCreatedUnit
		i = i + 1
		r1 = DistanceBetweenPoints(p[13], p[14]) * (I2R(a) / 4.0)
		r2 = AngleBetweenPoints(p[13], p[14])
		p[18] = PolarProjectionBJ(p[13], r1, r2)
		CreateNUnitsAtLoc(1, 1697657145, ppl, p[18], 0)
		IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
		uuu[i] = bj_lastCreatedUnit
		i = i + 1
		a = a + 1
	end
	a = 1
	b = 4
	for _ in _loop_() do
		if a > b then break end
		r1 = DistanceBetweenPoints(p[11], p[12]) * (I2R(a) / 5.0)
		r2 = AngleBetweenPoints(p[11], p[12])
		p[18] = PolarProjectionBJ(p[11], r1, r2)
		CreateNUnitsAtLoc(1, 1697657145, ppl, p[18], 0)
		IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
		uuu[i] = bj_lastCreatedUnit
		i = i + 1
		a = a + 1
	end
	a = 1
	b = 5
	for _ in _loop_() do
		if a > b then break end
		r1 = DistanceBetweenPoints(p[15], p[16]) * (I2R(a) / 6.0)
		r2 = AngleBetweenPoints(p[15], p[16])
		p[18] = PolarProjectionBJ(p[15], r1, r2)
		CreateNUnitsAtLoc(1, 1697657145, ppl, p[18], 0)
		IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
		uuu[i] = bj_lastCreatedUnit
		i = i + 1
		a = a + 1
	end
	r1 = DistanceBetweenPoints(p[7], p[8]) / 2.0
	r2 = AngleBetweenPoints(p[7], p[8])
	p[18] = PolarProjectionBJ(p[7], r1, r2)
	CreateNUnitsAtLoc(1, 1697657145, ppl, p[18], 0)
	IssueImmediateOrderById(bj_lastCreatedUnit, 852177)
	uuu[i] = bj_lastCreatedUnit
	CameraSetEQNoiseForPlayer(ppl, 10.0)
	SetCameraFieldForPlayer(GetOwningPlayer(u), CAMERA_FIELD_TARGET_DISTANCE, dist, 5.0)
	CinematicFilterGenericBJ(5.0, BLEND_MODE_BLEND, "ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp", 0.0, 0.0, 0.0, 0.0, 100.0, 100.0, 100.0, 100.0)
	a = 0
	b = i
	for _ in _loop_() do
		if a > b then break end
		SetUnitTimeScale(uuu[a], 0.8)
		a = a + 1
	end
	YDWEPolledWaitNull(2.2)
	a = 0
	b = i
	for _ in _loop_() do
		if a > b then break end
		SetUnitTimeScale(uuu[a], 0.02)
		a = a + 1
	end
	UnitRemoveAbilityBJ(1097625443, l__ut)
	ShowUnitHide(l__ut)
	ShowUnitShow(l__ut)
	RemoveUnit(l__ut)
	YDWEPolledWaitNull(4.0)
	CameraClearNoiseForPlayer(ppl)
	a = 0
	b = 18
	for _ in _loop_() do
		if a > b then break end
		RemoveLocation(p[a])
		p[a] = nil
		a = a + 1
	end
	a = 0
	b = i
	for _ in _loop_() do
		if a > b then break end
		uuu[a] = nil
		a = a + 1
	end
	u = nil
	a = 0
	b = 0
	i = 0
	r = 0.0
	r1 = 0.0
	r2 = 0.0
	ppl = nil
end
function IsRuLaiShenZhang()
	return GetEventDamage() == 5.17 and GetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))], 1093678156) >= 1
end
function RuLaiShenZhang()
	local u = udg_hero[1 + GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
	local uc = GetTriggerUnit()
	local shxishu = 1.0
	local shanghai = 0.0
	shanghai = ShangHaiGongShi(u, uc, 65, 75, shxishu, 1093678156)
	WuGongShangHai(u, uc, shanghai)
	u = nil
	uc = nil
end
--===========================================================================
function InitTrig_ZhangMenSkill()
	local t = CreateTrigger()
	--少林：如来神掌
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(RuLaiShenZhang_Conditions))
	TriggerAddAction(t, RuLaiShenZhang_Actions)
	t = CreateTrigger()
	Ov(t)
	TriggerAddCondition(t, Condition(IsRuLaiShenZhang))
	TriggerAddAction(t, RuLaiShenZhang)
	--武当：太极剑
	t = nil
end
--基地和传送石
function CreateUnitsForPlayer_5()
	local p = Player(5)
	local u = nil
	udg_ZhengPaiWL = CreateUnit(p, 1852207725, -768.0, -768.0, 270.0)
	u = CreateUnit(p, 1851945829, -5920.0, -224.0, 270.0)
	u = CreateUnit(p, 1851945829, -4448.0, -2976.0, 270.0)
	u = CreateUnit(p, 1851945829, 1888.0, -224.0, 270.0)
	u = CreateUnit(p, 1851945829, -1440.0, 8160.0, 270.0)
	u = CreateUnit(p, 1851945829, -2336.0, -3872.0, 270.0)
	u = CreateUnit(p, 1851945829, 1632.0, -2464.0, 270.0)
	u = CreateUnit(p, 1851945829, 3616.0, -8928.0, 270.0)
	p = nil
	u = nil
end
--中立敌对
function CreateUnitsForPlayer_12()
	local p = Player(12)
	local u = nil
	u = CreateUnit(p, 1853320308, 1456.2, -2702.9, 345.717)
	u = CreateUnit(p, 1853320308, 1292.4, -3062.2, 282.159)
	u = CreateUnit(p, 1853320308, 976.0, -2795.9, 171.798)
	u = CreateUnit(p, 1853320308, 792.7, -3097.9, 308.143)
	u = CreateUnit(p, 1853320308, 588.4, -2846.8, 286.411)
	u = CreateUnit(p, 1853320308, 1704.9, -3005.6, 253.407)
	u = CreateUnit(p, 1852924466, 776.3, -4506.1, 213.306)
	u = CreateUnit(p, 1851880307, -12157.0, 824.7, 21.907)
	u = CreateUnit(p, 1852924466, 1226.6, -4653.2, 40.651)
	u = CreateUnit(p, 1852207724, -14365.7, 11054.6, 266.525)
	u = CreateUnit(p, 1852924466, 1169.5, -5100.4, 263.867)
	u = CreateUnit(p, 1852924467, 1916.5, -5171.2, 190.732)
	u = CreateUnit(p, 1852272243, -2913.8, -3328.4, 206.494)
	u = CreateUnit(p, 1852272243, -2932.2, -2943.6, 51.099)
	u = CreateUnit(p, 1852272243, -3329.7, -2739.6, 66.305)
	u = CreateUnit(p, 1852272243, -3756.6, -2500.1, 303.023)
	u = CreateUnit(p, 1852272243, -4586.6, -2442.0, 262.746)
	u = CreateUnit(p, 1851880307, -11958.4, 1297.8, 328.292)
	u = CreateUnit(p, 1852272243, -4257.5, -2708.6, 40.244)
	u = CreateUnit(p, 1852272243, -4614.6, -2148.9, 22.665)
	u = CreateUnit(p, 1852272243, -4901.0, -2249.5, 356.319)
	u = CreateUnit(p, 1852272243, -4918.3, -1944.5, 194.332)
	u = CreateUnit(p, 1852272243, -5489.1, -1749.5, 165.119)
	u = CreateUnit(p, 1852272243, -5874.2, -1506.0, 159.153)
	u = CreateUnit(p, 1852272243, -3780.6, -2955.4, 310.736)
	u = CreateUnit(p, 1852272243, -4115.4, -2177.3, 294.234)
	u = CreateUnit(p, 1851879010, 1371.9, -6049.3, 12.558)
	u = CreateUnit(p, 1851879010, 1417.5, -6407.0, 323.14)
	u = CreateUnit(p, 1851879010, 1739.3, -6366.4, 183.631)
	u = CreateUnit(p, 1851879010, 2001.2, -6587.5, 65.327)
	u = CreateUnit(p, 1851880307, -11556.2, 1961.9, 151.616)
	u = CreateUnit(p, 1851879010, 2270.7, -6280.2, 124.116)
	u = CreateUnit(p, 1851879010, 2507.1, -6397.7, 272.118)
	u = CreateUnit(p, 1851879010, 2838.3, -6375.6, 87.223)
	u = CreateUnit(p, 1851880307, -12041.7, 2502.1, 354.408)
	u = CreateUnit(p, 1851880307, -11753.8, 2970.5, 343.564)
	u = CreateUnit(p, 1851880307, -12365.2, 3640.6, 246.98)
	u = CreateUnit(p, 1851880307, -13564.5, 3750.5, 309.626)
	u = CreateUnit(p, 1851880307, -14561.2, 3817.1, 338.675)
	u = CreateUnit(p, 1851880307, -14973.8, 2948.4, 164.437)
	u = CreateUnit(p, 1851880307, -15112.2, 2181.7, 248.617)
	u = CreateUnit(p, 1869834349, -12090.6, 1743.3, 71.435)
	SetUnitState(u, UNIT_STATE_MANA, 0)
	u = CreateUnit(p, 1869834349, -12505.3, 2980.7, 214.515)
	SetUnitState(u, UNIT_STATE_MANA, 0)
	u = CreateUnit(p, 1869834349, -14040.9, 3503.2, 7.614)
	SetUnitState(u, UNIT_STATE_MANA, 0)
	u = CreateUnit(p, 1869834349, -14836.4, 3400.2, 71.556)
	SetUnitState(u, UNIT_STATE_MANA, 0)
	u = CreateUnit(p, 1869834349, -14612.9, 1634.5, 166.679)
	SetUnitState(u, UNIT_STATE_MANA, 0)
	u = CreateUnit(p, 1869834349, -14526.5, 1094.6, 196.222)
	SetUnitState(u, UNIT_STATE_MANA, 0)
	u = CreateUnit(p, 1869834349, -15071.7, 985.4, 304.803)
	SetUnitState(u, UNIT_STATE_MANA, 0)
	u = CreateUnit(p, 1869834349, -14683.9, 639.0, 126.676)
	SetUnitState(u, UNIT_STATE_MANA, 0)
	u = CreateUnit(p, 1869834349, -14255.2, 334.2, 347.453)
	SetUnitState(u, UNIT_STATE_MANA, 0)
	u = CreateUnit(p, 1869834349, -13786.0, 618.3, 225.853)
	SetUnitState(u, UNIT_STATE_MANA, 0)
	u = CreateUnit(p, 1869834349, -13406.7, 303.3, 217.964)
	SetUnitState(u, UNIT_STATE_MANA, 0)
	u = CreateUnit(p, 1868853091, -11632.9, 3526.4, 248.33)
	u = CreateUnit(p, 1852207724, -13768.6, 11013.8, 26.939)
	u = CreateUnit(p, 1869767017, -15073.4, 627.9, 69.342)
	u = CreateUnit(p, 1852207724, -13337.3, 11162.0, 296.266)
	u = CreateUnit(p, 1852207724, -14512.9, 11751.2, 329.105)
	u = CreateUnit(p, 1852207724, -14160.7, 12171.9, 70.359)
	u = CreateUnit(p, 1852207724, -13369.4, 12026.6, 351.057)
	u = CreateUnit(p, 1852207724, -12020.4, 11812.1, 44.243)
	u = CreateUnit(p, 1852207724, -11481.9, 11877.2, 0.352)
	u = CreateUnit(p, 1852207724, -11688.9, 12311.7, 39.684)
	u = CreateUnit(p, 1852207724, -11930.7, 12808.3, 36.915)
	u = CreateUnit(p, 1852207724, -13449.4, 13827.7, 89.377)
	u = CreateUnit(p, 1852207724, -13699.4, 14328.7, 123.963)
	u = CreateUnit(p, 1852207724, -13048.2, 14421.4, 285.434)
	u = CreateUnit(p, 1852207724, -11933.3, 14513.9, 354.946)
	u = CreateUnit(p, 1852207724, -12259.8, 13985.9, 268.119)
	u = CreateUnit(p, 1852207724, -12522.3, 13591.6, 341.257)
	u = CreateUnit(p, 1852207724, -12901.2, 12929.9, 71.117)
	u = CreateUnit(p, 1852207724, -12411.2, 12526.1, 248.299)
	u = CreateUnit(p, 1852207724, -12639.8, 11877.0, 73.611)
	u = CreateUnit(p, 1852207724, -15307.9, 11731.7, 126.105)
	u = CreateUnit(p, 1852207724, -14938.0, 12761.9, 338.082)
	u = CreateUnit(p, 1852207724, -14360.7, 13212.6, 204.605)
	u = CreateUnit(p, 1852207724, -13428.5, 13047.6, 65.151)
	u = CreateUnit(p, 1852207724, -14331.4, 13670.1, 55.208)
	u = CreateUnit(p, 1852207724, -14481.8, 14188.4, 25.841)
	u = CreateUnit(p, 1852207724, -14987.0, 14628.0, 116.558)
	u = CreateUnit(p, 1853186679, -11610.2, 13396.9, 263.12)
	u = CreateUnit(p, 1853059439, -13636.9, 12292.7, 269.383)
	u = CreateUnit(p, 1852338802, -12256.3, 10995.4, 135.256)
	u = CreateUnit(p, 1852796263, -15162.7, 13751.3, 266.022)
	u = CreateUnit(p, 1852733298, -9026.4, 6848.3, 6.229)
	u = CreateUnit(p, 1852733298, -8413.3, 6831.6, 357.671)
	u = CreateUnit(p, 1852206962, -7792.1, 7248.4, 266.734)
	u = CreateUnit(p, 1852206962, -7908.6, 8889.9, 207.176)
	u = CreateUnit(p, 1852206962, -8798.7, 10099.6, 190.146)
	u = CreateUnit(p, 1852206962, -8226.0, 10636.6, 187.224)
	u = CreateUnit(p, 1852206962, -7940.4, 11474.2, 155.582)
	u = CreateUnit(p, 1852206962, -8601.1, 11872.3, 344.509)
	u = CreateUnit(p, 1852206962, -9570.8, 12514.5, 287.136)
	u = CreateUnit(p, 1852206962, -9480.5, 11722.3, 215.383)
	u = CreateUnit(p, 1852206962, -9477.6, 13831.8, 188.63)
	u = CreateUnit(p, 1852206962, -8579.4, 14378.1, 7.438)
	u = CreateUnit(p, 1852206962, -7831.1, 14977.0, 304.88)
	u = CreateUnit(p, 1852206962, -7802.7, 13997.0, 135.762)
	u = CreateUnit(p, 1852206962, -6817.4, 13990.2, 137.201)
	u = CreateUnit(p, 1852206962, -6783.1, 13080.5, 187.784)
	u = CreateUnit(p, 1852206962, -7076.7, 12152.2, 345.289)
	u = CreateUnit(p, 1852206962, -7617.0, 12300.3, 86.872)
	u = CreateUnit(p, 1852206962, -9621.0, 8505.5, 50.901)
	u = CreateUnit(p, 1852206962, -7081.3, 7260.3, 129.555)
	u = CreateUnit(p, 1852733298, -9222.1, 7754.9, 312.823)
	u = CreateUnit(p, 1852733298, -8778.8, 8595.9, 212.251)
	u = CreateUnit(p, 1852733298, -7732.1, 9779.6, 12.953)
	u = CreateUnit(p, 1852733298, -9095.2, 9803.3, 14.843)
	u = CreateUnit(p, 1852733298, -9590.0, 10390.3, 34.026)
	u = CreateUnit(p, 1752395634, -3478.0, -4354.1, 273.75)
	u = CreateUnit(p, 1870094706, -5591.7, -5366.8, 357.78)
	u = CreateUnit(p, 1853123444, -3401.8, -6576.7, 342.687)
	u = CreateUnit(p, 1852794733, -5597.7, -6398.5, 6.971)
	u = CreateUnit(p, 1869636975, -2411.9, -6253.7, 107.714)
	u = CreateUnit(p, 1869116782, -4541.3, -4202.2, 273.77)
	u = CreateUnit(p, 1853305463, -5653.5, -4360.4, 343.67)
	u = CreateUnit(p, 1752654196, -4757.9, -6079.6, 213.987)
	u = CreateUnit(p, 1752654196, -4500.9, -5803.9, 111.855)
	u = CreateUnit(p, 1752654196, -4999.7, -5294.7, 357.121)
	u = CreateUnit(p, 1752654196, -4356.5, -5113.1, 160.581)
	u = CreateUnit(p, 1752654196, -4790.6, -4519.7, 4.45)
	u = CreateUnit(p, 1752654196, -3694.3, -5386.9, 13.656)
	u = CreateUnit(p, 1752654196, -3358.8, -4973.8, 135.982)
	u = CreateUnit(p, 1752654196, -3280.4, -5722.1, 100.912)
	u = CreateUnit(p, 1752654196, -2808.8, -5243.2, 5.57)
	u = CreateUnit(p, 1752654196, -3162.6, -6179.2, 143.563)
	u = CreateUnit(p, 1752654196, -5086.2, -6464.6, 294.201)
	u = CreateUnit(p, 1752654196, -5132.0, -4311.6, 70.205)
	u = CreateUnit(p, 1852076663, -11769.7, 8626.3, 184.141)
	u = CreateUnit(p, 1851942007, -14468.8, 9138.2, 271.753)
	u = CreateUnit(p, 1852798818, -14654.6, 7353.7, 60.537)
	u = CreateUnit(p, 1852798818, -14662.7, 8675.2, 241.893)
	u = CreateUnit(p, 1852798818, -14024.6, 8955.4, 54.505)
	u = CreateUnit(p, 1852798818, -12790.0, 8932.6, 257.516)
	u = CreateUnit(p, 1852798818, -12185.4, 8447.7, 46.474)
	u = CreateUnit(p, 1852798818, -12203.5, 6950.2, 119.161)
	u = CreateUnit(p, 1852798818, -12755.9, 7098.6, 128.83)
	u = CreateUnit(p, 1852798818, -11582.2, 6792.9, 44.584)
	u = CreateUnit(p, 1852798818, -12616.1, 6183.4, 12.481)
	u = CreateUnit(p, 1852798818, -12123.6, 6321.7, 269.558)
	u = CreateUnit(p, 1701212014, -14785.0, 6073.2, 119.634)
	u = CreateUnit(p, 1701212014, -14431.2, 5863.3, 242.794)
	u = CreateUnit(p, 1701212014, -14211.2, 7038.3, 212.856)
	u = CreateUnit(p, 1701212014, -14342.6, 7650.2, 333.83)
	u = CreateUnit(p, 1701212014, -15000.2, 8911.7, 137.432)
	u = CreateUnit(p, 1701212014, -14472.1, 8182.7, 92.574)
	u = CreateUnit(p, 1701212014, -12125.2, 9114.6, 172.524)
	u = CreateUnit(p, 1701212014, -12009.1, 7651.9, 66.678)
	u = CreateUnit(p, 1701212014, -12495.2, 8221.5, 61.767)
	u = CreateUnit(p, 1852076406, -9388.5, -5304.5, 198.232)
	u = CreateUnit(p, 1852076406, -8863.6, -5460.6, 69.216)
	u = CreateUnit(p, 1852076406, -8668.9, -5152.1, 168.645)
	u = CreateUnit(p, 1852076406, -8108.6, -5453.9, 143.486)
	u = CreateUnit(p, 1852076406, -8539.6, -4553.2, 156.582)
	u = CreateUnit(p, 1852076406, -9058.9, -4334.5, 294.41)
	u = CreateUnit(p, 1852076406, -9488.1, -4526.7, 91.772)
	u = CreateUnit(p, 1852076406, -8023.1, -4337.1, 336.95)
	u = CreateUnit(p, 1852076406, -7781.9, -3873.8, 43.244)
	u = CreateUnit(p, 1852076406, -7443.1, -3536.5, 195.607)
	u = CreateUnit(p, 1852076406, -8000.7, -3194.8, 98.034)
	u = CreateUnit(p, 1852076406, -8475.3, -3172.2, 359.615)
	u = CreateUnit(p, 1852076406, -7977.2, -2488.3, 258.077)
	u = CreateUnit(p, 1852076406, -9304.3, -3327.9, 235.345)
	u = CreateUnit(p, 1852076406, -9644.6, -2873.3, 12.964)
	u = CreateUnit(p, 1852076406, -9223.6, -2715.1, 168.502)
	u = CreateUnit(p, 1852076406, -9642.7, -3627.5, 235.895)
	u = CreateUnit(p, 1852076406, -7527.3, -5484.4, 242.223)
	u = CreateUnit(p, 1852076406, -7100.4, -5219.8, 207.373)
	u = CreateUnit(p, 1852076406, -7622.2, -2609.1, 94.507)
	u = CreateUnit(p, 1852076403, -9301.8, -2486.7, 309.187)
	u = CreateUnit(p, 1852733298, -8770.0, 10894.8, 16.733)
	u = CreateUnit(p, 1852733298, -8873.2, 12457.8, 12.843)
	u = CreateUnit(p, 1852733298, -8064.7, 12827.7, 216.448)
	u = CreateUnit(p, 1852733298, -7131.5, 14976.5, 344.41)
	u = CreateUnit(p, 1852733298, -8742.7, 13760.7, 202.693)
	u = CreateUnit(p, 1852733298, -9158.8, 14291.0, 5.405)
	u = CreateUnit(p, 1852206962, -7305.8, 11421.5, 344.509)
	u = CreateUnit(p, 1852733298, -6670.2, 7880.8, 182.532)
	u = CreateUnit(p, 1852733298, -6507.8, 7078.0, 77.731)
	u = CreateUnit(p, 1852733298, -6750.7, 9551.3, 295.574)
	u = CreateUnit(p, 1852733298, -6876.6, 10806.8, 250.979)
	u = CreateUnit(p, 1852206966, -8901.9, 14908.1, 277.826)
	u = CreateUnit(p, 1852206962, -8338.2, 9687.3, 190.146)
	u = CreateUnit(p, 1852733298, -6716.6, 10259.8, 226.077)
	u = CreateUnit(p, 1852733298, -6934.1, 13520.0, 325.927)
	u = CreateUnit(p, 1852733298, -7804.9, 6826.0, 357.671)
	u = CreateUnit(p, 1852206962, -7765.8, 7729.0, 266.734)
	u = CreateUnit(p, 1852206962, -8648.5, 6633.5, 95.101)
	u = CreateUnit(p, 1852206962, -8930.8, 7902.6, 154.297)
	u = CreateUnit(p, 1852206962, -8937.6, 8268.5, 174.809)
	u = CreateUnit(p, 1852206962, -8329.2, 8666.6, 326.062)
	u = CreateUnit(p, 1852206962, -7775.5, 8544.4, 33.52)
	u = CreateUnit(p, 1852206962, -7470.8, 8841.2, 59.987)
	u = CreateUnit(p, 1852206962, -8179.3, 10039.3, 27.533)
	u = CreateUnit(p, 1852206962, -7226.8, 10843.3, 309.681)
	u = CreateUnit(p, 1852206962, -8024.7, 12369.3, 11.195)
	u = CreateUnit(p, 1852206962, -6540.4, 13723.9, 115.228)
	u = CreateUnit(p, 1852733298, -7059.5, 12869.6, 332.412)
	u = CreateUnit(p, 1852733298, -7928.6, 13708.7, 251.375)
	u = CreateUnit(p, 1852733298, -7733.6, 14469.6, 149.012)
	u = CreateUnit(p, 1852733298, -7485.8, 15140.4, 225.776)
	u = CreateUnit(p, 1852733298, -9156.5, 13784.7, 118.227)
	u = CreateUnit(p, 1852733298, -9477.2, 14666.3, 308.758)
	u = CreateUnit(p, 1852733298, -9374.9, 12165.6, 275.095)
	u = CreateUnit(p, 1852733298, -8682.5, 9543.0, 11.327)
	u = CreateUnit(p, 1852733298, -6911.5, 8331.2, 331.501)
	u = CreateUnit(p, 1852733298, -6744.8, 7382.2, 271.689)
	u = CreateUnit(p, 1852733298, -7044.7, 6821.3, 190.827)
	u = CreateUnit(p, 1852733298, -8181.9, 7160.5, 160.471)
	u = CreateUnit(p, 1852733298, -9481.9, 7072.3, 16.425)
	u = CreateUnit(p, 1852733298, -9651.9, 7969.8, 16.414)
	u = CreateUnit(p, 1852733298, -7944.7, 10934.6, 6.9)
	u = CreateUnit(p, 1852733298, -7815.7, 12057.6, 355.276)
	u = CreateUnit(p, 1852077154, -4275.0, 7430.0, 167.536)
	u = CreateUnit(p, 1852077154, -4215.6, 7142.6, 171.227)
	u = CreateUnit(p, 1852077154, -4002.8, 7510.9, 35.575)
	u = CreateUnit(p, 1852077154, -3901.1, 7125.6, 328.534)
	u = CreateUnit(p, 1852077154, -3743.5, 7585.4, 98.957)
	u = CreateUnit(p, 1852077154, -3570.7, 7302.6, 273.392)
	u = CreateUnit(p, 1852077154, -3351.4, 7576.7, 146.727)
	u = CreateUnit(p, 1852077154, -3471.9, 7869.4, 44.309)
	u = CreateUnit(p, 1852077154, -3687.5, 8033.3, 217.338)
	u = CreateUnit(p, 1852077154, -3759.1, 8222.6, 345.047)
	u = CreateUnit(p, 1852077154, -4007.4, 8314.9, 126.632)
	u = CreateUnit(p, 1852077154, -4053.2, 8118.3, 131.983)
	u = CreateUnit(p, 1852077154, -4262.5, 8283.8, 244.168)
	u = CreateUnit(p, 1852077154, -4428.8, 8154.5, 289.949)
	u = CreateUnit(p, 1852077154, -4693.5, 8253.5, 85.191)
	u = CreateUnit(p, 1852077154, -4879.0, 8138.2, 328.183)
	u = CreateUnit(p, 1852077154, -5042.9, 8425.5, 215.778)
	u = CreateUnit(p, 1852077154, -5269.5, 8521.1, 153.198)
	u = CreateUnit(p, 1852077154, -5107.7, 8810.2, 288.773)
	u = CreateUnit(p, 1852077154, -5212.1, 9096.6, 180.577)
	u = CreateUnit(p, 1852077154, -4998.6, 9432.3, 260.549)
	u = CreateUnit(p, 1852077154, -5007.5, 9906.4, 36.695)
	u = CreateUnit(p, 1852077154, -4810.6, 9362.7, 153.758)
	u = CreateUnit(p, 1852077154, -4796.5, 9810.0, 322.634)
	u = CreateUnit(p, 1852077154, -4644.5, 9562.9, 270.415)
	u = CreateUnit(p, 1852077154, -4754.2, 10103.3, 50.022)
	u = CreateUnit(p, 1852077154, -4849.7, 10395.4, 83.839)
	u = CreateUnit(p, 1852077154, -4475.7, 10340.8, 269.887)
	u = CreateUnit(p, 1852077154, -4523.7, 10058.6, 10.734)
	u = CreateUnit(p, 1852077154, -4389.9, 9811.2, 237.367)
	u = CreateUnit(p, 1852077154, -4329.0, 9586.7, 355.979)
	u = CreateUnit(p, 1852077154, -4203.1, 10252.9, 264.163)
	u = CreateUnit(p, 1852077154, -4121.5, 9939.9, 97.111)
	u = CreateUnit(p, 1852077154, -4117.4, 9676.2, 52.494)
	u = CreateUnit(p, 1852077154, -4155.7, 9450.6, 169.612)
	u = CreateUnit(p, 1852077154, -3861.7, 9485.7, 207.615)
	u = CreateUnit(p, 1852077154, -3839.6, 9845.2, 274.161)
	u = CreateUnit(p, 1852077154, -3815.7, 10318.2, 206.78)
	u = CreateUnit(p, 1852077154, -3944.2, 10167.6, 253.177)
	u = CreateUnit(p, 1852077154, -3478.5, 10294.0, 8.416)
	u = CreateUnit(p, 1852077154, -3615.5, 9959.3, 260.757)
	u = CreateUnit(p, 1852077154, -3546.1, 9642.5, 298.233)
	u = CreateUnit(p, 1852077154, -3656.1, 9414.1, 246.98)
	u = CreateUnit(p, 1852077154, -3417.8, 9482.1, 161.141)
	u = CreateUnit(p, 1852077154, -3365.3, 10142.6, 37.695)
	u = CreateUnit(p, 1852077154, -3395.2, 9888.4, 51.989)
	u = CreateUnit(p, 1853059688, 6788.6, -2224.5, 179.099)
	u = CreateUnit(p, 1852794738, 6435.0, -1894.1, 95.969)
	u = CreateUnit(p, 1852794738, 6438.7, -2248.3, 158.724)
	u = CreateUnit(p, 1852794738, 6154.1, -2604.0, 111.833)
	u = CreateUnit(p, 1852794738, 6038.2, -2199.1, 109.273)
	u = CreateUnit(p, 1852794738, 5904.8, -1786.5, 311.263)
	u = CreateUnit(p, 1852794738, 5551.3, -1965.8, 254.506)
	u = CreateUnit(p, 1852794738, 5381.7, -2323.9, 353.639)
	u = CreateUnit(p, 1852794738, 5257.4, -2641.1, 310.263)
	u = CreateUnit(p, 1852794738, 5213.1, -1761.3, 234.148)
	u = CreateUnit(p, 1852794738, 6757.6, -1645.8, 145.892)
	u = CreateUnit(p, 1853321831, -14793.9, -6329.7, 92.98)
	u = CreateUnit(p, 1853321831, -14461.8, -6133.7, 100.286)
	u = CreateUnit(p, 1853321831, -14048.8, -6240.6, 292.806)
	u = CreateUnit(p, 1853321831, -13679.4, -6068.1, 32.279)
	u = CreateUnit(p, 1853321831, -13264.4, -6194.2, 145.244)
	u = CreateUnit(p, 1853321831, -12990.6, -5855.3, 332.995)
	u = CreateUnit(p, 1853321831, -12556.6, -5669.8, 146.65)
	u = CreateUnit(p, 1853321831, -12244.7, -5274.1, 99.341)
	u = CreateUnit(p, 1853321831, -12518.3, -4890.1, 101.385)
	u = CreateUnit(p, 1853321831, -12006.7, -4710.6, 182.335)
	u = CreateUnit(p, 1853321831, -12417.5, -4207.4, 157.087)
	u = CreateUnit(p, 1853321831, -11997.7, -3996.8, 52.912)
	u = CreateUnit(p, 1853321831, -12504.3, -3156.4, 304.906)
	u = CreateUnit(p, 1853321831, -12029.9, -3093.7, 259.173)
	u = CreateUnit(p, 1853321831, -12048.2, -2660.6, 264.761)
	u = CreateUnit(p, 1853321831, -12611.5, -2650.1, 294.612)
	u = CreateUnit(p, 1853321831, -12922.2, -2340.6, 300.307)
	u = CreateUnit(p, 1853321831, -11869.2, -2237.3, 259.289)
	u = CreateUnit(p, 1853321831, -12823.6, -3845.9, 358.967)
	u = CreateUnit(p, 1853321831, -13324.0, -3563.9, 123.424)
	u = CreateUnit(p, 1853321831, -13850.1, -3490.5, 266.976)
	u = CreateUnit(p, 1853321831, -14336.5, -4002.0, 319.91)
	u = CreateUnit(p, 1853321831, -14679.1, -4034.5, 297.936)
	u = CreateUnit(p, 1853321831, -14482.3, -4620.8, 260.197)
	u = CreateUnit(p, 1853321831, -13082.1, -4518.5, 324.962)
	u = CreateUnit(p, 1853321831, -13083.6, -5033.5, 12.554)
	u = CreateUnit(p, 1852996194, -13378.5, -4721.9, 338.837)
	u = CreateUnit(p, 1852207221, -12407.6, -2143.8, 284.172)
	u = CreateUnit(p, 1852665959, -14815.3, -10078.4, 103.615)
	u = CreateUnit(p, 1852665959, -14436.5, -10108.6, 252.616)
	u = CreateUnit(p, 1852665959, -14339.3, -9787.8, 337.664)
	u = CreateUnit(p, 1852665959, -13835.3, -9856.3, 35.926)
	u = CreateUnit(p, 1852665959, -13992.8, -9321.1, 260.648)
	u = CreateUnit(p, 1852665959, -13581.6, -9598.2, 359.176)
	u = CreateUnit(p, 1852665959, -13879.4, -8845.2, 240.454)
	u = CreateUnit(p, 1852665959, -14246.3, -9049.0, 278.094)
	u = CreateUnit(p, 1852665959, -13576.5, -8492.8, 185.828)
	u = CreateUnit(p, 1852665959, -13830.7, -8241.2, 86.959)
	u = CreateUnit(p, 1852665959, -14189.9, -8505.9, 10.196)
	u = CreateUnit(p, 1852665959, -14597.9, -8710.5, 40.936)
	u = CreateUnit(p, 1853123427, -2634.1, 12329.1, 91.114)
	u = CreateUnit(p, 1852995177, 10235.4, 15096.9, 245.749)
	u = CreateUnit(p, 1853056878, -1488.0, 14913.8, 271.232)
	u = CreateUnit(p, 1853056866, -742.8, 12726.2, 92.938)
	u = CreateUnit(p, 1853323890, -4659.9, 14915.5, 273.386)
	u = CreateUnit(p, 1853060204, -4783.8, 14102.9, 277.997)
	u = CreateUnit(p, 1853060204, -4427.0, 14063.4, 265.895)
	u = CreateUnit(p, 1853060204, -4819.5, 13523.7, 283.794)
	u = CreateUnit(p, 1853060204, -4429.5, 13494.9, 263.889)
	u = CreateUnit(p, 1853060204, -4777.4, 12827.1, 298.967)
	u = CreateUnit(p, 1853060204, -4437.1, 12816.9, 255.093)
	u = CreateUnit(p, 1853060204, -4545.6, 12201.1, 234.192)
	u = CreateUnit(p, 1853060204, -4069.5, 12294.7, 330.127)
	u = CreateUnit(p, 1752003700, -12201.0, -15223.2, 248.28)
	u = CreateUnit(p, 1852207203, -7846.3, -9418.4, 285.423)
	u = CreateUnit(p, 1852207203, -7499.2, -9250.3, 285.423)
	u = CreateUnit(p, 1853060204, -2869.3, 12660.5, 353.21)
	u = CreateUnit(p, 1853060204, -2509.5, 13262.8, 302.023)
	u = CreateUnit(p, 1853060204, -2772.6, 13610.9, 96.254)
	u = CreateUnit(p, 1853060204, -2812.0, 13096.1, 305.023)
	u = CreateUnit(p, 1853060204, -2433.1, 12741.7, 110.46)
	u = CreateUnit(p, 1853060204, -2443.0, 13759.6, 136.685)
	u = CreateUnit(p, 1853060204, -2738.5, 14172.5, 308.495)
	u = CreateUnit(p, 1853060204, -2473.9, 14246.3, 217.877)
	u = CreateUnit(p, 1853060204, -2760.9, 15020.9, 197.101)
	u = CreateUnit(p, 1853060204, -2379.6, 14865.7, 335.533)
	u = CreateUnit(p, 1853060204, -2001.7, 15075.5, 168.393)
	u = CreateUnit(p, 1853060204, -1784.0, 14374.5, 2.922)
	u = CreateUnit(p, 1853060204, -1429.4, 14281.8, 188.685)
	u = CreateUnit(p, 1853060204, -1688.6, 13921.2, 147.111)
	u = CreateUnit(p, 1853060204, -1401.8, 13660.9, 233.862)
	u = CreateUnit(p, 1853060204, -1736.4, 13398.7, 88.596)
	u = CreateUnit(p, 1853060204, -1467.2, 13180.2, 64.843)
	u = CreateUnit(p, 1853060204, -1789.5, 12909.6, 97.979)
	u = CreateUnit(p, 1853060204, -1493.3, 12733.9, 39.069)
	u = CreateUnit(p, 1853060204, -1776.5, 12407.5, 10.602)
	u = CreateUnit(p, 1853060204, -1414.2, 12260.0, 5.647)
	u = CreateUnit(p, 1853060204, -978.7, 12463.7, 63.129)
	u = CreateUnit(p, 1853060204, -668.0, 12251.4, 112.273)
	u = CreateUnit(p, 1853060204, -642.1, 13261.8, 301.496)
	u = CreateUnit(p, 1853060204, -924.3, 13448.1, 29.972)
	u = CreateUnit(p, 1853060204, -629.9, 13829.5, 167.931)
	u = CreateUnit(p, 1853060204, -872.2, 14201.3, 86.883)
	u = CreateUnit(p, 1853060204, -587.9, 14519.1, 102.297)
	u = CreateUnit(p, 1853060204, -833.4, 14795.4, 223.732)
	u = CreateUnit(p, 1853060204, -587.0, 15076.0, 300.32)
	u = CreateUnit(p, 1853060204, -233.4, 14971.1, 168.997)
	u = CreateUnit(p, 1853056884, 200.0, 14891.6, 267.94)
	u = CreateUnit(p, 1853060204, 362.3, 14587.0, 177.237)
	u = CreateUnit(p, 1853060204, 12.8, 14449.1, 288.202)
	u = CreateUnit(p, 1853060204, 240.1, 14185.1, 326.612)
	u = CreateUnit(p, 1853060204, -68.2, 14037.9, 151.429)
	u = CreateUnit(p, 1853060204, 315.7, 13742.0, 209.593)
	u = CreateUnit(p, 1853060204, 0.0, 13524.8, 86.707)
	u = CreateUnit(p, 1853060204, 308.0, 13193.0, 83.389)
	u = CreateUnit(p, 1853060204, -19.7, 13055.2, 184.752)
	u = CreateUnit(p, 1853060204, 333.8, 12762.7, 314.735)
	u = CreateUnit(p, 1853060204, -7.6, 12558.8, 82.795)
	u = CreateUnit(p, 1853060204, 350.2, 12368.5, 278.193)
	u = CreateUnit(p, 1853060204, -2867.7, 14559.8, 20.974)
	u = CreateUnit(p, 1852861538, 2765.4, 11990.3, 354.551)
	u = CreateUnit(p, 1852861538, 3192.8, 11863.9, 36.509)
	u = CreateUnit(p, 1852207212, 2489.2, 11815.6, 61.8)
	u = CreateUnit(p, 1852861538, 4320.7, 11980.7, 281.852)
	u = CreateUnit(p, 1852861538, 4503.5, 12242.4, 158.274)
	u = CreateUnit(p, 1852861538, 4039.0, 13071.9, 42.694)
	u = CreateUnit(p, 1852861538, 3593.1, 13185.8, 82.752)
	u = CreateUnit(p, 1852207212, 3505.0, 11993.9, 335.785)
	u = CreateUnit(p, 1852861538, 2454.7, 13204.6, 98.045)
	u = CreateUnit(p, 1852861538, 3069.1, 14146.7, 288.477)
	u = CreateUnit(p, 1852861538, 3607.9, 14145.5, 323.887)
	u = CreateUnit(p, 1852861538, 3902.4, 14598.5, 316.921)
	u = CreateUnit(p, 1852861538, 4668.3, 14134.5, 317.932)
	u = CreateUnit(p, 1852861538, 4812.6, 14612.9, 339.092)
	u = CreateUnit(p, 1852207212, 3983.6, 11873.8, 156.527)
	u = CreateUnit(p, 1852207212, 4561.7, 12712.3, 177.687)
	u = CreateUnit(p, 1852207212, 3142.1, 13153.1, 145.112)
	u = CreateUnit(p, 1852207212, 2714.3, 13246.9, 83.268)
	u = CreateUnit(p, 1852207212, 2471.0, 13575.8, 222.304)
	u = CreateUnit(p, 1852207212, 2605.0, 14035.9, 105.45)
	u = CreateUnit(p, 1852207212, 3899.3, 14099.0, 310.637)
	u = CreateUnit(p, 1852207212, 4277.5, 14233.6, 261.131)
	u = CreateUnit(p, 1852207212, 4886.9, 14357.2, 189.08)
	u = CreateUnit(p, 1852270642, 4457.5, 12995.6, 272.607)
	u = CreateUnit(p, 1852663652, 4343.0, 14740.7, 263.536)
	u = CreateUnit(p, 1852207984, 2347.2, 14172.4, 350.717)
	u = CreateUnit(p, 1853320818, 4287.7, 10151.4, 228.747)
	u = CreateUnit(p, 1853058150, 2236.8, 9150.8, 298.574)
	u = CreateUnit(p, 1853323879, 3039.0, 7028.4, 17.448)
	u = CreateUnit(p, 1869050475, 5348.0, 8028.0, 129.94)
	u = CreateUnit(p, 1852207724, -15144.8, 12236.8, 202.253)
	u = CreateUnit(p, 1852207724, -15278.3, 13248.3, 134.158)
	u = CreateUnit(p, 1852207724, -13600.1, 14777.7, 226.831)
	u = CreateUnit(p, 1852207724, -13929.8, 13124.6, 111.174)
	u = CreateUnit(p, 1852207724, -13845.3, 11670.9, 12.909)
	u = CreateUnit(p, 1852207724, -12193.3, 11352.5, 181.093)
	u = CreateUnit(p, 1852207724, -11587.7, 13124.9, 205.725)
	u = CreateUnit(p, 1853252716, 9795.2, 15164.8, 286.575)
	u = CreateUnit(p, 1852794732, 9398.7, 14965.4, 317.012)
	u = CreateUnit(p, 1851944036, 10511.7, 15018.8, 208.698)
	u = CreateUnit(p, 1852141158, -10306.4, 4076.3, 272.722)
	u = CreateUnit(p, 1852141158, -10005.8, 3398.9, 59.207)
	u = CreateUnit(p, 1852141158, -10118.7, 2897.8, 107.911)
	u = CreateUnit(p, 1852141158, -9694.7, 2524.1, 84.729)
	u = CreateUnit(p, 1852141158, -9428.9, 1948.5, 265.603)
	u = CreateUnit(p, 1852141158, -7637.7, 1943.7, 26.357)
	u = CreateUnit(p, 1852141158, -8193.2, 1672.9, 257.934)
	u = CreateUnit(p, 1852141158, -8126.7, 2372.8, 283.451)
	u = CreateUnit(p, 1852141158, -8402.5, 2766.0, 258.582)
	u = CreateUnit(p, 1752395892, -14692.2, -15042.8, 287.223)
	u = CreateUnit(p, 1969976430, 7282.8, 13564.4, 268.457)
	u = CreateUnit(p, 1869836407, 7140.3, 14205.1, 272.252)
	u = CreateUnit(p, 1869836407, 7428.2, 14196.2, 270.132)
	u = CreateUnit(p, 1869836407, 7139.1, 13752.0, 272.252)
	u = CreateUnit(p, 1869836407, 7427.0, 13743.1, 270.132)
	u = CreateUnit(p, 1869836407, 7163.0, 13336.6, 272.252)
	u = CreateUnit(p, 1869836407, 7450.9, 13327.7, 270.132)
	u = CreateUnit(p, 1869836407, 7163.2, 12871.5, 272.252)
	u = CreateUnit(p, 1869836407, 7451.1, 12862.6, 270.132)
	u = CreateUnit(p, 1869836407, 7154.8, 12443.3, 272.252)
	u = CreateUnit(p, 1869836407, 7442.7, 12434.4, 270.132)
	u = CreateUnit(p, 1852141158, -8881.8, 2708.9, 297.695)
	u = CreateUnit(p, 1852141158, -8811.2, 3189.8, 258.329)
	u = CreateUnit(p, 1852141158, -9304.6, 3306.9, 323.964)
	u = CreateUnit(p, 1852141158, -9142.7, 3832.2, 4.098)
	u = CreateUnit(p, 1852141158, -9673.4, 4347.6, 9.02)
	u = CreateUnit(p, 1852141158, -9456.6, 3835.1, 224.985)
	u = CreateUnit(p, 1852141158, -9612.5, 4663.0, 120.776)
	u = CreateUnit(p, 1852141158, -9928.1, 4934.5, 66.887)
	u = CreateUnit(p, 1852141158, -9738.6, 5210.6, 344.421)
	u = CreateUnit(p, 1852141158, -9288.5, 4243.4, 122.622)
	u = CreateUnit(p, 1852141158, -8529.3, 2186.1, 139.959)
	u = CreateUnit(p, 1852467042, 5236.1, -12937.8, 1.681)
	u = CreateUnit(p, 1852467042, 4818.5, -12457.3, 10.108)
	u = CreateUnit(p, 1852467042, 5432.7, -12048.3, 259.197)
	u = CreateUnit(p, 1852467042, 4864.3, -11493.7, 285.939)
	u = CreateUnit(p, 1852467042, 5190.9, -10875.7, 21.841)
	u = CreateUnit(p, 1852467042, 5575.9, -11433.9, 43.123)
	u = CreateUnit(p, 1852467042, 6112.7, -11116.9, 196.464)
	u = CreateUnit(p, 1852467042, 5871.2, -10670.6, 352.529)
	u = CreateUnit(p, 1852467042, 5516.4, -10235.7, 253.539)
	u = CreateUnit(p, 1852467042, 6100.6, -10189.3, 65.942)
	u = CreateUnit(p, 1852467042, 6007.0, -9673.8, 169.623)
	u = CreateUnit(p, 1852467042, 5210.1, -10415.4, 297.5)
	u = CreateUnit(p, 1751871081, -6915.4, 3983.4, 272.767)
	u = CreateUnit(p, 1751871081, -6857.0, 3524.6, 272.767)
	u = CreateUnit(p, 1751871081, -7127.3, 3460.5, 272.767)
	u = CreateUnit(p, 1751871081, -6397.8, 3139.2, 233.41)
	u = CreateUnit(p, 1751871081, -6544.0, 3469.7, 233.41)
	u = CreateUnit(p, 1751871081, -6331.6, 3799.7, 233.41)
	u = CreateUnit(p, 1751871081, -6722.1, 4353.1, 253.553)
	u = CreateUnit(p, 1751871081, -6231.4, 4227.2, 253.553)
	u = CreateUnit(p, 1751871081, -7045.6, 2863.2, 253.553)
	u = CreateUnit(p, 1751871081, -6644.2, 2934.8, 253.553)
	u = CreateUnit(p, 1751543663, -6426.9, 4526.3, 259.71)
	u = nil
	p = nil
end
function CreateUnitsForPlayer_15()
	local p = Player(15)
	local u = nil
	u = CreateUnit(p, 1852010352, -6336.0, -1536.0, 270.0)
	u = CreateUnit(p, 1852010352, -8640.0, -3776.0, 270.0)
	u = CreateUnit(p, 1852010352, -9216.0, -3776.0, 270.0)
	u = CreateUnit(p, 1852010352, -9984.0, -5376.0, 270.0)
	u = CreateUnit(p, 1852010352, -13376.0, 11712.0, 270.0)
	u = CreateUnit(p, 1852010352, -12736.0, 11200.0, 270.0)
	u = CreateUnit(p, 1852010352, -12992.0, 13440.0, 270.0)
	u = CreateUnit(p, 1852010352, -12352.0, 13248.0, 270.0)
	u = CreateUnit(p, 1852010352, -10048.0, 5312.0, 270.0)
	u = CreateUnit(p, 1852010352, -10624.0, 4800.0, 270.0)
	Ns = CreateUnit(p, 1328558132, 1963.8, -4044.6, 226.742)
	SetUnitState(Ns, UNIT_STATE_MANA, 0)
	Os = CreateUnit(p, 1328558131, 1655.0, -3879.3, 271.975)
	SetUnitState(Os, UNIT_STATE_MANA, 0)
	Ps = CreateUnit(p, 1328558128, 1877.0, -4346.3, 184.495)
	SetUnitState(Ps, UNIT_STATE_MANA, 0)
	Qs = CreateUnit(p, 1328558129, 1387.8, -4122.2, 342.869)
	SetUnitState(Qs, UNIT_STATE_MANA, 0)
	Ls = CreateUnit(p, 1328558130, 1488.4, -4404.3, 48.963)
	SetUnitState(Ls, UNIT_STATE_MANA, 0)
	LanXin = CreateUnit(p, 1328558643, 1720, -4430.3, 229)
	SetUnitState(LanXin, UNIT_STATE_MANA, 0)
	XuanJin = CreateUnit(p, 1328558666, 1450, -3900, 256)
	SetUnitState(XuanJin, UNIT_STATE_MANA, 0)
	vipbanlv[1] = CreateUnit(Player(0), 1848651847, 1860, -4140, 254.7)
	vipbanlv[2] = CreateUnit(Player(1), 1848651847, 1860, -4140, 254.7)
	vipbanlv[3] = CreateUnit(Player(2), 1848651847, 1860, -4140, 254.7)
	vipbanlv[4] = CreateUnit(Player(3), 1848651847, 1860, -4140, 254.7)
	vipbanlv[5] = CreateUnit(Player(4), 1848651847, 1860, -4140, 254.7)
	Rs = CreateUnit(p, 1865429045, 1620, -4050, 255)
	ut = CreateUnit(p, 1865429060, -5498.1, -3020.3, 60.353)
	ft = CreateUnit(p, 1865429046, -5503.8, 5213.9, 156.857)
	gt = CreateUnit(p, 1865429046, -5538.1, 5186.3, 209.428)
	--set u=CreateUnit(p,'o00K',-1256.,-1921.,266.75)
	Ts = CreateUnit(p, 1865429047, 1939.6, -2738.2, 217.84)
	u = CreateUnit(p, 1865429061, -5054.2, -3013.2, 129.225)
	--set u=CreateUnit(p,1865429049,-2209.8,459.5,295.041)
	nt = CreateUnit(p, 1865429057, -2053.7, -339.5, 181.33)
	ot = CreateUnit(p, 1865429058, 347.5, -3809.3, 20.701)
	ht = CreateUnit(p, 1865429046, -5425.9, 5155.9, 280.391)
	jt = CreateUnit(p, 1865429046, -5448.9, 5202.9, 106.67)
	kt = CreateUnit(p, 1865429046, -5487.7, 5169.9, 191.717)
	Us = CreateUnit(p, 1865429046, -5517.6, 5090.4, 182.565)
	Zs = CreateUnit(p, 1865429046, -5540.2, 5134.9, 255.418)
	Ys = CreateUnit(p, 1865429046, -5483.4, 5122.9, 225.216)
	Xs = CreateUnit(p, 1865429046, -5429.8, 5108.7, 262.307)
	Ws = CreateUnit(p, 1865429046, -5453.9, 5084.4, 242.388)
	Vs = CreateUnit(p, 1865429046, -5467.9, 5207.8, 242.388)
	u = CreateUnit(p, 1751671916, -2092.9, -2759.4, 336.13)
	u = CreateUnit(p, 1751671916, -2095.1, -2894.8, 344.957)
	Ss = CreateUnit(p, 1865429048, -1689.9, -2919.2, 272.018)
	u = CreateUnit(p, 1865429062, -5514.0, -2567.8, 315.259)
	u = CreateUnit(p, 1865429063, 2900.8, -6110.5, 233.25)
	u = CreateUnit(p, 1865429064, 3065.6, -415.5, 260.325)
	u = CreateUnit(p, 1865429064, 2800.7, -432.4, 260.325)
	u = CreateUnit(p, 1865429064, 2554.3, -442.0, 260.325)
	u = CreateUnit(p, 1865429064, 2326.7, -440.3, 260.325)
	u = CreateUnit(p, 1865429064, 3095.5, -1042.9, 88.198)
	u = CreateUnit(p, 1865429064, 2830.6, -1059.8, 88.075)
	u = CreateUnit(p, 1865429064, 2584.1, -1069.5, 89.265)
	u = CreateUnit(p, 1865429064, 2356.6, -1067.7, 91.855)
	u = CreateUnit(p, 1865429065, 3414.3, -699.1, 185.39)
	vt = CreateUnit(p, 1865429066, -4885.4, 423.9, 273.2)
	--set u=CreateUnit(p,1865429070,503.2,467.8,218.898)
	xt = CreateUnit(p, 1865429072, 5741.1, -877.8, 224.9)
	yt = CreateUnit(p, 1865429074, -3452.7, 153.4, 251.26)
	u = CreateUnit(p, 1865429075, 4045.8, -2255.6, 181.936)
	u = CreateUnit(p, 1865429329, 3070.6, -1542.5, 268.656)
	u = CreateUnit(p, 1865429077, -14635.1, -8394.7, 327.01)
	zt = CreateUnit(p, 1865429078, -12182.9, -5939.8, 148.96)
	u = CreateUnit(p, 1865429331, 3343.6, -2375.3, 5.029)
	u = CreateUnit(p, 1865429332, 3322.4, -2730.6, 11.064)
	u = CreateUnit(p, 1865429330, 2649.6, -1514.4, 277.06)
	u = CreateUnit(p, 1865429328, -134.4, 372.9, 106.56)
	At = CreateUnit(p, 1865429079, -1174.4, 11346.6, 274.031)
	Bt = CreateUnit(p, 1865429081, 4580.0, 419.0, 179.83)
	u = CreateUnit(p, 1865429304, 598.6, -2015.8, 94.58)
	u = CreateUnit(p, 1865429305, -2081.6, -1962.8, 24.21)
	u = CreateUnit(p, 1865429313, -4242.4, -492.4, 63.2)
	Ct = CreateUnit(p, 1865429296, -129.2, -2927.6, 277.91)
	u = CreateUnit(p, 1865429297, 670.9, -1270.5, 175.947)
	ct = CreateUnit(p, 1865429298, -11366.8, 10882.4, 86.53)
	u = CreateUnit(p, 1865429299, -10757.5, -9392.7, 335.57)
	u = CreateUnit(p, 1865429300, -10267.3, -9397.0, 236.63)
	u = CreateUnit(p, 1865429301, -10757.4, -8828.2, 287.56)
	u = CreateUnit(p, 1865429302, -10344.1, -8824.9, 251.35)
	u = CreateUnit(p, 1865429303, -10584.5, -8441.9, 294.94)
	--set u=CreateUnit(p,1865429321,521.6,-61.5,181.21)
	Dt = CreateUnit(p, 1865429314, -10140.6, 719.9, 154.876)
	Et = CreateUnit(p, 1865429315, -9636.7, -400.7, 28.58)
	Ft = CreateUnit(p, 1865429320, -8902.4, -26.0, 141.62)
	u = CreateUnit(p, 1865429322, -2032.3, -1442.2, 179.83)
	ShowUnitHide(gg_unit_nvl2_0005)
	u = nil
	p = nil
end
function InitEnvironment()
	local we
	local d	
	wh = CreateSound("Sound\\Ambient\\DoodadEffects\\Seagull1.wav", false, false, false, 10, 10, "DefaultEAXON")
	SetSoundParamsFromLabel(wh, "SeagullSound")
	SetSoundDuration(wh, 3593)
	Ah = CreateSound("Sound\\Music\\mp3Music\\UndeadVictory.mp3", false, false, false, 10, 10, "DefaultEAXON")
	SetSoundDuration(Ah, 39794)
	SetSoundChannel(Ah, 0)
	SetSoundVolume(Ah, 127)
	SetSoundPitch(Ah, 1.0)
	ah = CreateSound("Sound\\Music\\mp3Music\\Undead1.mp3", false, false, false, 10, 10, "DefaultEAXON")
	SetSoundDuration(ah, 303507)
	SetSoundChannel(ah, 0)
	SetSoundVolume(ah, 127)
	SetSoundPitch(ah, 1.0)
	Bh = CreateSound("Sound\\Music\\mp3Music\\SadMystery.mp3", false, false, false, 10, 10, "DefaultEAXON")
	SetSoundDuration(Bh, 84515)
	SetSoundChannel(Bh, 0)
	SetSoundVolume(Bh, 127)
	SetSoundPitch(Bh, 1.0)
	bh = CreateSound("Sound\\Interface\\Hint.wav", false, false, false, 10, 10, "DefaultEAXON")
	SetSoundParamsFromLabel(bh, "Hint")
	SetSoundDuration(bh, 2006)
	Ch = CreateSound("Sound\\Ambient\\DoodadEffects\\SargerasLaugh.wav", false, true, true, 10, 10, "DefaultEAXON")
	SetSoundParamsFromLabel(Ch, "SargerasLaugh")
	SetSoundDuration(Ch, 3326)
	Dh = CreateSound("Sound\\Ambient\\DoodadEffects\\UtherReturns.wav", false, false, false, 10, 10, "DefaultEAXON")
	SetSoundParamsFromLabel(Dh, "UtherReturnsSound")
	SetSoundDuration(Dh, 6711)
	Eh = CreateSound("Abilities\\Spells\\NightElf\\FaerieFire\\FaerieFireLaunch1.wav", false, true, true, 10, 10, "SpellsEAX")
	SetSoundParamsFromLabel(Eh, "FaerieFire")
	SetSoundDuration(Eh, 2067)
	Fh = CreateSound("Abilities\\Spells\\Orc\\Reincarnation\\Reincarnation.wav", false, true, true, 10, 10, "SpellsEAX")
	SetSoundParamsFromLabel(Fh, "Reincarnation")
	SetSoundDuration(Fh, 2728)
	Gh = CreateSound("Sound\\Interface\\Warning.wav", false, false, false, 10, 10, "DefaultEAXON")
	SetSoundParamsFromLabel(Gh, "Warning")
	SetSoundDuration(Gh, 1904)
	Hh = CreateSound("Sound\\Interface\\QuestCompleted.wav", false, false, false, 10, 10, "DefaultEAXON")
	SetSoundParamsFromLabel(Hh, "QuestCompleted")
	SetSoundDuration(Hh, 5155)
	Ih = CreateSound("Abilities\\Spells\\Items\\ResourceItems\\ReceiveGold.wav", false, true, true, 10, 10, "SpellsEAX")
	SetSoundParamsFromLabel(Ih, "ReceiveGold")
	SetSoundDuration(Ih, 589)
	udg_jail = Rect(9703.0, -15845.0, 11395.0, -13510.0)
	udg_yizhan = Rect(-224, -1504, 32, -1248)
	udg_xuanmenpai = Rect(952, -4548, 2330, -2956)
	udg_tiaozhanqu = Rect(10000, -13320, 13530, -10600)
	Ge = Rect(1504.0, -4288.0, 1856.0, -3968.0)
	He = Rect(1664.0, -2944.0, 1920.0, -2688.0)
	Ie = Rect(4192.0, -4032.0, 5312.0, -3264.0)
	le = Rect(3200.0, -4992.0, 4256.0, -4384.0)
	Je = Rect(-1472.0, -1536.0, 64.0, -864.0)
	Ke = Rect(-1568.0, -672.0, 0.0, -64.0)
	Le = Rect(-3296.0, 3488.0, -2784.0, 3936.0)
	Me = Rect(-1056.0, 5024.0, -448.0, 5600.0)
	Ne = Rect(1216.0, 3424.0, 1760.0, 3936.0)
	Oe = Rect(-960.0, -5248.0, -480.0, -4896.0)
	botong = Rect(12300, 1550, 12800, 2050)
	Pe = Rect(-2240.0, -544.0, -1952.0, -128.0)
	Qe = Rect(1024.0, -2944.0, 1344.0, -2752.0)
	Re = Rect(5344.0, -5056.0, 6496.0, -4448.0)
	Se = Rect(1728.0, -5280.0, 1984.0, -5088.0)
	Te = Rect(-5600.0, -3104.0, -5312.0, -2816.0)
	Ue = Rect(-3840.0, -2816.0, -3328.0, -2592.0)
	Ve = Rect(2688.0, -6240.0, 3008.0, -5952.0)
	We = Rect(1280.0, -6464.0, 1632.0, -6208.0)
	Xe = Rect(3168.0, -864.0, 3488.0, -576.0)
	Ye = Rect(-5056.0, 192.0, -4736.0, 512.0)
	Ze = Rect(-11968.0, 448.0, -11680.0, 736.0)
	df = Rect(-10688.0, -1152.0, -4864.0, 5792.0)
	lh_r = Rect(8800, -4500, 14300, 4500)
	we = AddWeatherEffect(df, 1464820599)
	EnableWeatherEffect(we, true)
	ef = Rect(-13568.0, 2272.0, -13440.0, 2400.0)
	ff = Rect(1376.0, -3840.0, 1472.0, -3744.0)
	gf = Rect(-12448.0, 1440.0, -12288.0, 1600.0)
	hf = Rect(-11584.0, 2496.0, -11456.0, 2624.0)
	jf = Rect(-12704.0, 3680.0, -12576.0, 3808.0)
	kf = Rect(-14688.0, 3552.0, -14560.0, 3680.0)
	mf = Rect(-14752.0, 1760.0, -14624.0, 1888.0)
	nf = Rect(-14080.0, 288.0, -13952.0, 416.0)
	of = Rect(-15328.0, 96.0, -11296.0, 4352.0)
	we = AddWeatherEffect(of, 1178886760)
	EnableWeatherEffect(we, true)
	pf = Rect(-5568.0, -5472.0, -5280.0, -5216.0)
	qf = Rect(-4064.0, -5408.0, -3744.0, -5184.0)
	rf = Rect(-5600.0, -4512.0, -5376.0, -4256.0)
	sf = Rect(-4608.0, -4448.0, -4416.0, -4288.0)
	tf = Rect(-3520.0, -4576.0, -3296.0, -4384.0)
	uf = Rect(-2560.0, -6144.0, -2368.0, -5984.0)
	vf = Rect(-3424.0, -6592.0, -3200.0, -6368.0)
	wf = Rect(-5568.0, -6496.0, -5344.0, -6272.0)
	xf = Rect(-15712.0, 5568.0, -11008.0, 10176.0)
	we = AddWeatherEffect(xf, 1464755063)
	EnableWeatherEffect(we, true)
	yf = Rect(-15392.0, 5184.0, -15136.0, 5440.0)
	zf = Rect(-12768.0, 6496.0, -12576.0, 6688.0)
	Af = Rect(-14240.0, 6176.0, -14080.0, 6304.0)
	af = Rect(-14144.0, 7136.0, -13984.0, 7296.0)
	Bf = Rect(-13888.0, 8352.0, -13728.0, 8480.0)
	bf = Rect(-11488.0, 7936.0, -11328.0, 8096.0)
	Cf = Rect(-11456.0, 5856.0, -11296.0, 6048.0)
	cf = Rect(-13088.0, 5856.0, -12928.0, 5984.0)
	Df = Rect(-10272.0, -5824.0, -6752.0, -1600.0)
	we = AddWeatherEffect(Df, 1178886760)
	EnableWeatherEffect(we, true)
	SetSoundPosition(ah, -8512.0, -3712.0, 0.0)
	RegisterStackedSound(ah, true, 3520.0, 4224.0)
	Ef = Rect(-6080.0, -7136.0, -1728.0, -4224.0)
	we = AddWeatherEffect(Ef, 1380018290)
	EnableWeatherEffect(we, true)
	Ff = Rect(-6400.0, -1600.0, -6272.0, -1472.0)
	Gf = Rect(-9760.0, -5440.0, -9632.0, -5312.0)
	Hf = Rect(-10048.0, -5440.0, -9920.0, -5312.0)
	If = Rect(-6208.0, -1568.0, -6080.0, -1440.0)
	lf = Rect(-8704.0, -3840.0, -8576.0, -3712.0)
	Jf = Rect(-8704.0, -3648.0, -8576.0, -3520.0)
	Kf = Rect(-9280.0, -3840.0, -9152.0, -3712.0)
	Lf = Rect(-9568.0, -3840.0, -9440.0, -3712.0)
	Mf = Rect(6048.0, -672.0, 7040.0, 384.0)
	Nf = Rect(-15680.0, 10432.0, -10976.0, 15296.0)
	we = AddWeatherEffect(Nf, 1464755063)
	EnableWeatherEffect(we, true)
	Of = Rect(-13440.0, 11648.0, -13312.0, 11776.0)
	Pf = Rect(-13728.0, 11840.0, -13600.0, 11968.0)
	Qf = Rect(-12800.0, 11136.0, -12672.0, 11264.0)
	Rf = Rect(1664.0, 6336.0, 6048.0, 10624.0)
	we = AddWeatherEffect(Rf, 1464822903)
	EnableWeatherEffect(we, true)
	SetSoundPosition(Bh, 3856.0, 8480.0, 512.0)
	RegisterStackedSound(Bh, true, 4384.0, 4288.0)
	Sf = Rect(-12480.0, 11168.0, -12352.0, 11296.0)
	Tf = Rect(-12416.0, 13184.0, -12288.0, 13312.0)
	Uf = Rect(-12160.0, 12992.0, -12032.0, 13120.0)
	Vf = Rect(-13056.0, 13376.0, -12928.0, 13504.0)
	Wf = Rect(-13248.0, 13664.0, -13120.0, 13792.0)
	Xf = Rect(-15264.0, 10912.0, -15136.0, 11040.0)
	Yf = Rect(-13312.0, 14688.0, -13184.0, 14816.0)
	Zf = Rect(-15072.0, 14752.0, -14944.0, 14880.0)
	dg = Rect(-9088.0, 13504.0, -8896.0, 13664.0)
	eg = Rect(-6688.0, 15008.0, -6496.0, 15168.0)
	fg = Rect(-7968.0, 13408.0, -7776.0, 13568.0)
	gg = Rect(-8864.0, 12992.0, -8672.0, 13152.0)
	hg = Rect(-8768.0, 11360.0, -8576.0, 11552.0)
	ig = Rect(-9504.0, 12832.0, -9312.0, 13024.0)
	jg = Rect(-6784.0, 11328.0, -6592.0, 11520.0)
	kg = Rect(-6880.0, 9184.0, -6688.0, 9376.0)
	mg = Rect(-9568.0, 11360.0, -9376.0, 11552.0)
	ng = Rect(-9632.0, 10880.0, -9440.0, 11072.0)
	og = Rect(-9056.0, 9344.0, -8864.0, 9536.0)
	pg = Rect(-8992.0, 8832.0, -8800.0, 9024.0)
	qg = Rect(-7456.0, 10144.0, -7264.0, 10336.0)
	rg = Rect(-7136.0, 12736.0, -6944.0, 12928.0)
	sg = Rect(-6656.0, 14176.0, -6464.0, 14368.0)
	tg = Rect(-6848.0, 6688.0, -6656.0, 6880.0)
	ug = Rect(-6912.0, 8576.0, -6720.0, 8768.0)
	vg = Rect(-9728.0, 7584.0, -9536.0, 7744.0)
	wg = Rect(-9632.0, 9184.0, -9408.0, 9376.0)
	xg = Rect(-9088.0, 7008.0, -8928.0, 7200.0)
	yg = Rect(-8192.0, 7776.0, -8032.0, 7936.0)
	zg = Rect(-9856.0, 6624.0, -9664.0, 6816.0)
	Ag = Rect(-5216.0, 6848.0, -5088.0, 6976.0)
	ag = Rect(5568.0, -1056.0, 5792.0, -768.0)
	Bg = Rect(-3616.0, -96.0, -3328.0, 224.0)
	bg = Rect(-5856.0, 6784.0, -2848.0, 11328.0)
	Cg = Rect(4576.0, -2304.0, 4736.0, -2112.0)
	cg = Rect(4160.0, -3168.0, 7200.0, -1216.0)
	we = AddWeatherEffect(cg, 1296393331)
	EnableWeatherEffect(we, true)
	Dg = Rect(-14912.0, -4928.0, -14720.0, -4768.0)
	Eg = Rect(-15264.0, -6560.0, -15072.0, -6368.0)
	Fg = Rect(-13120.0, -2112.0, -12960.0, -1952.0)
	Gg = Rect(-15744.0, -6752.0, -10656.0, -320.0)
	Hg = Rect(-16096.0, -10656.0, -12352.0, -7168.0)
	Ig = Rect(-15520.0, -10208.0, -15296.0, -9952.0)
	lg = Rect(-12384.0, -6080.0, -12000.0, -5600.0)
	Jg = Rect(-32.0, 11968.0, 256.0, 12224.0)
	Kg = Rect(-5760.0, 11520.0, 512.0, 15296.0)
	we = AddWeatherEffect(Kg, 1280470369)
	EnableWeatherEffect(we, true)
	Lg = Rect(-1280.0, 10944.0, -1056.0, 11200.0)
	Mg = Rect(1792.0, 11456.0, 5504.0, 15648.0)
	we = AddWeatherEffect(Mg, 1397647475)
	EnableWeatherEffect(we, true)
	Ng = Rect(2112.0, 11840.0, 2304.0, 12032.0)
	Og = Rect(4800.0, 14016.0, 4992.0, 14208.0)
	Pg = Rect(3904.0, 12800.0, 4032.0, 12928.0)
	Qg = Rect(3616.0, 8448.0, 3840.0, 8672.0)
	Rg = Rect(4320.0, 320.0, 4512.0, 512.0)
	Sg = Rect(864.0, -5248.0, 1024.0, -5088.0)
	Ug = Rect(-15424.0, -15904.0, -13888.0, -14368.0)
	Vg = Rect(-14816.0, -15616.0, -14592.0, -15488.0)
	Wg = Rect(7200.0, 11904.0, 7392.0, 12064.0)
	Xg = Rect(7200.0, 14592.0, 7328.0, 14720.0)
	Yg = Rect(6432.0, 11648.0, 8256.0, 15264.0)
	we = AddWeatherEffect(Yg, 1296393331)
	EnableWeatherEffect(we, true)
	SetSoundPosition(ah, 7344.0, 13456.0, 0.0)
	RegisterStackedSound(ah, true, 1824.0, 3616.0)
	Zg = Rect(-10080.0, 608.0, -9888.0, 800.0)
	dh = Rect(9312.0, 13696.0, 9504.0, 13888.0)
	eh = Rect(8960.0, 13440.0, 10976.0, 15744.0)
	fh = Rect(-10688.0, 4704.0, -10560.0, 4864.0)
	gh = Rect(-10112.0, 5216.0, -9984.0, 5376.0)
	hh = Rect(-9824.0, -320.0, -9664.0, -160.0)
	udg_liuqiu = Rect(5728.0, -13472.0, 5952.0, -13248.0)
	jh = Rect(3104.0, -13344.0, 3328.0, -13120.0)
	kh = Rect(-9248.0, -96.0, -8832.0, 320.0)
	mh = Rect(-6528.0, 4224.0, -6336.0, 4384.0)
	nh = Rect(416.0, -864.0, 576.0, -704.0)
	oh = Rect(416.0, -1152.0, 576.0, -992.0)
	ph = Rect(416.0, -1472.0, 576.0, -1312.0)
	qh = Rect(416.0, -1760.0, 576.0, -1600.0)
	rh = Rect(-2784.0, -832.0, -2624.0, -672.0)
	sh = Rect(-2336.0, -832.0, -2176.0, -672.0)
	th = Rect(-2272.0, -1280.0, -2112.0, -1120.0)
	uh = Rect(-9216.0, -14464.0, -8800.0, -14048.0)
	vh = Rect(-7584.0, -11648.0, -7392.0, -11456.0)
	Gt = CreateDestructable(1096050481, -12160.0, -15104.0, 270.0, 0.1, 0)
	createitem(1227895891, -13670.0, -5176.9)
	createitem(1227895891, -15044.5, -4362.7)
	createitem(1227895891, -14352.8, -5099.9)
	createitem(1227895891, -12961.7, -1926.6)
	createitem(1227895891, -11668.2, -3676.2)
	createitem(1227895891, -13280.1, -3255.6)
	createitem(1227895891, -14558.4, -3730.4)
	createitem(1227895891, -12682.9, -5421.0)
	createitem(1227895891, -12819.6, -6280.9)
	createitem(1227895891, -11757.7, -1760.2)
	createitem(1227895891, -11871.1, -1750.7)
	createitem(1227895891, -12008.6, -5355.2)
	createitem(1227897138, -1694.1, -1810.2)
	createitem(1227897138, -1881.7, -1924.9)
	createitem(1227897138, -1657.2, -1924.9)
	createitem(1227897138, -1772.9, -1919.8)
	createitem(1227897138, -1894.2, -1812.9)
	createitem(1227897138, -1799.6, -1810.2)
end
function MapStartCreateUnitsAndInitEnvironments()
	CreateUnitsForPlayer_5()
	CreateUnitsForPlayer_12()
	CreateUnitsForPlayer_15()
	InitEnvironment()
end
------------------------------------------------
--游戏细节处理——一般情况下不需要修改
------------------------------------------------
function IsOrderMoveOrPatrol()
	return GetPlayerController(GetOwningPlayer(GetOrderedUnit())) == MAP_CONTROL_USER and (GetIssuedOrderId() == 851986 or GetIssuedOrderId() == 851990)
end
--用移动模拟攻击、巡逻模拟移动 对地面
function ImitateAttackAndMove()
	udg_loc1 = GetOrderPointLoc()
	if GetIssuedOrderId() == 851986 then
		IssuePointOrderByIdLoc(GetOrderedUnit(), 851983, udg_loc1)
	else
		if GetIssuedOrderId() == 851990 then
			IssuePointOrderByIdLoc(GetOrderedUnit(), 851986, udg_loc1)
		end
	end
	RemoveLocation(udg_loc1)
end
--右键点击己方单位
function IsRightClickOnAlly()
	return GetPlayerController(GetOwningPlayer(GetOrderedUnit())) == MAP_CONTROL_USER and IsPlayerAlly(GetOwningPlayer(GetOrderedUnit()), GetOwningPlayer(GetOrderTargetUnit())) and GetIssuedOrderId() == 851971
end
function GiveUpAttack()
	udg_loc1 = GetUnitLoc(GetOrderTargetUnit())
	IssuePointOrderByIdLoc(GetOrderedUnit(), 851971, udg_loc1)
	RemoveLocation(udg_loc1)
end
--用移动模拟攻击 对点
function IsOrderMoveToPoint()
	return GetPlayerController(GetOwningPlayer(GetOrderedUnit())) == MAP_CONTROL_USER and GetIssuedOrderId() == 851986
end
function ImitateAttackToPoint()
	IssueTargetOrderById(GetOrderedUnit(), 851983, GetOrderTargetUnit())
end
--优化速度加快
function Optimize()
	Cheat("DooConV")
	print("优化执行了一次")
end
--友方单位A基地
function IsAttackBasement()
	return GetTriggerUnit() == udg_ZhengPaiWL and IsUnitAlly(GetAttacker(), Player(5))
end
function GiveUpAttackBasement()
	IssueImmediateOrderById(GetAttacker(), 851972)
end
function ForceAnAttackerAttackBasement()
	IssuePointOrderByIdLoc(GetEnumUnit(), 851983, v7[4])
end
function ForceAttackersAttackBasement()
	ForGroupBJ(w7, ForceAnAttackerAttackBasement)
end
function GameDetail_Trigger()
	local t = CreateTrigger()
	--用移动模拟攻击、巡逻模拟移动 对地面
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
	TriggerAddCondition(t, Condition(IsOrderMoveOrPatrol))
	TriggerAddAction(t, ImitateAttackAndMove)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
	TriggerAddCondition(t, Condition(IsRightClickOnAlly))
	TriggerAddAction(t, GiveUpAttack)
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
	TriggerAddCondition(t, Condition(IsOrderMoveToPoint))
	TriggerAddAction(t, ImitateAttackToPoint)
	-- 友方单位A基地
	t = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(t, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(t, Condition(IsAttackBasement))
	TriggerAddAction(t, GiveUpAttackBasement)
	-- 让怪A基地
	t = CreateTrigger()
	TriggerRegisterTimerEventPeriodic(t, 5.0)
	TriggerAddAction(t, ForceAttackersAttackBasement)
	-- 游戏优化
	t = CreateTrigger()
	TriggerRegisterTimerEventSingle(t, 0.0)
	TriggerAddAction(t, Optimize)
	t = nil
end

function CunWuGong(num, id1, id2, s, dp1, fy1, gg1, jm1, wx1, ys1)
	local i = StringHash("武学")
	SaveInteger(YDHT, i + num, 0, num)
	SaveInteger(YDHT, i + num, 1, id1)
	SaveInteger(YDHT, i + num, 2, id2)
	SaveStr(YDHT, i + num, 3, s)
	SaveInteger(YDHT, i + num, 4, dp1)
	SaveInteger(YDHT, i + num, 5, fy1)
	SaveInteger(YDHT, i + num, 6, gg1)
	SaveInteger(YDHT, i + num, 7, jm1)
	SaveInteger(YDHT, i + num, 8, wx1)
	SaveInteger(YDHT, i + num, 9, ys1)
end
function CunWuGongS()
	--顺序：胆魄、福缘、根骨、经脉、悟性、医术
	CunWuGong(1, 1227895626, 1093678913, "江湖武学", 0, 10, 0, 0, 14, 15)
	CunWuGong(2, 1227895624, 1093678664, "江湖武学", 14, 12, 18, 0, 0, 0)
	CunWuGong(3, 1227895382, 1093678929, "江湖内功", 0, 12, 0, 18, 0, 14)
	CunWuGong(4, 1227895381, 1093678928, "江湖内功", 17, 0, 0, 22, 0, 0)
	CunWuGong(5, 1227895623, 1093678668, "江湖武学", 0, 0, 0, 15, 10, 12)
	CunWuGong(6, 1227895386, 1093682254, "江湖内功", 17, 14, 18, 0, 0, 0)
	CunWuGong(7, 1227895384, 1093678931, "九阴内功", 0, 17, 17, 17, 20, 0)
	CunWuGong(8, 1227895625, 1093678926, "九阴武学", 13, 0, 12, 12, 16, 0)
	CunWuGong(9, 1227895385, 1093678932, "江湖内功", 22, 20, 0, 17, 0, 0)
	CunWuGong(10, 1227895627, 1093678666, "江湖武学", 14, 0, 0, 16, 20, 0)
	CunWuGong(11, 1227895620, 1093678927, "江湖内功", 0, 16, 0, 0, 0, 16)
	CunWuGong(12, 1227895628, 1093678925, "江湖武学", 0, 14, 14, 14, 14, 0)
	CunWuGong(13, 1227895600, 1093678935, "江湖内功", 0, 0, 0, 23, 18, 17)
	CunWuGong(14, 1227895601, 1093678933, "江湖内功", 18, 20, 16, 0, 0, 0)
	CunWuGong(15, 1227895621, 1093678669, "江湖武学", 0, 0, 18, 18, 0, 0)
	CunWuGong(16, 1227895603, 1093678897, "江湖武学", 0, 12, 0, 16, 0, 11)
	CunWuGong(17, 1227895383, 1093678930, "江湖内功", 0, 0, 0, 14, 12, 11)
	CunWuGong(18, 1227895622, 1093678672, "江湖武学", 0, 0, 22, 17, 15, 0)
	CunWuGong(19, 1227895609, 1093678919, "绝世武学", 18, 21, 27, 0, 0, 0)
	CunWuGong(20, 1227895604, 1093678924, "绝世武学", 20, 0, 26, 18, 0, 0)
	CunWuGong(21, 1227895608, 1093678918, "绝世武学", 0, 19, 0, 22, 28, 0)
	CunWuGong(22, 1227895607, 1093678920, "绝世武学", 17, 25, 0, 0, 17, 0)
	CunWuGong(23, 1227895618, 1093679158, "绝世武学", 0, 23, 20, 0, 29, 0)
	CunWuGong(24, 1227895602, 1093678917, "绝世武学", 24, 0, 30, 24, 0, 0)
	CunWuGong(25, 1227895605, 1093679157, "绝世武学", 0, 0, 0, 24, 19, 16)
	CunWuGong(26, 1227895606, 1093678922, "绝世武学", 23, 0, 0, 18, 0, 16)
	CunWuGong(27, 1227895619, 1093679161, "绝世武学", 23, 0, 0, 20, 22, 0)
	CunWuGong(28, 1227895617, 1093678921, "绝世武学", 25, 0, 25, 25, 20, 0)
	CunWuGong(29, 1227895635, 1093679154, "绝世内功", 22, 32, 0, 22, 0, 25)
	CunWuGong(30, 1227895631, 1093679156, "绝世内功", 28, 19, 0, 28, 0, 0)
	CunWuGong(31, 1227895636, 1395666994, "绝世内功", 20, 0, 29, 0, 0, 23)
	CunWuGong(32, 1227895633, 1093678936, "绝世内功", 0, 23, 31, 33, 0, 0)
	CunWuGong(33, 1227895629, 1093682232, "绝世内功", 28, 24, 0, 33, 0, 30)
	CunWuGong(34, 1227895632, 1093679152, "绝世内功", 25, 0, 0, 32, 22, 32)
	CunWuGong(35, 1227895637, 1093679155, "绝世内功", 0, 24, 0, 30, 24, 21)
	CunWuGong(36, 1227895634, 1093679428, "绝世内功", 0, 30, 0, 27, 34, 23)
	CunWuGong(37, 1227897159, 1093682226, "九阴内功", 0, 17, 17, 17, 20, 0)
	CunWuGong(38, 1227897160, 1093682228, "九阴内功", 0, 17, 17, 17, 20, 0)
	CunWuGong(39, 1227897161, 1093682230, "九阴内功", 0, 17, 17, 17, 20, 0)
	CunWuGong(40, 1227897162, 1093682225, "九阴武学", 13, 0, 12, 12, 16, 0)
	CunWuGong(41, 1227897163, 1093682227, "九阴武学", 13, 0, 12, 12, 16, 0)
	CunWuGong(42, 1227899698, 1093677902, "奇武", 0, 0, 0, 15, 14, 16)
	CunWuGong(43, 1227899699, 1093677904, "奇武", 0, 18, 26, 0, 0, 16)
	CunWuGong(44, 1227899700, 1093677900, "奇武", 12, 14, 16, 0, 0, 0)
	CunWuGong(45, 1227899701, 1093677905, "奇武", 17, 0, 0, 0, 20, 0)
	CunWuGong(46, 1227899702, 1093677903, "奇武", 14, 15, 16, 0, 0, 12)
	CunWuGong(47, 1227899704, 1093681989, "奇武", 12, 0, 0, 0, 18, 0)
	CunWuGong(48, 1227899705, 1093677908, "奇武", 14, 17, 0, 16, 0, 0)
	CunWuGong(49, 1227899713, 1093677909, "奇武", 0, 0, 0, 20, 0, 0)
	CunWuGong(50, 1227899714, 1093677911, "奇武", 0, 0, 0, 14, 14, 0)
	CunWuGong(51, 1227899715, 1093677910, "奇武", 0, 0, 0, 0, 15, 12)
	CunWuGong(52, 1227899716, 1093677914, "奇武", 13, 17, 16, 0, 0, 0)
	CunWuGong(53, 1227899722, 1093678166, "奇武", 15, 0, 16, 0, 17, 0)
	CunWuGong(54, 1227899732, 1093678657, "奇武", 15, 0, 15, 15, 15, 0) --《寿木长生功》
	CunWuGong(55, 1227899733, 1093678658, "奇武", 20, 20, 0, 18, 0, 0) --《黄沙万里鞭法》
	CunWuGong(56, 1227899734, 1093678675, "奇武", 0, 0, 0, 25, 0, 25) --《九阳真经散篇》
end
--万能装备系统
function Cun(id, name, s11, i11, s12, i12, s13, i13, s14, i14)
	local it = CreateItem(id, 0, 0)
	local l__hp = R2I(GetWidgetLife(it))
	local lv = 0
	if HaveSavedInteger(YDHT, id, id) == false then
		SaveInteger(YDHT, id, id, id)
	end
	if StringLength(s11) > 0 and i11 > 0 then
		SaveReal(YDHT, id, StringHash(s11), i11)
	end
	if StringLength(s12) > 0 and i12 > 0 then
		SaveReal(YDHT, id, StringHash(s12), i12)
	end
	if StringLength(s13) > 0 and i13 > 0 then
		SaveReal(YDHT, id, StringHash(s13), i13)
	end
	if StringLength(s14) > 0 and i14 > 0 then
		SaveReal(YDHT, id, StringHash(s14), i14)
	end
	SaveReal(YDHT, id, StringHash("升级概率"), 100.0)
	RemoveItem(it)
	it = nil
end

function Cuns()
	--攻击力、护甲、招式伤害、内力、真实伤害
	--call BJDebugMsg("开始存储装备属性")
	Cun(1227894851, "龙鳞剑", "攻击力", 5000, "招式伤害", 750, "内力", 200, "真实伤害", 200)
	Cun(1227894850, "倚天剑", "攻击力", 4500, "招式伤害", 700, "内力", 190, "真实伤害", 0)
	Cun(1227894852, "屠龙刀", "攻击力", 4850, "招式伤害", 720, "内力", 195, "真实伤害", 300)
	Cun(1227895878, "断肠", "攻击力", 1000, "招式伤害", 150, "内力", 0, "真实伤害", 80)
	Cun(1227894864, "晶玉扇", "攻击力", 3000, "招式伤害", 250, "内力", 150, "真实伤害", 0)
	Cun(1227894865, "紫金刀", "攻击力", 2700, "招式伤害", 230, "内力", 0, "真实伤害", 100)
	Cun(1227895116, "精钢剑", "攻击力", 650, "招式伤害", 80, "内力", 0, "真实伤害", 0)
	Cun(1227895118, "七星扇", "攻击力", 800, "招式伤害", 100, "内力", 0, "真实伤害", 40)
	Cun(1227894872, "鸳鸯刀", "攻击力", 1500, "招式伤害", 150, "内力", 50, "真实伤害", 0)
	Cun(1227897143, "打狗棒", "攻击力", 4500, "招式伤害", 650, "内力", 0, "真实伤害", 0)
	Cun(1227897145, "君子剑", "攻击力", 2000, "招式伤害", 100, "内力", 50, "真实伤害", 50)
	Cun(1227897154, "蛇杖", "攻击力", 4500, "招式伤害", 0, "内力", 0, "真实伤害", 1000)
	Cun(1227897153, "淑女剑", "攻击力", 1800, "招式伤害", 50, "内力", 100, "真实伤害", 50)
	Cun(1227897155, "双剑合璧", "攻击力", 3800, "招式伤害", 220, "内力", 220, "真实伤害", 150)
	Cun(1227897144, "血刀", "攻击力", 50000, "招式伤害", 700, "内力", 0, "真实伤害", 0)
	Cun(1227897156, "玉箫", "攻击力", 4850, "招式伤害", 0, "内力", 900, "真实伤害", 0)
	Cun(1227896918, "江湖·忠", "攻击力", 10000, "招式伤害", 350, "内力", 350, "真实伤害", 350)
	Cun(1227895379, "镇妖+1", "攻击力", 1000, "招式伤害", 150, "内力", 0, "真实伤害", 0)
	Cun(1227895373, "镇妖+2", "攻击力", 2000, "招式伤害", 300, "内力", 0, "真实伤害", 0)
	Cun(1227895377, "镇妖+3", "攻击力", 3000, "招式伤害", 450, "内力", 0, "真实伤害", 0)
	Cun(1227895378, "镇妖+4", "攻击力", 4000, "招式伤害", 600, "内力", 0, "真实伤害", 0)
	Cun(1227895376, "镇妖+5", "攻击力", 5000, "招式伤害", 750, "内力", 0, "真实伤害", 0)
	Cun(1227895110, "点金", "攻击力", 500, "招式伤害", 50, "内力", 20, "真实伤害", 0)
	Cun(1227895123, "开山斧", "攻击力", 450, "招式伤害", 30, "内力", 0, "真实伤害", 0)
	Cun(1227895344, "青铜刀", "攻击力", 0, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227895109, "秋叶刃", "攻击力", 600, "招式伤害", 60, "内力", 0, "真实伤害", 0)
	Cun(1227895345, "锁候枪", "攻击力", 200, "招式伤害", 15, "内力", 0, "真实伤害", 0)
	Cun(1227895094, "宣花斧", "攻击力", 800, "招式伤害", 100, "内力", 0, "真实伤害", 0)
	Cun(1227895091, "饮血枪", "攻击力", 1200, "招式伤害", 120, "内力", 0, "真实伤害", 50)
	Cun(1227895346, "布衣", "防御", 35, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227895124, "彩衣", "防御", 60, "招式伤害", 0, "内力", 15, "真实伤害", 0)
	Cun(1227895112, "虎皮衣", "防御", 85, "招式伤害", 0, "内力", 40, "真实伤害", 0)
	Cun(1227895111, "蛇皮裘", "防御", 90, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227895095, "开阳衣", "防御", 150, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227895092, "烈火衣", "防御", 300, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227895119, "七星锦服", "防御", 150, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227895877, "金蝉衣", "防御", 250, "招式伤害", 0, "内力", 80, "真实伤害", 0)
	Cun(1227894863, "软猬甲", "防御", 450, "招式伤害", 0, "内力", 100, "真实伤害", 0)
	Cun(1227894854, "六合纵横", "防御", 700, "招式伤害", 200, "内力", 100, "真实伤害", 200)
	Cun(1227894855, "破军无双", "防御", 800, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227897136, "决战·霸", "防御", 1000, "招式伤害", 0, "内力", 250, "真实伤害", 0)
	Cun(1227899212, "少林袈裟", "防御", 500, "招式伤害", 300, "内力", 0, "真实伤害", 0)
	Cun(1227897178, "通神", "防御", 500, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227895121, "破军帽", "防御", 20, "招式伤害", 0, "内力", 0, "真实伤害", 30)
	Cun(1227894861, "灭云冠", "防御", 300, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227896922, "决战·恶", "防御", 500, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227895122, "破军鞋", "防御", 25, "招式伤害", 0, "内力", 0, "真实伤害", 30)
	Cun(1227894868, "神行鞋", "防御", 200, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227894862, "踏风靴", "防御", 200, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227896921, "决战·魁", nil, 0, "招式伤害", 0, "内力", 0, "真实伤害", 500)
	Cun(1227895126, "苍蟒护腕", "攻击力", 0, "招式伤害", 0, "内力", 0, "真实伤害", 10)
	Cun(1227895125, "纱绒护腕", "攻击力", 0, "招式伤害", 15, "内力", 0, "真实伤害", 0)
	Cun(1227895096, "彩云腕", nil, 0, "招式伤害", 50, "内力", 20, "真实伤害", 0)
	Cun(1227895108, "天璇护腕", nil, 0, "招式伤害", 100, "内力", 100, "真实伤害", 100)
	Cun(1227895117, "精钢护腕", "防御", 30, "招式伤害", 40, "内力", 20, "攻击力", 250)
	Cun(1227894874, "追月手", nil, 0, "招式伤害", 120, "内力", 0, "真实伤害", 0)
	Cun(1227894866, "天玑毒掌", "攻击力", 1200, "招式伤害", 0, "内力", 0, "真实伤害", 150)
	Cun(1227894867, "无魅雷手", nil, 0, "招式伤害", 200, "内力", 100, "真实伤害", 0)
	Cun(1227894856, "魔影炎掌", "攻击力", 2000, "招式伤害", 300, "内力", 0, "真实伤害", 0)
	Cun(1227894857, "踏风冰手", "攻击力", 1800, "招式伤害", 0, "内力", 150, "真实伤害", 0)
	Cun(1227895347, "护身符", "防御", 0, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227895348, "环戒", "攻击力", 0, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227895128, "琥珀项链", nil, 0, "招式伤害", 0, "内力", 15, "真实伤害", 0)
	Cun(1227895129, "水碧护符", nil, 0, "招式伤害", 10, "内力", 15, "真实伤害", 0)
	Cun(1227895130, "闪避护符", "防御", 0, "招式伤害", 15, "内力", 0, "真实伤害", 0)
	Cun(1227895127, "传家符", "防御", 0, "招式伤害", 0, "内力", 0, "真实伤害", 15)
	Cun(1227895114, "七绝护符", nil, 0, "招式伤害", 50, "内力", 50, "真实伤害", 50)
	Cun(1227895115, "青竹戒指", "攻击力", 200, "招式伤害", 20, "内力", 0, "真实伤害", 0)
	Cun(1227895113, "星云戒指", nil, 0, "招式伤害", 30, "内力", 0, "真实伤害", 0)
	Cun(1227895097, "白虎符", "攻击力", 300, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227895105, "蓝魔项链", "防御", 50, "招式伤害", 0, "内力", 40, "真实伤害", 0)
	Cun(1227895106, "北斗护符", "攻击力", 500, "招式伤害", 0, "内力", 0, "真实伤害", 60)
	Cun(1227895107, "梦蝶项链", nil, 0, "招式伤害", 50, "内力", 0, "真实伤害", 40)
	Cun(1227895120, "七星戒指", nil, 0, "招式伤害", 0, "内力", 30, "真实伤害", 0)
	Cun(1227895088, "云海链", nil, 0, "招式伤害", 120, "内力", 60, "真实伤害", 0)
	Cun(1227894873, "七情束", nil, 0, "招式伤害", 100, "内力", 0, "真实伤害", 0)
	Cun(1227895089, "影岚护符", nil, 0, "招式伤害", 100, "内力", 0, "真实伤害", 0)
	Cun(1227895090, "玉修护符", nil, 0, "招式伤害", 0, "内力", 0, "真实伤害", 50)
	Cun(1227894869, "云灭护符", "攻击力", 1000, "招式伤害", 200, "内力", 0, "真实伤害", 0)
	Cun(1227894870, "抗魔护符", nil, 0, "招式伤害", 0, "内力", 150, "真实伤害", 100)
	Cun(1227894871, "重生链", "防御", 100, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227894858, "神迹戒", nil, 0, "招式伤害", 0, "内力", 150, "真实伤害", 200)
	Cun(1227894859, "如意戒", "攻击力", 1500, "招式伤害", 0, "内力", 150, "真实伤害", 0)
	Cun(1227894860, "绿扳指", "防御", 200, "招式伤害", 0, "内力", 0, "真实伤害", 0)
	Cun(1227896919, "江湖·情", nil, 0, "招式伤害", 900, "内力", 400, "真实伤害", 0)
	Cun(1227896920, "江湖·义", nil, 0, "招式伤害", 800, "内力", 0, "真实伤害", 500)
	--根骨、悟性、绝学领悟
	Cun(1227894851, "龙鳞剑", "根骨", 3, "胆魄", 2, "绝学领悟", 2, nil, 0)
	Cun(1227894850, "倚天剑", "悟性", 3, "医术", 2, "绝学领悟", 2, nil, 0)
	Cun(1227894852, "屠龙刀", "经脉", 3, "福缘", 2, "绝学领悟", 1, nil, 0)
	Cun(1227895878, "断肠", "经脉", 2, nil, 0, nil, 0, nil, 0)
	Cun(1227894864, "晶玉扇", "悟性", 2, "福缘", 2, "绝学领悟", 1, nil, 0)
	Cun(1227894865, "紫金刀", "经脉", 2, "医术", 2, nil, 0, nil, 0)
	Cun(1227895118, "七星扇", "医术", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895109, "秋叶刃", "根骨", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227894872, "鸳鸯刀", "福缘", 2, nil, 0, nil, 0, nil, 0)
	Cun(1227897143, "打狗棒", "胆魄", 3, "全属性", 1, "绝学领悟", 2, nil, 0)
	Cun(1227897145, "君子剑", "悟性", 1, "医术", 1, "绝学领悟", 1, nil, 0)
	Cun(1227897154, "蛇杖", "根骨", 4, "全属性", 2, "绝学领悟", 1, nil, 0)
	Cun(1227897153, "淑女剑", "福缘", 1, "经脉", 1, "绝学领悟", 1, nil, 0)
	Cun(1227897155, "双剑合璧", "悟性", 3, "全属性", 1, "绝学领悟", 3, nil, 0)
	Cun(1227897144, "血刀", "根骨", 7, "胆魄", 4, "绝学领悟", 2, nil, 0)
	Cun(1227897156, "玉箫", "福缘", 2, "全属性", 2, "绝学领悟", 3, nil, 0)
	Cun(1227896918, "江湖·忠", "全属性", 2, "绝学领悟", 1, nil, 0, nil, 0)
	Cun(1227895091, "饮血枪", "胆魄", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895116, "精钢剑", "胆魄", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895111, "蛇皮裘", "经脉", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895092, "烈火衣", "经脉", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895119, "七星锦服", "胆魄", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895877, "金蝉衣", "悟性", 1, "福缘", 1, nil, 0, nil, 0)
	Cun(1227894863, "软猬甲", "根骨", 2, "胆魄", 2, "绝学领悟", 1, nil, 0)
	Cun(1227894854, "六合纵横", "根骨", 2, "胆魄", 2, "福缘", 1, nil, 0)
	Cun(1227894855, "破军无双", "医术", 3, "悟性", 2, nil, 0, nil, 0)
	Cun(1227897136, "决战·霸", "全属性", 1, "绝学领悟", 1, nil, 0, nil, 0)
	Cun(1227899212, "少林袈裟", "全属性", 1, "根骨", 2, nil, 0, nil, 0)
	Cun(1227895121, "破军帽", "悟性", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227894861, "灭云冠", "根骨", 1, "悟性", 2, "经脉", 1, "绝学领悟", 1)
	Cun(1227896922, "决战·恶", "全属性", 1, "绝学领悟", 1, nil, 0, nil, 0)
	Cun(1227895122, "破军鞋", "福缘", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227894868, "神行鞋", "福缘", 3, "经脉", 3, nil, 0, nil, 0)
	Cun(1227894862, "踏风靴", "悟性", 2, "福缘", 1, "医术", 1, nil, 0)
	Cun(1227896921, "决战·魁", "全属性", 1, "绝学领悟", 1, nil, 0, nil, 0)
	Cun(1227895126, "苍蟒护腕", "根骨", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895125, "纱绒护腕", "悟性", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895108, "天璇护腕", "胆魄", 3, nil, 0, nil, 0, nil, 0)
	Cun(1227895093, "霓云手套", "根骨", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895117, "精钢护腕", "根骨", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227894874, "追月手", "悟性", 2, nil, 0, nil, 0, nil, 0)
	Cun(1227894866, "天玑毒掌", "胆魄", 2, "经脉", 1, nil, 0, nil, 0)
	Cun(1227894867, "无魅雷手", "悟性", 3, "绝学领悟", 1, nil, 0, nil, 0)
	Cun(1227894856, "魔影炎掌", "根骨", 2, "经脉", 2, "绝学领悟", 1, nil, 0)
	Cun(1227894857, "踏风冰手", "悟性", 2, "胆魄", 2, nil, 0, nil, 0)
	Cun(1227895127, "传家符", "医术", 2, nil, 0, nil, 0, nil, 0)
	Cun(1227899213, "神木王鼎", "医术", 5, nil, 0, nil, 0, nil, 0)
	Cun(1227895128, "琥珀项链", "经脉", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895129, "水碧护符", "胆魄", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895130, "闪避护符", "福缘", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895114, "七绝护符", "福缘", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895113, "星云戒指", "医术", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895105, "蓝魔项链", "医术", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895106, "北斗护符", "福缘", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895107, "梦蝶项链", "根骨", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895120, "七星戒指", "经脉", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895088, "云海链", "医术", 2, nil, 0, nil, 0, nil, 0)
	Cun(1227894873, "七情束", "经脉", 2, nil, 0, nil, 0, nil, 0)
	Cun(1227899720, "郭靖戴过的环戒", "根骨", 1, nil, 0, nil, 0, nil, 0)
	Cun(1227895089, "影岚护符", "悟性", 2, "经脉", 1, nil, 0, nil, 0)
	Cun(1227895090, "玉修护符", "根骨", 1, "胆魄", 2, nil, 0, nil, 0)
	Cun(1227894869, "云灭护符", "根骨", 2, "医术", 1, nil, 0, nil, 0)
	Cun(1227894870, "抗魔护符", "胆魄", 1, "经脉", 2, nil, 0, nil, 0)
	Cun(1227894871, "重生链", "医术", 3, nil, 0, nil, 0, nil, 0)
	Cun(1227894858, "神迹戒", "福缘", 4, nil, 0, nil, 0, nil, 0)
	Cun(1227894859, "如意戒", "经脉", 1, "胆魄", 3, nil, 0, nil, 0)
	Cun(1227894860, "绿扳指", "医术", 1, "胆魄", 1, "福缘", 2, nil, 0)
	Cun(1227896919, "江湖·情", "全属性", 1, "绝学领悟", 1, nil, 0, nil, 0)
	Cun(1227896920, "江湖·义", "全属性", 1, "绝学领悟", 1, nil, 0, nil, 0)
	--攻击速度、暴击伤害、暴击率、杀怪回复、生命回复等等
	Cun(1227894851, "龙鳞剑", "攻击速度", 30, "暴击伤害", 0.6, "暴击率", 0.05, nil, 0)
	Cun(1227894850, "倚天剑", "闪避", 15, "法力回复", 5, "杀怪回复", 2000, "伤害回复", 500)
	Cun(1227895878, "断肠", "攻击速度", 30, "暴击率", 0.02, nil, 0, nil, 0)
	Cun(1227894864, "晶玉扇", "攻击速度", 25, "杀怪回复", 1500, nil, 0, nil, 0)
	Cun(1227894865, "紫金刀", "暴击伤害", 0.6, "暴击率", 0.05, "杀怪回复", 1500, nil, 0)
	Cun(1227895116, "精钢剑", "攻击速度", 20, "吸血", 0.05, "暴击率", 0.03, nil, 0)
	Cun(1227895118, "七星扇", "法力回复", 2, nil, 0, nil, 0, nil, 0)
	Cun(1227894872, "鸳鸯刀", "攻击速度", 20, nil, 0, nil, 0, nil, 0)
	Cun(1227897143, "打狗棒", "攻击速度", 60, "暴击伤害", 1.5, nil, 0, nil, 0)
	Cun(1227897145, "君子剑", "吸血", 0.15, "法力回复", 2, "杀怪回复", 500, "生命回复", 200)
	Cun(1227897154, "蛇杖", "暴击伤害", 0.9, "暴击率", 0.5, nil, 0, nil, 0)
	Cun(1227897153, "淑女剑", "闪避", 15, "伤害回复", 500, "暴击伤害", 0.3, "暴击率", 0.03)
	Cun(1227897155, "双剑合璧", "吸血", 0.15, "法力回复", 5, "杀怪回复", 2000, "生命回复", 500)
	Cun(1227897155, "双剑合璧", "闪避", 15, "伤害回复", 800, "暴击伤害", 0.5, "暴击率", 0.05)
	Cun(1227897144, "血刀", "攻击速度", 60, "暴击伤害", 0.8, "杀怪回复", 10000, nil, 0)
	Cun(1227897156, "玉箫", "法力回复", 15, "杀怪回复", 2000, "生命回复", 1500, nil, 0)
	Cun(1227896918, "江湖·忠", "攻击速度", 60, "暴击伤害", 1, "暴击率", 0.2, "杀怪回复", 3000)
	Cun(1227895379, "镇妖+1", "攻击速度", 20, "暴击伤害", 0.15, "杀怪回复", 300, nil, 0)
	Cun(1227895373, "镇妖+2", "攻击速度", 30, "暴击伤害", 0.3, "杀怪回复", 600, nil, 0)
	Cun(1227895377, "镇妖+3", "攻击速度", 40, "暴击伤害", 0.45, "杀怪回复", 900, nil, 0)
	Cun(1227895378, "镇妖+4", "攻击速度", 50, "暴击伤害", 0.6, "杀怪回复", 1200, nil, 0)
	Cun(1227895376, "镇妖+5", "攻击速度", 60, "暴击伤害", 0.75, "杀怪回复", 1500, nil, 0)
	Cun(1227895123, "开山斧", "暴击伤害", 0.15, "杀怪回复", 300, nil, 0, nil, 0)
	Cun(1227895344, "青铜刀", "攻击速度", 40, "杀怪回复", 0, nil, 0, nil, 0)
	Cun(1227899721, "张无忌用过的青铜刀", "攻击速度", 60, "杀怪回复", 0, nil, 0, nil, 0)
	Cun(1227895109, "秋叶刃", "攻击速度", 15, "杀怪回复", 500, nil, 0, nil, 0)
	Cun(1227895345, "锁候枪", "分裂", 0.3, "暴击率", 0.03, nil, 0, nil, 0)
	Cun(1227895094, "宣花斧", "吸血", 0.15, nil, 0, nil, 0, nil, 0)
	Cun(1227895091, "饮血枪", "攻击速度", 20, nil, 0, nil, 0, nil, 0)
	Cun(1227895346, "布衣", "气血", 1000, "杀怪回复", 30, "移动速度", 30, nil, 0)
	Cun(1227895124, "彩衣", "气血", 3000, "伤害回复", 70, nil, 0, nil, 0)
	Cun(1227895112, "虎皮衣", "气血", 3000, nil, 0, nil, 0, nil, 0)
	Cun(1227895111, "蛇皮裘", "气血", 5000, "伤害回复", 100, "生命回复", 250, nil, 0)
	Cun(1227895095, "开阳衣", "气血", 10000, nil, 0, nil, 0, nil, 0)
	Cun(1227895092, "烈火衣", "气血", 20000, "闪避", 10, nil, 0, nil, 0)
	Cun(1227895119, "七星锦服", "气血", 7000, "攻击速度", 30, "伤害回复", 300, nil, 0)
	Cun(1227895877, "金蝉衣", "气血", 15000, "生命回复", 700, "法力上限", 20, "法力回复", 5)
	Cun(1227894863, "软猬甲", "气血", 40000, "生命回复", 1200, "法力上限", 20, nil, 0)
	Cun(1227894854, "六合纵横", "气血", 30000, "伤害回复", 500, nil, 0, nil, 0)
	Cun(1227894855, "破军无双", "气血", 50000, "生命回复", 1500, "闪避", 20, nil, 0)
	Cun(1227897136, "决战·霸", "气血", 100000, "生命回复", 2000, "暴击率", 0.05, nil, 0)
	Cun(1227899212, "少林袈裟", "气血", 100000, "伤害回复", 2000, "暴击伤害", 0.7, nil, 0)
	Cun(1227897178, "通神", "气血", 40000, nil, 0, nil, 0, nil, 0)
	Cun(1227895121, "破军帽", "气血", 1500, "伤害回复", 150, nil, 0, nil, 0)
	Cun(1227894861, "灭云冠", "法力上限", 40, "暴击伤害", 0.2, nil, 0, nil, 0)
	Cun(1227896922, "决战·恶", "气血", 50000, "攻击速度", 50, "伤害回复", 800, "法力上限", 100)
	Cun(1227895122, "破军鞋", "生命回复", 150, "移动速度", 70, nil, 0, nil, 0)
	Cun(1227894868, "神行鞋", "气血", 25000, "移动速度", 160, "法力上限", 25, "法力回复", 10)
	Cun(1227894862, "踏风靴", "移动速度", 180, "杀怪回复", 1000, "生命回复", 500, "法力回复", 4)
	Cun(1227896921, "决战·魁", "移动速度", 200, "闪避", 30, "伤害回复", 600, "暴击伤害", 0.8)
	Cun(1227895126, "苍蟒护腕", "攻击速度", 15, "暴击率", 0.05, nil, 0, nil, 0)
	Cun(1227895125, "纱绒护腕", "攻击速度", 15, "暴击伤害", 0.15, nil, 0, nil, 0)
	Cun(1227895096, "彩云腕", "生命回复", 200, nil, 0, nil, 0, nil, 0)
	Cun(1227895108, "天璇护腕", "攻击速度", 20, nil, 0, "气血", 6000, nil, 0)
	Cun(1227895093, "霓云手套", "吸血", 0.03, "生命回复", 300, "法力上限", 20, nil, 0)
	Cun(1227895117, "精钢护腕", "气血", 2000, nil, 0, nil, 0, nil, 0)
	Cun(1227894874, "追月手", "攻击速度", 25, "伤害回复", 400, "法力回复", 5, nil, 0)
	Cun(1227894866, "天玑毒掌", "攻击速度", 30, "伤害回复", 400, "暴击伤害", 0.3, "暴击率", 0.02)
	Cun(1227894867, "无魅雷手", "攻击速度", 30, "杀怪回复", 1500, "法力回复", 5, nil, 0)
	Cun(1227894856, "魔影炎掌", "攻击速度", 40, "杀怪回复", 2000, nil, 0, nil, 0)
	Cun(1227894857, "踏风冰手", "攻击速度", 40, "伤害回复", 500, "暴击伤害", 0.5, "暴击率", 0.05)
	Cun(1227895347, "护身符", "伤害回复", 40, nil, 0, nil, 0, nil, 0)
	Cun(1227895348, "环戒", "杀怪回复", 100, "生命回复", 50, nil, 0, nil, 0)
	Cun(1227899720, "郭靖戴过的环戒", "闪避", 20, "杀怪回复", 100, "生命回复", 50, nil, 0)
	Cun(1227895127, "传家符", "杀怪回复", 150, "生命回复", 300, nil, 0, nil, 0)
	Cun(1227895128, "琥珀项链", "杀怪回复", 250, "生命回复", 150, nil, 0, nil, 0)
	Cun(1227895129, "水碧护符", "杀怪回复", 200, "生命回复", 120, "法力回复", 3, "伤害回复", 60)
	Cun(1227895130, "闪避护符", "杀怪回复", 150, "闪避", 10, "伤害回复", 80, nil, 0)
	--call Cun('I01J',"七绝护符","攻击速度",30,"暴击率",0.02,null,0,null,0)
	Cun(1227895115, "青竹戒指", "法力回复", 3, nil, 0, nil, 0, nil, 0)
	Cun(1227895113, "星云戒指", "杀怪回复", 300, "暴击伤害", 0.1, nil, 0, nil, 0)
	Cun(1227895097, "白虎符", "气血", 5000, nil, 0, nil, 0, nil, 0)
	Cun(1227895105, "蓝魔项链", "杀怪回复", 800, "法力上限", 40, "法力回复", 5, nil, 0)
	Cun(1227895106, "北斗护符", "移动速度", 80, "生命回复", 600, nil, 0, nil, 0)
	Cun(1227895107, "梦蝶项链", nil, 0, "攻击速度", 15, "气血", 8000, "伤害回复", 100)
	Cun(1227895120, "七星戒指", nil, 0, "攻击速度", 15, "生命回复", 200, "暴击伤害", 0.15)
	Cun(1227895088, "云海链", "气血", 13000, "杀怪回复", 500, "法力上限", 25, "暴击伤害", 0.2)
	Cun(1227894873, "七情束", "生命回复", 400, "法力上限", 20, "法力回复", 5, "暴击率", 0.02)
	Cun(1227895089, "影岚护符", "吸血", 0.05, "攻击速度", 20, "移动速度", 100, "生命回复", 400)
	Cun(1227895090, "玉修护符", "气血", 25000, "杀怪回复", 700, "生命回复", 600, "暴击率", 0.01)
	Cun(1227894869, "云灭护符", "攻击速度", 40, "杀怪回复", 1000, "暴击伤害", 0.3, nil, 0)
	Cun(1227894870, "抗魔护符", "吸血", 0.1, "气血", 25000, "法力上限", 15, "暴击伤害", 0.4)
	Cun(1227894871, "重生链", "吸血", 0.05, "攻击速度", 45, "生命回复", 700, "暴击率", 0.01)
	Cun(1227894858, "神迹戒", "杀怪回复", 1000, "伤害回复", 500, "法力回复", 8, nil, 0)
	Cun(1227894859, "如意戒", "攻击速度", 40, "伤害回复", 400, "法力上限", 50, nil, 0)
	Cun(1227894860, "绿扳指", "攻击速度", 50, "生命回复", 500, "气血", 20000, "暴击伤害", 0.5)
	Cun(1227896919, "江湖·情", "生命回复", 1000, "法力回复", 7, "暴击率", 0.1, nil, 0)
	Cun(1227896920, "江湖·义", "吸血", 0.3, "攻击速度", 0.5, "暴击伤害", 1, "暴击率", 0.05)
end
--刚进入地图
function Zw()
	FogEnableOff()
	FogMaskEnableOff()
	SetCreepCampFilterState(false)
	jw(false)
	SetPlayerAllianceStateBJ(Player(12), Player(6), 3)
	SetPlayerHandicapXP(Player(0), 0.43)
	SetPlayerHandicapXP(Player(1), 0.43)
	SetPlayerHandicapXP(Player(2), 0.43)
	SetPlayerHandicapXP(Player(3), 0.43)
	SetPlayerHandicapXP(Player(4), 0.43)
	SetCameraField(CAMERA_FIELD_TARGET_DISTANCE, 1800.0, 0.0)
	PlayMusicBJ(xh)
	K4[1] = Ls
	K4[2] = Qs
	K4[3] = Os
	K4[4] = Ns
	K4[5] = Ps
	K4[6] = LanXin
	K4[7] = XuanJin
	GroupAddUnit(i7, Ls)
	GroupAddUnit(i7, Ns)
	GroupAddUnit(i7, Qs)
	GroupAddUnit(i7, Os)
	GroupAddUnit(i7, Ps)
	GroupAddUnit(i7, LanXin)
	GroupAddUnit(i7, XuanJin)
	y7[1] = 1969711215
	y7[2] = 1970498413
	y7[3] = 1852798821
	y7[4] = 1851879023
	y7[5] = 1852008562
	y7[6] = 1852273524
	y7[7] = 1969381742
	y7[8] = 1852466993
	y7[9] = 1869898354
	y7[10] = 1853320292
	y7[11] = 1852208244
	y7[12] = 1701077869
	y7[13] = 1751410807
	y7[14] = 1852076648
	y7[15] = 1970107511
	y7[16] = 1852990571
	y7[17] = 1852207714
	y7[18] = 1869898347
	y7[19] = 1853517677
	y7[20] = 1869311844
	y7[21] = 1852076404
	y7[22] = 1852076662
	y7[23] = 1852204908
	y7[24] = 1701013613
	y7[25] = 1853125236
	y7[26] = 1852601452
	y7[27] = 1702064246
	y7[28] = 1852403302
	y7[29] = 1851941995
	y7[30] = 1852340580
	u7[1] = 1852007794
	u7[2] = 1852335457
	u7[3] = 1852599148
	u7[4] = 1852140645
	u7[5] = 1852141168
	u7[6] = 1851941985
	u7[7] = 1848651826
	u7[8] = 1851942003
	--call SetHeroLevel(gg_unit_N008_0054,99,true)
	SetUnitLifePercentBJ(gg_unit_N007_0055, 5)
	--call UnitAddAbility(gg_unit_N00F_0112,'A02Z')
	--call IssueTargetOrderById(gg_unit_N00F_0112, 852063, gg_unit_N007_0055)
	AddSpecialEffectTargetUnitBJ("overhead", Ts, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", Ft, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", Ss, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", vt, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", ot, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", nt, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", Et, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", ct, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", zt, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", Ct, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", ut, "Objects\\RandomObject\\RandomObject.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", xt, "Objects\\RandomObject\\RandomObject.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", yt, "Objects\\RandomObject\\RandomObject.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", Dt, "Objects\\RandomObject\\RandomObject.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", At, "Objects\\RandomObject\\RandomObject.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", Bt, "Objects\\RandomObject\\RandomObject.mdl")
	AddSpecialEffectTargetUnitBJ("overhead", gg_unit_N007_0055, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
	CreateTextTagUnitBJ("点我加门派后可离开此地", Rs, 0.0, 15.0, 100.0, 100.0, 0.0, 50.0)
	CreateTextTagLocBJ("决战江湖1.53名人榜", GetRectCenter(uh), 100.0, 10, 100, 100, 0.0, 50.0)
	v7[1] = GetRectCenter(Ie)
	v7[2] = GetRectCenter(le)
	v7[3] = GetRectCenter(Je)
	v7[4] = GetRectCenter(Ke)
	v7[5] = GetRectCenter(Le)
	v7[6] = GetRectCenter(Me)
	v7[7] = GetRectCenter(Ne)
	v7[8] = GetRectCenter(Oe)
	v7[9] = GetRectCenter(Ge)
	v7[10] = GetRectCenter(Re)
	v7[11] = GetRectCenter(ff)
	C7[1] = ft
	C7[2] = gt
	C7[3] = ht
	C7[4] = jt
	C7[5] = kt
	b7[1] = Us
	b7[2] = Zs
	b7[3] = Ys
	b7[4] = Xs
	b7[5] = Ws
	AdjustPlayerStateBJ(10, Player(0), PLAYER_STATE_RESOURCE_LUMBER)
	AdjustPlayerStateBJ(10, Player(1), PLAYER_STATE_RESOURCE_LUMBER)
	AdjustPlayerStateBJ(10, Player(2), PLAYER_STATE_RESOURCE_LUMBER)
	AdjustPlayerStateBJ(10, Player(3), PLAYER_STATE_RESOURCE_LUMBER)
	AdjustPlayerStateBJ(10, Player(4), PLAYER_STATE_RESOURCE_LUMBER)
	ChooseMoShi()
	print("选择模式")
	TaoHuaDaoKaiFang()
	bj_forLoopAIndex = 0
	for _ in _loop_() do
		if bj_forLoopAIndex >= 5 then break end
		if GetPlayerController(Player(bj_forLoopAIndex)) == MAP_CONTROL_USER and GetPlayerSlotState(Player(bj_forLoopAIndex)) == PLAYER_SLOT_STATE_PLAYING then
			SaveStr(YDHT, GetHandleId(Player(bj_forLoopAIndex)), GetHandleId(Player(bj_forLoopAIndex)), GetPlayerName(Player(bj_forLoopAIndex)))
			SaveStr(YDHT, GetHandleId(Player(bj_forLoopAIndex)), GetHandleId(Player(bj_forLoopAIndex)) * 2, GetPlayerName(Player(bj_forLoopAIndex)))
		end
		bj_forLoopAIndex = bj_forLoopAIndex + 1
	end
	YDWEPolledWaitNull(40.0)
	StartTimerBJ(A7[3], false, 120.0)
	CreateTimerDialogBJ(bj_lastStartedTimer, "邪教进攻倒计时：")
	TimerDialogDisplay(bj_lastCreatedTimerDialog, true)
	z7[3] = bj_lastCreatedTimerDialog
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cfffff000欢迎来到|cffff00de金庸群侠传之决战江湖1.53|r")
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cfffff000游戏初期您可以完成难度为一星到二星的任务来提升角色的能力，游戏前期金钱较匮乏，可以在守家积分商店使用积分兑换金钱，关于游戏的各个系统，请查看F9任务面板，欢迎前往游戏专区论坛jzjhbbs.uuu9.com查看游戏攻略以及提出您的宝贵意见|R")
	YDWEPolledWaitNull(40.0)
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cfffff000由于制作和测试时间紧张，如遇游戏里有BUG或不舒适的体验给你带来不愉快，尽情谅解，欢迎前往游戏专区论坛jzjhbbs.uuu9.com提出您的宝贵意见。游戏中的特殊玩法，请到NPC随风而逝de风处查看，在基地右侧|R")
	YDWEPolledWaitNull(40.0)
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 30, "|cfffff000游戏里的相关指令\n按键Esc：|cFFCCFF33查看人物属性|r\n输入“sj”：|cFFCCFF33恢复视角|r\n输入“bl”：|cFFCCFF33查看伴侣属性|r\n输入“jy”：|cFFCCFF33将剑意转化为性格属性|r\n输入“up”：|cFFCCFF33提高难度（只能提不能降）|r\n输入“fb”：|cFFCCFF33查询副本重置时间|r\n输入“yx”：|cFFCCFF33查询宝宝携带草药的总药性|r\n输入属性拼音首字母加数值如fy5：|cFFCCFF33增加相应点数的自由属性（福缘+5）|r\n游戏开始2分钟内输入“sw”：|cFFCCFF33试玩模式|r\n更多游戏帮助，请按F9打开任务面板进行查询")
	YDWEPolledWaitNull(40.0)
	TriggerExecute(ss)
	hd = true
end
function InitFamouses()
	ve[1] = 1328558411
	xe[1] = 400
	ye[1] = 20
	ze[1] = 600
	ve[2] = 1429221424
	xe[2] = 350
	ye[2] = 15
	ze[2] = 730
	ve[3] = 1160786002
	xe[3] = 260
	ye[3] = 12
	ze[3] = 540
	ve[4] = 1211117633
	xe[4] = 250
	ye[4] = 18
	ze[4] = 500
	ve[5] = 1328558412
	xe[5] = 310
	ye[5] = 16
	ze[5] = 750
	ve[6] = 1328558413
	xe[6] = 220
	ye[6] = 19
	ze[6] = 700
	ve[7] = 1328558414
	xe[7] = 340
	ye[7] = 17
	ze[7] = 640
	ve[8] = 1160786003
	xe[8] = 320
	ye[8] = 10
	ze[8] = 780
	ve[9] = 1160786004
	xe[9] = 200
	ye[9] = 12
	ze[9] = 550
	ve[10] = 1311780913
	xe[10] = 380
	ye[10] = 11
	ze[10] = 580
	ve[11] = 1328558415
	xe[11] = 280
	ye[11] = 14
	ze[11] = 800
end
function InitBosses()
	Ae[1] = 1227896898
	Ae[2] = 1227896665
	Ae[3] = 1227896666
	Ae[4] = 1227896880
	Ae[5] = 1227896881
	Ae[6] = 1227896882
	Ae[7] = 1227896883
	Ae[8] = 1227896884
	Ae[9] = 1227896885
	Ae[10] = 1227896886
	Ae[11] = 1227896887
	Ae[12] = 1227896888
	Ae[13] = 1227896889
	Ae[14] = 1227896897
	Ae[15] = 1227896911
	Ae[16] = 1227896899
	Ae[17] = 1227896900
	Ae[18] = 1227896901
	Ae[19] = 1227896902
	Ae[20] = 1227896903
	Ae[21] = 1227896904
	Ae[22] = 1227896905
	Ae[23] = 1227896906
	Ae[24] = 1227896907
	Ae[25] = 1227896908
	Ae[26] = 1227896909
	Ae[27] = 1227896910
	Ae[28] = 1227896912
end
function InitHerbs()
	YaoCao[1] = 1227896646
	YaoCao[2] = 1227896647
	YaoCao[3] = 1227896645
	YaoCao[4] = 1227896630
	YaoCao[5] = 1227896631
	YaoCao[6] = 1227896632
	YaoCao[7] = 1227896633
	YaoCao[8] = 1227896642
	YaoCao[9] = 1227896641
	YaoCao[10] = 1227896643
	YaoCao[11] = 1227896644
	YaoCao[12] = 1227896648
end
function InitEquipments()
	--衣服清单
	ZhuangBei[1] = 1227895346
	ZhuangBei[2] = 1227895124
	ZhuangBei[3] = 1227895112
	ZhuangBei[4] = 1227895111
	ZhuangBei[5] = 1227895095
	ZhuangBei[6] = 1227895092
	ZhuangBei[7] = 1227895119
	ZhuangBei[8] = 1227895877
	ZhuangBei[9] = 1227897178
	ZhuangBei[10] = 1227894863
	ZhuangBei[11] = 1227894854
	ZhuangBei[12] = 1227894855
	ZhuangBei[13] = 1227899212
	ZhuangBei[14] = 1227897136
	--饰品清单
	--白字
	ShiPin[1] = 1227895347
	ShiPin[2] = 1227895347
	ShiPin[3] = 1227895125
	ShiPin[4] = 1227895126
	ShiPin[5] = 1227895127
	ShiPin[6] = 1227895128
	ShiPin[7] = 1227895129
	ShiPin[8] = 1227895130
	ShiPin[9] = 1227895113
	ShiPin[10] = 1227895114
	ShiPin[11] = 1227895115
	ShiPin[12] = 1227895093
	ShiPin[13] = 1227895096
	ShiPin[14] = 1227895097
	ShiPin[15] = 1227895105
	ShiPin[16] = 1227895106
	ShiPin[17] = 1227895107
	ShiPin[18] = 1227895108
	--蓝字
	ShiPin[19] = 1227895117
	ShiPin[20] = 1227895089
	ShiPin[21] = 1227895090
	ShiPin[22] = 1227895121
	ShiPin[23] = 1227895122
	ShiPin[24] = 1227895119
	ShiPin[25] = 1227895120
	ShiPin[26] = 1227894873
	ShiPin[27] = 1227894874
	ShiPin[28] = 1227894866
	ShiPin[29] = 1227894867
	ShiPin[30] = 1227894868
	ShiPin[31] = 1227894869
	ShiPin[32] = 1227894870
	ShiPin[33] = 1227894871
	--紫字
	ShiPin[34] = 1227894856
	ShiPin[35] = 1227894857
	ShiPin[36] = 1227894858
	ShiPin[37] = 1227894859
	ShiPin[38] = 1227894860
	ShiPin[39] = 1227894861
	ShiPin[40] = 1227894862
	--红字
	ShiPin[41] = 1227896919
	ShiPin[42] = 1227896920
	ShiPin[43] = 1227896921
	ShiPin[44] = 1227896922
end
--门派武功
function InitDenominationSkills()
	udg_menpainame[1] = "少林派"
	X7[1] = 1093678407
	Z7[1] = 1093677104
	Y7[1] = 1093678411
	Q8[1] = 1093678415
	P8[1] = 1395666992
	udg_menpainame[2] = "古墓派"
	X7[2] = 1093679429
	Z7[2] = 1093679434
	Y7[2] = 1093679437
	Q8[2] = 1093679444
	P8[2] = 1093679445
	udg_menpainame[3] = "丐帮"
	X7[3] = 1093681977
	Z7[3] = 1093681986
	Y7[3] = 1093681976
	Q8[3] = 1093681985
	P8[3] = 1093682249
	udg_menpainame[4] = "华山派"
	X7[4] = 1093679193
	Z7[4] = 1093679191
	Y7[4] = 1093679192
	Q8[4] = 1093677879
	P8[4] = 1093679409
	udg_menpainame[5] = "全真教"
	X7[5] = 1093681990
	Z7[5] = 1093682241
	Y7[5] = 1093681997
	Q8[5] = 1093681992
	P8[5] = 1093682245
	udg_menpainame[6] = "血刀门"
	X7[6] = 1093681993
	Z7[6] = 1093681994
	Y7[6] = 1093681998
	Q8[6] = 1093681995
	P8[6] = 1093682248
	udg_menpainame[7] = "恒山派"
	X7[7] = 1093677617
	Z7[7] = 1093677402
	Y7[7] = 1093681988
	Q8[7] = 1093677619
	P8[7] = 1093677620
	udg_menpainame[8] = "峨眉派"
	X7[8] = 1093681975
	Z7[8] = 1093681970
	Y7[8] = 1093681973
	Q8[8] = 1093681972
	P8[8] = 1093681974
	udg_menpainame[9] = "武当派"
	X7[9] = 1093678148
	Z7[9] = 1093679187
	Y7[9] = 1093679186
	Q8[9] = 1093679185
	P8[9] = 1093679190
	udg_menpainame[10] = "星宿派"
	X7[10] = 1093681744
	Z7[10] = 1093681747
	Y7[10] = 1093681745
	Q8[10] = 1093681748
	P8[10] = 1093681750
	udg_menpainame[11] = "自由门派"
	X7[11] = 1095067243
	Z7[11] = 1095067243
	Y7[11] = 1095067243
	Q8[11] = 1095067243
	P8[11] = 1095067243
	udg_menpainame[12] = "灵鹫宫"
	X7[12] = 1093677634
	Z7[12] = 1093677635
	Y7[12] = 1093677638
	Q8[12] = 1093677639
	P8[12] = 1093677640
	udg_menpainame[13] = "姑苏慕容"
	X7[13] = 1093677643
	Z7[13] = 1093681987
	Y7[13] = 1093677645
	Q8[13] = 1093677654
	P8[13] = 1093677650
	udg_menpainame[14] = "明教"
	X7[14] = 1093677872
	Z7[14] = 1093677874
	Y7[14] = 1093678674
	Q8[14] = 1093677876
	P8[14] = 1093678935
	udg_menpainame[15] = "衡山派"
	X7[15] = 1093678157
	Z7[15] = 1093678158
	Y7[15] = 1093678160
	Q8[15] = 1093677622
	P8[15] = 1093678162
	udg_menpainame[16] = "神龙教"
	X7[16] = 1093678167
	Z7[16] = 1093678170
	Y7[16] = 1093678385
	Q8[16] = 1093678391
	P8[16] = 1093678393
	udg_menpainame[17] = "神龙教"
	X7[17] = 1093678390
	Z7[17] = 1093678388
	Y7[17] = 1093678168
	Q8[17] = 1093678391
	P8[17] = 1093678393
	udg_menpainame[18] = "泰山派"
	X7[18] = 1093679169
	Z7[18] = 1093679170
	Y7[18] = 1093679173
	Q8[18] = 1093679175
	P8[18] = 1093679176
end
function InitSkillBooks()
	udg_jianghu[1] = 1227895626
	udg_jianghu[2] = 1227895624
	udg_jianghu[3] = 1227895382
	udg_jianghu[4] = 1227895381
	udg_jianghu[5] = 1227895623
	udg_jianghu[6] = 1227895386
	udg_jianghu[7] = 1227895625
	udg_jianghu[8] = 1227895384
	udg_jianghu[9] = 1227895385
	udg_jianghu[10] = 1227895627
	udg_jianghu[11] = 1227895620
	udg_jianghu[12] = 1227895628
	udg_jianghu[13] = 1227895600
	udg_jianghu[14] = 1227895601
	udg_jianghu[15] = 1227895621
	udg_jianghu[16] = 1227895603
	udg_jianghu[17] = 1227895383
	udg_jianghu[18] = 1227895622
	udg_juexue[1] = 1227895609
	udg_juexue[2] = 1227895604
	udg_juexue[3] = 1227895608
	udg_juexue[4] = 1227895607
	udg_juexue[5] = 1227895618
	udg_juexue[6] = 1227895602
	udg_juexue[7] = 1227895605
	udg_juexue[8] = 1227895606
	udg_juexue[9] = 1227895619
	udg_juexue[10] = 1227895617
	udg_juenei[1] = 1227895635
	udg_juenei[2] = 1227895631
	udg_juenei[3] = 1227895636
	udg_juenei[4] = 1227895633
	udg_juenei[5] = 1227895629
	udg_juenei[6] = 1227895632
	udg_juenei[7] = 1227895637
	udg_juenei[8] = 1227895634
	udg_canzhang[1] = 1227896373
	udg_canzhang[2] = 1227896369
	udg_canzhang[3] = 1227896374
	udg_canzhang[4] = 1227896372
	udg_canzhang[5] = 1227896375
	udg_canzhang[6] = 1227896370
	udg_canzhang[7] = 1227896377
	udg_canzhang[8] = 1227896368
	udg_canzhang[9] = 1227896376
	udg_canzhang[10] = 1227896371
	udg_canzhang[11] = 1227899735
	udg_diershi[1] = 1227897157
	udg_diershi[2] = 1227897158
	udg_diershi[3] = 1227897159
	udg_diershi[4] = 1227897160
	udg_diershi[5] = 1227897161
	udg_diershi[6] = 1227897162
	udg_diershi[7] = 1227897163
	udg_diershi[8] = 1227897164
	udg_diershi[9] = 1227897165
	udg_diershi[10] = 1227897166
end
function InitKillingTaskCreatures()
	--阳寿已尽任务怪
	udg_yangshou[1] = 1868853091
	udg_yangshou[2] = 1869767017
	udg_yangshou[3] = 1752395634
	udg_yangshou[4] = 1851942007
	udg_yangshou[5] = 1852076663
	udg_yangshou[6] = 1852076403
	udg_yangshou[7] = 1853059439
	udg_yangshou[8] = 1852338802
	udg_yangshou[9] = 1852796263
	udg_yangshou[10] = 1853186679
	udg_yangshou[11] = 1852996194
	udg_yangshou[12] = 1852207221
	udg_yangshou[13] = 1852270642
	udg_yangshou[14] = 1852207984
	udg_yangshou[15] = 1852663652
	udg_yangshou[16] = 1969976430
	udg_yangshou[17] = 1853059688
	udg_yangshou[18] = 1752395892
	udg_yangshou[19] = 1848651844
	udg_yangshou[20] = 1215130471
	udg_yangshou[21] = 1852207203
end
function InitGlobalVariables()
	InitFamouses() --初始化名门
	InitBosses() --初始化BOSS
	InitHerbs() --初始化草药
	InitEquipments() --初始化装备
	InitDenominationSkills() --初始化门派武功
	InitSkillBooks() --初始化武功书
	InitKillingTaskCreatures() --初始化阳寿已尽任务怪
end

function MenPai_Trigger()
	EMei_Trigger() --峨眉武功触发
	GaiBang_Trigger() --丐帮武功触发
	GuMu_Trigger() --古墓武功触发
	HuaShan_Trigger() --华山武功触发
	HengShan_Trigger() --恒山武功触发
	HengShan2_Trigger() --衡山武功触发
	LingJiuGong_Trigger() --灵鹫宫武功触发
	MuRongJia_Trigger() --慕容世家武功触发
	QuanZhen_Trigger() --全真武功触发
	ShaoLin_Trigger() --少林武功触发
	ShenLong_Trigger() --神龙教武功触发
	TieZhang_Trigger() --铁掌帮武功触发
	TaiShan_Trigger() --泰山派武功触发
	VIPMingJiao_Trigger() --明教武功触发
	WuDang_Trigger() --武当武功触发
	XueDao_Trigger() --血刀门武功触发
	XingXiu_Trigger() --星宿武功触发

	JiangHuNeiGong_Trigger() --江湖内功触发（含九阴、绝内）
	JiangHuWuGong_Trigger() --江湖武功触发
	JueShiWuGong_Trigger() --绝世武功触发
end
--地图初始化
function main1()
	local t
	local life
	local itemID
	local i
	local cu
	local Du
	local v
	local wu
	MapStartCreateUnitsAndInitEnvironments() -- 创建单位并初始化环境
	ConfigureNeutralVictim()
	ju = Filter(bu)
	filterIssueHauntOrderAtLocBJ = Filter(IssueHauntOrderAtLocBJFilter)
	filterEnumDestructablesInCircleBJ = Filter(tu)
	filterGetUnitsInRectOfPlayer = Filter(GetUnitsInRectOfPlayerFilter)
	filterGetUnitsOfTypeIdAll = Filter(GetUnitsOfTypeIdAllFilter)
	filterGetUnitsOfPlayerAndTypeId = Filter(GetUnitsOfPlayerAndTypeIdFilter)
	filterMeleeTrainedUnitIsHeroBJ = Filter(MeleeTrainedUnitIsHeroBJFilter)
	filterLivingPlayerUnitsOfTypeId = Filter(LivingPlayerUnitsOfTypeIdFilter)

	udg_baolv[1] = 20
	udg_baolv[2] = 25
	udg_baolv[3] = 25
	udg_baolv[4] = 25
	udg_baolv[5] = 25
	udg_baolv[6] = 33
	udg_baolv[7] = 33
	udg_baolv[8] = 34
	udg_baolv[9] = 25
	udg_baolv[10] = 25
	udg_baolv[11] = 25
	udg_baolv[12] = 25
	udg_baolv[13] = 33
	udg_baolv[14] = 33
	udg_baolv[15] = 34
	udg_baolv[16] = 50
	udg_baolv[17] = 50
	udg_baolv[18] = 50
	udg_baolv[19] = 50
	udg_baolv[20] = 50
	udg_baolv[21] = 50
	udg_baolv[22] = 33
	udg_baolv[23] = 33
	udg_baolv[24] = 34
	i = 1
	for _ in _loop_() do
		if i >= 6 then break end
		udg_shuxing[i] = 10
		qiuhun[i] = 0
		zhaoyangguo[i] = 0
		linganran[i] = 0
		touxiao[i] = 0
		bihai[i] = 0
		aidacishu[i] = 0
		udg_wuqishu[i] = 0
		udg_yifushu[i] = 0
		i = i + 1
	end
	cu = 0
	for _ in _loop_() do
		if cu == 16 then break end
		bj_FORCE_PLAYER[cu] = CreateForce()
		ForceAddPlayer(bj_FORCE_PLAYER[cu], Player(cu))
		cu = cu + 1
	end
	bj_FORCE_ALL_PLAYERS = CreateForce()
	ForceEnumPlayers(bj_FORCE_ALL_PLAYERS, nil)
	bj_cineModePriorSpeed = GetGameSpeed()
	bj_cineModePriorFogSetting = IsFogEnabled()
	bj_cineModePriorMaskSetting = IsFogMaskEnabled()
	cu = 0
	for _ in _loop_() do
		if cu >= bj_MAX_QUEUED_TRIGGERS then break end
		bj_queuedExecTriggers[cu] = nil
		bj_queuedExecUseConds[cu] = false
		cu = cu + 1
	end
	bj_isSinglePlayer = false
	Du = 0
	cu = 0
	for _ in _loop_() do
		if cu >= 12 then break end
		if GetPlayerController(Player(cu)) == MAP_CONTROL_USER and GetPlayerSlotState(Player(cu)) == PLAYER_SLOT_STATE_PLAYING then
			Du = Du + 1
		end
		cu = cu + 1
	end
	bj_isSinglePlayer = Du == 1
	bj_rescueSound = CreateSoundFromLabel("Rescue", false, false, false, 10000, 10000)
	bj_questDiscoveredSound = CreateSoundFromLabel("QuestNew", false, false, false, 10000, 10000)
	bj_questUpdatedSound = CreateSoundFromLabel("QuestUpdate", false, false, false, 10000, 10000)
	bj_questCompletedSound = CreateSoundFromLabel("QuestCompleted", false, false, false, 10000, 10000)
	bj_questFailedSound = CreateSoundFromLabel("QuestFailed", false, false, false, 10000, 10000)
	bj_questHintSound = CreateSoundFromLabel("Hint", false, false, false, 10000, 10000)
	bj_questSecretSound = CreateSoundFromLabel("SecretFound", false, false, false, 10000, 10000)
	bj_questItemAcquiredSound = CreateSoundFromLabel("ItemReward", false, false, false, 10000, 10000)
	bj_questWarningSound = CreateSoundFromLabel("Warning", false, false, false, 10000, 10000)
	bj_victoryDialogSound = CreateSoundFromLabel("QuestCompleted", false, false, false, 10000, 10000)
	bj_defeatDialogSound = CreateSoundFromLabel("QuestFailed", false, false, false, 10000, 10000)
	DelayedSuspendDecayCreate()
	v = VersionGet()
	if v == VERSION_REIGN_OF_CHAOS then
		bj_MELEE_MAX_TWINKED_HEROES = bj_MELEE_MAX_TWINKED_HEROES_V0
	else
		bj_MELEE_MAX_TWINKED_HEROES = bj_MELEE_MAX_TWINKED_HEROES_V1
	end
	InitQueuedTriggers()
	YDWEInitRescuableBehaviorBJNull()
	InitDNCSounds()
	InitMapRects()
	InitSummonableCaps()
	wu = 0
	for _ in _loop_() do
		bj_stockAllowedPermanent[wu] = false
		bj_stockAllowedCharged[wu] = false
		bj_stockAllowedArtifact[wu] = false
		wu = wu + 1
		if wu > 10 then break end
	end
	SetAllItemTypeSlots(11)
	SetAllUnitTypeSlots(11)
	bj_stockUpdateTimer = CreateTimer()
	TimerStart(bj_stockUpdateTimer, bj_STOCK_RESTOCK_INITIAL_DELAY, false, au)
	bj_stockItemPurchased = CreateTrigger()
	TriggerRegisterPlayerUnitEvent(bj_stockItemPurchased, Player(15), EVENT_PLAYER_UNIT_SELL_ITEM, nil)
	TriggerAddAction(bj_stockItemPurchased, RemovePurchasedItem)
	DetectGameStarted()
	ExecuteFunc("Hu")
	ExecuteFunc("SetCamera")
	ExecuteFunc("mv")
	ExecuteFunc("Pw")
	i = 0
	i = 0
	for _ in _loop_() do
		if i > 16 then break end
		udg_jdds[i] = 0
		udg_jddsbool[i] = false
		udg_ldds[i] = 0
		udg_lddsbool[i] = false
		udg_xbds[i] = 0
		udg_xbdsbool[i] = false
		udg_bqds[i] = 0
		udg_bqdsbool[i] = false
		udg_dzds[i] = 0
		udg_dzdsbool[i] = false
		udg_jwjs[i] = 0
		udg_jwjsbool[i] = false
		udg_junzhu[i] = false
		juexuelingwu[i] = 1
		udg_baojishanghai[i] = 1.5
		udg_baojilv[i] = 0.03
		shanghaihuifu[i] = 100.0
		shaguaihufui[i] = 200.0
		shengminghuifu[i] = 0
		falihuifu[i] = 0
		udg_lilianxishu[i] = 1.0
		udg_hashero[i] = false
		udg_baoji[i] = false
		udg_yiwang[i] = false
		R4[i] = DialogCreate()
		Y4[i] = 1
		udg_xinggeA[i] = 0
		udg_xinggeB[i] = 0
		chilian[i] = false
		udg_zhangmen[i] = false
		udg_whichzhangmen[i] = 0
		wugongshu[i] = 8
		udg_zhemei[i] = 0

		wuxing[i] = 9
		jingmai[i] = 9
		gengu[i] = 9
		fuyuan[i] = 9
		danpo[i] = 9
		yishu[i] = 9
		udg_runamen[i] = 0
		D7[i] = 0
		F7[i] = 0
		G7[i] = 0
		K7[i] = DialogCreate()
		L7[i] = 0
		P7[i] = 0
		udg_revivetimer[i] = CreateTimer()
		S7[i] = 0
		udg_MaxDamage[i] = 0
		d8[i] = 0
		e8[i] = 0
		shengwang[i] = 0
		g8[i] = 0
		h8[i] = 0
		i8[i] = 0
		j8[i] = 0
		o8[i] = false
		v8[i] = DialogCreate()
		b8[i] = false
		C8[i] = false
		c8[i] = false
		D8[i] = DialogCreate()
		F8[i] = false
		XNKL[i] = false
		G8[i] = false
		H8[i] = false
		I8[i] = false
		l8[i] = false
		J8[i] = 0
		xiuxing[i] = 0
		MM8[i] = 0
		N8[i] = 0
		O8[i] = 0
		Z8[i] = false
		d9[i] = false
		e9[i] = false
		f9[i] = CreateTimer()
		h9[i] = false
		i9[i] = 0
		v9[i] = false
		w9[i] = false
		x9[i] = false
		y9[i] = false
		z9[i] = 0
		A9[i] = 0
		G9[i] = 0
		H9[i] = 0
		I9[i] = 0
		l9[i] = 0
		udg_shanghaijiacheng[i] = 0.0
		udg_shanghaixishou[i] = 0
		T9[i] = false
		LLguaiA[i] = 0
		LLguaiE[i] = 0
		LLguaiB[i] = 0
		LLguaiC[i] = 0
		LLguaiD[i] = 0
		LLguaiF[i] = 0
		LLguaiG[i] = 0
		Z9[i] = CreateTimer()
		ed[i] = false
		fd[i] = CreateTimer()
		jd[i] = 0
		kd[i] = 0
		qd[i] = 0
		rd[i] = 0
		ud[i] = 0
		wugongxiuwei[i] = 0
		xd[i] = 0
		yd[i] = 0
		Ad[i] = false
		Bd[i] = false
		Cd[i] = 0
		cd[i] = false
		Dd[i] = 0
		Ed[i] = 0
		Fd[i] = CreateGroup()
		Gd[i] = 0
		Id[i] = 0
		ld[i] = 0
		Jd[i] = 0
		Kd[i] = 0
		Ld[i] = 0
		Md[i] = 0
		Nd[i] = 0
		Od[i] = 0
		Pd[i] = 0
		Qd[i] = 0
		Rd[i] = false
		Sd[i] = 0
		Td[i] = 0
		Ud[i] = 0
		Vd[i] = 0
		Wd[i] = 0
		jiuazi[i] = 0
		shoujiajf[i] = 0
		ge[i] = false
		he[i] = false
		je[i] = DialogCreate()
		te[i] = 0
		Ce[i] = 0
		ce[i] = 0
		De[i] = false
		Ee[i] = false
		i = i + 1
	end
	--set udg_menpaineigong=DialogCreate()
	udg_index = DialogCreate()
	udg_nan = DialogCreate()
	i7 = CreateGroup()
	udg_shanghaidanweizu = CreateGroup()
	udg_boshu = 1
	w7 = CreateGroup()
	i = 0
	for _ in _loop_() do
		if i > 5 then break end
		A7[i] = CreateTimer()
		i = i + 1
	end
	ShiFouShuaGuai = true
	i = 0
	for _ in _loop_() do
		if i > 100 then break end
		I7[i] = 1095067243
		i = i + 1
	end
	i = 0
	for _ in _loop_() do
		if i > 20 then break end
		udg_menpainame[i] = "未加入"
		X7[i] = 1095067243
		Y7[i] = 1095067243
		Z7[i] = 1095067243
		P8[i] = 1095067243
		Q8[i] = 1095067243
		nd[i] = 0
		od[i] = 0
		i = i + 1
	end
	pd[1] = 2000
	pd[2] = 2000
	pd[3] = 2000
	pd[4] = 5000
	pd[5] = 5000
	pd[6] = 5000
	pd[7] = 15000
	pd[8] = 15000
	pd[9] = 15000
	pd[10] = 500000
	i = 0
	for _ in _loop_() do
		if i > 10 then break end
		m8[i] = false
		q8[i] = 1668446579
		i = i + 1
	end
	i = 0
	for _ in _loop_() do
		if i > 13 then break end
		udg_blgg[i] = 0
		udg_blwx[i] = 0
		udg_bljm[i] = 0
		udg_blfy[i] = 0
		udg_bldp[i] = 0
		udg_blys[i] = 0
		i = i + 1
	end
	j9 = CreateGroup()
	k9 = CreateGroup()
	r9 = CreateGroup()
	s9 = CreateGroup()
	i = 0
	for _ in _loop_() do
		if i > 20 then break end
		udg_jueneishxs[i] = 0
		udg_jueneishjc[i] = 0
		udg_jueneiminjie[i] = 0
		udg_jueneijxlw[i] = 0
		udg_jueneibaojilv[i] = 0
		i = i + 1
	end
	i = 0
	for _ in _loop_() do
		if i > 7 then break end
		Hd[i] = CreateTimer()
		i = i + 1
	end
	i = 0
	for _ in _loop_() do
		if i > 15 then break end
		xe[i] = 0
		ye[i] = 0
		ze[i] = 0
		i = i + 1
	end
	Fe = CreateGroup()
	--刚进入地图
	print("lh触发器执行了一次")
	lh = CreateTrigger()
	TriggerRegisterTimerEventSingle(lh, 0.1)
	TriggerAddAction(lh, Zw)

	InitGlobalVariables() --初始化全局变量

	KeyInputSystem() --键盘输入系统
	SmeltingWeaponSystem() --决战江湖1.4之大辽金匠
	MonsterCome() --决战江湖1.52之圣兽来了
	CreateDestructables() --创建可破坏物
	Cuns() --存储装备属性
	CunWuGongS() --存储武功
	najitest() --纳吉的测试代码
end
function main2()
	GameLogic_Trigger() -- 游戏逻辑触发器
	GameDetail_Trigger() -- 游戏细节处理
	Equipment_Trigger() --装备属性触发器
	MenPai_Trigger() --门派触发器
	ZiZhi_Trigger() --自制武器触发器
	ZhenFa_Trigger() --阵法触发器
	TiaoZhan_Trigger() --挑战场触发器
	QiWu_Trigger() --奇武触发器
	TaoHuaDao_Trigger() --桃花岛触发器
	Instances_Trigger() --副本和任务系统
	Experiences_Trigger() --历练系统
	ElixirSystem_Trigger() --丹药系统
	Tasks_Trigger() --任务系统 
	JianYi_Trigger() --剑意系统 
end
--#include "./denomination/XueDao.j"
--***************************************************************************
--*
--*  Triggers
--*
--***************************************************************************
--===========================================================================
-- Trigger: import_lua
--===========================================================================
--TESH.scrollpos=0
--TESH.alwaysfold=0

--===========================================================================
-- Trigger: 未命名触发器 001
--===========================================================================
function Trig____________________001Actions()
	SetPlayerStateBJ(Player(0), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
	SetPlayerStateBJ(Player(1), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
	SetPlayerStateBJ(Player(2), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
	SetPlayerStateBJ(Player(3), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
	SetPlayerStateBJ(Player(4), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
	SetPlayerStateBJ(Player(5), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
	ShowUnit(gg_unit_n00E_0066, false)
	ShowUnit(gg_unit_nvl2_0005, false)
	ShowUnit(gg_unit_n00M_0131, false)
	ShowUnit(gg_unit_n00N_0132, false)
	ShowUnit(gg_unit_N00I_0116, true)
	ShowUnit(gg_unit_N007_0055, true)
	Cheat("exec-lua:\"base\"")
	main1()
	--Function not found: call InitTrig_AM_1_Orig()
	if DzAPI_Map_HasMallItem(Player(0), "QS8K6F5NV2") == true then
		DoNothing()
	else
		DoNothing()
	end
end
--===========================================================================
function InitTrig____________________001()
	gg_trg____________________001 = CreateTrigger()
	TriggerAddAction(gg_trg____________________001, Trig____________________001Actions)
end
--===========================================================================
-- Trigger: 未命名触发器 004
--===========================================================================
function Trig____________________004Actions()
	main2()
	YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 0, 0, 300)
	YDWESetLocalVariableReal("R", YDWELogarithm__Log2(0.01 * 1.0) * 0.30103) -- INLINED!!
end
--===========================================================================
function InitTrig____________________004()
	gg_trg____________________004 = CreateTrigger()
	TriggerRegisterTimerEventSingle(gg_trg____________________004, 0.0)
	TriggerAddAction(gg_trg____________________004, Trig____________________004Actions)
end
--===========================================================================
-- Trigger: 未命名触发器 005
--===========================================================================
--TESH.scrollpos=9
--TESH.alwaysfold=0
function Trig____________________005Conditions()
	return YDWEUnitHasItemOfTypeBJNull(GetTriggerUnit(), 1952807024) == true
end
function Trig____________________005Actions()
	YDWENewItemsFormula(1227897145, 1, 1227897153, 1, 1227897168, 1, 1667786099, 0, 1667786099, 0, 1667786099, 0, 1227897155)
	SelectHeroSkill(gg_unit_N007_0055, 1095262842)
end
--===========================================================================
function InitTrig____________________005()
--set gg_trg____________________005 = CreateTrigger()
--call YDWESyStemItemCombineRegistTrigger( gg_trg____________________005 )
--call TriggerAddCondition(gg_trg____________________005, Condition(function Trig____________________005Conditions))
--call TriggerAddAction(gg_trg____________________005, function Trig____________________005Actions)
end
--===========================================================================
-- Trigger: 未命名触发器 002
--===========================================================================
--TESH.scrollpos=0
--TESH.alwaysfold=0
function Trig____________________002Actions()
	YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 0, 0, 300)
	YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 1, 0, 300)
	YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 3, 0, 300)
	YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 2, 0, 300)
	YDWEJumpTimer(GetTriggerUnit(), 0, 0.0, 2, 0.01, GetRandomReal(100, 500))
	YDWEJumpTimer(GetTriggerUnit(), 0, 0.0, 2, 0.01, GetRandomReal(100, 500))
	YDWETimerDestroyEffect(15.0, AddSpecialEffectLoc("war3mapImported\\kineticfield_fx_stand.mdx", Location(0, 0)))
	YDWETimerDestroyLightning(2, GetLastCreatedLightningBJ())
end
--===========================================================================
function InitTrig____________________002()
	gg_trg____________________002 = CreateTrigger()
	TriggerAddAction(gg_trg____________________002, Trig____________________002Actions)
end
--===========================================================================
-- Trigger: 未命名触发器 003
--===========================================================================
function Trig____________________003Actions()
end
--===========================================================================
function InitTrig____________________003()
	gg_trg____________________003 = CreateTrigger()
	DisableTrigger(gg_trg____________________003)
	YDWESyStemAnyUnitDamagedRegistTrigger(gg_trg____________________003)
	YDWETriggerRegisterLeaveRectSimpleNull(gg_trg____________________003, GetCurrentCameraBoundsMapRectBJ())
	TriggerAddAction(gg_trg____________________003, Trig____________________003Actions)
end
--===========================================================================
-- Trigger: 读取存档积分
--===========================================================================
function Trig___________________uActions()
	bj_forLoopBIndex = 1
	bj_forLoopBIndexEnd = 6
	for _ in _loop_() do
		if bj_forLoopBIndex > bj_forLoopBIndexEnd then break end
		YDWE_PreloadSL_Load(ConvertedPlayer(bj_forLoopBIndex), "JueZhan", "JiangHu", 1)
		udg_MeiJuJiFen[bj_forLoopBIndex] = udg_MeiJuJiFen[bj_forLoopBIndex] + YDWE_PreloadSL_Get(ConvertedPlayer(bj_forLoopBIndex), "总积分", 1)
		bj_forLoopBIndex = bj_forLoopBIndex + 1
	end
end
--===========================================================================
function InitTrig___________________u()
	gg_trg___________________u = CreateTrigger()
	DisableTrigger(gg_trg___________________u)
	TriggerRegisterTimerEventSingle(gg_trg___________________u, 1.0)
	TriggerAddAction(gg_trg___________________u, Trig___________________uActions)
end
--===========================================================================
-- Trigger: 存档积分
--===========================================================================
function Trig_____________uActions()
	udg_MeiJuJiFen[1] = udg_MeiJuJiFen[1] + 500
	YDWE_PreloadSL_Set(Player(0), "总积分", 1, udg_MeiJuJiFen[1])
	YDWE_PreloadSL_Save(Player(0), "JueZhan", "JiangHu", 1)
end
--===========================================================================
function InitTrig_____________u()
	gg_trg_____________u = CreateTrigger()
	DisableTrigger(gg_trg_____________u)
	TriggerRegisterPlayerChatEvent(gg_trg_____________u, Player(0), "-Test", true)
	TriggerAddAction(gg_trg_____________u, Trig_____________uActions)
end
--===========================================================================
-- Trigger: ChangeClothes
--===========================================================================
--TESH.scrollpos=0
--TESH.alwaysfold=0
function Trig_ChangeClothesConditions()
	return GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558664 or GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558643 or GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558665
end
function Trig_ChangeClothesActions()
	--if udg_HuanZhuangCD[1+GetPlayerId(GetTriggerPlayer())]==false then
	--set udg_HuanZhuangCD[1+GetPlayerId(GetTriggerPlayer())]=true
	--黑变绿或粉
	if GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558664 then
		if GetRandomInt(1, 2) == 1 then
			UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1093678132)
			UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1093678132)
			UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1098282348)
		else
			UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1093678135)
			UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1093678135)
			UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1098282348)
		end
	--call BJDebugMsg(GetUnitName(udg_hero[1+GetPlayerId(GetTriggerPlayer())]))
	--绿变粉或黑
	elseif GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558665 then
		if GetRandomInt(1, 2) == 1 then
			UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1093678133)
			UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1093678133)
			UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1098282348)
		else
			UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1093678136)
			UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1093678136)
			UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1098282348)
		end
	--call BJDebugMsg(GetUnitName(udg_hero[1+GetPlayerId(GetTriggerPlayer())]))
	--粉变黑或绿
	elseif GetUnitTypeId(udg_hero[1 + GetPlayerId(GetTriggerPlayer())]) == 1328558643 then
		if GetRandomInt(1, 2) == 1 then
			UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1093678131)
			UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1093678131)
			UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1098282348)
		else
			UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1093678134)
			UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1093678134)
			UnitRemoveAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], 1098282348)
		end
	--call BJDebugMsg(GetUnitName(udg_hero[1+GetPlayerId(GetTriggerPlayer())]))
	end
	bj_forLoopAIndex = 1
	bj_forLoopAIndexEnd = 11
	for _ in _loop_() do
		if bj_forLoopAIndex > bj_forLoopAIndexEnd then break end
		if I7[GetPlayerId(GetTriggerPlayer()) * 20 + bj_forLoopAIndex] ~= 1095067243 then
			UnitAddAbility(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], I7[GetPlayerId(GetTriggerPlayer()) * 20 + bj_forLoopAIndex])
			SetUnitAbilityLevel(udg_hero[1 + GetPlayerId(GetTriggerPlayer())], I7[GetPlayerId(GetTriggerPlayer()) * 20 + bj_forLoopAIndex], LoadInteger(YDHT, GetHandleId(GetTriggerPlayer()), I7[GetPlayerId(GetTriggerPlayer()) * 20 + bj_forLoopAIndex] * 5))
		end
		bj_forLoopAIndex = bj_forLoopAIndex + 1
	end
--call YDWEPolledWaitNull(300.)
--set udg_HuanZhuangCD[1+GetPlayerId(GetTriggerPlayer())]=false
--else
--call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "换装功能CD中")
--endif
end
--===========================================================================
function InitTrig_ChangeClothes()
	gg_trg_ChangeClothes = CreateTrigger()
	TriggerRegisterPlayerChatEvent(gg_trg_ChangeClothes, Player(0), "换装", true)
	TriggerRegisterPlayerChatEvent(gg_trg_ChangeClothes, Player(1), "换装", true)
	TriggerRegisterPlayerChatEvent(gg_trg_ChangeClothes, Player(2), "换装", true)
	TriggerRegisterPlayerChatEvent(gg_trg_ChangeClothes, Player(3), "换装", true)
	TriggerRegisterPlayerChatEvent(gg_trg_ChangeClothes, Player(4), "换装", true)
	TriggerAddCondition(gg_trg_ChangeClothes, Condition(Trig_ChangeClothesConditions))
	TriggerAddAction(gg_trg_ChangeClothes, Trig_ChangeClothesActions)
end
--===========================================================================
-- Trigger: QinLongKongHe
--===========================================================================
function Trig_QinLongKongHeConditions()
	return GetSpellAbilityId() == 1093677910 and GetSpellTargetUnit() ~= gg_unit_N008_0054
end
function Trig_QinLongKongHeActions()
	if GetSpellTargetUnit() == GetTriggerUnit() then
		YDWETimerPatternRushSlide(GetSpellTargetUnit(), GetUnitFacing(GetTriggerUnit()), 1200.0, 1.2, 0.01, 0, false, false, true, "origin", "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl")
	else
		if YDWEDistanceBetweenUnits(GetTriggerUnit(), GetSpellTargetUnit()) >= 1000.0 then
			YDWETimerPatternRushSlide(GetSpellTargetUnit(), YDWEAngleBetweenUnits(GetSpellTargetUnit(), GetTriggerUnit()), RMinBJ(1200.0, YDWEDistanceBetweenUnits(GetTriggerUnit(), GetLastCreatedUnit())), RMinBJ(1.2, YDWEDistanceBetweenUnits(GetTriggerUnit(), GetSpellTargetUnit()) / 1000.0), 0.01, 0, false, false, true, "origin", "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl")
		else
			YDWETimerPatternRushSlide(GetSpellTargetUnit(), YDWEAngleBetweenUnits(GetTriggerUnit(), GetSpellTargetUnit()), 1200.0, 1.2, 0.01, 0, false, false, true, "origin", "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", "Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl")
		end
	end
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093678668) ~= 0 and IsUnitAlly(GetSpellTargetUnit(), GetOwningPlayer(GetTriggerUnit())) == true then
		SetUnitLifePercentBJ(GetSpellTargetUnit(), 100)
	else
	end
	if GetUnitAbilityLevel(GetTriggerUnit(), 1093681989) ~= 0 and IsUnitAlly(GetSpellTargetUnit(), GetOwningPlayer(GetTriggerUnit())) == false then
		WanBuff(GetTriggerUnit(), GetSpellTargetUnit(), 11)
	else
	end
end
--===========================================================================
function InitTrig_QinLongKongHe()
	gg_trg_QinLongKongHe = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(gg_trg_QinLongKongHe, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(gg_trg_QinLongKongHe, Condition(Trig_QinLongKongHeConditions))
	TriggerAddAction(gg_trg_QinLongKongHe, Trig_QinLongKongHeActions)
end
--===========================================================================
-- Trigger: YaoWangShenPian
--===========================================================================
--TESH.scrollpos=0
--TESH.alwaysfold=0
--function Trig_YaoWangShenPianConditions takes nothing returns boolean
-- return ((GetSpellAbilityId() == 'A03W'))
-- endfunction
-- function Trig_YaoWangShenPianFunc003001003 takes nothing returns boolean
-- return ((IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetTriggerUnit())) == true))
-- endfunction
-- function Trig_YaoWangShenPianFunc003Func006T takes nothing returns nothing
-- local unit u = LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0)
-- if (((GetUnitLifePercent(u) > 1.00) and (UnitHasBuffBJ(u, 'BUsl') == true))) then
-- call SetUnitLifePercentBJ( u, ( GetUnitLifePercent(u) - 0.5 ) )
-- else
-- call YDTriggerClearTable(YDTriggerH2I(GetExpiredTimer()))
-- call DestroyTimer(GetExpiredTimer())
-- endif
-- endfunction
-- function Trig_YaoWangShenPianFunc003A takes nothing returns nothing
-- local timer ydl_timer
-- call CreateNUnitsAtLoc( 1, 'e000', GetOwningPlayer(GetTriggerUnit()), GetUnitLoc(GetEnumUnit()), bj_UNIT_FACING )
-- call UnitAddAbility( GetLastCreatedUnit(), 'A03X' )
-- call ShowUnitHide( GetLastCreatedUnit() )
-- call UnitApplyTimedLife( GetLastCreatedUnit(), 'BHwe', 3.00 )
-- call IssueTargetOrderById( GetLastCreatedUnit(), 852227, GetEnumUnit() )
-- set ydl_timer = CreateTimer()
-- call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0, GetEnumUnit())
-- call TimerStart(ydl_timer, 1.00, true, function Trig_YaoWangShenPianFunc003Func006T)
-- set ydl_timer = null
-- endfunction
-- function Trig_YaoWangShenPianActions takes nothing returns nothing
-- local group ydl_group
-- local unit ydl_unit
-- local timer ydl_timer
-- local integer ydl_localvar_step = YDTriggerGetEx(integer, YDTriggerH2I(GetTriggeringTrigger()), 0xCFDE6C76)
-- set ydl_localvar_step = ydl_localvar_step + 3
-- call YDTriggerSetEx(integer, YDTriggerH2I(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
-- call YDTriggerSetEx(integer, YDTriggerH2I(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
-- call YDTriggerSetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xE6BB3831, 900.00)
-- if ((GetUnitAbilityLevel(GetTriggerUnit(), 'A07A') != 0)) then
-- call YDTriggerSetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xE6BB3831, 1300.00)
-- else
-- endif
-- call ForGroupBJ( GetUnitsInRangeOfLocMatching(YDTriggerGetEx(real, YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step, 0xE6BB3831), GetUnitLoc(GetTriggerUnit()), Condition(function Trig_YaoWangShenPianFunc003001003)), function Trig_YaoWangShenPianFunc003A )
-- call YDTriggerClearTable(YDTriggerH2I(GetTriggeringTrigger())*ydl_localvar_step)
-- set ydl_group = null
-- set ydl_unit = null
-- set ydl_timer = null
-- endfunction
-- //===========================================================================
-- function InitTrig_YaoWangShenPian takes nothing returns nothing
-- set gg_trg_YaoWangShenPian = CreateTrigger()
-- #ifdef DEBUG
-- call YDWESaveTriggerName(gg_trg_YaoWangShenPian, "YaoWangShenPian")
-- #endif
-- call TriggerRegisterAnyUnitEventBJ( gg_trg_YaoWangShenPian, EVENT_PLAYER_UNIT_SPELL_EFFECT )
-- call TriggerAddCondition(gg_trg_YaoWangShenPian, Condition(function Trig_YaoWangShenPianConditions))
-- call TriggerAddAction(gg_trg_YaoWangShenPian, function Trig_YaoWangShenPianActions)
-- endfunction//===========================================================================
-- Trigger: KuRongShenGong
--===========================================================================
function Trig_KuRongShenGongConditions()
	return GetSpellAbilityId() == 1093677914
end
function Trig_KuRongShenGongActions()
	local ydl_localvar_step = LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), -807506826)
	ydl_localvar_step = ydl_localvar_step + 3
	SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), -807506826, ydl_localvar_step)
	SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), -320330265, ydl_localvar_step)
	SetUnitLifePercentBJ(GetTriggerUnit(), GetUnitLifePercent(GetTriggerUnit()) / 2.0)
	SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976, 150 + 150 * xiuxing[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
	if GetUnitAbilityLevel(GetKillingUnitBJ(), 1093678928) ~= 0 then
		SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976, 500 + 500 * xiuxing[1 + GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
	else
	end
	ModifyHeroStat(bj_HEROSTAT_STR, GetTriggerUnit(), bj_MODIFYMETHOD_ADD, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976))
	ModifyHeroStat(bj_HEROSTAT_AGI, GetTriggerUnit(), bj_MODIFYMETHOD_ADD, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976))
	ModifyHeroStat(bj_HEROSTAT_INT, GetTriggerUnit(), bj_MODIFYMETHOD_ADD, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976))
	YDWEPolledWaitNull(15.0)
	SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), -320330265, ydl_localvar_step)
	ModifyHeroStat(bj_HEROSTAT_STR, GetTriggerUnit(), bj_MODIFYMETHOD_SUB, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976))
	ModifyHeroStat(bj_HEROSTAT_AGI, GetTriggerUnit(), bj_MODIFYMETHOD_SUB, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976))
	ModifyHeroStat(bj_HEROSTAT_INT, GetTriggerUnit(), bj_MODIFYMETHOD_SUB, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976))
	FlushChildHashtable(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
end
--===========================================================================
function InitTrig_KuRongShenGong()
	gg_trg_KuRongShenGong = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(gg_trg_KuRongShenGong, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	TriggerAddCondition(gg_trg_KuRongShenGong, Condition(Trig_KuRongShenGongConditions))
	TriggerAddAction(gg_trg_KuRongShenGong, Trig_KuRongShenGongActions)
end
--===========================================================================
-- Trigger: KuRongShenGong_2
--===========================================================================
function Trig_KuRongShenGong_2Conditions()
	return GetUnitAbilityLevel(GetKillingUnitBJ(), 1093677914) ~= 0
end
function Trig_KuRongShenGong_2Actions()
	local ydl_localvar_step = LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), -807506826)
	ydl_localvar_step = ydl_localvar_step + 3
	SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), -807506826, ydl_localvar_step)
	SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), -320330265, ydl_localvar_step)
	SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976, GetConvertedPlayerId(GetTriggerPlayer()))
	udg_kurongsharen[LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976)] = udg_kurongsharen[LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976)] + 1
	if udg_kurongsharen[LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976)] >= 300 then
		udg_kurongsharen[LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 635090976)] = 0
		if GetUnitState(GetKillingUnitBJ(), UNIT_STATE_LIFE) > 2000.0 then
			YDWEGeneralBounsSystemUnitSetBonus(GetTriggerUnit(), 2, 1, 10)
			ModifyHeroStat(bj_HEROSTAT_STR, GetKillingUnitBJ(), bj_MODIFYMETHOD_ADD, 20)
			ModifyHeroStat(bj_HEROSTAT_AGI, GetKillingUnitBJ(), bj_MODIFYMETHOD_ADD, 30)
			ModifyHeroStat(bj_HEROSTAT_INT, GetKillingUnitBJ(), bj_MODIFYMETHOD_ADD, 10)
			if GetUnitAbilityLevel(GetKillingUnitBJ(), 1093678935) ~= 0 then
				ModifyHeroStat(bj_HEROSTAT_AGI, GetKillingUnitBJ(), bj_MODIFYMETHOD_ADD, 30)
			else
			end
		else
		end
	else
	end
	FlushChildHashtable(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
end
--===========================================================================
function InitTrig_KuRongShenGong_2()
	gg_trg_KuRongShenGong_2 = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(gg_trg_KuRongShenGong_2, EVENT_PLAYER_UNIT_DEATH)
	TriggerAddCondition(gg_trg_KuRongShenGong_2, Condition(Trig_KuRongShenGong_2Conditions))
	TriggerAddAction(gg_trg_KuRongShenGong_2, Trig_KuRongShenGong_2Actions)
end
--===========================================================================
-- Trigger: KuRongShenGong_3
--===========================================================================
function Trig_KuRongShenGong_3Conditions()
	return GetUnitAbilityLevel(GetAttacker(), 1093677914) ~= 0 and GetUnitAbilityLevel(GetAttacker(), 1093679156) ~= 0 and GetRandomReal(0.0, 100.0) <= 15.0
end
function Trig_KuRongShenGong_3Actions()
	SetUnitLifePercentBJ(GetTriggerUnit(), GetUnitLifePercent(GetTriggerUnit()) * 0.9)
end
--===========================================================================
function InitTrig_KuRongShenGong_3()
	gg_trg_KuRongShenGong_3 = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(gg_trg_KuRongShenGong_3, EVENT_PLAYER_UNIT_ATTACKED)
	TriggerAddCondition(gg_trg_KuRongShenGong_3, Condition(Trig_KuRongShenGong_3Conditions))
	TriggerAddAction(gg_trg_KuRongShenGong_3, Trig_KuRongShenGong_3Actions)
end
--===========================================================================
-- Trigger: ShuiShangPiao
--===========================================================================
function Trig_ShuiShangPiaoActions()
end
--===========================================================================
function InitTrig_ShuiShangPiao()
	gg_trg_ShuiShangPiao = CreateTrigger()
	TriggerAddAction(gg_trg_ShuiShangPiao, Trig_ShuiShangPiaoActions)
end
--===========================================================================
-- Trigger: SH
--===========================================================================
function Trig_SHConditions()
	return GetIssuedOrderIdBJ() == String2OrderIdBJ("stoneform") or GetIssuedOrderIdBJ() == String2OrderIdBJ("hex")
end
function Trig_SHActions()
	if GetIssuedOrderIdBJ() == String2OrderIdBJ("stoneform") then
		IssueImmediateOrder(GetTriggerUnit(), "stop")
	else
	end
	if GetIssuedOrderIdBJ() == String2OrderIdBJ("hex") then
		IssueImmediateOrder(GetTriggerUnit(), "holdposition")
	else
	end
end
--===========================================================================
function InitTrig_SH()
	gg_trg_SH = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(gg_trg_SH, EVENT_PLAYER_UNIT_ISSUED_ORDER)
	TriggerAddCondition(gg_trg_SH, Condition(Trig_SHConditions))
	TriggerAddAction(gg_trg_SH, Trig_SHActions)
end
--===========================================================================
-- Trigger: AM_1
--===========================================================================
function Trig_AM_1Conditions()
	return GetIssuedOrderIdBJ() == String2OrderIdBJ("autoharvestgold") or GetIssuedOrderIdBJ() == String2OrderIdBJ("mount")
end
function Trig_AM_1Actions()
	if GetIssuedOrderIdBJ() == String2OrderIdBJ("mount") then
		IssuePointOrderByIdLoc(GetTriggerUnit(), 851986, GetOrderPointLoc())
	else
	end
	if GetIssuedOrderIdBJ() == String2OrderIdBJ("autoharvestgold") then
		IssuePointOrderByIdLoc(GetTriggerUnit(), 851983, GetOrderPointLoc())
	else
	end
end
--===========================================================================
function InitTrig_AM_1()
	gg_trg_AM_1 = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(gg_trg_AM_1, EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
	TriggerAddCondition(gg_trg_AM_1, Condition(Trig_AM_1Conditions))
	TriggerAddAction(gg_trg_AM_1, Trig_AM_1Actions)
end
--===========================================================================
-- Trigger: AM_2
--===========================================================================
function Trig_AM_2Conditions()
	return GetIssuedOrderIdBJ() == String2OrderIdBJ("autoharvestgold") or GetIssuedOrderIdBJ() == String2OrderIdBJ("mount")
end
function Trig_AM_2Actions()
	if GetIssuedOrderIdBJ() == String2OrderIdBJ("mount") then
		IssueTargetOrderById(GetTriggerUnit(), 851986, GetOrderTargetUnit())
	else
	end
	if GetIssuedOrderIdBJ() == String2OrderIdBJ("autoharvestgold") then
		IssueTargetOrderById(GetTriggerUnit(), 851983, GetOrderTargetUnit())
	else
	end
end
--===========================================================================
function InitTrig_AM_2()
	gg_trg_AM_2 = CreateTrigger()
	TriggerRegisterAnyUnitEventBJ(gg_trg_AM_2, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
	TriggerAddCondition(gg_trg_AM_2, Condition(Trig_AM_2Conditions))
	TriggerAddAction(gg_trg_AM_2, Trig_AM_2Actions)
end
--===========================================================================
function InitCustomTriggers()
	--Function not found: call InitTrig_import_lua()
	InitTrig____________________001()
	InitTrig____________________004()
	InitTrig____________________005()
	InitTrig____________________002()
	InitTrig____________________003()
	InitTrig___________________u()
	InitTrig_____________u()
	InitTrig_ChangeClothes()
	InitTrig_QinLongKongHe()
	--Function not found: call InitTrig_YaoWangShenPian()
	InitTrig_KuRongShenGong()
	InitTrig_KuRongShenGong_2()
	InitTrig_KuRongShenGong_3()
	InitTrig_ShuiShangPiao()
	InitTrig_SH()
	InitTrig_AM_1()
	InitTrig_AM_2()
end
--===========================================================================
function RunInitializationTriggers()
	ConditionalTriggerExecute(gg_trg____________________001)
end
--***************************************************************************
--*
--*  Players
--*
--***************************************************************************
function InitCustomPlayerSlots()
	-- Player 0
	SetPlayerStartLocation(Player(0), 0)
	ForcePlayerStartLocation(Player(0), 0)
	SetPlayerColor(Player(0), ConvertPlayerColor(0))
	SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN)
	SetPlayerRaceSelectable(Player(0), false)
	SetPlayerController(Player(0), MAP_CONTROL_USER)
	-- Player 1
	SetPlayerStartLocation(Player(1), 1)
	ForcePlayerStartLocation(Player(1), 1)
	SetPlayerColor(Player(1), ConvertPlayerColor(1))
	SetPlayerRacePreference(Player(1), RACE_PREF_HUMAN)
	SetPlayerRaceSelectable(Player(1), false)
	SetPlayerController(Player(1), MAP_CONTROL_USER)
	-- Player 2
	SetPlayerStartLocation(Player(2), 2)
	ForcePlayerStartLocation(Player(2), 2)
	SetPlayerColor(Player(2), ConvertPlayerColor(2))
	SetPlayerRacePreference(Player(2), RACE_PREF_HUMAN)
	SetPlayerRaceSelectable(Player(2), false)
	SetPlayerController(Player(2), MAP_CONTROL_USER)
	-- Player 3
	SetPlayerStartLocation(Player(3), 3)
	ForcePlayerStartLocation(Player(3), 3)
	SetPlayerColor(Player(3), ConvertPlayerColor(3))
	SetPlayerRacePreference(Player(3), RACE_PREF_HUMAN)
	SetPlayerRaceSelectable(Player(3), false)
	SetPlayerController(Player(3), MAP_CONTROL_USER)
	-- Player 4
	SetPlayerStartLocation(Player(4), 4)
	ForcePlayerStartLocation(Player(4), 4)
	SetPlayerColor(Player(4), ConvertPlayerColor(4))
	SetPlayerRacePreference(Player(4), RACE_PREF_HUMAN)
	SetPlayerRaceSelectable(Player(4), false)
	SetPlayerController(Player(4), MAP_CONTROL_USER)
	-- Player 5
	SetPlayerStartLocation(Player(5), 5)
	ForcePlayerStartLocation(Player(5), 5)
	SetPlayerColor(Player(5), ConvertPlayerColor(5))
	SetPlayerRacePreference(Player(5), RACE_PREF_ORC)
	SetPlayerRaceSelectable(Player(5), false)
	SetPlayerController(Player(5), MAP_CONTROL_COMPUTER)
	-- Player 6
	SetPlayerStartLocation(Player(6), 6)
	ForcePlayerStartLocation(Player(6), 6)
	SetPlayerColor(Player(6), ConvertPlayerColor(6))
	SetPlayerRacePreference(Player(6), RACE_PREF_UNDEAD)
	SetPlayerRaceSelectable(Player(6), false)
	SetPlayerController(Player(6), MAP_CONTROL_COMPUTER)
	-- Player 7
	SetPlayerStartLocation(Player(7), 7)
	ForcePlayerStartLocation(Player(7), 7)
	SetPlayerColor(Player(7), ConvertPlayerColor(7))
	SetPlayerRacePreference(Player(7), RACE_PREF_NIGHTELF)
	SetPlayerRaceSelectable(Player(7), false)
	SetPlayerController(Player(7), MAP_CONTROL_COMPUTER)
	-- Player 8
	SetPlayerStartLocation(Player(8), 8)
	ForcePlayerStartLocation(Player(8), 8)
	SetPlayerColor(Player(8), ConvertPlayerColor(8))
	SetPlayerRacePreference(Player(8), RACE_PREF_HUMAN)
	SetPlayerRaceSelectable(Player(8), false)
	SetPlayerController(Player(8), MAP_CONTROL_COMPUTER)
end
function InitCustomTeams()
	-- Force: TRIGSTR_010
	SetPlayerTeam(Player(0), 0)
	SetPlayerState(Player(0), PLAYER_STATE_ALLIED_VICTORY, 1)
	SetPlayerTeam(Player(1), 0)
	SetPlayerState(Player(1), PLAYER_STATE_ALLIED_VICTORY, 1)
	SetPlayerTeam(Player(2), 0)
	SetPlayerState(Player(2), PLAYER_STATE_ALLIED_VICTORY, 1)
	SetPlayerTeam(Player(3), 0)
	SetPlayerState(Player(3), PLAYER_STATE_ALLIED_VICTORY, 1)
	SetPlayerTeam(Player(4), 0)
	SetPlayerState(Player(4), PLAYER_STATE_ALLIED_VICTORY, 1)
	SetPlayerTeam(Player(5), 0)
	SetPlayerState(Player(5), PLAYER_STATE_ALLIED_VICTORY, 1)
	--   Allied
	SetPlayerAllianceStateAllyBJ(Player(0), Player(1), true)
	SetPlayerAllianceStateAllyBJ(Player(0), Player(2), true)
	SetPlayerAllianceStateAllyBJ(Player(0), Player(3), true)
	SetPlayerAllianceStateAllyBJ(Player(0), Player(4), true)
	SetPlayerAllianceStateAllyBJ(Player(0), Player(5), true)
	SetPlayerAllianceStateAllyBJ(Player(1), Player(0), true)
	SetPlayerAllianceStateAllyBJ(Player(1), Player(2), true)
	SetPlayerAllianceStateAllyBJ(Player(1), Player(3), true)
	SetPlayerAllianceStateAllyBJ(Player(1), Player(4), true)
	SetPlayerAllianceStateAllyBJ(Player(1), Player(5), true)
	SetPlayerAllianceStateAllyBJ(Player(2), Player(0), true)
	SetPlayerAllianceStateAllyBJ(Player(2), Player(1), true)
	SetPlayerAllianceStateAllyBJ(Player(2), Player(3), true)
	SetPlayerAllianceStateAllyBJ(Player(2), Player(4), true)
	SetPlayerAllianceStateAllyBJ(Player(2), Player(5), true)
	SetPlayerAllianceStateAllyBJ(Player(3), Player(0), true)
	SetPlayerAllianceStateAllyBJ(Player(3), Player(1), true)
	SetPlayerAllianceStateAllyBJ(Player(3), Player(2), true)
	SetPlayerAllianceStateAllyBJ(Player(3), Player(4), true)
	SetPlayerAllianceStateAllyBJ(Player(3), Player(5), true)
	SetPlayerAllianceStateAllyBJ(Player(4), Player(0), true)
	SetPlayerAllianceStateAllyBJ(Player(4), Player(1), true)
	SetPlayerAllianceStateAllyBJ(Player(4), Player(2), true)
	SetPlayerAllianceStateAllyBJ(Player(4), Player(3), true)
	SetPlayerAllianceStateAllyBJ(Player(4), Player(5), true)
	SetPlayerAllianceStateAllyBJ(Player(5), Player(0), true)
	SetPlayerAllianceStateAllyBJ(Player(5), Player(1), true)
	SetPlayerAllianceStateAllyBJ(Player(5), Player(2), true)
	SetPlayerAllianceStateAllyBJ(Player(5), Player(3), true)
	SetPlayerAllianceStateAllyBJ(Player(5), Player(4), true)
	--   Shared Vision
	SetPlayerAllianceStateVisionBJ(Player(0), Player(1), true)
	SetPlayerAllianceStateVisionBJ(Player(0), Player(2), true)
	SetPlayerAllianceStateVisionBJ(Player(0), Player(3), true)
	SetPlayerAllianceStateVisionBJ(Player(0), Player(4), true)
	SetPlayerAllianceStateVisionBJ(Player(0), Player(5), true)
	SetPlayerAllianceStateVisionBJ(Player(1), Player(0), true)
	SetPlayerAllianceStateVisionBJ(Player(1), Player(2), true)
	SetPlayerAllianceStateVisionBJ(Player(1), Player(3), true)
	SetPlayerAllianceStateVisionBJ(Player(1), Player(4), true)
	SetPlayerAllianceStateVisionBJ(Player(1), Player(5), true)
	SetPlayerAllianceStateVisionBJ(Player(2), Player(0), true)
	SetPlayerAllianceStateVisionBJ(Player(2), Player(1), true)
	SetPlayerAllianceStateVisionBJ(Player(2), Player(3), true)
	SetPlayerAllianceStateVisionBJ(Player(2), Player(4), true)
	SetPlayerAllianceStateVisionBJ(Player(2), Player(5), true)
	SetPlayerAllianceStateVisionBJ(Player(3), Player(0), true)
	SetPlayerAllianceStateVisionBJ(Player(3), Player(1), true)
	SetPlayerAllianceStateVisionBJ(Player(3), Player(2), true)
	SetPlayerAllianceStateVisionBJ(Player(3), Player(4), true)
	SetPlayerAllianceStateVisionBJ(Player(3), Player(5), true)
	SetPlayerAllianceStateVisionBJ(Player(4), Player(0), true)
	SetPlayerAllianceStateVisionBJ(Player(4), Player(1), true)
	SetPlayerAllianceStateVisionBJ(Player(4), Player(2), true)
	SetPlayerAllianceStateVisionBJ(Player(4), Player(3), true)
	SetPlayerAllianceStateVisionBJ(Player(4), Player(5), true)
	SetPlayerAllianceStateVisionBJ(Player(5), Player(0), true)
	SetPlayerAllianceStateVisionBJ(Player(5), Player(1), true)
	SetPlayerAllianceStateVisionBJ(Player(5), Player(2), true)
	SetPlayerAllianceStateVisionBJ(Player(5), Player(3), true)
	SetPlayerAllianceStateVisionBJ(Player(5), Player(4), true)
	-- Force: TRIGSTR_011
	SetPlayerTeam(Player(6), 1)
	SetPlayerState(Player(6), PLAYER_STATE_ALLIED_VICTORY, 1)
	SetPlayerTeam(Player(7), 1)
	SetPlayerState(Player(7), PLAYER_STATE_ALLIED_VICTORY, 1)
	SetPlayerTeam(Player(8), 1)
	SetPlayerState(Player(8), PLAYER_STATE_ALLIED_VICTORY, 1)
	--   Allied
	SetPlayerAllianceStateAllyBJ(Player(6), Player(7), true)
	SetPlayerAllianceStateAllyBJ(Player(6), Player(8), true)
	SetPlayerAllianceStateAllyBJ(Player(7), Player(6), true)
	SetPlayerAllianceStateAllyBJ(Player(7), Player(8), true)
	SetPlayerAllianceStateAllyBJ(Player(8), Player(6), true)
	SetPlayerAllianceStateAllyBJ(Player(8), Player(7), true)
	--   Shared Vision
	SetPlayerAllianceStateVisionBJ(Player(6), Player(7), true)
	SetPlayerAllianceStateVisionBJ(Player(6), Player(8), true)
	SetPlayerAllianceStateVisionBJ(Player(7), Player(6), true)
	SetPlayerAllianceStateVisionBJ(Player(7), Player(8), true)
	SetPlayerAllianceStateVisionBJ(Player(8), Player(6), true)
	SetPlayerAllianceStateVisionBJ(Player(8), Player(7), true)
end
function InitAllyPriorities()
	SetStartLocPrioCount(0, 4)
	SetStartLocPrio(0, 0, 1, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(0, 1, 2, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(0, 2, 3, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(0, 3, 4, MAP_LOC_PRIO_HIGH)
	SetStartLocPrioCount(1, 4)
	SetStartLocPrio(1, 0, 0, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(1, 1, 2, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(1, 2, 3, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(1, 3, 4, MAP_LOC_PRIO_HIGH)
	SetStartLocPrioCount(2, 4)
	SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(2, 1, 1, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(2, 2, 3, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(2, 3, 4, MAP_LOC_PRIO_HIGH)
	SetStartLocPrioCount(3, 4)
	SetStartLocPrio(3, 0, 0, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(3, 1, 1, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(3, 2, 2, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(3, 3, 4, MAP_LOC_PRIO_HIGH)
	SetStartLocPrioCount(4, 4)
	SetStartLocPrio(4, 0, 0, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(4, 1, 1, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(4, 2, 2, MAP_LOC_PRIO_HIGH)
	SetStartLocPrio(4, 3, 3, MAP_LOC_PRIO_HIGH)
end
--***************************************************************************
--*
--*  Main Initialization
--*
--***************************************************************************
--===========================================================================
function main()
	SetCameraBounds(-15616.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), -15872.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 15616.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 15360.0 - GetCameraMargin(CAMERA_MARGIN_TOP), -15616.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 15360.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 15616.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), -15872.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
	SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
	SetTerrainFogEx(0, 3000.0, 5000.0, 0.5, 0.0, 0.0, 0.0)
	NewSoundEnvironment("Default")
	SetAmbientDaySound("VillageDay")
	SetAmbientNightSound("VillageNight")
	SetMapMusic("Music", true, 0)
	CreateAllUnits()
	InitBlizzard()

	ExecuteFunc("jasshelper__initstructs282632015")
	ExecuteFunc("UniMissileSystem3D__Init")
	ExecuteFunc("init")
	ExecuteFunc("YDTriggerSaveLoadSystem__Init")
	ExecuteFunc("InitializeYD")
	ExecuteFunc("YDWEGeneralBounsSystem__Initialize")
	ExecuteFunc("YDWELogarithm__onInit")
	ExecuteFunc("YDWESync__onInit")
	ExecuteFunc("YDWEPreloadSL__Init")
	ExecuteFunc("YDWEStringFormula__Init")
	ExecuteFunc("YDWETimerPattern__Init")
	ExecuteFunc("YDWETimerSystem__Init")

	InitGlobals()
	InitCustomTriggers()
	ConditionalTriggerExecute(gg_trg____________________001) -- INLINED!!
end
--***************************************************************************
--*
--*  Map Configuration
--*
--***************************************************************************
function config()
	SetMapName("决战江湖1.55正式版")
	SetMapDescription("决战江湖，等你来战")
	SetPlayers(9)
	SetTeams(9)
	SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
	DefineStartLocation(0, 1728.0, -4160.0)
	DefineStartLocation(1, 1728.0, -4160.0)
	DefineStartLocation(2, 1728.0, -4160.0)
	DefineStartLocation(3, 1728.0, -4160.0)
	DefineStartLocation(4, 1728.0, -4160.0)
	DefineStartLocation(5, -3328.0, -15616.0)
	DefineStartLocation(6, 1728.0, -4160.0)
	DefineStartLocation(7, 1728.0, -4160.0)
	DefineStartLocation(8, 1728.0, -4160.0)
	-- Player setup
	InitCustomPlayerSlots()
	InitCustomTeams()
	InitAllyPriorities()
end



--Struct method generated initializers/callers:
function sa__ShopWeapon_onDestroy()
	local this = f__arg_this
	s__ShopWeapon_min_xiuxing[this] = 0
	s__ShopWeapon_id[this] = 0
	return true
end
function sa__ShopWeapon_PickUpWeapon()
	s__ShopWeapon_PickUpWeapon(f__arg_this, f__arg_unit1, f__arg_item1)
	return true
end
function sa__ZiZhiWuGong_create()
	local xishu = f__arg_integer1
	local range = f__arg_integer2
	local texiao = f__arg_integer3
	local dapeishu = f__arg_integer4
	local scrate = f__arg_integer5
	local zz
	zz = s__ZiZhiWuGong__allocate()
	s__ZiZhiWuGong_xishu[zz] = xishu
	s__ZiZhiWuGong_range[zz] = range
	s__ZiZhiWuGong_texiao[zz] = texiao
	s__ZiZhiWuGong_dapeishu[zz] = dapeishu
	s__ZiZhiWuGong_scrate[zz] = scrate
	f__result_integer = zz
	return true
end
function sa__ZiZhiWuGong_onDestroy()
	local this = f__arg_this
	s__ZiZhiWuGong_xishu[this] = 0
	s__ZiZhiWuGong_range[this] = 0
	s__ZiZhiWuGong_texiao[this] = 0
	s__ZiZhiWuGong_dapeishu[this] = 0
	s__ZiZhiWuGong_scrate[this] = 0
	return true
end
function sa__DaPei_onDestroy()
	local this = f__arg_this
	s__DaPei_wugongid[this] = 0
	s__DaPei_dapeixiaoguo[this] = 0
	s__DaPei_shxishu[this] = 0
	return true
end
function sa__DaPei_XiaoGuoShuoMing()
	local this = f__arg_this
	local s = ""
	s = (s or "") .. "+" .. (GetAbilityName(s__DaPei_wugongid[this]) or "") .. "："
	if s__DaPei_dapeixiaoguo[this] ~= 2 then
		s = (s or "") .. "伤害+" .. (I2S(R2I(s__DaPei_r[this] * 100)) or "") .. "%"
	else
		if R2I(s__DaPei_r[this]) == 1 then
			s = (s or "") .. "几率造成内伤"
		elseif R2I(s__DaPei_r[this]) == 2 then
			s = (s or "") .. "几率造成走火入魔"
		elseif R2I(s__DaPei_r[this]) == 3 then
			s = (s or "") .. "几率造成流血"
		elseif R2I(s__DaPei_r[this]) == 4 then
			s = (s or "") .. "几率造成混乱"
		elseif R2I(s__DaPei_r[this]) == 5 then
			s = (s or "") .. "几率造成昏迷"
		elseif R2I(s__DaPei_r[this]) == 6 then
			s = (s or "") .. "几率造成重伤"
		elseif R2I(s__DaPei_r[this]) == 7 then
			s = (s or "") .. "几率造成血流不止"
		elseif R2I(s__DaPei_r[this]) == 8 then
			s = (s or "") .. "几率造成麻痹"
		elseif R2I(s__DaPei_r[this]) == 9 then
			s = (s or "") .. "几率造成破防"
		elseif R2I(s__DaPei_r[this]) == 10 then
			s = (s or "") .. "几率造成神经错乱"
		elseif R2I(s__DaPei_r[this]) == 11 then
			s = (s or "") .. "几率造成封穴"
		elseif R2I(s__DaPei_r[this]) == 12 then
			s = (s or "") .. "几率造成穴位全封"
		elseif R2I(s__DaPei_r[this]) == 13 then
			s = (s or "") .. "几率造成中毒"
		end
	end
	f__result_string = s
	return true
end
function sa__YDWEStringFormula__Inventory_onDestroy()
	local this = f__arg_this
	FlushChildHashtable(YDHT, StringHash("YDWEStringFormula." .. (I2S(this) or ""))) -- INLINED!!
	return true
end
function sa__YDWETimerPattern__Thread_onDestroy()
	local this = f__arg_this
	RemoveSavedInteger(YDHT, StringHash("YDWETimerPattern."), StringHash(I2S(GetHandleId(s__YDWETimerPattern__Thread_obj[this])))) -- INLINED!!
	RemoveSavedInteger(YDHT, StringHash("YDWETimerPattern."), StringHash(I2S(GetHandleId(s__YDWETimerPattern__Thread_t[this])))) -- INLINED!!
	GroupClear(s__YDWETimerPattern__Thread_g[this])
	DestroyGroup(s__YDWETimerPattern__Thread_g[this])
	PauseTimer(s__YDWETimerPattern__Thread_t[this])
	DestroyTimer(s__YDWETimerPattern__Thread_t[this])
	s__YDWETimerPattern__YDVector3_deallocate(s__YDWETimerPattern__Thread_des[this])
	s__YDWETimerPattern__YDVector3_deallocate(s__YDWETimerPattern__Thread_pos[this])
	s__YDWETimerPattern__YDVector3_deallocate(s__YDWETimerPattern__Thread_vel[this])
	s__YDWETimerPattern__Thread_caster[this] = nil
	s__YDWETimerPattern__Thread_target[this] = nil
	s__YDWETimerPattern__Thread_obj[this] = nil
	s__YDWETimerPattern__Thread_g[this] = nil
	s__YDWETimerPattern__Thread_t[this] = nil
	s__YDWETimerPattern__Thread_amount[this] = 0
	s__YDWETimerPattern__Thread_skills[this] = 0
	s__YDWETimerPattern__Thread_order[this] = 0
	s__YDWETimerPattern__Thread_dsfx[this] = ""
	s__YDWETimerPattern__Thread_gsfx[this] = ""
	s__YDWETimerPattern__Thread_wsfx[this] = ""
	s__YDWETimerPattern__Thread_part[this] = ""
	return true
end
function sa__YDWEStringFormula__Sorting_onDestroy()
	local this = f__arg_this
	local i = 0
	for _ in _loop_() do
		if i == s___YDWEStringFormula__Sorting_stack_size then break end
		s___YDWEStringFormula__Sorting_stack[s__YDWEStringFormula__Sorting_stack[this] + i] = 0
		s___YDWEStringFormula__Sorting_count[s__YDWEStringFormula__Sorting_count[this] + i] = 0
		i = i + 1
	end
	s__YDWEStringFormula__Sorting_char[this] = ""
	return true
end
function sa___prototype16_SetUnitMoveSpeedEx()
	s__ModSpeed_setSpeed(f__arg_unit1, f__arg_real1 * 1.0) -- INLINED!!
	return true
end

function jasshelper__initstructs282632015()
	st__ShopWeapon_onDestroy = CreateTrigger()
	TriggerAddCondition(st__ShopWeapon_onDestroy, Condition(sa__ShopWeapon_onDestroy))
	st__ShopWeapon_PickUpWeapon = CreateTrigger()
	TriggerAddCondition(st__ShopWeapon_PickUpWeapon, Condition(sa__ShopWeapon_PickUpWeapon))
	st__ZiZhiWuGong_create = CreateTrigger()
	TriggerAddCondition(st__ZiZhiWuGong_create, Condition(sa__ZiZhiWuGong_create))
	st__ZiZhiWuGong_onDestroy = CreateTrigger()
	TriggerAddCondition(st__ZiZhiWuGong_onDestroy, Condition(sa__ZiZhiWuGong_onDestroy))
	st__DaPei_onDestroy = CreateTrigger()
	TriggerAddCondition(st__DaPei_onDestroy, Condition(sa__DaPei_onDestroy))
	st__DaPei_XiaoGuoShuoMing = CreateTrigger()
	TriggerAddCondition(st__DaPei_XiaoGuoShuoMing, Condition(sa__DaPei_XiaoGuoShuoMing))
	st__YDWEStringFormula__Inventory_onDestroy[2] = CreateTrigger()
	st__YDWEStringFormula__Inventory_onDestroy[3] = st__YDWEStringFormula__Inventory_onDestroy[2]
	TriggerAddCondition(st__YDWEStringFormula__Inventory_onDestroy[2], Condition(sa__YDWEStringFormula__Inventory_onDestroy))
	st__YDWETimerPattern__Thread_onDestroy[10] = CreateTrigger()
	st__YDWETimerPattern__Thread_onDestroy[11] = st__YDWETimerPattern__Thread_onDestroy[10]
	st__YDWETimerPattern__Thread_onDestroy[12] = st__YDWETimerPattern__Thread_onDestroy[10]
	st__YDWETimerPattern__Thread_onDestroy[13] = st__YDWETimerPattern__Thread_onDestroy[10]
	TriggerAddCondition(st__YDWETimerPattern__Thread_onDestroy[10], Condition(sa__YDWETimerPattern__Thread_onDestroy))
	st__YDWEStringFormula__Sorting_onDestroy = CreateTrigger()
	TriggerAddCondition(st__YDWEStringFormula__Sorting_onDestroy, Condition(sa__YDWEStringFormula__Sorting_onDestroy))
	st___prototype16[1] = CreateTrigger()
	TriggerAddAction(st___prototype16[1], sa___prototype16_SetUnitMoveSpeedEx)
	TriggerAddCondition(st___prototype16[1], Condition(sa___prototype16_SetUnitMoveSpeedEx))

	ExecuteFunc("s__ModSpeed_Init___onInit")
















	ExecuteFunc("s__YDWEStringFormula__ItemIdMatrix_onInit")
	ExecuteFunc("s__YDWEStringFormula__FormulaMatrix_onInit")
end
